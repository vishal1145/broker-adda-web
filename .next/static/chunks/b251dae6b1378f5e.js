(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3260,e=>{"use strict";e.s(["default",()=>f],3260);var a=e.i(43476),s=e.i(37902),r=e.i(71645),t=e.i(5766),l=e.i(55613),n=e.i(89039),n=n,o=e.i(90914),i=e.i(45982);let d=e=>{let{label:s,value:r,deltaText:t,trend:l="up",color:n="sky"}=e;return(0,a.jsxs)("div",{className:"relative overflow-hidden bg-white rounded-2xl border border-slate-200 shadow-[0_2px_12px_rgba(2,6,23,0.06)] hover:shadow-[0_6px_18px_rgba(2,6,23,0.08)] transition-shadow",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 w-1.5 bg-gradient-to-b ".concat({sky:"from-sky-500 to-sky-400",amber:"from-amber-500 to-amber-400",emerald:"from-emerald-500 to-emerald-400",violet:"from-violet-500 to-violet-400",indigo:"from-indigo-500 to-indigo-400"}[n])}),(0,a.jsxs)("div",{className:"px-5 py-6",children:[(0,a.jsx)("p",{className:"text-xs font-body text-gray-600 font-medium",children:s}),(0,a.jsx)("p",{className:"mt-5 text-3xl leading-none  text-gray-800",children:r})]})]})};function f(){var e,f,c,x;let[u,m]=(0,r.useState)(!1),[b,g]=(0,r.useState)("my-leads"),[h,j]=(0,r.useState)({query:"",status:{value:"all",label:"All Status"},broker:{value:"all",label:"All Brokers"},region:{value:"all",label:"All Regions"},propertyType:{value:"all",label:"All Property Types"},requirement:{value:"all",label:"All Requirements"},startDate:"",endDate:"",budgetMax:5e5}),[p,y]=(0,r.useState)([]),[v,N]=(0,r.useState)(!1),[k,w]=(0,r.useState)(""),[S,C]=(0,r.useState)([]),[A,L]=(0,r.useState)(!1),[R,B]=(0,r.useState)(""),[M,T]=(0,r.useState)(!1),P=(0,r.useMemo)(()=>{var e,a,s,r,t;return(null==(e=h.status)?void 0:e.value)&&"all"!==h.status.value||(null==(a=h.broker)?void 0:a.value)&&"all"!==h.broker.value||(null==(s=h.region)?void 0:s.value)&&"all"!==h.region.value||(null==(r=h.propertyType)?void 0:r.value)&&"all"!==h.propertyType.value||(null==(t=h.requirement)?void 0:t.value)&&"all"!==h.requirement.value||!!h.startDate||!!h.endDate||"number"==typeof h.budgetMax&&5e5!==h.budgetMax},[h]),_=()=>{},q=localStorage.getItem("token")||localStorage.getItem("authToken"),E="https://broker-adda-be.algofolks.com/api",I=(0,r.useMemo)(()=>(e=>{try{if(!e)return"";let a=e.split(".")[1];if(!a)return"";let s=a.replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(s).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")),t=JSON.parse(r);return t.brokerId||t.userId||t.id||t.sub||""}catch(e){return""}})(q),[q]),[z,W]=(0,r.useState)(""),[F,D]=(0,r.useState)(!1),U=(0,r.useCallback)(async()=>{if(I&&q)try{D(!0);let a=await fetch("".concat(E,"/brokers/").concat(I),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(q)}});if(a.ok){var e;let s=await a.json(),r=(null==s||null==(e=s.data)?void 0:e.broker)||(null==s?void 0:s.broker)||(null==s?void 0:s.data)||s;r&&r._id&&W(r._id)}else await a.text()}catch(e){}finally{D(!1)}},[I,q,E]);(0,r.useEffect)(()=>{I&&U()},[I,U]);let[H,O]=(0,r.useState)({totalLeads:0,newLeadsToday:0,convertedLeads:0,avgDealSize:0,transferredToMe:0,transferredByMe:0}),[V,Y]=(0,r.useState)(!1),[$,G]=(0,r.useState)(""),J=(0,r.useCallback)(async()=>{if(z)try{Y(!0),G("");let e="".concat(E,"/leads/metrics?createdBy=").concat(z),a=await fetch(e,{headers:{"Content-Type":"application/json",...q?{Authorization:"Bearer ".concat(q)}:{}}});if(!a.ok){try{let e=await a.json();G((null==e?void 0:e.message)||(null==e?void 0:e.error)||"Failed to load metrics")}catch(e){G("Failed to load metrics")}return}let s=await a.json(),r=(null==s?void 0:s.data)||s||{};O({totalLeads:Number(r.totalLeads||r.total||0),newLeadsToday:Number(r.newLeadsToday||r.today||0),convertedLeads:Number(r.convertedLeads||r.converted||0),avgDealSize:Number(r.avgDealSize||r.averageDealSize||0),transferredToMe:Number(r.transferredToMe||r.transfersToMe||0),transferredByMe:Number(r.transferredByMe||r.transfersByMe||0)})}catch(e){G("Error loading metrics")}finally{Y(!1)}},[E,q,z]);(0,r.useEffect)(()=>{z&&J()},[z,J]);let[Q,K]=(0,r.useState)([]),[X,Z]=(0,r.useState)(!0),[ee,ea]=(0,r.useState)(""),[es,er]=(0,r.useState)(1),[et,el]=(0,r.useState)(10),[en,eo]=(0,r.useState)(0),ei=Math.max(1,Math.ceil(en/(et||10))),[ed,ef]=(0,r.useState)(""),[ec,ex]=(0,r.useState)(!1),[eu,em]=(0,r.useState)("overview"),[eb,eg]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=setTimeout(()=>{h.query!==ed&&ex(!0)},100),a=setTimeout(()=>{ef(h.query||""),ex(!1)},500);return()=>{clearTimeout(e),clearTimeout(a)}},[h.query,ed]);let eh=(0,r.useCallback)(function(e){var a,s,r,t,l,n,o,i,d;let f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:es,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:et,x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ed,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:b,m=new URLSearchParams;return(m.set("page",String(f)),m.set("limit",String(c)),"transferred"===u)?(z&&m.set("toBroker",z),x&&m.set("search",x),(null==(n=e.status)?void 0:n.value)&&"all"!==e.status.value&&m.set("status",e.status.value),(null==(o=e.region)?void 0:o.value)&&"all"!==e.region.value&&m.set("region",e.region.value),(null==(i=e.propertyType)?void 0:i.value)&&"all"!==e.propertyType.value&&m.set("propertyType",e.propertyType.value),(null==(d=e.requirement)?void 0:d.value)&&"all"!==e.requirement.value&&m.set("requirement",e.requirement.value),e.startDate&&m.set("startDate",e.startDate),e.endDate&&m.set("endDate",e.endDate),"number"==typeof e.budgetMax&&5e5!==e.budgetMax&&m.set("budgetMax",String(e.budgetMax)),"".concat(E,"/leads/transferred?").concat(m.toString())):(z&&m.set("createdBy",z),x&&m.set("search",x),(null==(a=e.status)?void 0:a.value)&&"all"!==e.status.value&&m.set("status",e.status.value),(null==(s=e.broker)?void 0:s.value)&&"all"!==e.broker.value&&m.set("broker",e.broker.value),(null==(r=e.region)?void 0:r.value)&&"all"!==e.region.value&&m.set("regionId",e.region.value),(null==(t=e.propertyType)?void 0:t.value)&&"all"!==e.propertyType.value&&m.set("propertyType",e.propertyType.value),(null==(l=e.requirement)?void 0:l.value)&&"all"!==e.requirement.value&&m.set("requirement",e.requirement.value),e.startDate&&m.set("startDate",e.startDate),e.endDate&&m.set("endDate",e.endDate),"number"==typeof e.budgetMax&&5e5!==e.budgetMax&&m.set("budgetMax",String(e.budgetMax)),"".concat(E,"/leads?").concat(m.toString()))},[E,es,et,ed,z,b]),ej=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(z||F)try{Z(!0),ea("");let u=null!=e?e:h,m=null!=a?a:es,g=null!=s?s:et,j=null!=r?r:ed,p=null!=t?t:b,y=await fetch(eh(u,m,g,j,p),{headers:{"Content-Type":"application/json",...q?{Authorization:"Bearer ".concat(q)}:{}}});if(y.ok){var l,n,o,i,d,f,c,x;let e=await y.json(),a=[],s=0;Array.isArray(null==e||null==(l=e.data)?void 0:l.items)?(a=e.data.items,s=null!=(i=null!=(o=e.data.total)?o:e.total)?i:a.length):Array.isArray(null==e||null==(n=e.data)?void 0:n.leads)?(a=e.data.leads,s=null!=(f=null!=(d=e.data.total)?d:e.total)?f:a.length):Array.isArray(null==e?void 0:e.data)?(a=e.data,s=null!=(c=e.total)?c:a.length):Array.isArray(null==e?void 0:e.leads)?(a=e.leads,s=null!=(x=e.total)?x:a.length):Array.isArray(e)&&(s=(a=e).length),K(a),eo(s)}else ea("Failed to load leads"),K([]),eo(0)}catch(e){ea("Error loading leads"),K([]),eo(0)}finally{Z(!1)}},[h,es,et,ed,q,eh,z,F,b]);_=()=>{let e={...h,status:{value:"all",label:"All Status"},broker:{value:"all",label:"All Brokers"},region:{value:"all",label:"All Regions"},propertyType:{value:"all",label:"All Property Types"},requirement:{value:"all",label:"All Requirements"},startDate:"",endDate:"",budgetMax:5e5};j(e),er(1),ej(e,1,et,ed)},(0,r.useEffect)(()=>{ej()},[es,et]),(0,r.useEffect)(()=>{1!==es?er(1):ej()},[ed]),(0,r.useEffect)(()=>{z&&ej()},[z]),(0,r.useEffect)(()=>{ej()},[b]);let ep=e=>{let a=(e||"").toString().toLowerCase();return"new"===a?"bg-sky-100 text-sky-700":"contacted"===a||"in progress"===a?"bg-amber-100 text-amber-700":"qualified"===a||"closed"===a?"bg-emerald-100 text-emerald-700":"rejected"===a?"bg-rose-100 text-rose-700":"bg-gray-100 text-gray-700"},ey=async()=>{try{var e;N(!0),w("");let a=await fetch("".concat(E,"/regions"),{headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("bad");let s=await a.json(),r=[];(null==s?void 0:s.success)&&Array.isArray(null==s||null==(e=s.data)?void 0:e.regions)?r=s.data.regions:Array.isArray(s)?r=s:Array.isArray(null==s?void 0:s.data)?r=s.data:Array.isArray(null==s?void 0:s.regions)?r=s.regions:(null==s?void 0:s._id)&&(null==s?void 0:s.name)&&(r=[s]),y(r)}catch(e){w("Error loading regions"),y([])}finally{N(!1)}};(0,r.useEffect)(()=>{ey()},[]);let ev=(0,r.useCallback)(async()=>{if(z)try{var e;L(!0),B("");let a="".concat(E,"/regions/nearest?brokerId=").concat(encodeURIComponent(z),"&limit=5"),s=await fetch(a,{headers:{"Content-Type":"application/json",...q?{Authorization:"Bearer ".concat(q)}:{}}});if(!s.ok)throw Error("bad");let r=await s.json(),t=[];(null==r?void 0:r.success)&&Array.isArray(null==r||null==(e=r.data)?void 0:e.regions)?t=r.data.regions:Array.isArray(r)?t=r:Array.isArray(null==r?void 0:r.data)?t=r.data:Array.isArray(null==r?void 0:r.regions)?t=r.regions:(null==r?void 0:r._id)&&(null==r?void 0:r.name)&&(t=[r]),C(t)}catch(e){B("Error loading nearest regions"),C([])}finally{L(!1)}},[E,q,z]),eN=[{value:"all",label:"All Status",isAll:!0},{value:"New",label:"New"},{value:"Assigned",label:"Assigned"},{value:"In Progress",label:"In Progress"},{value:"Closed",label:"Closed"},{value:"Rejected",label:"Rejected"}],ek=[{value:"all",label:"All Property Types"},{value:"Residential",label:"Residential"},{value:"Commercial",label:"Commercial"},{value:"Plot",label:"Plot"},{value:"Other",label:"Other"}],ew=[{value:"all",label:"All Requirements"},{value:"buy",label:"Buy"},{value:"rent",label:"Rent"},{value:"sell",label:"Sell"}],eS=(0,r.useMemo)(()=>[{value:"all",label:"All Regions"},...Array.isArray(p)?p.map(e=>({value:e._id||e.id||e,label:e.name||e.region||e})):[]],[p]);(0,r.useMemo)(()=>Array.isArray(S)?S.map(e=>({value:e._id||e.id||e,label:e.name||e.region||e})):[],[S]);let eC={control:(e,a)=>({...e,minHeight:"40px",borderRadius:10,border:"1px solid #e5e7eb",fontFamily:"var(--font-body, inherit)",fontSize:14,boxShadow:a.isFocused?"0 0 0 4px rgba(59,130,246,.1)":"none",borderColor:a.isFocused?"#3b82f6":"#e5e7eb",background:"white",":hover":{borderColor:a.isFocused?"#3b82f6":"#d1d5db"}}),valueContainer:e=>({...e,padding:"2px 10px",fontFamily:"var(--font-body, inherit)",fontSize:14}),indicatorSeparator:()=>({display:"none"}),menuPortal:e=>({...e,zIndex:99999}),option:(e,a)=>({...e,backgroundColor:a.isSelected?"#3b82f6":a.isFocused?"#f1f5f9":"transparent",color:a.isSelected?"white":a.isFocused?"#111827":"#4b5563",fontSize:14,fontFamily:"var(--font-body, inherit)",borderRadius:6,margin:"2px 6px",padding:"8px 12px"}),singleValue:e=>({...e,color:"#6b7280",fontWeight:400,fontFamily:"var(--font-body, inherit)",fontSize:14}),input:e=>({...e,color:"#6b7280",fontWeight:400,fontFamily:"var(--font-body, inherit)",fontSize:14}),placeholder:e=>({...e,color:"#6b7280",fontWeight:400,fontFamily:"var(--font-body, inherit)",fontSize:14}),multiValueLabel:e=>({...e,color:"#6b7280",fontWeight:400,fontFamily:"var(--font-body, inherit)",fontSize:14}),menu:e=>({...e,zIndex:9999,overflow:"hidden",border:"1px solid #e5e7eb",borderRadius:10,fontFamily:"var(--font-body, inherit)",fontSize:14}),menuList:e=>({...e,maxHeight:320,overflowY:"auto",overflowX:"hidden",paddingRight:0,fontFamily:"var(--font-body, inherit)",fontSize:14})},eA=(0,r.useMemo)(()=>{let e=new Map;return(Array.isArray(p)?p:[]).forEach(a=>{let s=(null==a?void 0:a._id)||(null==a?void 0:a.id),r=(null==a?void 0:a.name)||(null==a?void 0:a.region)||(null==a?void 0:a.city)||"";s&&r&&e.set(String(s),String(r))}),e},[p]),eL=e=>e?"string"==typeof e?eA.get(e)||e:"object"==typeof e&&(e.name||e.region||e.city)||"":"",[eR,eB]=(0,r.useState)(!1),[eM,eT]=(0,r.useState)(!1),[eP,e_]=(0,r.useState)({customerName:"",customerPhone:"",customerEmail:"",requirement:{value:"all",label:"All Requirements"},propertyType:{value:"all",label:"All propertyType"},budget:"",primaryRegion:null,secondaryRegion:null,notes:"",files:null}),[eq,eE]=(0,r.useState)({});(0,r.useEffect)(()=>{eR&&z&&ev()},[eR,z,ev]);let eI=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),ez=e=>{let{name:a,value:s,files:r}=e.target;if("customerPhone"===a){let e=s.replace(/\D/g,"").slice(0,10);e_(s=>({...s,[a]:e}));let r={...eq};e.length>0&&e.length<10?r.customerPhone="Phone number must be 10 digits":delete r.customerPhone,eE(r);return}if("customerEmail"===a){e_(e=>({...e,[a]:s}));let e={...eq};s.length>0&&!eI(s)?e.customerEmail="Please enter a valid email address":delete e.customerEmail,eE(e);return}e_(e=>({...e,[a]:r||s})),eq[a]&&eE(e=>({...e,[a]:""}))},eW={...eC,menuPortal:e=>({...e,zIndex:999999})},eF=async()=>{if(!(()=>{let e={};if(eP.customerName.trim()||(e.customerName="Customer name is required"),eP.customerPhone.trim()){var a;a=eP.customerPhone,/^\d{10}$/.test(a.replace(/\D/g,""))||(e.customerPhone="Phone number must be exactly 10 digits")}else e.customerPhone="Phone number is required";return eP.customerEmail.trim()?eI(eP.customerEmail)||(e.customerEmail="Please enter a valid email address"):e.customerEmail="Email is required",eE(e),0===Object.keys(e).length})())return void t.default.error("Please fix the validation errors before submitting");try{eT(!0);let e="object"==typeof eP.requirement?eP.requirement.label||eP.requirement.value:eP.requirement,a="object"==typeof eP.propertyType?eP.propertyType.label||eP.propertyType.value:eP.propertyType,s=eP.primaryRegion&&"object"==typeof eP.primaryRegion?eP.primaryRegion.value||eP.primaryRegion._id:eP.primaryRegion,r=eP.secondaryRegion&&"object"==typeof eP.secondaryRegion?eP.secondaryRegion.value||eP.secondaryRegion._id:eP.secondaryRegion,l={customerName:eP.customerName||"",customerPhone:eP.customerPhone||"",customerEmail:eP.customerEmail||"",requirement:e||"",propertyType:a||"",budget:""!==eP.budget&&null!==eP.budget?parseFloat(eP.budget):0,primaryRegionId:s&&"select region"!==s?s:"",createdBy:z};r&&"select region"!==r&&(l.secondaryRegionId=r);let n=await fetch("".concat(E,"/leads"),{method:"POST",headers:{"Content-Type":"application/json",...q?{Authorization:"Bearer ".concat(q)}:{}},body:JSON.stringify(l)});if(!n.ok){try{let e=await n.json(),a=(null==e?void 0:e.message)||(null==e?void 0:e.error)||"Failed to create lead";t.default.error(a)}catch(e){t.default.error("Failed to create lead")}return}let o=null;try{o=await n.json()}catch(e){}let i=o&&(o.lead||o.data||o.newLead)||o||null;t.default.success("Lead created successfully"),await ej();let d=i&&(i._id||i.id)?i:await e5();d&&as(d),eU(!0),eO({brokerIds:[],notes:"",selectAllFiltered:!1}),eZ&&0!==eZ.length||e2(),eB(!1),e_({customerName:"",customerPhone:"",customerEmail:"",requirement:"select requirement",propertyType:"select propertyType",budget:"",region:"select region",notes:"",files:null}),eE({})}catch(e){t.default.error("Error creating lead")}finally{eT(!1)}},[eD,eU]=(0,r.useState)(!1),[eH,eO]=(0,r.useState)({brokerIds:[],notes:"",selectAllFiltered:!1}),[eV,eY]=(0,r.useState)("");(0,r.useRef)(null);let[e$,eG]=(0,r.useState)("all"),[eJ,eQ]=(0,r.useState)(null),[eK,eX]=(0,r.useState)(!1),[eZ,e0]=(0,r.useState)([]),[e4,e1]=(0,r.useState)(!1),[e3,e9]=(0,r.useState)(""),e5=(0,r.useCallback)(async()=>{try{var e,a,s;let r=new URLSearchParams;z&&r.set("createdBy",z),r.set("limit","5");let t="".concat(E,"/leads?").concat(r.toString()),l=await fetch(t,{headers:{"Content-Type":"application/json",...q?{Authorization:"Bearer ".concat(q)}:{}}});if(!l.ok)return null;let n=await l.json(),o=Array.isArray(null==n||null==(e=n.data)?void 0:e.items)?n.data.items:Array.isArray(null==n||null==(a=n.data)?void 0:a.leads)?n.data.leads:Array.isArray(null==n?void 0:n.data)?n.data:Array.isArray(null==n?void 0:n.leads)?n.leads:Array.isArray(n)?n:[];if(!o||0===o.length)return null;return(null==(s=o.map(e=>{var a;return{item:e,ts:(null==e?void 0:e.createdAt)?Date.parse(e.createdAt):(null==e?void 0:e._id)?Date.parse(null==(a=e._id)?void 0:a.toString().substring(0,8)):0}}).sort((e,a)=>(a.ts||0)-(e.ts||0))[0])?void 0:s.item)||o[0]||null}catch(e){return null}},[E,q,z]),e2=async()=>{try{var e;e1(!0),e9("");let a=await fetch("".concat(E,"/brokers"),{headers:{"Content-Type":"application/json",...q?{Authorization:"Bearer ".concat(q)}:{}}});if(!a.ok)throw Error("bad");let s=await a.json(),r=[];Array.isArray(null==s||null==(e=s.data)?void 0:e.brokers)?r=s.data.brokers:Array.isArray(null==s?void 0:s.data)?r=s.data:Array.isArray(null==s?void 0:s.brokers)?r=s.brokers:Array.isArray(s)&&(r=s),e0(r)}catch(e){e9("Failed to load brokers"),e0([])}finally{e1(!1)}},e6=async e=>{let a=(null==e?void 0:e.transferredTo)||(null==e?void 0:e.transferredBrokers)||(null==e?void 0:e.transfers)||[];if(Array.isArray(a)&&a.length>0)return void t.default.error("Cannot delete lead that has been transferred to other brokers");try{let a=(null==e?void 0:e._id)||(null==e?void 0:e.id);if(!a)return void t.default.error("Invalid lead id");let s=await fetch("".concat(E,"/leads/").concat(a),{method:"DELETE",headers:{...q?{Authorization:"Bearer ".concat(q)}:{}}});if(!s.ok){try{let e=await s.json(),a=(null==e?void 0:e.message)||(null==e?void 0:e.error)||"Failed to delete lead";t.default.error(a)}catch(e){t.default.error("Failed to delete lead")}return}t.default.success("Lead deleted"),await ej()}catch(e){t.default.error("Error deleting lead")}},e7=async()=>{if(!aa)return void t.default.error("No lead selected");let e=aa._id||aa.id;if(!e){let a=await e5();a&&(a._id||a.id)&&(e=a._id||a.id,as(e=>({...a||e})))}let a=(eH.brokerIds||[]).filter(e=>"all"!==e);if(!e)return void t.default.error("Invalid lead id");if("all"===e$&&(a=(eZ||[]).filter(e=>(e._id||e.id)&&(e._id||e.id)!==I).map(e=>e._id||e.id)),"region"===e$){if(!(eJ&&eJ.value))return void t.default.error("Select a region to share with");let e=eJ.value;if(!(a=(eZ||[]).filter(a=>(a._id||a.id)&&(a._id||a.id)!==I&&((e,a)=>{if(!e||!a)return!1;if(Array.isArray(e.region))return e.region.some(e=>e&&(e._id||e.id||e)&&String(e._id||e.id||e)===String(a));if(e.region&&"object"==typeof e.region){let s=e.region._id||e.region.id;return!!s&&String(s)===String(a)}if("string"==typeof e.region)return String(e.region)===String(a);if(e.primaryRegion){let s="object"==typeof e.primaryRegion?e.primaryRegion._id||e.primaryRegion.id:e.primaryRegion;return!!s&&String(s)===String(a)}return!1})(a,e)).map(e=>e._id||e.id)).length)return void t.default.error("No brokers found for the selected region")}if("select"===e$&&!a.length)return void t.default.error("Select at least one broker");try{if(eX(!0),!(await fetch("".concat(E,"/leads/").concat(e,"/transfer-and-notes"),{method:"POST",headers:{"Content-Type":"application/json",...q?{Authorization:"Bearer ".concat(q)}:{}},body:JSON.stringify({toBrokers:a,notes:eH.notes||""})})).ok)return void t.default.error("Failed to share lead");t.default.success("Share request sent"),eU(!1),eO({brokerIds:[],notes:""})}catch(e){t.default.error("Error sending transfer request")}finally{eX(!1)}},[e8,ae]=(0,r.useState)(!1),[aa,as]=(0,r.useState)(null),[ar,at]=(0,r.useState)(!1),[al,an]=(0,r.useState)(!1),[ao,ai]=(0,r.useState)(!1),[ad,af]=(0,r.useState)(!1),[ac,ax]=(0,r.useState)({name:"",contact:"",email:"",budget:"",requirement:"",propertyType:"",primaryRegion:null,secondaryRegion:null,status:""}),[au,am]=(0,r.useState)(!1),[ab,ag]=(0,r.useState)(null);(0,r.useEffect)(()=>{e8&&z&&ev()},[e8,z,ev]);let ah=async e=>{try{if(!aa||!e)return;let a=aa._id||aa.id,s=await fetch("".concat(E,"/leads/").concat(encodeURIComponent(a),"/transfers/").concat(encodeURIComponent(e)),{method:"DELETE",headers:{...q?{Authorization:"Bearer ".concat(q)}:{},Accept:"application/json"}});if(!s.ok){try{let e=await s.json();t.default.error((null==e?void 0:e.message)||(null==e?void 0:e.error)||"Failed to delete transfer")}catch(e){t.default.error("Failed to delete transfer")}return}t.default.success("Transfer removed"),await ej(),as(a=>{if(!a)return a;let s=Array.isArray(a.transfers)?a.transfers.filter(a=>{var s,r;let t=a&&"object"==typeof a.toBroker?(null==(s=a.toBroker)?void 0:s._id)||(null==(r=a.toBroker)?void 0:r.id):null==a?void 0:a.toBroker;return String(t)!==String(e)}):[];return{...a,transfers:s}}),ag(null)}catch(e){t.default.error("Error deleting transfer")}},aj=async()=>{if(aa)try{am(!0);let e=aa._id||aa.id,a={customerName:void 0!==ac.name?ac.name:aa.customerName||aa.name||"",customerPhone:void 0!==ac.contact?ac.contact:aa.customerPhone||"",customerEmail:void 0!==ac.email?ac.email:aa.customerEmail||"",requirement:void 0!==ac.requirement?ac.requirement:aa.requirement||"",propertyType:void 0!==ac.propertyType?ac.propertyType:aa.propertyType||"",budget:""!==ac.budget&&null!==ac.budget?Number(ac.budget):"number"==typeof aa.budget?aa.budget:0,status:ac.status?ac.status:aa.status||"New"};ac.primaryRegion&&ac.primaryRegion.value&&"all"!==ac.primaryRegion.value&&(a.primaryRegionId=ac.primaryRegion.value),ac.secondaryRegion&&ac.secondaryRegion.value&&"all"!==ac.secondaryRegion.value&&(a.secondaryRegionId=ac.secondaryRegion.value);let s=await fetch("".concat(E,"/leads/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",...q?{Authorization:"Bearer ".concat(q)}:{}},body:JSON.stringify(a)});if(!s.ok){try{let e=await s.json(),a=(null==e?void 0:e.message)||(null==e?void 0:e.error)||"Failed to update lead";t.default.error(a)}catch(e){t.default.error("Failed to update lead")}return}let r=await s.json(),l=(null==r?void 0:r.data)||r;as(e=>({...e,...l,name:l.name||l.customerName||ac.name||(null==e?void 0:e.name),customerName:l.customerName||ac.name||(null==e?void 0:e.customerName),contact:l.contact||l.customerPhone||ac.contact||(null==e?void 0:e.contact),customerPhone:l.customerPhone||ac.contact||(null==e?void 0:e.customerPhone),customerEmail:l.customerEmail||ac.email||(null==e?void 0:e.customerEmail),requirement:l.requirement||ac.requirement||(null==e?void 0:e.requirement),propertyType:l.propertyType||ac.propertyType||(null==e?void 0:e.propertyType),budget:"number"==typeof l.budget?l.budget:""!==ac.budget?Number(ac.budget):null==e?void 0:e.budget,primaryRegion:l.primaryRegion||(ac.primaryRegion?{name:ac.primaryRegion.label,_id:ac.primaryRegion.value}:(null==e?void 0:e.primaryRegion)||(null==e?void 0:e.region)),secondaryRegion:l.secondaryRegion||(ac.secondaryRegion?{name:ac.secondaryRegion.label,_id:ac.secondaryRegion.value}:null==e?void 0:e.secondaryRegion)})),t.default.success("Lead updated"),at(!1),await ej()}catch(e){t.default.error("Error updating lead")}finally{am(!1)}},ap=e=>ax(a=>({...a,[e.target.name]:e.target.value}));return(0,a.jsxs)(o.default,{requiredRole:"broker",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 min-h-screen bg-white py-16",children:[(0,a.jsx)(t.Toaster,{position:"top-right",toastOptions:{duration:3e3}}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 w-full mx-auto  ",children:(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 grid grid-cols-1 md:grid-cols-12 gap-6",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 md:col-span-9",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 mb-6",children:(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,a.jsx)("h1",{className:"jsx-5f133ba9f9a414f4 text-4xl font-display text-gray-700",children:"Lead Management"}),(0,a.jsx)("p",{className:"jsx-5f133ba9f9a414f4 text-sm font-body text-gray-600 mt-2",children:"Capture leads, share with brokers, and track progress — all in one place."})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex flex-col items-center gap-3",children:[(0,a.jsx)("button",{type:"button",role:"switch","aria-checked":"transferred"===b,onClick:()=>{let e="my-leads"===b?"transferred":"my-leads";g(e),er(1),ej(h,1,et,ed,e)},className:"jsx-5f133ba9f9a414f4 "+"relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 border ".concat("transferred"===b?"bg-sky-600 border-sky-600":"bg-gray-200 border-gray-300"),children:(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 "+"inline-block h-5 w-5 transform rounded-full bg-white shadow transition-transform duration-200 ".concat("transferred"===b?"translate-x-5":"translate-x-0")})}),(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-sm text-gray-700",children:"transferred"===b?"Transferred to Me":"My Leads"})]})]})}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:[(0,a.jsx)(d,{color:"sky",label:"Total Leads",value:V?"—":H.totalLeads.toLocaleString(),trend:"up"}),(0,a.jsx)(d,{color:"amber",label:"Shared With Me",value:V?"—":Number(H.transferredToMe||H.transfersToMe||0).toLocaleString(),deltaText:"",trend:"up"}),(0,a.jsx)(d,{color:"emerald",label:"Shared By Me",value:V?"—":Number(H.transferredByMe||H.transfersByMe||0).toLocaleString(),deltaText:"",trend:"up"})]}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 h-px bg-gray-100 mt-4"}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 mt-6 flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 w-52 relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search leads...",value:h.query,onChange:e=>j({...h,query:e.target.value}),style:{minHeight:"40px",fontSize:"14px"},className:"jsx-5f133ba9f9a414f4 w-full pl-11 pr-4 py-2.5 border border-gray-200 rounded-xl shadow-sm bg-white text-sm font-body placeholder-gray-500 focus:outline-none focus:ring-4 focus:ring-sky-100 focus:border-sky-500"}),(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-5 h-5 text-gray-500 absolute left-3 top-1/2 -translate-y-1/2",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-4.35-4.35M10 18a8 8 0 100-16 8 8 0 000 16z",className:"jsx-5f133ba9f9a414f4"})}),ec&&(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 absolute right-3 top-1/2 -translate-y-1/2",children:(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 w-4 h-4 border-2 border-sky-500 border-t-transparent rounded-full animate-spin"})})]}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 w-52",children:(0,a.jsx)(l.default,{value:h.status,onChange:e=>{let a={...h,status:e};j(a),er(1),ej(a,1,et,ed)},options:eN,styles:eC,isSearchable:!0,menuPlacement:"bottom"})}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4",children:(0,a.jsxs)("button",{type:"button",onClick:()=>m(!0),style:{minHeight:"40px",fontSize:"14px"},className:"jsx-5f133ba9f9a414f4 px-3 py-2.5 rounded-xl text-sm font-body border border-gray-200 bg-white text-gray-500 hover:text-gray-600 hover:bg-white hover:border-gray-300 shadow-sm cursor-pointer whitespace-nowrap flex items-center gap-2",children:[(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z",className:"jsx-5f133ba9f9a414f4"})}),"Advanced Filters"]})}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4",children:(0,a.jsxs)("button",{type:"button",onClick:()=>eB(!0),style:{minHeight:"40px",fontSize:"14px"},className:"jsx-5f133ba9f9a414f4 px-3 py-2.5 rounded-xl text-sm border border-green-600 text-green-600 bg-white hover:bg-green-50 hover:border-green-700 shadow-sm cursor-pointer whitespace-nowrap flex items-center gap-2",children:[(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6",className:"jsx-5f133ba9f9a414f4"})}),"Add New Lead"]})}),P&&(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4",children:(0,a.jsx)("button",{type:"button",onClick:_,title:"Clear advanced filters",className:"jsx-5f133ba9f9a414f4 px-3 py-2.5 rounded-xl text-sm font-semibold border border-gray-200 text-gray-700 hover:bg-gray-50 shadow-sm cursor-pointer whitespace-nowrap",children:"Clear Filters"})})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 mt-6",children:[X&&(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((e,s)=>(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 rounded-2xl border border-gray-200 bg-white shadow-sm p-4 animate-pulse",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 h-5 w-2/3 bg-gray-200 rounded mb-3"}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 h-4 w-1/2 bg-gray-200 rounded mb-4"}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 h-28 w-full bg-gray-100 rounded mb-4"}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 h-7 w-28 bg-gray-200 rounded"}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex gap-2",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 h-7 w-7 bg-gray-200 rounded-lg"}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 h-7 w-7 bg-gray-200 rounded-lg"}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 h-7 w-7 bg-gray-200 rounded-lg"})]})]})]},s))}),!X&&Array.isArray(Q)&&0===Q.length&&(0,a.jsx)(()=>{var e,s,r,t,l,n,o,i;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No leads found"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 text-center max-w-sm",children:h.query||(null==(e=h.status)?void 0:e.value)!=="all"||(null==(s=h.region)?void 0:s.value)!=="all"||(null==(r=h.propertyType)?void 0:r.value)!=="all"||(null==(t=h.requirement)?void 0:t.value)!=="all"||5e5!==h.budgetMax?"No leads match your current filters. Try adjusting your search criteria.":"You don't have any leads yet. Click 'Add New Lead' to get started."}),!h.query&&(null==(l=h.status)?void 0:l.value)==="all"&&(null==(n=h.region)?void 0:n.value)==="all"&&(null==(o=h.propertyType)?void 0:o.value)==="all"&&(null==(i=h.requirement)?void 0:i.value)==="all"&&5e5===h.budgetMax&&(0,a.jsx)("button",{onClick:()=>eB(!0),className:"mt-4 px-4 py-2 bg-green-900 text-white text-sm font-semibold rounded-lg hover:bg-green-950 transition-colors",children:"Add Your First Lead"})]})},{className:"jsx-5f133ba9f9a414f4"}),!X&&Array.isArray(Q)&&Q.length>0&&(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:Q.map((e,s)=>{var r,t,l,n,o,i,d;let f=Array.from(new Map((Array.isArray(null==e?void 0:e.transfers)?e.transfers:[]).map(e=>"object"==typeof(null==e?void 0:e.toBroker)?e.toBroker:{_id:null==e?void 0:e.toBroker}).filter(e=>e&&(e._id||e.name||e.email)).map(e=>[e._id||e.email||e.name,e])).values()),c=new Map((eZ||[]).map(e=>[e._id||e.id,e]));f.map(e=>{let a=e._id?{...c.get(e._id)||{},...e}:e;return{id:a._id||a.id||a.email||a.name,name:a.name||a.fullName||a.email||"Broker",image:a.brokerImage||a.avatarUrl||a.imageUrl||""}});let x=(()=>{let a=(null==e?void 0:e.transferredTo)||(null==e?void 0:e.transferredBrokers)||(null==e?void 0:e.transfers)||[];return Array.isArray(a)&&a.length>0})();return(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 group relative bg-white rounded-2xl shadow-2xl",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 absolute top-0 right-0 z-10",children:(0,a.jsx)("div",{style:{background:(null==(r=e.status)?void 0:r.toLowerCase())==="new"?"linear-gradient(90deg, #f59e0b 0%, #dc2626 100%)":(null==(t=e.status)?void 0:t.toLowerCase())==="assigned"?"linear-gradient(90deg, #3b82f6 0%, #1e40af 100%)":(null==(l=e.status)?void 0:l.toLowerCase())==="in progress"?"linear-gradient(90deg, #f59e0b 0%, #dc2626 100%)":(null==(n=e.status)?void 0:n.toLowerCase())==="closed"?"linear-gradient(90deg, #10b981 0%, #047857 100%)":(null==(o=e.status)?void 0:o.toLowerCase())==="rejected"?"linear-gradient(90deg, #ef4444 0%, #dc2626 100%)":(null==(i=e.status)?void 0:i.toLowerCase())==="transferred"?"linear-gradient(90deg, #f97316 0%, #ea580c 100%)":(null==(d=e.status)?void 0:d.toLowerCase())==="active"?"linear-gradient(90deg, #10b981 0%, #047857 100%)":"linear-gradient(90deg, #f59e0b 0%, #dc2626 100%)",minWidth:"60px",textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",clipPath:"polygon(0 0, calc(100% - 12px) 0, 100% 100%, 12px 100%)"},className:"jsx-5f133ba9f9a414f4 text-white text-xs font-bold px-4 py-2 relative",children:e.status?e.status.toUpperCase():"NEW"})}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 p-6 pt-8",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-start justify-between mb-6",children:(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-start gap-4",children:[(()=>{let s=(e=>{let a=[{bg:"bg-sky-100",text:"text-sky-800"},{bg:"bg-emerald-100",text:"text-emerald-800"},{bg:"bg-violet-100",text:"text-violet-800"}],s=String(e||""),r=0;for(let e=0;e<s.length;e++)r=31*r+s.charCodeAt(e)>>>0;return a[r%a.length]})(e.customerName||e.name);return(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 "+"w-12 h-12 rounded-full flex items-center justify-center text-sm font-semibold ".concat(s.bg," ").concat(s.text),children:(e.customerName||e.name||"-").split(" ").map(e=>e[0]).filter(Boolean).join("").slice(0,2).toUpperCase()})})(),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1 pr-4",children:[(0,a.jsx)("h3",{className:"jsx-5f133ba9f9a414f4 text-lg font-bold text-gray-900 mb-1 break-words leading-tight",children:e.customerName||e.name||"-"}),(0,a.jsx)("p",{className:"jsx-5f133ba9f9a414f4 text-sm text-gray-500 break-words leading-tight",children:e.customerEmail||e.customerPhone||e.contact||"-"})]})]})}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 space-y-4",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex justify-between items-center py-3 border-b border-gray-100",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-xs text-gray-400 uppercase tracking-wide mb-1",children:"REQUIREMENT"}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-sm font-medium text-gray-700 break-words leading-tight",children:e.requirement||e.req||"—"})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1 pl-4",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-xs text-gray-400 uppercase tracking-wide mb-1",children:"PROPERTY TYPE"}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-sm font-medium text-gray-700 break-words leading-tight",children:e.propertyType||"—"})]})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex justify-between items-center py-3",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-xs text-gray-400 uppercase tracking-wide mb-1",children:"BUDGET"}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-sm font-medium text-gray-700 break-words leading-tight",children:"number"==typeof e.budget?"$".concat(e.budget.toLocaleString()):e.budget||"—"})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1 pl-4",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-xs text-gray-400 uppercase tracking-wide mb-1",children:"REGION(S)"}),(()=>{var s;let{primary:r,secondary:t}={primary:eL((null==(s=e)?void 0:s.primaryRegion)||(null==s?void 0:s.region)),secondary:eL(null==s?void 0:s.secondaryRegion)};return(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 text-sm font-medium text-gray-700 break-words leading-tight",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4",children:r||"—"}),t&&(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-sm font-medium text-gray-700",children:t})]})})()]})]})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between mt-4 pt-4 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-xs text-gray-400 uppercase tracking-wide mb-2",children:"SHARED WITH"}),(()=>{let s=Array.from(new Map((Array.isArray(null==e?void 0:e.transfers)?e.transfers:[]).map(e=>"object"==typeof(null==e?void 0:e.toBroker)?e.toBroker:{_id:null==e?void 0:e.toBroker}).filter(e=>e&&(e._id||e.name||e.email)).map(e=>[e._id||e.email||e.name,e])).values());if(0===s.length)return(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-[12px] text-gray-400",children:"Not shared"});let r=new Map((eZ||[]).map(e=>[e._id||e.id,e])),t=s.map(e=>{let a=e._id?{...r.get(e._id)||{},...e}:e;return{id:a._id||a.id||a.email||a.name,name:a.name||a.fullName||a.email||"Broker",image:a.brokerImage||a.avatarUrl||a.imageUrl||""}}),l=t.slice(0,2),n=Math.max(0,t.length-l.length);return(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center",children:(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex -space-x-2",children:[l.map((e,s)=>(0,a.jsx)("div",{title:e.name,className:"jsx-5f133ba9f9a414f4 w-7 h-7 rounded-full ring-2 ring-white bg-gray-200 overflow-hidden flex items-center justify-center text-[10px] text-gray-600",children:(0,a.jsx)("img",{src:e.image||"https://www.w3schools.com/howto/img_avatar.png",alt:e.name,className:"jsx-5f133ba9f9a414f4 w-full h-full object-cover"})},"".concat(e.id||"broker","-").concat(s))),n>0&&(0,a.jsxs)("div",{title:"+".concat(n," more"),className:"jsx-5f133ba9f9a414f4 w-7 h-7 rounded-full ring-2 ring-white bg-yellow-400 text-black flex items-center justify-center text-[11px] font-semibold",children:["+",n]})]})})})()]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-4",children:[(0,a.jsxs)("button",{title:"View Details",onClick:()=>{var a;as(e),at(!1),an(!1),ax({name:e.customerName||e.name||"",contact:e.customerPhone||e.contact||"",email:e.customerEmail||"",budget:String(null!=(a=e.budget)?a:""),requirement:e.requirement||e.req||"",propertyType:e.propertyType||"",primaryRegion:e.primaryRegion?{value:e.primaryRegion._id||e.primaryRegion.id||e.primaryRegion,label:e.primaryRegion.name||e.primaryRegion}:e.region?"object"==typeof e.region?{value:e.region._id||e.region.id||e.region,label:e.region.name||e.region}:{value:e.region,label:eL(e.region)||e.region}:null,secondaryRegion:e.secondaryRegion?{value:e.secondaryRegion._id||e.secondaryRegion.id||e.secondaryRegion,label:e.secondaryRegion.name||e.secondaryRegion}:null,status:e.status||"active"}),ae(!0)},className:"jsx-5f133ba9f9a414f4 flex flex-col items-center gap-1 text-green-900 hover:text-green-900 transition-colors cursor-pointer",children:[(0,a.jsxs)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-5 h-5",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z",className:"jsx-5f133ba9f9a414f4"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z",className:"jsx-5f133ba9f9a414f4"})]}),(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-xs",children:"View"})]}),(0,a.jsxs)("button",{title:"Transfer Lead",onClick:()=>{as(e),eO({brokerIds:[],notes:""}),eG("all"),eQ(null),eU(!0),eZ&&0!==eZ.length||e2()},className:"jsx-5f133ba9f9a414f4 flex flex-col items-center gap-1 text-blue-700 hover:text-blue-800 transition-colors cursor-pointer",children:[(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-5f133ba9f9a414f4 w-4 h-4",children:[(0,a.jsx)("line",{x1:"22",y1:"2",x2:"11",y2:"13",className:"jsx-5f133ba9f9a414f4"}),(0,a.jsx)("polygon",{points:"22 2 15 22 11 13 2 9 22 2",className:"jsx-5f133ba9f9a414f4"})]}),(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-xs",children:"Share"})]}),(0,a.jsxs)("button",{title:"Delete Lead",onClick:()=>!x&&e6(e),disabled:x,className:"jsx-5f133ba9f9a414f4 "+"flex flex-col items-center gap-1 transition-colors ".concat(x?"text-gray-300 cursor-not-allowed":"text-red-700 hover:text-red-700 cursor-pointer"),children:[(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-5 h-5",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",className:"jsx-5f133ba9f9a414f4"})}),(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-xs",children:"Delete"})]})]})]})]})]},e._id||e.id||s)})})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between mt-4",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 text-sm text-gray-600",children:["Page ",es," of ",ei]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>er(e=>Math.max(1,e-1)),disabled:es<=1,className:"jsx-5f133ba9f9a414f4 px-3 py-1.5 rounded-lg border border-gray-200 text-sm disabled:opacity-50 bg-white cursor-pointer",children:"Prev"}),(0,a.jsx)("button",{onClick:()=>er(e=>Math.min(ei,e+1)),disabled:es>=ei,className:"jsx-5f133ba9f9a414f4 px-3 py-1.5 rounded-lg border border-gray-200 text-sm disabled:opacity-50 bg-white cursor-pointer",children:"Next"})]})]})]}),(0,a.jsxs)("aside",{className:"jsx-5f133ba9f9a414f4 md:col-span-3 space-y-6 md:sticky md:top-6 self-start",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 bg-white rounded-2xl shadow-2xl p-4",children:[(0,a.jsxs)("h4",{className:"jsx-5f133ba9f9a414f4 text-[15px] font-bold text-slate-900 mb-3 flex items-center gap-2",children:[(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-sky-600 shrink-0 overflow-visible",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10",className:"jsx-5f133ba9f9a414f4"}),(0,a.jsx)("path",{d:"M12 7v5l4 2",className:"jsx-5f133ba9f9a414f4"})]}),"Recent Activity"]}),(0,a.jsxs)("ul",{className:"jsx-5f133ba9f9a414f4 text-sm text-slate-900 space-y-3",children:[(0,a.jsxs)("li",{className:"jsx-5f133ba9f9a414f4 flex items-start gap-3",children:[(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 mt-0.5 inline-flex items-center justify-center w-7 h-7 rounded-full bg-gray-100 text-gray-600 ring-1 ring-gray-200",children:(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",className:"jsx-5f133ba9f9a414f4 w-=4 h-4",children:[(0,a.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2",className:"jsx-5f133ba9f9a414f4"}),(0,a.jsx)("circle",{cx:"10",cy:"7",r:"4",className:"jsx-5f133ba9f9a414f4"}),(0,a.jsx)("path",{d:"M19 8v6M22 11h-6",className:"jsx-5f133ba9f9a414f4"})]})}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-gray-700 leading-5 mb-1",children:"New lead created"}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-xs text-slate-500 leading-5",children:"Today, 10:45 AM"})]})]}),(0,a.jsxs)("li",{className:"jsx-5f133ba9f9a414f4 flex items-start gap-3",children:[(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 mt-0.5 inline-flex items-center justify-center w-7 h-7 rounded-full bg-gray-100 text-gray-600 ring-1 ring-gray-200",children:(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",className:"jsx-5f133ba9f9a414f4 w-4 h-4",children:[(0,a.jsx)("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",className:"jsx-5f133ba9f9a414f4"}),(0,a.jsx)("path",{d:"M22 7 12 13 2 7",className:"jsx-5f133ba9f9a414f4"})]})}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-gray-700 leading-5 mb-1",children:"Follow-up email sent to Michael Chen"}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-xs text-slate-500 leading-5",children:"Yesterday, 3:20 PM"})]})]}),(0,a.jsxs)("li",{className:"jsx-5f133ba9f9a414f4 flex items-start gap-3",children:[(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 mt-0.5 inline-flex items-center justify-center w-7 h-7 rounded-full bg-gray-100 text-gray-600 ring-1 ring-gray-200",children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",className:"jsx-5f133ba9f9a414f4 w-4 h-4",children:(0,a.jsx)("path",{d:"M20 6 9 17l-5-5",className:"jsx-5f133ba9f9a414f4"})})}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-gray-700 leading-5 mb-1",children:"Lead status changed to Qualified"}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-xs text-slate-500 leading-5",children:"Yesterday, 11:15 AM"})]})]})]})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 bg-white rounded-2xl shadow-2xl p-4",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between mb-2",children:[(0,a.jsxs)("h4",{className:"jsx-5f133ba9f9a414f4 text-[15px] font-bold text-slate-900 flex items-center gap-2",children:[(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-sky-600 shrink-0 overflow-visible",children:[(0,a.jsx)("rect",{x:"3",y:"4",width:"18",height:"14",rx:"3",className:"jsx-5f133ba9f9a414f4"}),(0,a.jsx)("path",{d:"M8 18v3l3-3",className:"jsx-5f133ba9f9a414f4"})]}),"FAQ"]}),(0,a.jsx)("a",{href:"/faq",target:"_blank",rel:"noopener noreferrer",className:"jsx-5f133ba9f9a414f4 text-xs font-medium text-gray-500 hover:underline hover:text-sky-800 transition-colors",children:"View all"})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 space-y-2 text-sm",children:[(0,a.jsxs)("details",{open:!0,className:"jsx-5f133ba9f9a414f4 group relative rounded-xl border border-slate-100 p-4 pr-5 transition-colors",children:[(0,a.jsxs)("summary",{className:"jsx-5f133ba9f9a414f4 list-none cursor-pointer flex items-center justify-between",children:[(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-[15px]  text-gray-700",children:"How do I add a new lead quickly?"}),(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-slate-400 transition-transform group-open:rotate-180 group-open:text-gray-600 shrink-0 overflow-visible",children:(0,a.jsx)("path",{d:"m6 9 6 6 6-6",className:"jsx-5f133ba9f9a414f4"})})]}),(0,a.jsx)("p",{className:"jsx-5f133ba9f9a414f4 mt-2 pl-3 md:pl-4 text-[13px] leading-6 text-gray-600 border-l-2 border-gray-300",children:"Use the Add Lead button, fill name, phone, requirement and region. You can edit details later in Lead Details."})]}),(0,a.jsxs)("details",{className:"jsx-5f133ba9f9a414f4 group relative rounded-xl border border-slate-100 p-4 pr-5 transition-colors",children:[(0,a.jsxs)("summary",{className:"jsx-5f133ba9f9a414f4 list-none cursor-pointer flex items-center justify-between",children:[(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-[15px]  text-gray-700",children:"How do I change a lead status?"}),(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-slate-400 transition-transform group-open:rotate-180 group-open:text-gray-600 shrink-0 overflow-visible",children:(0,a.jsx)("path",{d:"m6 9 6 6 6-6",className:"jsx-5f133ba9f9a414f4"})})]}),(0,a.jsx)("p",{className:"jsx-5f133ba9f9a414f4 mt-2 pl-3 md:pl-4 text-[13px] leading-6 text-slate-600 border-l-2 border-gray-300",children:"Open a lead, click Edit Status in the drawer header, pick the status and save."})]}),(0,a.jsxs)("details",{className:"jsx-5f133ba9f9a414f4 group relative rounded-xl border border-slate-100 p-4 pr-5 transition-colors",children:[(0,a.jsxs)("summary",{className:"jsx-5f133ba9f9a414f4 list-none cursor-pointer flex items-center justify-between",children:[(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-[15px]  text-gray-700",children:"How do I share a lead with another broker?"}),(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-slate-400 transition-transform group-open:rotate-180 group-open:text-gray-600 shrink-0 overflow-visible",children:(0,a.jsx)("path",{d:"m6 9 6 6 6-6",className:"jsx-5f133ba9f9a414f4"})})]}),(0,a.jsx)("p",{className:"jsx-5f133ba9f9a414f4 mt-2 pl-3 md:pl-4 text-[13px] leading-6 text-slate-600 border-l-2 border-gray-300",children:"Use Share/Transfer, choose brokers, add notes and confirm. The transfer history appears in Lead Details."})]})]})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 bg-white rounded-2xl shadow-2xl",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 p-4",children:[(0,a.jsxs)("h4",{className:"jsx-5f133ba9f9a414f4 text-md font-bold text-slate-900 mb-3 flex items-center gap-2 pl-0.5",children:[(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.3",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-sky-600 shrink-0 overflow-visible",children:[(0,a.jsx)("path",{d:"M4 11a8 8 0 0 1 16 0",className:"jsx-5f133ba9f9a414f4"}),(0,a.jsx)("rect",{x:"2.6",y:"11",width:"4.8",height:"6",rx:"2.2",className:"jsx-5f133ba9f9a414f4"}),(0,a.jsx)("path",{d:"M20 16.5a4 4 0 0 1-4 4H12",className:"jsx-5f133ba9f9a414f4"})]}),"Help & Support"]}),(0,a.jsxs)("ul",{className:"jsx-5f133ba9f9a414f4 text-sm text-gray-500 space-y-2",children:[(0,a.jsx)("li",{className:"jsx-5f133ba9f9a414f4",children:(0,a.jsxs)("a",{href:"/help/getting-started",target:"_blank",rel:"noopener noreferrer",className:"jsx-5f133ba9f9a414f4 py-2 flex items-center gap-3 pl-0.5 ",children:[(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-gray-500 shrink-0 overflow-visible",children:[(0,a.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z",className:"jsx-5f133ba9f9a414f4"}),(0,a.jsx)("path",{d:"M14 2v6h6",className:"jsx-5f133ba9f9a414f4"})]}),"Getting Started Guide"]})}),(0,a.jsx)("li",{className:"jsx-5f133ba9f9a414f4",children:(0,a.jsxs)("a",{href:"/help/documentation",target:"_blank",rel:"noopener noreferrer",className:"jsx-5f133ba9f9a414f4 py-2 flex items-center gap-3 pl-0.5 ",children:[(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-gray-500 shrink-0 overflow-visible",children:[(0,a.jsx)("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2",className:"jsx-5f133ba9f9a414f4"}),(0,a.jsx)("path",{d:"M7 8h10M7 12h10M7 16h6",className:"jsx-5f133ba9f9a414f4"})]}),"Documentation"]})}),(0,a.jsx)("li",{className:"jsx-5f133ba9f9a414f4",children:(0,a.jsxs)("a",{href:"/help/legal-compliance",target:"_blank",rel:"noopener noreferrer",className:"jsx-5f133ba9f9a414f4 py-2 flex items-center gap-3 pl-0.5 ",children:[(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-gray-500 shrink-0 overflow-visible",children:[(0,a.jsx)("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2",className:"jsx-5f133ba9f9a414f4"}),(0,a.jsx)("path",{d:"M7 8h10M7 12h10M7 16h6",className:"jsx-5f133ba9f9a414f4"})]}),"Legal & Compliance Guide"]})})]})]}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 h-px bg-slate-100 mx-4"}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 px-4 py-3 text-sm text-slate-600 space-y-2",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-3 pl-0.5",children:[(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-gray-500 shrink-0 overflow-visible",children:[(0,a.jsx)("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",className:"jsx-5f133ba9f9a414f4"}),(0,a.jsx)("path",{d:"M22 7 12 13 2 7",className:"jsx-5f133ba9f9a414f4"})]}),(0,a.jsx)("a",{href:"mailto:".concat(i.SUPPORT_EMAIL),className:"jsx-5f133ba9f9a414f4",children:i.SUPPORT_EMAIL})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-3 pl-0.5",children:[(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-gray-500 shrink-0 overflow-visible",children:(0,a.jsx)("path",{d:"M22 16.92V21a2 2 0 0 1-2.18 2A19.8 19.8 0 0 1 3 6.18 2 2 0 0 1 5 4h3.3a1 1 0 0 1 .95.68l1.2 3.6a1 1 0 0 1-.27 1.06l-1.8 1.8a12 12 0 0 0 6.8 6.8l1.8-1.8a1 1 0 0 1 1.06-.27l3.6 1.2A1 1 0 0 1 22 16.92z",className:"jsx-5f133ba9f9a414f4"})}),(0,a.jsxs)("a",{href:"tel:".concat(i.SUPPORT_PHONE.replace(/\s+/g,"")),className:"jsx-5f133ba9f9a414f4",children:[" ",i.SUPPORT_PHONE]})]})]})]})]})]})}),u&&(0,a.jsxs)("div",{role:"dialog","aria-modal":"true",className:"jsx-5f133ba9f9a414f4 fixed inset-0 z-[100] flex items-center justify-center",children:[(0,a.jsx)("div",{onClick:()=>m(!1),className:"jsx-5f133ba9f9a414f4 absolute inset-0 bg-black/60"}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 relative w-full max-w-xl mx-4 bg-white rounded-2xl shadow-xl",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[(0,a.jsx)("h4",{className:"jsx-5f133ba9f9a414f4 text-lg font-semibold text-slate-900",children:"Advanced Filters"}),(0,a.jsx)("button",{onClick:()=>m(!1),"aria-label":"Close",className:"jsx-5f133ba9f9a414f4 p-2 rounded-lg hover:bg-gray-100",children:(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-5 h-5 text-gray-500",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12",className:"jsx-5f133ba9f9a414f4"})})})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 px-6 py-5 space-y-6 max-h-[70vh] overflow-auto",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,a.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-2",children:"Region"}),v?(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-center py-3 border border-gray-200 rounded-lg bg-gray-50",children:(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2",children:[(0,a.jsxs)("svg",{fill:"none",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4 animate-spin text-gray-500",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"jsx-5f133ba9f9a414f4 opacity-25"}),(0,a.jsx)("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"jsx-5f133ba9f9a414f4 opacity-75"})]}),(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-sm text-gray-500",children:"Loading regions..."})]})}):k?(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 bg-rose-50 border border-rose-200 rounded-lg p-3 text-sm text-rose-700",children:k}):(0,a.jsx)(l.default,{value:h.region,onChange:e=>j({...h,region:e}),options:eS,styles:{...eC,menuPortal:e=>({...e,zIndex:99999}),menu:e=>({...e,zIndex:99999})},menuPortalTarget:document.body,menuPosition:"fixed",isSearchable:!0})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,a.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-2",children:"Requirement"}),(0,a.jsx)(l.default,{value:h.requirement,onChange:e=>j({...h,requirement:e}),options:ew,styles:{...eC,menuPortal:e=>({...e,zIndex:99999}),menu:e=>({...e,zIndex:99999})},menuPortalTarget:document.body,menuPosition:"fixed",isSearchable:!0})," "]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,a.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-2",children:"Property Type"}),(0,a.jsx)(l.default,{value:h.propertyType,onChange:e=>j({...h,propertyType:e}),options:ek,styles:{...eC,menuPortal:e=>({...e,zIndex:99999}),menu:e=>({...e,zIndex:99999})},menuPortalTarget:document.body,menuPosition:"fixed",isSearchable:!0})," "]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,a.jsxs)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-4",children:["Max Budget:"," ",(0,a.jsxs)("span",{className:"jsx-5f133ba9f9a414f4 text-sky-700 font-semibold",children:["$",h.budgetMax.toLocaleString()]})]}),(0,a.jsx)("input",{type:"range",min:"0",max:"1000000",step:"10000",value:h.budgetMax,onChange:e=>j({...h,budgetMax:Number(e.target.value)}),className:"jsx-5f133ba9f9a414f4 w-full accent-sky-600"})]})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 px-6 py-4 border-t border-gray-100 flex items-center justify-end gap-3",children:[P&&(0,a.jsx)("button",{onClick:_,disabled:M,className:"jsx-5f133ba9f9a414f4 px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-slate-700 bg-white hover:bg-slate-50 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear Filters"}),(0,a.jsxs)("button",{onClick:async()=>{T(!0),er(1),await ej(h,1,et,ed),T(!1),m(!1)},disabled:M,className:"jsx-5f133ba9f9a414f4 px-3 py-2.5 rounded-xl text-sm font-semibold text-white bg-green-900 hover:bg-green-950 shadow-sm cursor-pointer disabled:opacity-60 disabled:cursor-not-allowed flex items-center gap-2",children:[M&&(0,a.jsxs)("svg",{fill:"none",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4 animate-spin",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"jsx-5f133ba9f9a414f4 opacity-25"}),(0,a.jsx)("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"jsx-5f133ba9f9a414f4 opacity-75"})]}),M?"Applying...":"Apply Filters"]})]})]})]}),eR&&(0,a.jsxs)("div",{role:"dialog","aria-modal":"true",className:"jsx-5f133ba9f9a414f4 fixed inset-0 z-[100] flex items-center justify-center",children:[(0,a.jsx)("div",{onClick:()=>{eB(!1),eE({})},className:"jsx-5f133ba9f9a414f4 absolute inset-0 bg-black/60"}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 relative w-full max-w-xl mx-4 bg-white rounded-2xl shadow-xl",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[(0,a.jsx)("h4",{className:"jsx-5f133ba9f9a414f4 text-lg font-semibold text-slate-900",children:"Add New Lead"}),(0,a.jsx)("button",{onClick:()=>{eB(!1),eE({})},"aria-label":"Close",className:"jsx-5f133ba9f9a414f4 p-2 rounded-lg hover:bg-gray-100",children:(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-5 h-5 text-gray-500",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12",className:"jsx-5f133ba9f9a414f4"})})})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 px-6 py-5 space-y-5 max-h-[70vh] overflow-auto",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,a.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Customer Name"}),(0,a.jsx)("input",{name:"customerName",value:eP.customerName,onChange:ez,type:"text",placeholder:"Enter customer's full name",className:"jsx-5f133ba9f9a414f4 "+"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-4 text-sm bg-white ".concat(eq.customerName?"border-red-300 focus:ring-red-100 focus:border-red-500":"border-gray-200 focus:ring-sky-100 focus:border-sky-600")}),eq.customerName&&(0,a.jsx)("p",{className:"jsx-5f133ba9f9a414f4 mt-1 text-xs text-red-600",children:eq.customerName})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,a.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Contact Phone"}),(0,a.jsx)("input",{name:"customerPhone",value:eP.customerPhone,onChange:ez,type:"tel",placeholder:"Enter 10-digit phone number",maxLength:"10",className:"jsx-5f133ba9f9a414f4 "+"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-4 text-sm bg-white ".concat(eq.customerPhone?"border-red-300 focus:ring-red-100 focus:border-red-500":"border-gray-200 focus:ring-sky-100 focus:border-sky-600")}),eq.customerPhone&&(0,a.jsx)("p",{className:"jsx-5f133ba9f9a414f4 mt-1 text-xs text-red-600",children:eq.customerPhone})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,a.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Contact Email"}),(0,a.jsx)("input",{name:"customerEmail",value:eP.customerEmail,onChange:ez,type:"email",placeholder:"e.g., john.doe@example.com",className:"jsx-5f133ba9f9a414f4 "+"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-4 text-sm bg-white ".concat(eq.customerEmail?"border-red-300 focus:ring-red-100 focus:border-red-500":"border-gray-200 focus:ring-sky-100 focus:border-sky-600")}),eq.customerEmail&&(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 mt-1",children:[(0,a.jsx)("p",{className:"jsx-5f133ba9f9a414f4 text-xs text-red-600",children:eq.customerEmail}),(0,a.jsx)("p",{className:"jsx-5f133ba9f9a414f4 text-xs text-gray-500",children:"eg. john@example.com"})]})]})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,a.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Requirement"}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex flex-wrap gap-2",children:ew.filter(e=>"all"!==e.value).map(e=>{let s=(eP.requirement&&(eP.requirement.value||eP.requirement))===e.value;return(0,a.jsx)("button",{type:"button","aria-pressed":s,onClick:()=>e_({...eP,requirement:e}),className:"jsx-5f133ba9f9a414f4 "+"px-3.5 py-1.5 rounded-full text-[12px] font-semibold border transition-colors transition-shadow duration-150 ".concat(s?"bg-blue-50 text-blue-700 border-blue-200 ring-1 ring-blue-100 shadow-sm":"bg-white text-slate-700 border-gray-200 hover:border-gray-300 hover:bg-slate-50"),children:e.label},e.value)})})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,a.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Property Type"}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex flex-wrap gap-2",children:ek.filter(e=>"all"!==e.value).map(e=>{let s=(eP.propertyType&&(eP.propertyType.value||eP.propertyType))===e.value;return(0,a.jsx)("button",{type:"button","aria-pressed":s,onClick:()=>e_({...eP,propertyType:e}),className:"jsx-5f133ba9f9a414f4 "+"px-3.5 py-1.5 rounded-full text-[12px] font-semibold border transition-colors transition-shadow duration-150 ".concat(s?"bg-blue-50 text-blue-700 border-blue-200 ring-1 ring-blue-100 shadow-sm":"bg-white text-slate-700 border-gray-200 hover:border-gray-300 hover:bg-slate-50"),children:e.label},e.value)})})]})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,a.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Budget"}),(()=>{let e={residential:{min:5e3,max:1e8,step:5e3},commercial:{min:1e4,max:5e8,step:1e4},plot:{min:5e4,max:25e7,step:5e4},other:{min:1e3,max:5e7,step:1e3}}[String("object"==typeof eP.propertyType?eP.propertyType.value||eP.propertyType.label||"":eP.propertyType||"").toLowerCase()]||{min:0,max:1e7,step:5e3},s=e.min,r=e.max,t=e.step,l=Number(eP.budget||0),n=isNaN(l)?s:Math.min(r,Math.max(s,l)),o=(n-s)/(r-s)*100,i=n>s?Math.max(2,o):0;return(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 space-y-2",children:(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 relative",children:[(0,a.jsx)("input",{type:"range",min:s,max:r,step:t,value:n,onChange:e=>e_({...eP,budget:Number(e.target.value)}),style:{background:"linear-gradient(to right, #2563eb 0%, #2563eb ".concat(i,"%, #e5e7eb ").concat(i,"%, #e5e7eb 100%)")},className:"jsx-5f133ba9f9a414f4 w-full h-2 rounded-full appearance-none focus:outline-none"}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 absolute -top-6 right-0 flex items-center border border-blue-200 rounded-full bg-blue-50 px-2 py-0.5",children:[(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-[11px] font-semibold text-blue-600 mr-1",children:"₹"}),(0,a.jsx)("input",{type:"text",inputMode:"numeric",value:String(n),onChange:e=>{let a=Number((e.target.value||"").replace(/[^0-9]/g,"")),t=isNaN(a)?0:Math.min(r,Math.max(s,a));e_({...eP,budget:t})},style:{width:"calc(".concat(Math.max(3,String(n).length),"ch + 0.15rem)")},className:"jsx-5f133ba9f9a414f4 w-[2ch] text-[11px] font-semibold text-blue-700 bg-transparent text-right focus:outline-none font-mono tabular-nums"})]})]})})})()]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,a.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Primary Region *"}),(0,a.jsx)(l.default,{value:eP.primaryRegion,onChange:e=>e_({...eP,primaryRegion:e}),options:eS,styles:eW,isSearchable:!0,isLoading:A,menuPortalTarget:document.body,menuPosition:"fixed",menuPlacement:"auto"})," "]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,a.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Optional Region"}),(0,a.jsx)(l.default,{value:eP.secondaryRegion,onChange:e=>e_({...eP,secondaryRegion:e}),options:eS,styles:eW,isSearchable:!0,isLoading:A,menuPortalTarget:document.body,menuPosition:"fixed",menuPlacement:"auto"})," "]})]})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 px-6 py-4 border-t border-gray-100 flex items-center justify-end gap-3",children:[(0,a.jsx)("button",{onClick:()=>{eB(!1),eE({})},disabled:eM,className:"jsx-5f133ba9f9a414f4 px-4 py-2 rounded-lg border border-gray-200 text-sm font-medium text-slate-700 bg-white hover:bg-slate-50 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,a.jsxs)("button",{onClick:eF,disabled:eM,className:"jsx-5f133ba9f9a414f4 px-4 py-2 rounded-lg text-sm font-semibold text-white bg-green-900 hover:bg-green-950 cursor-pointer disabled:opacity-60 disabled:cursor-not-allowed flex items-center gap-2",children:[eM&&(0,a.jsxs)("svg",{fill:"none",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4 animate-spin",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"jsx-5f133ba9f9a414f4 opacity-25"}),(0,a.jsx)("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"jsx-5f133ba9f9a414f4 opacity-75"})]}),eM?"Adding Lead...":"Add Lead"]})]})]})]}),eD&&(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{onClick:()=>eU(!1),className:"jsx-5f133ba9f9a414f4 absolute inset-0 bg-black/60"}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 relative w-full max-w-md mx-4 bg-white rounded-2xl shadow-xl",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[(0,a.jsx)("h4",{className:"jsx-5f133ba9f9a414f4 text-lg font-semibold text-slate-900",children:"Share Lead"}),(0,a.jsx)("button",{onClick:()=>eU(!1),className:"jsx-5f133ba9f9a414f4 p-2 rounded-lg hover:bg-gray-100",children:(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-5 h-5 text-gray-500 cursor-pointer",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12",className:"jsx-5f133ba9f9a414f4"})})})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 px-6 py-5 space-y-5",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 space-y-3",children:[(0,a.jsxs)("label",{className:"jsx-5f133ba9f9a414f4 inline-flex items-center gap-2 cursor-pointer select-none",children:[(0,a.jsx)("input",{type:"radio",name:"transferMode",checked:"all"===e$,onChange:()=>eG("all"),className:"jsx-5f133ba9f9a414f4 h-4 w-4 accent-blue-600 cursor-pointer"}),(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-sm  text-slate-800",children:"Share with all brokers"})]}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-3",children:(0,a.jsxs)("label",{className:"jsx-5f133ba9f9a414f4 inline-flex items-center gap-2 cursor-pointer select-none",children:[(0,a.jsx)("input",{type:"radio",name:"transferMode",checked:"region"===e$,onChange:()=>eG("region"),className:"jsx-5f133ba9f9a414f4 h-4 w-4 accent-blue-600 cursor-pointer"}),(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-sm  text-slate-800",children:"Share with brokers of a region"})]})}),(0,a.jsxs)("label",{className:"jsx-5f133ba9f9a414f4 inline-flex items-center gap-2 cursor-pointer select-none",children:[(0,a.jsx)("input",{type:"radio",name:"transferMode",checked:"select"===e$,onChange:()=>eG("select"),className:"jsx-5f133ba9f9a414f4 h-4 w-4 accent-blue-600 cursor-pointer"}),(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-sm  text-slate-800",children:"Share with selected brokers"})]})]}),"region"===e$&&(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,a.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Select Region"}),(0,a.jsx)(l.default,{value:eJ,onChange:e=>eQ(e),options:eS.filter(e=>"all"!==e.value),styles:eC,isSearchable:!0,placeholder:"Select region"})]}),"select"===e$&&(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,a.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Select Broker(s)"}),(0,a.jsx)(l.default,{value:eH.brokerIds.filter(e=>(eZ||[]).some(a=>(a._id||a.id)===e&&(a._id||a.id)!==I)).map(e=>{let a=(eZ||[]).find(a=>(a._id||a.id)===e),s="";return(null==a?void 0:a.region)&&Array.isArray(a.region)&&a.region.length>0?s=a.region[0].name||"Unknown":(null==a?void 0:a.region)&&"object"==typeof a.region&&!Array.isArray(a.region)?s=a.region.name||a.region.region||"Unknown":"string"==typeof(null==a?void 0:a.region)&&(s=a.region),{value:e,label:"".concat((null==a?void 0:a.name)||(null==a?void 0:a.fullName)||(null==a?void 0:a.email)||e).concat(s?" (".concat(s,")"):"")}}),onChange:(e,a)=>{let s=(e||[]).map(e=>e.value);eO(e=>({...e,brokerIds:s}))},options:(eZ||[]).filter(e=>(e._id||e.id)&&(e._id||e.id)!==I).map(e=>{let a="";return e.region&&Array.isArray(e.region)&&e.region.length>0?a=e.region[0].name||"Unknown":e.region&&"object"==typeof e.region&&!Array.isArray(e.region)?a=e.region.name||e.region.region||"Unknown":"string"==typeof e.region&&(a=e.region),{value:e._id||e.id,label:"".concat(e.name||e.fullName||e.email||"Unnamed").concat(a?" (".concat(a,")"):"")}}),styles:eC,components:{MenuList:e=>{let{children:s}=e,r=!!eH.selectAllFiltered,t=null==e?void 0:e.children,l=e=>Array.isArray(e)?e:e?[e]:[],o=l(t).flatMap(e=>{var a,s,r;let t=null==e||null==(s=e.props)||null==(a=s.data)?void 0:a.value;return t?[t]:l(null==e||null==(r=e.props)?void 0:r.children).map(e=>{var a,s;return null==e||null==(s=e.props)||null==(a=s.data)?void 0:a.value}).filter(Boolean)}).filter(Boolean);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-100 bg-gray-50",children:[(0,a.jsx)("span",{className:"text-xs text-slate-600",children:"Filtered brokers"}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-xs text-slate-600 cursor-pointer select-none",children:[(0,a.jsx)("input",{type:"checkbox",className:"rounded border-gray-300 text-emerald-600 focus:ring-emerald-500 cursor-pointer",checked:r,onChange:e=>{let a=e.target.checked;eO(e=>({...e,selectAllFiltered:a,brokerIds:a?Array.from(new Set([...e.brokerIds||[],...o])):(e.brokerIds||[]).filter(e=>!o.includes(e))}));try{let e=document.querySelector('[id^="react-select"][id$="-input"]');null==e||e.focus()}catch(e){}a&&setTimeout(()=>eO(e=>({...e,selectAllFiltered:!1})),0)}}),"Select all"]})]}),(0,a.jsx)(n.c.MenuList,{...e,children:s})]})}},onInputChange:(e,a)=>{let{action:s}=a;return"input-change"===s&&eH.selectAllFiltered,eY(e||""),e},isMulti:!0,isSearchable:!0,closeMenuOnSelect:!1,hideSelectedOptions:!0,placeholder:e4?"Loading brokers...":e3||"Choose brokers...",isLoading:e4})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,a.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Share Notes (Optional)"}),(0,a.jsx)("textarea",{rows:3,value:eH.notes,onChange:e=>eO({...eH,notes:e.target.value}),placeholder:"Add any specific instructions or context...",className:"jsx-5f133ba9f9a414f4 w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-sky-100 focus:border-sky-600 text-sm bg-white"})]})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 px-6 py-4 border-t border-gray-100 flex items-center justify-end gap-3",children:[(0,a.jsx)("button",{onClick:()=>eU(!1),disabled:eK,className:"jsx-5f133ba9f9a414f4 px-4 py-2 rounded-lg border border-gray-200 text-sm font-medium text-slate-700 bg-white hover:bg-slate-50 cursor-pointer",children:"Cancel"}),(0,a.jsxs)("button",{onClick:e7,disabled:eK,className:"jsx-5f133ba9f9a414f4 px-4 py-2 rounded-lg text-sm font-semibold text-white bg-green-900 hover:bg-green-950 cursor-pointer disabled:opacity-60 flex items-center gap-2",children:[eK&&(0,a.jsxs)("svg",{fill:"none",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4 animate-spin",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"jsx-5f133ba9f9a414f4 opacity-25"}),(0,a.jsx)("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"jsx-5f133ba9f9a414f4 opacity-75"})]}),eK?"Sending...":"Share with broker"]})]})]})]}),e8&&aa&&(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 "+"fixed inset-0 z-50 ".concat(al?"pointer-events-none":""),children:[(0,a.jsx)("div",{onClick:()=>{an(!0),setTimeout(()=>ae(!1),200)},className:"jsx-5f133ba9f9a414f4 absolute inset-0 bg-black/50"}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 "+"absolute right-0 top-0 h-full w-full max-w-md bg-slate-50 shadow-2xl ".concat(al?"animate-slide-out":"animate-slide-in"),children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between px-5 py-4 border-b border-gray-200 bg-white",children:[(0,a.jsxs)("h4",{className:"jsx-5f133ba9f9a414f4 text-[18px] font-semibold text-slate-900 flex items-center gap-2",children:[(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-5 h-5 text-sky-600",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",className:"jsx-5f133ba9f9a414f4"})}),"Lead Details"]}),(0,a.jsx)("button",{onClick:()=>{an(!0),setTimeout(()=>ae(!1),200)},"aria-label":"Close",className:"jsx-5f133ba9f9a414f4 p-2 rounded hover:bg-gray-100",children:(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-5 h-5 text-gray-500",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12",className:"jsx-5f133ba9f9a414f4"})})})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 h-[calc(100%-56px)] overflow-y-auto no-scrollbar p-5",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 bg-white rounded-2xl border border-gray-200 shadow-sm p-4",children:(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 w-12 h-12 rounded-full overflow-hidden ring-2 ring-white bg-sky-100 text-sky-700 flex items-center justify-center text-sm font-semibold",children:(e=>{if(!e||"string"!=typeof e)return"?";let[a="",s=""]=e.trim().split(/\s+/);return(a[0]||""+s[0]||"").toUpperCase()})(aa.name||aa.customerName||"?")}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 min-w-0",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-[16px] font-semibold text-slate-900 truncate",children:aa.name||aa.customerName||"—"}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-[12px] text-slate-500 mt-0.5",children:aa.contact||aa.customerPhone||"—"})]}),(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 "+"ml-auto inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-semibold ".concat(ep(aa.status||"Closed")),children:aa.status||"Closed"})]})}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 mt-4 bg-white rounded-2xl border border-gray-200 shadow-sm",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-1 px-3 pt-3",children:(()=>{let e=e=>{let{active:s,children:r,onClick:t}=e;return(0,a.jsx)("button",{onClick:t,className:"jsx-5f133ba9f9a414f4 "+"px-3 py-1.5 rounded-lg text-sm font-semibold ".concat(s?"bg-slate-900 text-white":"text-slate-600 hover:bg-slate-100"),children:r})};return(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex gap-2",children:[(0,a.jsx)(e,{active:"overview"===eu,onClick:()=>em("overview"),className:"jsx-5f133ba9f9a414f4",children:"Overview"}),(0,a.jsx)(e,{active:"share"===eu,onClick:()=>em("share"),className:"jsx-5f133ba9f9a414f4",children:"Share"})]})})()}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 p-4",children:[(!eu||"overview"===eu)&&(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 space-y-4",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 rounded-xl border border-gray-200 bg-white p-4",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between mb-3",children:(0,a.jsxs)("h5",{className:"jsx-5f133ba9f9a414f4 text-[15px] font-semibold text-slate-900 flex items-center gap-2",children:[(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-sky-600",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z",className:"jsx-5f133ba9f9a414f4"})}),"Contact Details"]})}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 space-y-3 text-[14px]",children:[((null==aa?void 0:aa.createdBy)&&(aa.createdBy._id||aa.createdBy.id)===I||(null==aa?void 0:aa.brokerId)&&(String(aa.brokerId),String(I)),null),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2 text-slate-700",children:[(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 w-5 h-5 inline-flex items-center justify-center rounded bg-sky-50",children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"jsx-5f133ba9f9a414f4 w-3.5 h-3.5 text-gray-500",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5h6l2 5-2 1a10 10 0 005 5l1-2 5 2v6a2 2 0 01-2 2A16 16 0 013 7z",className:"jsx-5f133ba9f9a414f4"})})}),ar&&((null==aa?void 0:aa.createdBy)&&(aa.createdBy._id||aa.createdBy.id)===z||(null==aa?void 0:aa.brokerId)&&String(aa.brokerId)===String(z))?(0,a.jsx)("input",{type:"tel",name:"contact",value:null!=(e=ac.contact)?e:aa.contact||aa.customerPhone||"",onChange:ap,placeholder:"Phone number",className:"jsx-5f133ba9f9a414f4 w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-100 focus:border-sky-600 text-[14px]"}):aa.contact||aa.customerPhone||"—"]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2 text-slate-700",children:[(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 w-5 h-5 inline-flex items-center justify-center rounded bg-sky-50",children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"jsx-5f133ba9f9a414f4 w-3.5 h-3.5 text-gray-500",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",className:"jsx-5f133ba9f9a414f4"})})}),ar&&((null==aa?void 0:aa.createdBy)&&(aa.createdBy._id||aa.createdBy.id)===z||(null==aa?void 0:aa.brokerId)&&String(aa.brokerId)===String(z))?(0,a.jsx)("input",{type:"email",name:"email",value:null!=(f=ac.email)?f:aa.customerEmail||"",onChange:ap,placeholder:"Email address",className:"jsx-5f133ba9f9a414f4 w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-100 focus:border-sky-600 text-[14px]"}):aa.customerEmail||"—"]})]})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 rounded-xl border border-gray-200 bg-white p-4",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between mb-3",children:(0,a.jsxs)("h5",{className:"jsx-5f133ba9f9a414f4 text-[15px] font-semibold text-slate-900 flex items-center gap-2",children:[(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-sky-600",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 8h10M7 12h7M5 20l2.5-2.5M19 20l-2.5-2.5",className:"jsx-5f133ba9f9a414f4"})}),"Property Preferences"]})}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 space-y-3 text-[14px]",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2 text-slate-700",children:[(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 w-5 h-5 inline-flex items-center justify-center rounded bg-sky-50",children:(0,a.jsxs)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-3 h-3 text-slate-400",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z",className:"jsx-5f133ba9f9a414f4"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z",className:"jsx-5f133ba9f9a414f4"})]})}),(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-500 mr-1",children:"Property Type:"}),ar&&((null==aa?void 0:aa.createdBy)&&(aa.createdBy._id||aa.createdBy.id)===z||(null==aa?void 0:aa.brokerId)&&String(aa.brokerId)===String(z))?(0,a.jsx)(l.default,{name:"propertyType",options:(()=>{var e,a;let s=ek.filter(e=>"all"!==e.value),r=null!=(a=null!=(e=ac.propertyType)?e:aa.propertyType)?a:"";return s.some(e=>e.value===r)?s:[...s,{value:r,label:r}]})(),value:(()=>{var e,a;let s=null!=(a=null!=(e=ac.propertyType)?e:aa.propertyType)?a:"";return(()=>{let e=ek.filter(e=>"all"!==e.value);return e.some(e=>e.value===s)?e:[...e,{value:s,label:s}]})().find(e=>e.value===s)||null})(),onChange:e=>ax(a=>({...a,propertyType:(null==e?void 0:e.value)||""})),classNamePrefix:"react-select",styles:eC}):(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-900",children:aa.propertyType||"—"})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2 text-slate-700",children:[(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 w-5 h-5 inline-flex items-center justify-center rounded bg-sky-50",children:(0,a.jsx)("svg",{fill:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-3 h-3 text-slate-400",children:(0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16z",className:"jsx-5f133ba9f9a414f4"})})}),(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-500 mr-1",children:"Budget:"}),ar&&((null==aa?void 0:aa.createdBy)&&(aa.createdBy._id||aa.createdBy.id)===z||(null==aa?void 0:aa.brokerId)&&String(aa.brokerId)===String(z))?(0,a.jsx)("input",{type:"number",name:"budget",value:null!=(x=ac.budget)?x:null!=(c=aa.budget)?c:"",onChange:ap,placeholder:"Budget",className:"jsx-5f133ba9f9a414f4 flex-1 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-sky-100 focus:border-sky-600 text-[14px]"}):(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-900",children:"number"==typeof aa.budget?"$".concat(aa.budget.toLocaleString()):aa.budget||"—"})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2 text-slate-700",children:[(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 w-5 h-5 inline-flex items-center justify-center rounded bg-sky-50",children:(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-3 h-3 text-slate-400",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2",className:"jsx-5f133ba9f9a414f4"})})}),(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-500 mr-1",children:"Requirement:"}),ar&&((null==aa?void 0:aa.createdBy)&&(aa.createdBy._id||aa.createdBy.id)===I||(null==aa?void 0:aa.brokerId)&&String(aa.brokerId)===String(I))?(0,a.jsx)(l.default,{name:"requirement",options:(()=>{var e,a,s;let r=ew.filter(e=>"all"!==e.value),t=null!=(s=null!=(a=null!=(e=ac.requirement)?e:aa.requirement)?a:aa.req)?s:"";return r.some(e=>e.value===t)?r:[...r,{value:t,label:t}]})(),value:(()=>{var e,a,s;let r=null!=(s=null!=(a=null!=(e=ac.requirement)?e:aa.requirement)?a:aa.req)?s:"";return(()=>{let e=ew.filter(e=>"all"!==e.value);return e.some(e=>e.value===r)?e:[...e,{value:r,label:r}]})().find(e=>e.value===r)||null})(),onChange:e=>ax(a=>({...a,requirement:(null==e?void 0:e.value)||""})),classNamePrefix:"react-select",styles:eC}):(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-900",children:aa.requirement||aa.req||"—"})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2 text-slate-700",children:[(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 w-5 h-5 inline-flex items-center justify-center rounded bg-sky-50",children:(0,a.jsxs)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-3 h-3 text-slate-400",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z",className:"jsx-5f133ba9f9a414f4"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z",className:"jsx-5f133ba9f9a414f4"})]})}),(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-500 mr-1",children:"Primary Region:"}),ar&&((null==aa?void 0:aa.createdBy)&&(aa.createdBy._id||aa.createdBy.id)===z||(null==aa?void 0:aa.brokerId)&&String(aa.brokerId)===String(z))?(0,a.jsx)(l.default,{name:"primaryRegion",options:eS,value:ac.primaryRegion||null,onChange:e=>ax(a=>({...a,primaryRegion:e})),classNamePrefix:"react-select"}):(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-900",children:eL((null==aa?void 0:aa.primaryRegion)||(null==aa?void 0:aa.region))||"—"})]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2 text-slate-700",children:[(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 w-5 h-5 inline-flex items-center justify-center rounded bg-sky-50",children:(0,a.jsxs)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-3 h-3 text-slate-400",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z",className:"jsx-5f133ba9f9a414f4"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z",className:"jsx-5f133ba9f9a414f4"})]})}),(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-500 mr-1",children:"Secondary Region:"}),ar&&((null==aa?void 0:aa.createdBy)&&(aa.createdBy._id||aa.createdBy.id)===z||(null==aa?void 0:aa.brokerId)&&String(aa.brokerId)===String(z))?(0,a.jsx)(l.default,{name:"secondaryRegion",options:eS,value:ac.secondaryRegion||null,onChange:e=>ax(a=>({...a,secondaryRegion:e})),classNamePrefix:"react-select"}):(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-900",children:eL(null==aa?void 0:aa.secondaryRegion)||"—"})]})]})]}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 rounded-xl border border-gray-200 bg-white p-4",children:(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-[13px] text-slate-500",children:"Status"}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 mt-0.5",children:ar?(0,a.jsx)(l.default,{name:"status",options:eN.filter(e=>"all"!==e.value),value:(()=>{var e,a;let s=null!=(a=null!=(e=ac.status)?e:aa.status)?a:"New";return eN.find(e=>e.value===s)||null})(),onChange:e=>ax(a=>({...a,status:(null==e?void 0:e.value)||"New"})),classNamePrefix:"react-select",styles:eC}):(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 "+"inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-semibold ".concat(ep(aa.status||"Closed")),children:aa.status||"Closed"})})]}),(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2",children:ar?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:aj,className:"jsx-5f133ba9f9a414f4 px-3 py-1.5 rounded-lg text-sm font-semibold text-white bg-sky-600 hover:bg-sky-700",children:"Save"}),(0,a.jsx)("button",{onClick:()=>at(!1),className:"jsx-5f133ba9f9a414f4 px-3 py-1.5 rounded-lg text-sm font-semibold text-slate-700 bg-gray-100 hover:bg-gray-200 border border-gray-200",children:"Cancel"})]}):(0,a.jsx)("button",{onClick:()=>{let e=(null==aa?void 0:aa.primaryRegion)&&(aa.primaryRegion._id||aa.primaryRegion.id||aa.primaryRegion.value)||(null==aa?void 0:aa.region)||null,a=(null==aa?void 0:aa.primaryRegion)&&(aa.primaryRegion.name||aa.primaryRegion.label)||eL((null==aa?void 0:aa.primaryRegion)||(null==aa?void 0:aa.region))||"",s=(null==aa?void 0:aa.secondaryRegion)&&(aa.secondaryRegion._id||aa.secondaryRegion.id||aa.secondaryRegion.value),r=(null==aa?void 0:aa.secondaryRegion)&&(aa.secondaryRegion.name||aa.secondaryRegion.label);ax({name:aa.name||aa.customerName||"",contact:aa.contact||aa.customerPhone||"",email:aa.customerEmail||"",requirement:aa.requirement||aa.req||"",propertyType:aa.propertyType||"",budget:"number"==typeof aa.budget?aa.budget:aa.budget||"",status:aa.status||"Closed",primaryRegion:e?{value:e,label:a}:null,secondaryRegion:s?{value:s,label:r||""}:null}),at(!0)},className:"jsx-5f133ba9f9a414f4 px-3 py-1.5 rounded-lg text-sm font-semibold text-white bg-green-900 hover:bg-green-950",children:(null==aa?void 0:aa.createdBy)&&(aa.createdBy._id||aa.createdBy.id)===z||(null==aa?void 0:aa.brokerId)&&String(aa.brokerId)===String(z)?"Edit":"Edit Status"})})]})})]}),"share"===eu&&(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 space-y-3 text-[14px]",children:(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 border border-gray-200 rounded-xl p-4 shadow-sm bg-white",children:[(0,a.jsxs)("h5",{className:"jsx-5f133ba9f9a414f4 text-[16px] font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-sky-600",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 8h10M7 12h7M5 20l2.5-2.5M19 20l-2.5-2.5",className:"jsx-5f133ba9f9a414f4"})}),"Share History"]}),(()=>{let e=Array.isArray(null==aa?void 0:aa.transfers)?aa.transfers:[];if(!e.length)return(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-[14px] text-slate-500",children:"Not shared yet."});let s=new Map((eZ||[]).map(e=>[e._id||e.id,e]));return(0,a.jsx)("ul",{className:"jsx-5f133ba9f9a414f4 text-[14px] text-slate-700 space-y-3",children:e.map((e,r)=>{var t,l,n,o;let i=e&&"object"==typeof e.toBroker?e.toBroker:s.get(null==e?void 0:e.toBroker)||{},d=e&&"object"==typeof e.fromBroker?e.fromBroker:s.get(null==e?void 0:e.fromBroker)||{},f=i.name||i.fullName||i.email||i._id||(null==e?void 0:e.toBroker)||"Unknown broker",c=d.name||d.fullName||d.email||d._id||(null==e?void 0:e.fromBroker)||"Unknown broker",x=i.brokerImage||i.avatarUrl||i.imageUrl||"";d.brokerImage||d.avatarUrl||d.imageUrl;let u=(null==e?void 0:e.createdAt)?new Date(e.createdAt).toLocaleString():"",m=("object"==typeof(null==e?void 0:e.fromBroker)?null==e||null==(t=e.fromBroker)?void 0:t._id:null==e?void 0:e.fromBroker)||"from",b=("object"==typeof(null==e?void 0:e.toBroker)?null==e||null==(l=e.toBroker)?void 0:l._id:null==e?void 0:e.toBroker)||"to",g=eL(null==d?void 0:d.region)||eL(null==d?void 0:d.primaryRegion)||"",h=eL(null==i?void 0:i.region)||eL(null==i?void 0:i.primaryRegion)||"",j=e&&"object"==typeof e.toBroker?(null==(n=e.toBroker)?void 0:n._id)||(null==(o=e.toBroker)?void 0:o.id):null==e?void 0:e.toBroker,p=ab===String(j);return(0,a.jsxs)("li",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2",children:(0,a.jsx)("div",{title:"string"==typeof f?f:String(f),className:"jsx-5f133ba9f9a414f4 w-7 h-7 rounded-full bg-gray-200 overflow-hidden ring-2 ring-white flex items-center justify-center text-[11px] text-gray-700",children:(0,a.jsx)("img",{src:x||"https://www.w3schools.com/howto/img_avatar.png",alt:"string"==typeof f?f:"Broker",className:"jsx-5f133ba9f9a414f4 w-full h-full object-cover"})})}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 font-medium text-slate-900 truncate",children:["string"==typeof c?c:String(c),(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 mx-1 text-slate-400",children:"→"}),"string"==typeof f?f:String(f)]}),(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 text-[12px] text-slate-500 truncate",children:[g||"—"," ",(0,a.jsx)("span",{className:"jsx-5f133ba9f9a414f4 mx-1 text-slate-400",children:"→"})," ",h||"—"]}),u&&(0,a.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 text-[11px] text-slate-400",children:["Shared on ",u]})]}),(0,a.jsx)("button",{type:"button",disabled:p,onClick:async()=>{j&&(ag(String(j)),await ah(j))},title:"Delete transfer",className:"jsx-5f133ba9f9a414f4 "+"ml-2 inline-flex items-center px-2 py-1 text-[12px] rounded border ".concat(p?"border-gray-200 text-gray-400":"border-rose-200 text-rose-700 hover:bg-rose-50"),children:p?"Removing…":"Delete"})]},"".concat(m,"-").concat(b,"-").concat((null==e?void 0:e._id)||r))})})})()]})})]})]})]})]})]})]}),(0,a.jsx)(s.default,{id:"5f133ba9f9a414f4",children:".no-scrollbar::-webkit-scrollbar{display:none}.no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}@keyframes slideInFromRight{0%{opacity:.6;transform:translate(100%)}to{opacity:1;transform:translate(0)}}.animate-slide-in{animation:.25s ease-out both slideInFromRight}@keyframes slideOutToRight{0%{opacity:1;transform:translate(0)}to{opacity:.4;transform:translate(100%)}}.animate-slide-out{animation:.2s ease-in both slideOutToRight}"})]})}}]);