(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90914,e=>{"use strict";e.s(["default",()=>i]);var t=e.i(43476),r=e.i(71645),s=e.i(18566),n=e.i(68413);let i=e=>{let{children:i,requiredRole:o=null}=e,{user:a,loading:l,isAuthenticated:c,isBroker:d,isCustomer:p}=(0,n.useAuth)(),g=(0,s.useRouter)();return((0,r.useEffect)(()=>{if(!l){if(!c()){console.log("ProtectedRoute: User not authenticated, redirecting to login"),g.push("/login");return}if("broker"===o&&!d()){console.log("ProtectedRoute: User is not a broker, redirecting to login"),g.push("/login");return}if("customer"===o&&!p()){console.log("ProtectedRoute: User is not a customer, redirecting to login"),g.push("/login");return}}},[a,l,c,d,p,o,g]),l)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):c()&&("broker"!==o||d())&&("customer"!==o||p())?i:null}},20044,e=>{"use strict";e.s(["default",()=>o]);var t=e.i(43476),r=e.i(71645),s=e.i(90914),n=e.i(22016);let i="/images/pexels-binyaminmellish-106399.jpg",o=()=>{let[e,o]=(0,r.useState)([]),[a,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!0),[p,g]=(0,r.useState)(""),[m,x]=(0,r.useState)(!1),[u,h]=(0,r.useState)(""),[y,b]=(0,r.useState)({title:"",description:"",propertyDescription:"",region:"",address:"",city:"Agra",price:"",priceUnit:"INR",propertySize:"",propertyType:"Residential",subType:"Apartment"}),[f,j]=(0,r.useState)(""),[v,N]=(0,r.useState)([]),[k,w]=(0,r.useState)(""),[A,C]=(0,r.useState)([]),[S,P]=(0,r.useState)(""),[D,L]=(0,r.useState)([]),[T,I]=(0,r.useState)(""),[z,R]=(0,r.useState)([]),[F,M]=(0,r.useState)(""),[U,B]=(0,r.useState)([]),[E,W]=(0,r.useState)(""),[O,H]=(0,r.useState)([]),[K,V]=(0,r.useState)({lat:"",lng:""}),[q,J]=(0,r.useState)(""),[Y,_]=(0,r.useState)(""),[G,Q]=(0,r.useState)("Furnished"),[X,Z]=(0,r.useState)("Pending Approval"),[$,ee]=(0,r.useState)(!1),[et,er]=(0,r.useState)(""),[es,en]=(0,r.useState)(""),[ei,eo]=(0,r.useState)([]),ea=e=>{try{let t=JSON.parse(atob(e.split(".")[1]));return t.brokerId||t.userId||t.id||t.sub}catch(e){return console.error("Error decoding token:",e),null}},[el,ec]=(0,r.useState)({total:0,page:1,limit:9,totalPages:0,hasNextPage:!1,hasPrevPage:!1}),ed=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9;try{d(!0),g("");let n=localStorage.getItem("token")||localStorage.getItem("authToken");if(!n){g("Please login to view properties"),d(!1);return}let a=ea(n);if(console.log("Extracted broker ID from token:",a),!a){console.error("Failed to extract broker ID from token"),g("Failed to extract broker ID from token. Please re-login."),d(!1);return}let l=es||a;console.log("Using broker ID:",l);let c={"Content-Type":"application/json",...n?{Authorization:"Bearer ".concat(n)}:{}},p="".concat("https://broker-adda-be.algofolks.com/api","/brokers/").concat(l);console.log("API URL with broker filter:",p),console.log("Debug mode (no broker filter):",!1);let m=await fetch(p,{method:"GET",headers:c});if(m.ok){var r,s;let n=await m.json();console.log("API Response data:",n);let a=[],c={total:0,page:1,limit:10,totalPages:0,hasNextPage:!1,hasPrevPage:!1};if(null==n||null==(r=n.data)?void 0:r.broker){let r=n.data.broker,i=r.properties||(null==(s=r.propertiesListed)?void 0:s.items)||[];eo(i);let o=r.propertyCount||i.length,l=Math.ceil(o/t),d=(e-1)*t;a=i.slice(d,d+t),c={total:o,page:e,limit:t,totalPages:l,hasNextPage:e<l,hasPrevPage:e>1}}ec(c);let d=a.map(e=>({id:e._id||e.id||"api-".concat(Date.now(),"-").concat(Math.random()),title:e.title||e.name||"Untitled Property",description:e.description||e.propertyDescription||"",propertyDescription:e.propertyDescription||e.description||"",region:e.region||e.city||"",address:e.address||"",city:e.city||"",price:e.price||0,priceUnit:e.priceUnit||"INR",propertySize:e.propertySize||e.areaSqft||e.area||void 0,coordinates:e.coordinates||{lat:"",lng:""},bedrooms:e.bedrooms||void 0,bathrooms:e.bathrooms||void 0,furnishing:e.furnishing||"Furnished",amenities:Array.isArray(e.amenities)?e.amenities:[],nearbyAmenities:Array.isArray(e.nearbyAmenities)?e.nearbyAmenities:[],features:Array.isArray(e.features)?e.features:[],locationBenefits:Array.isArray(e.locationBenefits)?e.locationBenefits:[],images:Array.isArray(e.images)&&e.images.length>0?e.images:[i],videos:Array.isArray(e.videos)?e.videos:[],propertyType:e.propertyType||e.type||"Residential",subType:e.subType||"Apartment",status:e.status||"Active",isFeatured:e.isFeatured||!1,notes:e.notes||"",broker:l,rating:e.rating||"4.7",currentPrice:e.price?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e.price):"-"}));console.log("Using broker endpoint - all properties belong to current broker"),o(d),console.log("Found ".concat(d.length," properties for broker ID: ").concat(l)),console.log("Properties data:",d)}else{let e=await m.json().catch(()=>({}));g(e.message||"Failed to fetch properties"),o([])}}catch(e){console.error("Error fetching properties:",e),g("Error loading properties"),o([])}finally{d(!1)}},[]),ep=async e=>{try{x(!0);let t=localStorage.getItem("token")||localStorage.getItem("authToken"),r={"Content-Type":"application/json",...t?{Authorization:"Bearer ".concat(t)}:{}},s=await fetch("".concat("https://broker-adda-be.algofolks.com/api","/properties"),{method:"POST",headers:r,body:JSON.stringify(e)});if(s.ok){let e=await s.json();return console.log("Property created successfully:",e),await ed(el.page,el.limit),{success:!0,data:e}}{let e=await s.json().catch(()=>({}));throw Error(e.message||"Failed to create property")}}catch(e){throw console.error("Error creating property:",e),e}finally{x(!1)}},eg=e=>{if(e>=1&&e<=el.totalPages&&es)if(ei.length>0){let t=(e-1)*el.limit,r=t+el.limit;o(ei.slice(t,r).map(e=>({id:e._id||e.id||"api-".concat(Date.now(),"-").concat(Math.random()),title:e.title||e.name||"Untitled Property",description:e.description||e.propertyDescription||"",propertyDescription:e.propertyDescription||e.description||"",region:e.region||e.city||"",address:e.address||"",city:e.city||"",price:e.price||0,priceUnit:e.priceUnit||"INR",propertySize:e.propertySize||e.areaSqft||e.area||void 0,coordinates:e.coordinates||{lat:"",lng:""},bedrooms:e.bedrooms||void 0,bathrooms:e.bathrooms||void 0,furnishing:e.furnishing||"Furnished",amenities:Array.isArray(e.amenities)?e.amenities:[],nearbyAmenities:Array.isArray(e.nearbyAmenities)?e.nearbyAmenities:[],features:Array.isArray(e.features)?e.features:[],locationBenefits:Array.isArray(e.locationBenefits)?e.locationBenefits:[],images:Array.isArray(e.images)&&e.images.length>0?e.images:[i],videos:Array.isArray(e.videos)?e.videos:[],propertyType:e.propertyType||e.type||"Residential",subType:e.subType||"Apartment",status:e.status||"Active",isFeatured:e.isFeatured||!1,notes:e.notes||"",broker:es,rating:e.rating||"4.7",currentPrice:e.price?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e.price):"-"}))),ec(t=>({...t,page:e,hasNextPage:e<t.totalPages,hasPrevPage:e>1}))}else ed(e,el.limit)};(0,r.useEffect)(()=>{let e=localStorage.getItem("token")||localStorage.getItem("authToken");if(console.log("Token found:",!!e),e){console.log("Token:",e.substring(0,50)+"...");let t=ea(e);console.log("Extracted broker ID in useEffect:",t),t?(en(t),console.log("Set broker ID state to:",t)):console.error("Failed to extract broker ID from token")}else console.error("No token found in localStorage")},[]),(0,r.useEffect)(()=>{console.log("useEffect triggered - brokerId:",es),es?(console.log("Fetching properties for broker ID:",es),ed(el.page,el.limit)):console.log("No broker ID, not fetching properties")},[ed,es]);let em=e=>{let{name:t,value:r}=e.target;b(e=>({...e,[t]:r}))},ex=async e=>{e.preventDefault();try{let e={title:y.title||"Untitled Property",description:y.description,propertyDescription:y.propertyDescription,region:y.region,address:y.address,city:y.city,price:y.price?Number(y.price):void 0,priceUnit:y.priceUnit,propertySize:y.propertySize?Number(y.propertySize):void 0,coordinates:{lat:K.lat?Number(K.lat):void 0,lng:K.lng?Number(K.lng):void 0},bedrooms:q?Number(q):void 0,bathrooms:Y?Number(Y):void 0,furnishing:G,amenities:v,nearbyAmenities:A,features:D,locationBenefits:z,images:U.length?U:[i],videos:O,propertyType:y.propertyType||"Residential",subType:y.subType,status:X,isFeatured:$,notes:et,broker:es||void 0};await ep(e),h("Property created successfully!"),setTimeout(()=>h(""),3e3),b({title:"",description:"",propertyDescription:"",region:"",address:"",city:"Agra",price:"",priceUnit:"INR",propertySize:"",propertyType:"Residential",subType:"Apartment"}),N([]),j(""),C([]),w(""),L([]),P(""),R([]),I(""),B([]),M(""),H([]),W(""),V({lat:"",lng:""}),J(""),_(""),Q("Furnished"),Z("Pending Approval"),ee(!1),er(""),en(""),l(!1)}catch(e){console.error("Error creating property:",e),g(e.message||"Failed to create property")}},eu=()=>{let e=f.trim();if(e){if(v.includes(e))return void j("");N(t=>[...t,e]),j("")}},eh=(e,t,r,s)=>{let n=e.trim();if(n){if(r.includes(n))return void s("");t([...r,n]),s("")}};return(0,t.jsx)(s.default,{children:(0,t.jsxs)("div",{className:" mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Properties Management"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:"Manage your properties and add new ones."}),p&&(0,t.jsxs)("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-red-600",children:p}),(0,t.jsx)("button",{onClick:()=>g(""),className:"mt-1 text-xs text-red-500 hover:text-red-700",children:"Dismiss"})]}),u&&(0,t.jsxs)("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-green-600",children:u}),(0,t.jsx)("button",{onClick:()=>h(""),className:"mt-1 text-xs text-green-500 hover:text-green-700",children:"Dismiss"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("button",{onClick:()=>es&&ed(el.page,el.limit),disabled:c||!es,className:"inline-flex items-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm font-medium px-4 py-2 rounded-lg shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)("svg",{className:"w-4 h-4 ".concat(c?"animate-spin":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),c?"Loading...":"Refresh"]}),(0,t.jsxs)(n.default,{href:"/properties-management/new",className:"inline-flex items-center gap-2 bg-green-700 hover:bg-green-800 text-white text-sm font-medium px-4 py-2 rounded-lg shadow-sm",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Property"]})]})]}),(console.log("Render state - loading:",c,"brokerId:",es,"items.length:",e.length,"pagination.total:",el.total),null),c?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),(0,t.jsx)("span",{className:"text-gray-600",children:"Loading properties..."})]})}):es?0===e.length&&0===el.total?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-gray-500 text-lg mb-2",children:"No properties found"}),(0,t.jsx)("div",{className:"text-gray-400 text-sm",children:"You haven't created any properties yet"}),(0,t.jsx)(n.default,{href:"/properties-management/new",className:"inline-block mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Create Your First Property"})]})}):0===e.length&&el.total>0?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-gray-500 text-lg mb-2",children:"Loading properties..."}),(0,t.jsx)("div",{className:"text-gray-400 text-sm",children:"Please wait while we load your properties"})]})}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,t.jsx)("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-sm hover:shadow-lg transition-shadow duration-200 cursor-pointer",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:"relative h-56 overflow-visible rounded-xl",children:[(0,t.jsx)("img",{src:e.images&&e.images[0]||i,alt:e.title,className:"block w-full h-full object-cover rounded-xl"}),(0,t.jsxs)("div",{className:"absolute inset-x-0 -bottom-4 z-10 px-4 flex items-center justify-between",children:[(0,t.jsx)("div",{className:"bg-yellow-500 text-white px-4 py-2 rounded-full text-sm font-semibold shadow-lg",children:"-"!==e.currentPrice?e.currentPrice:"Price on Request"}),(0,t.jsx)("button",{className:"p-2 bg-white rounded-full border border-gray-200 shadow-lg hover:shadow transition",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})})})]})]}),(0,t.jsx)("div",{className:"absolute top-6 left-6",children:(0,t.jsx)("span",{className:"bg-[#0A421E] text-white  px-6 py-1 rounded-full text-xs font-medium",children:e.propertyType})}),(0,t.jsxs)("div",{className:"absolute top-6 right-6 flex items-center bg-white/90 backdrop-blur rounded-full px-2 py-1 shadow-sm",children:[(0,t.jsx)("svg",{className:"w-4 h-4 text-yellow-400 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),(0,t.jsx)("span",{className:"text-xs font-medium text-gray-700",children:e.rating})]}),(0,t.jsxs)("div",{className:"mt-8 px-4 pb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:e.title}),(0,t.jsx)(n.default,{href:"/property-details/".concat(e.id),className:"text-green-600 hover:text-green-700","aria-label":"Open details",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h4m0 0v4m0-4L10 14"})})})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:e.description}),(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,t.jsx)("span",{children:e.city||"City"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a2 2 0 01-2.828 0l-4.243-4.243a8 8 0 1111.314 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,t.jsx)("span",{children:e.region||"Location"})]})]})}),(e.bedrooms&&e.bedrooms>0||e.bathrooms&&e.bathrooms>0||e.propertySize&&e.propertySize>0)&&(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("h4",{className:"text-xs font-medium text-gray-700 mb-2",children:"Features"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.bedrooms&&e.bedrooms>0&&(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:[(0,t.jsxs)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"})]}),e.bedrooms," bd"]}),e.bathrooms&&e.bathrooms>0&&(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:[(0,t.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})}),e.bathrooms," bt"]}),e.propertySize&&e.propertySize>0&&(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:[(0,t.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})}),e.propertySize," sqft"]})]})]}),Array.isArray(e.amenities)&&e.amenities.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-xs font-medium text-gray-700 mb-2",children:"Amenities"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.amenities.slice(0,3).map((e,r)=>(0,t.jsx)("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full",children:e},r)),e.amenities.length>3&&(0,t.jsxs)("span",{className:"text-xs text-gray-500 px-2 py-1",children:["+",e.amenities.length-3," more"]})]})]})]})]})},e.id))}):(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-gray-500 text-lg mb-2",children:"No broker ID found"}),(0,t.jsx)("div",{className:"text-gray-400 text-sm",children:"Please login again to view your properties"})]})}),!c&&el.total>0&&(0,t.jsxs)("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",(el.page-1)*el.limit+1," to ",Math.min(el.page*el.limit,el.total)," of ",el.total," properties"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>eg(el.page-1),disabled:!el.hasPrevPage,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:el.totalPages},(e,t)=>t+1).map(e=>1===e||e===el.totalPages||e>=el.page-1&&e<=el.page+1?(0,t.jsx)("button",{onClick:()=>eg(e),className:"px-3 py-2 text-sm font-medium rounded-lg ".concat(e===el.page?"bg-green-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"),children:e},e):2===e&&el.page>3||e===el.totalPages-1&&el.page<el.totalPages-2?(0,t.jsx)("span",{className:"px-2 text-gray-500",children:"..."},e):null)}),(0,t.jsx)("button",{onClick:()=>eg(el.page+1),disabled:!el.hasNextPage,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),a&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg relative border border-gray-100",children:[(0,t.jsx)("button",{onClick:()=>l(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,t.jsxs)("form",{onSubmit:ex,className:"p-6 space-y-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add Property"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,t.jsx)("input",{name:"title",value:y.title,onChange:em,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",placeholder:"Property title"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,t.jsx)("textarea",{name:"description",value:y.description,onChange:em,rows:3,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",placeholder:"Short description"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Region"}),(0,t.jsx)("input",{name:"region",value:y.region,onChange:em,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",placeholder:"City, State"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Detailed Description"}),(0,t.jsx)("textarea",{name:"propertyDescription",value:y.propertyDescription,onChange:em,rows:4,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",placeholder:"Long description"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,t.jsx)("input",{name:"address",value:y.address,onChange:em,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",placeholder:"Street address"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),(0,t.jsx)("input",{name:"city",value:y.city,onChange:em,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",placeholder:"City"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),(0,t.jsx)("input",{type:"number",name:"price",value:y.price,onChange:em,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",placeholder:"e.g. 42000000"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price Unit"}),(0,t.jsxs)("select",{name:"priceUnit",value:y.priceUnit,onChange:em,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",children:[(0,t.jsx)("option",{children:"INR"}),(0,t.jsx)("option",{children:"USD"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Size (sqft)"}),(0,t.jsx)("input",{type:"number",name:"propertySize",value:y.propertySize,onChange:em,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms"}),(0,t.jsx)("input",{type:"number",value:q,onChange:e=>J(e.target.value),className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bathrooms"}),(0,t.jsx)("input",{type:"number",value:Y,onChange:e=>_(e.target.value),className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type"}),(0,t.jsxs)("select",{name:"propertyType",value:y.propertyType,onChange:em,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",children:[(0,t.jsx)("option",{children:"Residential"}),(0,t.jsx)("option",{children:"Commercial"}),(0,t.jsx)("option",{children:"Industrial"}),(0,t.jsx)("option",{children:"Land"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sub Type"}),(0,t.jsxs)("select",{name:"subType",value:y.subType,onChange:em,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",children:[(0,t.jsx)("option",{children:"Apartment"}),(0,t.jsx)("option",{children:"Villa"}),(0,t.jsx)("option",{children:"Office"}),(0,t.jsx)("option",{children:"Shop"}),(0,t.jsx)("option",{children:"Land"}),(0,t.jsx)("option",{children:"Other"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Furnishing"}),(0,t.jsxs)("select",{value:G,onChange:e=>Q(e.target.value),className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",children:[(0,t.jsx)("option",{children:"Furnished"}),(0,t.jsx)("option",{children:"Semi-Furnished"}),(0,t.jsx)("option",{children:"Unfurnished"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Latitude"}),(0,t.jsx)("input",{type:"number",step:"any",value:K.lat,onChange:e=>V({...K,lat:e.target.value}),className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitude"}),(0,t.jsx)("input",{type:"number",step:"any",value:K.lng,onChange:e=>V({...K,lng:e.target.value}),className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amenities"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{value:f,onChange:e=>j(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),eu())},className:"flex-1 border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",placeholder:"Type amenity and press Add or Enter"}),(0,t.jsx)("button",{type:"button",onClick:eu,className:"px-3 py-2 rounded-lg bg-green-700 text-white hover:bg-green-800",children:"Add"})]}),v.length>0&&(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:v.map(e=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>{N(t=>t.filter(t=>t!==e))},className:"text-gray-500 hover:text-gray-700",children:"×"})]},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nearby Amenities"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{value:k,onChange:e=>w(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),eh(k,C,A,w))},className:"flex-1 border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",placeholder:"Add nearby amenity"}),(0,t.jsx)("button",{type:"button",onClick:()=>eh(k,C,A,w),className:"px-3 py-2 rounded-lg bg-green-700 text-white hover:bg-green-800",children:"Add"})]}),A.length>0&&(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:A.map(e=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>C(A.filter(t=>t!==e)),className:"text-gray-500 hover:text-gray-700",children:"×"})]},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Features"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{value:S,onChange:e=>P(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),eh(S,L,D,P))},className:"flex-1 border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",placeholder:"Add feature"}),(0,t.jsx)("button",{type:"button",onClick:()=>eh(S,L,D,P),className:"px-3 py-2 rounded-lg bg-green-700 text-white hover:bg-green-800",children:"Add"})]}),D.length>0&&(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:D.map(e=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>L(D.filter(t=>t!==e)),className:"text-gray-500 hover:text-gray-700",children:"×"})]},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location Benefits"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{value:T,onChange:e=>I(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),eh(T,R,z,I))},className:"flex-1 border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",placeholder:"Add location benefit"}),(0,t.jsx)("button",{type:"button",onClick:()=>eh(T,R,z,I),className:"px-3 py-2 rounded-lg bg-green-700 text-white hover:bg-green-800",children:"Add"})]}),z.length>0&&(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:z.map(e=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>R(z.filter(t=>t!==e)),className:"text-gray-500 hover:text-gray-700",children:"×"})]},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Images (URLs)"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{value:F,onChange:e=>M(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),eh(F,B,U,M))},className:"flex-1 border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",placeholder:"https://..."}),(0,t.jsx)("button",{type:"button",onClick:()=>eh(F,B,U,M),className:"px-3 py-2 rounded-lg bg-green-700 text-white hover:bg-green-800",children:"Add"})]}),U.length>0&&(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:U.map(e=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>B(U.filter(t=>t!==e)),className:"text-gray-500 hover:text-gray-700",children:"×"})]},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Videos (URLs)"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{value:E,onChange:e=>W(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),eh(E,H,O,W))},className:"flex-1 border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",placeholder:"https://..."}),(0,t.jsx)("button",{type:"button",onClick:()=>eh(E,H,O,W),className:"px-3 py-2 rounded-lg bg-green-700 text-white hover:bg-green-800",children:"Add"})]}),O.length>0&&(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:O.map(e=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded-full",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>H(O.filter(t=>t!==e)),className:"text-gray-500 hover:text-gray-700",children:"×"})]},e))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,t.jsxs)("select",{value:X,onChange:e=>Z(e.target.value),className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",children:[(0,t.jsx)("option",{children:"Active"}),(0,t.jsx)("option",{children:"Sold"}),(0,t.jsx)("option",{children:"Expired"}),(0,t.jsx)("option",{children:"Pending Approval"}),(0,t.jsx)("option",{children:"Rejected"})]})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[(0,t.jsx)("input",{type:"checkbox",checked:$,onChange:e=>ee(e.target.checked)}),"Featured"]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Broker Id (required)"}),(0,t.jsx)("input",{value:es,onChange:e=>en(e.target.value),className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",placeholder:"Mongo ObjectId"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,t.jsx)("textarea",{value:et,onChange:e=>er(e.target.value),rows:2,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",placeholder:"Internal notes"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type"}),(0,t.jsxs)("select",{name:"propertyType",value:y.propertyType,onChange:em,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-600",children:[(0,t.jsx)("option",{children:"Residential"}),(0,t.jsx)("option",{children:"Commercial"}),(0,t.jsx)("option",{children:"Industrial"}),(0,t.jsx)("option",{children:"Land"})]})]}),(0,t.jsxs)("div",{className:"pt-2 flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 rounded-lg border text-gray-700",disabled:m,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-green-700 text-white hover:bg-green-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:m,children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Adding..."]}):"Add"})]})]})]})})]})})}}]);