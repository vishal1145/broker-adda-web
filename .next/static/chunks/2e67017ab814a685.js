(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,57382,e=>{"use strict";e.s(["default",()=>a]);var t=e.i(76159),l=e.i(56709);let r=e=>{let{className:l,style:r}=e;return(0,t.jsxs)("svg",{width:"120",height:"60",viewBox:"0 0 120 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:l,style:r,children:[(0,t.jsx)("circle",{cx:"10",cy:"20",r:"5",fill:"#E5E7EB",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"25",cy:"10",r:"5",fill:"#E5E7EB",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"40",cy:"25",r:"5",fill:"#E5E7EB",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"60",cy:"15",r:"5",fill:"#E5E7EB",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"80",cy:"30",r:"5",fill:"#E5E7EB",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"100",cy:"20",r:"5",fill:"#E5E7EB",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"20",cy:"40",r:"5",fill:"#E5E7EB",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"35",cy:"50",r:"5",fill:"#E5E7EB",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"55",cy:"40",r:"5",fill:"#E5E7EB",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"75",cy:"50",r:"5",fill:"#E5E7EB",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"15",cy:"30",r:"5",fill:"#E5E7EB",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"30",cy:"20",r:"5",fill:"#E5E7EB",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"50",cy:"10",r:"5",fill:"#E5E7EB",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"65",cy:"35",r:"5",fill:"#E5E7EB",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"90",cy:"40",r:"5",fill:"#E5E7EB",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"110",cy:"30",r:"5",fill:"#E5E7EB",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"5",cy:"50",r:"5",fill:"#E5E7EB",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"45",cy:"55",r:"5",fill:"#E5E7EB",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"70",cy:"45",r:"5",fill:"#E5E7EB",opacity:"0.5"}),(0,t.jsx)("circle",{cx:"100",cy:"55",r:"5",fill:"#E5E7EB",opacity:"0.5"})]})},a=e=>{var a;let{data:s}=e;return(0,t.jsx)("div",{className:"bg-gray-50 py-10 w-screen relative left-1/2 -translate-x-1/2 overflow-x-hidden -mt-5 md:-mt-2",children:(0,t.jsxs)("div",{className:"relative  mx-auto flex flex-col items-center text-center",children:[(0,t.jsx)("div",{className:"absolute left-30 top-12",children:(0,t.jsx)(r,{})}),(0,t.jsx)("div",{className:"absolute right-30 bottom-12",children:(0,t.jsx)(r,{})}),(0,t.jsx)("h1",{className:"text-3xl font-medium text-gray-900 mb-2",children:s.title}),s.description&&(0,t.jsx)("p",{className:"text-base text-gray-600 mb-2 max-w-2xl px-4",children:s.description}),(null==(a=s.breadcrumb)?void 0:a.length)>0&&(0,t.jsx)("div",{className:"flex justify-center items-center gap-2 text-gray-500 text-base",children:s.breadcrumb.map((e,r)=>(0,t.jsxs)(l.default.Fragment,{children:[(0,t.jsx)("a",{href:e.href,className:"hover:underline",children:e.label}),r<s.breadcrumb.length-1&&(0,t.jsx)("span",{className:"mx-1",children:"/"})]},e.label))})]})})}},66314,e=>{"use strict";e.s(["default",()=>a]);var t=e.i(56709),l=e.i(33476),r=e.i(81652);let a=e=>{let{children:a,requiredRole:s=null}=e,{user:i,loading:c,isAuthenticated:n,isBroker:o,isCustomer:d}=(0,r.useAuth)(),x=(0,l.useRouter)();return((0,t.useEffect)(()=>{if(c)return;let e=setTimeout(()=>{if(n()&&("broker"!==s||o())&&"customer"===s&&!d())return},100);return()=>clearTimeout(e)},[i,c,n,o,d,s,x]),!c&&n()&&("broker"!==s||o())&&("customer"!==s||d()))?a:null}},81633,e=>{"use strict";e.s(["default",()=>i]);var t=e.i(76159),l=e.i(56709);e.i(81472);var r=e.i(33476),a=e.i(57382),s=e.i(66314);let i=()=>{(0,r.useRouter)();let[e,i]=(0,l.useState)([]),[c,n]=(0,l.useState)(!0),[o,d]=(0,l.useState)("");(0,l.useEffect)(()=>{x()},[]);let x=async()=>{try{var e,t;n(!0),d("");let l=localStorage.getItem("token")||localStorage.getItem("authToken"),r={"Content-Type":"application/json",...l?{Authorization:"Bearer ".concat(l)}:{}},a=await fetch("".concat("https://broker-adda-be.fly.dev/api","/chats"),{method:"GET",headers:r});if(!a.ok)throw Error("Failed to fetch connections");let s=await a.json(),c=[];Array.isArray(null==s?void 0:s.data)?c=s.data:Array.isArray(null==s?void 0:s.connections)?c=s.connections:Array.isArray(null==s?void 0:s.chats)?c=s.chats:(null==s||null==(e=s.data)?void 0:e.chats)&&Array.isArray(s.data.chats)?c=s.data.chats:(null==s||null==(t=s.data)?void 0:t.connections)&&Array.isArray(s.data.connections)&&(c=s.data.connections),i(c)}catch(e){d("Failed to load connections. Please try again.")}finally{n(!1)}};return(0,t.jsxs)(s.default,{children:[(0,t.jsx)(a.default,{data:{title:"Connections",breadcrumb:[{label:"Home",href:"/"},{label:"Connections",href:"/create-connection"}]}}),(0,t.jsx)("div",{className:"min-h-screen bg-white py-16",children:(0,t.jsxs)("div",{className:" mx-auto px-4",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"font-archivo text-[24px] leading-[36px] font-bold text-[#171A1FFF] mb-2",children:"My Connections"}),(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-normal text-[#565D6DFF]",children:"Manage and view all your broker connections in one place."})]}),!c&&!o&&e.length>0&&(0,t.jsx)("div",{className:"mb-6 flex items-center gap-2",children:(0,t.jsxs)("div",{className:"px-4 py-2 bg-green-50 border border-green-200 rounded-lg",children:[(0,t.jsx)("span",{className:"text-[14px] font-semibold text-green-900",children:e.length}),(0,t.jsx)("span",{className:"text-[12px] font-normal text-green-700 ml-1",children:1===e.length?"Connection":"Connections"})]})}),c&&(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(e=>(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] animate-pulse",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsx)("div",{className:"w-14 h-14 bg-gray-200 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-24"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-full"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]})]},e))}),!c&&o&&(0,t.jsxs)("div",{className:"bg-white border border-red-200 rounded-xl p-8 text-center shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F]",children:[(0,t.jsxs)("div",{className:"text-red-600 mb-4",children:[(0,t.jsx)("svg",{className:"w-16 h-16 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,t.jsx)("p",{className:"text-[16px] font-semibold text-gray-900 mb-1",children:o}),(0,t.jsx)("p",{className:"text-[14px] text-gray-600",children:"Please check your connection and try again."})]}),(0,t.jsx)("button",{onClick:x,className:"px-6 py-2.5 bg-[#0D542B] text-white rounded-xl hover:bg-[#0B4624] transition-colors text-[14px] font-semibold shadow-sm",children:"Try Again"})]}),!c&&!o&&0===e.length&&(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-12 text-center shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F]",children:[(0,t.jsx)("div",{className:"text-gray-300 mb-6",children:(0,t.jsx)("svg",{className:"w-20 h-20 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,t.jsx)("h3",{className:"text-[18px] font-semibold text-gray-900 mb-2",children:"No connections found"}),(0,t.jsx)("p",{className:"text-[14px] text-gray-600 max-w-md mx-auto",children:"You don't have any connections yet. Start building your network by connecting with other brokers."})]}),!c&&!o&&e.length>0&&(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e,l)=>{let r=(e=>{var t;let l=(null==e||null==(t=e.participants)?void 0:t[0])||(null==e?void 0:e.participant)||(null==e?void 0:e.broker)||e;return{name:(null==l?void 0:l.name)||(null==l?void 0:l.fullName)||(null==l?void 0:l.email)||"Unknown",firmName:(null==l?void 0:l.firmName)||(null==l?void 0:l.companyName)||(null==l?void 0:l.firm)||"",status:(null==l?void 0:l.status)||(null==e?void 0:e.status)||"Active",brokerImage:(null==l?void 0:l.brokerImage)||(null==l?void 0:l.profileImage)||(null==l?void 0:l.image)||null,email:(null==l?void 0:l.email)||"",brokerId:(null==l?void 0:l._id)||(null==l?void 0:l.id)||(null==l?void 0:l.userId)||""}})(e),a=(null==e?void 0:e._id)||(null==e?void 0:e.id)||(null==e?void 0:e.chatId)||l,s=(e=>{let t=[{bg:"bg-sky-100",text:"text-sky-800"},{bg:"bg-emerald-100",text:"text-emerald-800"},{bg:"bg-violet-100",text:"text-violet-800"}],l=String(e||""),r=0;for(let e=0;e<l.length;e++)r=31*r+l.charCodeAt(e)>>>0;return t[r%t.length]})(r.name);return(0,t.jsxs)("div",{className:"group bg-white border border-gray-200 rounded-xl overflow-hidden shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] hover:shadow-[0_4px_12px_rgba(0,0,0,0.08)] transition-all duration-200 ".concat(r.brokerId?"cursor-pointer":"cursor-default"),children:[(0,t.jsxs)("div",{className:"relative w-full h-64 bg-gray-100",children:[r.brokerImage?(0,t.jsx)("img",{src:r.brokerImage,alt:r.name,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.nextElementSibling.style.display="flex"}}):null,(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center text-4xl font-semibold ".concat(s.bg," ").concat(s.text," ").concat(r.brokerImage?"hidden":""),children:(e=>{if(!e)return"N";let t=e.trim().split(" ");return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():e.charAt(0).toUpperCase()})(r.name)}),("Verified"===r.status||"Active"===r.status)&&(0,t.jsx)("div",{className:"absolute bottom-3 right-3 w-4 h-4 rounded-full bg-green-500 border-2 border-white"})]}),(0,t.jsxs)("div",{className:"p-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-0 mb-2",children:[(0,t.jsx)("h3",{className:"text-[16px] font-semibold text-[#171A1F]",children:r.name}),(0,t.jsx)("svg",{className:"w-4 h-4 text-green-600 rotate-45 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})]}),r.firmName&&(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)("svg",{className:"w-4 h-4 text-[#565D6D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,t.jsx)("p",{className:"text-[14px] font-normal text-[#171A1F]",children:r.firmName})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4 text-[#565D6D]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),(0,t.jsx)("span",{className:"text-[13px] font-normal text-[#565D6D]",children:"Verified"===r.status?"Verified Broker":r.status})]})]})]},a)})})]})})]})}}]);