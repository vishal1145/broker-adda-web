(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90914,e=>{"use strict";e.s(["default",()=>s]);var t=e.i(43476),r=e.i(71645),o=e.i(18566),i=e.i(68413);let s=e=>{let{children:s,requiredRole:n=null}=e,{user:l,loading:c,isAuthenticated:u,isBroker:d,isCustomer:a}=(0,i.useAuth)(),g=(0,o.useRouter)();return((0,r.useEffect)(()=>{if(!c){if(!u()){console.log("ProtectedRoute: User not authenticated, redirecting to login"),g.push("/login");return}if("broker"===n&&!d()){console.log("ProtectedRoute: User is not a broker, redirecting to login"),g.push("/login");return}if("customer"===n&&!a()){console.log("ProtectedRoute: User is not a customer, redirecting to login"),g.push("/login");return}}},[l,c,u,d,a,n,g]),c)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):u()&&("broker"!==n||d())&&("customer"!==n||a())?s:null}}]);