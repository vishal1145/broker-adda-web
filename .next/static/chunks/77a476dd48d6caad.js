(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,98420,e=>{"use strict";e.s(["default",()=>p],98420);var r=e.i(43476),s=e.i(71645),a=e.i(55613),t=e.i(5766),l=e.i(18566),o=e.i(90914),n=e.i(88773),i=e.i(68413);function d(){var e;let{user:a}=(0,i.useAuth)(),t=(0,l.useRouter)(),[o,n]=(0,s.useState)(null),[d,c]=(0,s.useState)(!0),[m,u]=(0,s.useState)(""),[x,h]=(0,s.useState)({open:!1,src:"",type:""}),g=e=>{if(!e||"string"!=typeof e)return e;if(e.startsWith("/opt/lampp/htdocs/")){let r=e.split("/").pop();return"https://broker-adda-be.algofolks.com/uploads/".concat(r)}return e.startsWith("/uploads/")?"https://broker-adda-be.algofolks.com".concat(e):e};(0,s.useEffect)(()=>{(async()=>{try{var e;c(!0),u("");let r=null==a?void 0:a.userId,s=(null==a?void 0:a.token)||localStorage.getItem("token")||localStorage.getItem("authToken");if(!r)return void c(!1);let t=await fetch("".concat("https://broker-adda-be.algofolks.com/api","/brokers/").concat(encodeURIComponent(String(r))),{headers:{"Content-Type":"application/json",...s?{Authorization:"Bearer ".concat(s)}:{}}});if(!t.ok)throw Error("Failed to load broker");let l=await t.json(),o=(null==l||null==(e=l.data)?void 0:e.broker)||(null==l?void 0:l.broker)||(null==l?void 0:l.data)||l;n(o||null)}catch(e){u("Failed to load profile")}finally{c(!1)}})()},[null==a?void 0:a.userId,null==a?void 0:a.token]);let p=(0,s.useMemo)(()=>{var e,r,s,a,t,l,n,i,d,c,m,u,x,h,p,b;let f=e=>"string"==typeof e&&e.trim().length>0&&"null"!==e&&"undefined"!==e,v=function(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return r.find(f)||""},y=Array.isArray(null==o?void 0:o.region)?o.region:[],j=v(null==o?void 0:o.createdAt,null==o?void 0:o.joinedAt),w=j?new Date(j):null;return{name:v(null==o?void 0:o.name,null==o?void 0:o.fullName,"Unknown"),firm:v(null==o?void 0:o.firmName),status:v(null==o?void 0:o.status,"Active"),joinedDateFormatted:w?w.toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"}):"",license:v(null==o?void 0:o.licenseNumber),regions:y.map(e=>"string"==typeof e?e:(null==e?void 0:e.name)||""),gender:v(null==o?void 0:o.gender),image:v(null==o?void 0:o.brokerImage,null==o?void 0:o.profileImage,null==o?void 0:o.image,"/images/user-1.webp"),phone:v(null==o?void 0:o.phone,null==o||null==(e=o.userId)?void 0:e.phone,null==o?void 0:o.mobile),whatsapp:v(null==o?void 0:o.whatsappNumber,null==o?void 0:o.whatsapp),email:v(null==o?void 0:o.email,null==o||null==(r=o.userId)?void 0:r.email),address:v(null==o?void 0:o.address,null==o?void 0:o.officeAddress),website:v(null==o?void 0:o.website),socials:{linkedin:v(null==o||null==(s=o.socialMedia)?void 0:s.linkedin,null==o?void 0:o.linkedin),twitter:v(null==o||null==(a=o.socialMedia)?void 0:a.twitter,null==o?void 0:o.twitter,null==o?void 0:o.x),instagram:v(null==o||null==(t=o.socialMedia)?void 0:t.instagram,null==o?void 0:o.instagram),facebook:v(null==o||null==(l=o.socialMedia)?void 0:l.facebook,null==o?void 0:o.facebook)},docs:{aadhar:g(v(null==o||null==(n=o.kycDocs)?void 0:n.aadhar,null==o||null==(i=o.documents)?void 0:i.aadhar,null==o?void 0:o.aadharCard)),pan:g(v(null==o||null==(d=o.kycDocs)?void 0:d.pan,null==o||null==(c=o.documents)?void 0:c.pan,null==o?void 0:o.panCard)),gst:g(v(null==o||null==(m=o.kycDocs)?void 0:m.gst,null==o||null==(u=o.documents)?void 0:u.gst,null==o?void 0:o.gstCertificate)),license:g(v(null==o||null==(x=o.kycDocs)?void 0:x.brokerLicense,null==o||null==(h=o.documents)?void 0:h.brokerLicense,null==o?void 0:o.brokerLicense)),companyId:g(v(null==o||null==(p=o.kycDocs)?void 0:p.companyId,null==o||null==(b=o.documents)?void 0:b.companyId,null==o?void 0:o.companyId))}}},[o]);return(0,r.jsxs)("div",{className:"w-full mx-auto",children:[(0,r.jsx)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm mb-6 p-6",children:d?(0,r.jsxs)("div",{className:"animate-pulse flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-200"}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 rounded w-64"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex items-center justify-end mb-4",children:(0,r.jsxs)("button",{type:"button",onClick:()=>t.push("/profile?mode=edit"),className:"inline-flex items-center gap-2 px-3.5 py-1.5 rounded-lg text-white bg-green-600 hover:bg-green-700 text-xs font-medium",children:[(0,r.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,r.jsx)("img",{src:p.image,alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-base font-semibold text-gray-900",children:p.name}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:p.firm||"-"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-6 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-500",children:"Firm"}),(0,r.jsx)("div",{className:"text-gray-900",children:p.firm||"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-500",children:"Gender"}),(0,r.jsx)("div",{className:"text-gray-900",children:p.gender||"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-500",children:"Status"}),(0,r.jsx)("div",{className:"inline-flex items-center gap-2 text-green-700 bg-green-50 border border-green-200 px-2.5 py-0.5 rounded-full",children:p.status||"Active"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-500",children:"Joined Date"}),(0,r.jsx)("div",{className:"text-gray-900",children:p.joinedDateFormatted||"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-500",children:"License"}),(0,r.jsx)("div",{className:"text-gray-900",children:p.license||"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-500",children:"Regions"}),(0,r.jsx)("div",{className:"text-gray-900",children:(null==(e=p.regions)?void 0:e.length)?p.regions.join(", "):"-"})]}),(0,r.jsxs)("div",{className:"md:col-span-3 lg:col-span-6",children:[(0,r.jsx)("div",{className:"text-gray-500 mb-1",children:"Specializations"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:Array.isArray(null==o?void 0:o.specializations)&&o.specializations.length>0?o.specializations.map(e=>(0,r.jsx)("span",{className:"px-2.5 py-1 rounded-full bg-gray-50 border border-gray-200 text-xs text-gray-800",children:e},e)):(0,r.jsx)("span",{className:"px-2.5 py-1 rounded-full bg-gray-50 border border-gray-200 text-xs text-gray-800",children:"-"})})]})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-7 bg-white rounded-2xl border border-gray-200 shadow-sm p-6",children:[(0,r.jsx)("div",{className:"text-base font-semibold text-gray-900 mb-4",children:"Contact Details"}),(0,r.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("span",{className:"w-6 h-6 rounded bg-gray-100 border border-gray-200 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-3.5 h-3.5 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,r.jsx)("path",{d:"M22 16.92V21a2 2 0 01-2.18 2A19.86 19.86 0 013 5.18 2 2 0 015 3h4.09a1 1 0 01.95.68l1.1 3a1 1 0 01-.27 1.11L9.91 9.91a16 16 0 006.18 6.18l2.12-2.12a1 1 0 011.11-.27l3 1.1a1 1 0 01.68.95z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-500",children:"Mobile"}),(0,r.jsx)("div",{className:"text-gray-900",children:p.phone||"-"})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("span",{className:"w-6 h-6 rounded bg-gray-100 border border-gray-200 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-3.5 h-3.5 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,r.jsx)("path",{d:"M21.5 13.5a4.5 4.5 0 01-6 4.24L9 20l2.26-6.5A4.5 4.5 0 1115 8.5"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-500",children:"WhatsApp"}),(0,r.jsx)("div",{className:"text-gray-900",children:p.whatsapp||"-"})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("span",{className:"w-6 h-6 rounded bg-gray-100 border border-gray-200 flex items-center justify-center",children:(0,r.jsxs)("svg",{className:"w-3.5 h-3.5 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("path",{d:"M4 4h16v16H4z"}),(0,r.jsx)("path",{d:"M22 6l-10 7L2 6"})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-500",children:"Email"}),(0,r.jsx)("div",{className:"text-gray-900 break-all",children:p.email||"-"})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("span",{className:"w-6 h-6 rounded bg-gray-100 border border-gray-200 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-3.5 h-3.5 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,r.jsx)("path",{d:"M3 10l9-7 9 7v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-500",children:"Office Address"}),(0,r.jsx)("div",{className:"text-gray-900",children:p.address||"-"})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("span",{className:"w-6 h-6 rounded bg-gray-100 border border-gray-200 flex items-center justify-center",children:(0,r.jsxs)("svg",{className:"w-3.5 h-3.5 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("path",{d:"M12 2a10 10 0 100 20 10 10 0 000-20z"}),(0,r.jsx)("path",{d:"M2 12h20M12 2a15.3 15.3 0 010 20"})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-500",children:"Website"}),(0,r.jsx)("div",{className:"text-green-700",children:p.website?(0,r.jsx)("a",{href:p.website,target:"_blank",rel:"noreferrer",className:"underline",children:p.website}):"-"})]})]})]}),(p.socials.linkedin||p.socials.twitter||p.socials.instagram||p.socials.facebook)&&(0,r.jsxs)("div",{className:"mt-4 flex items-center gap-3 text-gray-600",children:[p.socials.linkedin&&(0,r.jsx)("a",{href:p.socials.linkedin,target:"_blank",rel:"noreferrer","aria-label":"LinkedIn",className:"hover:text-gray-900",children:(0,r.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M4.98 3.5C4.98 4.88 3.86 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1 4.98 2.12 4.98 3.5zM.5 8h4V24h-4zM8.5 8h3.8v2.2h.05c.53-1 1.83-2.2 3.77-2.2 4.03 0 4.78 2.65 4.78 6.1V24h-4v-6.9c0-1.65-.03-3.77-2.3-3.77-2.3 0-2.65 1.79-2.65 3.65V24h-4z"})})}),p.socials.twitter&&(0,r.jsx)("a",{href:p.socials.twitter,target:"_blank",rel:"noreferrer","aria-label":"Twitter",className:"hover:text-gray-900",children:(0,r.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M23 3a10.9 10.9 0 01-3.14 1.53A4.48 4.48 0 0012 7v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"})})}),p.socials.instagram&&(0,r.jsx)("a",{href:p.socials.instagram,target:"_blank",rel:"noreferrer","aria-label":"Instagram",className:"hover:text-gray-900",children:(0,r.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M7 2C4.24 2 2 4.24 2 7v10c0 2.76 2.24 5 5 5h10c2.76 0 5-2.24 5-5V7c0-1.66-1.34-3-3-3h10zm-5 3a5 5 0 100 10 5 5 0 000-10zm0 2a3 3 0 110 6 3 3 0 010-6zm5.5-.75a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0z"})})}),p.socials.facebook&&(0,r.jsx)("a",{href:p.socials.facebook,target:"_blank",rel:"noreferrer","aria-label":"Facebook",className:"hover:text-gray-900",children:(0,r.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M22 12a10 10 0 10-11.5 9.95v-7.04H7.9V12h2.6V9.8c0-2.57 1.53-3.99 3.87-3.99 1.12 0 2.29.2 2.29.2v2.52h-1.29c-1.27 0-1.66.79-1.66 1.6V12h2.83l-.45 2.91h-2.38v7.04C19.55 21.47 22 17.1 22 12z"})})})]})]}),(0,r.jsxs)("div",{className:"lg:col-span-5 bg-white rounded-2xl border border-gray-200 shadow-sm p-6",children:[(0,r.jsx)("div",{className:"text-base font-semibold text-gray-900 mb-4",children:"Documents"}),(0,r.jsx)("div",{className:"divide-y divide-gray-100",children:[{label:"Aadhar Card",value:p.docs.aadhar},{label:"PAN Card",value:p.docs.pan},{label:"GST Certificate",value:p.docs.gst},{label:"Broker License",value:p.docs.license},{label:"Company ID",value:p.docs.companyId}].map(e=>{let{label:s,value:a}=e,t=(e=>{if(!e||"string"!=typeof e)return"-";let r=e.match(/\.([a-zA-Z0-9]+)$/);return(r?r[1]:"-").toUpperCase()})(a),l=!a,o=(()=>{if(!a)return s.replace(/\s+/g,"_");try{let e=new URL(a,window.location.origin).pathname.split("/").pop();if(e&&e.includes("."))return e}catch(e){}return"".concat(s.replace(/\s+/g,"_")).concat("-"!==t?".".concat(t.toLowerCase()):"")})();return(0,r.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex h-7 w-7 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-500",children:(0,r.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,r.jsx)("path",{d:"M7 3h8l4 4v14a2 2 0 01-2 2H7a2 2 0 01-2-2V5a2 2 0 012-2z"})})}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:s}),(0,r.jsx)("span",{className:"ml-2 text-xs px-2 py-0.5 border border-gray-200 rounded bg-gray-50 text-gray-700",children:t})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[l?(0,r.jsxs)("span",{className:"text-sm text-gray-400 flex items-center gap-1.5",children:[(0,r.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,r.jsx)("circle",{cx:"12",cy:"12",r:"3"})]}),"Preview"]}):(0,r.jsxs)("a",{href:a,target:"_blank",rel:"noreferrer",className:"text-sm text-emerald-600 hover:text-emerald-700 flex items-center gap-1.5",children:[(0,r.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,r.jsx)("circle",{cx:"12",cy:"12",r:"3"})]}),"Preview"]}),l?(0,r.jsxs)("span",{className:"text-sm border border-gray-200 px-2.5 py-1.5 rounded-md text-gray-400 flex items-center gap-1.5",children:[(0,r.jsx)("span",{className:"inline-flex items-center justify-center w-4 h-4 rounded border border-gray-300 text-[10px]",children:"D"}),"Download"]}):(0,r.jsxs)("button",{onClick:async()=>{try{let e=await fetch(a),r=await e.blob(),s=window.URL.createObjectURL(r),t=document.createElement("a");t.href=s,t.download=o,document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(s)}catch(r){console.error("Download failed:",r);let e=document.createElement("a");e.href=a,e.download=o,document.body.appendChild(e),e.click(),document.body.removeChild(e)}},className:"text-sm border border-gray-200 px-2.5 py-1.5 rounded-md text-gray-700 hover:bg-gray-50 flex items-center gap-1.5 cursor-pointer",children:[(0,r.jsx)("span",{className:"inline-flex items-center justify-center w-4 h-4 rounded border border-gray-300 text-[10px]",children:"D"}),"Download"]})]})]},s)})})]})]}),m&&(0,r.jsx)("div",{className:"text-xs text-red-600 mt-6",children:m}),x.open&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",onClick:()=>h({open:!1,src:"",type:""}),children:(0,r.jsxs)("div",{className:"bg-white rounded-xl max-w-4xl w-full overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"Preview"}),(0,r.jsx)("button",{className:"text-gray-600 hover:text-gray-900",onClick:()=>h({open:!1,src:"",type:""}),children:"âœ•"})]}),(0,r.jsx)("div",{className:"p-4 max-h-[80vh] overflow-auto",children:"pdf"===x.type?(0,r.jsx)("iframe",{src:x.src,className:"w-full h-[70vh]",title:"Document Preview"}):(0,r.jsx)("img",{src:x.src,alt:"Document",className:"max-h-[70vh] w-auto mx-auto"})})]})})]})}let c=e=>{if(!e||"string"!=typeof e)return e;if(e.startsWith("/opt/lampp/htdocs/")){let r=e.split("/").pop();return"https://broker-adda-be.algofolks.com/uploads/".concat(r)}return e.startsWith("/uploads/")?"https://broker-adda-be.algofolks.com".concat(e):e},m=e=>{if(!e)return!1;if("string"==typeof e)return/\.(png|jpe?g|webp)$/i.test(e);if(e.type)return e.type.startsWith("image/");let r=e.name||"";return/\.(png|jpe?g|webp)$/i.test(r)},u=e=>{if(!e)return!1;if("string"==typeof e)return/\.pdf$/i.test(e);if(e.type)return"application/pdf"===e.type;let r=e.name||"";return/\.pdf$/i.test(r)},x=e=>{if(!e)return null;if("string"==typeof e)return c(e);try{return URL.createObjectURL(e)}catch(e){return null}},h=e=>{if(!e)return null;if("string"==typeof e)return c(e);try{return URL.createObjectURL(e)}catch(e){return null}},g=()=>{var e,g,p,b,f,v,y,j,w,N;let{user:k}=(0,i.useAuth)(),C=(0,l.useRouter)(),F=(null==k?void 0:k.role)||"broker",L=(0,l.useSearchParams)(),[M,A]=(0,s.useState)("create");(0,s.useEffect)(()=>{A((null==L?void 0:L.get("mode"))||"create")},[L]);let P="view"===M,[I,S]=(0,s.useState)(1),z="broker"===F?4:2,[D,B]=(0,s.useState)({name:"",email:"",phone:"",firmName:"",regions:[],aadharFile:null,panFile:null,gstFile:null,brokerLicenseFile:null,companyIdFile:null,brokerImage:null,licenseNumber:"",officeAddress:"",experience:"",about:"",address:"",city:"",state:"",linkedin:"",twitter:"",instagram:"",facebook:"",whatsapp:"",website:"",specializations:[],gender:"",dateOfBirth:"",location:null}),[E,W]=(0,s.useState)({name:"",email:"",phone:"",budgetMin:"",budgetMax:"",propertyType:[],inquiryCount:0,customerImage:null,gender:"",dateOfBirth:""}),[V,R]=(0,s.useState)(!1),[H,T]=(0,s.useState)([]),[U,_]=(0,s.useState)(!1),[O,K]=(0,s.useState)(""),[q,G]=(0,s.useState)(!0),[$,Y]=(0,s.useState)({latitude:null,longitude:null}),[J,Q]=(0,s.useState)([]),[Z,X]=(0,s.useState)(!1),[ee,er]=(0,s.useState)(""),[es,ea]=(0,s.useState)([{value:"uttar-pradesh",label:"Uttar Pradesh"}]),[et,el]=(0,s.useState)([]),[eo,en]=(0,s.useState)(null),[ei,ed]=(0,s.useState)(null),[ec,em]=(0,s.useState)(!0),[eu,ex]=(0,s.useState)(!1),[eh,eg]=(0,s.useState)(null),[ep,eb]=(0,s.useState)([]),[ef,ev]=(0,s.useState)(!1),ey=(0,s.useRef)(null),[ej,ew]=(0,s.useState)(""),[eN,ek]=(0,s.useState)(""),[eC,eF]=(0,s.useState)(!1),[eL]=(0,s.useState)(["apartment","commercial","plot","villa","house"]),[eM]=(0,s.useState)(["Residential Sales","Commercial Leasing","Luxury Homes","Investment Properties","Rental Properties","Land Development","Property Management","Real Estate Consulting"]);(0,s.useEffect)(()=>{(()=>{if(window.google&&window.google.maps&&window.google.maps.places)return ex(!0);let e=document.querySelector('script[src*="maps.googleapis.com"]');if(e){e.onload=()=>ex(!0);return}let r=document.createElement("script");r.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyA5Lb-4aPQwchmojJe4IpblpreNOjxHFMc","&libraries=places"),r.async=!0,r.defer=!0,r.onload=()=>{ex(!0)},r.onerror=e=>{t.default.error("Failed to load address autocomplete. Please check your API key.")},document.head.appendChild(r)})()},[]),(0,s.useEffect)(()=>()=>{ey.current&&clearTimeout(ey.current)},[]),(0,s.useEffect)(()=>{"customer"===F&&E.budgetMin&&E.budgetMax?parseFloat(E.budgetMin)>parseFloat(E.budgetMax)?ew("Minimum budget cannot be greater than maximum budget"):ew(""):"customer"===F&&ew("")},[E.budgetMin,E.budgetMax,F]),(0,s.useEffect)(()=>{(async()=>{if(!q)return;let{latitude:e,longitude:r}=$||{};e&&r&&await eA(e,r,5)})()},[q]),(0,s.useEffect)(()=>{q&&(null==$?void 0:$.latitude)&&(null==$?void 0:$.longitude)&&eA($.latitude,$.longitude,5)},[null==$?void 0:$.latitude,null==$?void 0:$.longitude]),(0,s.useEffect)(()=>{(async()=>{if(2!==I||"broker"!==F||!q)return;let{latitude:e,longitude:r}=$||{};try{if((!e||!r)&&eh&&eh.placeId&&window.google&&window.google.maps){let s=new window.google.maps.places.PlacesService(document.createElement("div"));await new Promise(a=>{s.getDetails({placeId:eh.placeId},(s,t)=>{t===window.google.maps.places.PlacesServiceStatus.OK&&s&&s.geometry&&s.geometry.location&&(e=s.geometry.location.lat(),r=s.geometry.location.lng(),Y({latitude:e,longitude:r})),a()})})}if((!e||!r)&&window.google&&window.google.maps){let s=eo?eo.label||eo.value:"",a=[ei?ei.label||ei.value:"",s].filter(Boolean).join(", ");if(a){let s=new window.google.maps.Geocoder;await new Promise(t=>{s.geocode({address:a},(s,a)=>{"OK"===a&&s&&s[0]&&s[0].geometry&&s[0].geometry.location&&(e=s[0].geometry.location.lat(),r=s[0].geometry.location.lng(),Y({latitude:e,longitude:r})),t()})})}}e&&r&&await eA(e,r,5)}catch(e){}})()},[I,q]),(0,s.useEffect)(()=>{let e=async()=>{if(q&&(!$.latitude||!$.longitude)&&D&&D.location&&D.location.coordinates&&Array.isArray(D.location.coordinates)&&D.location.coordinates.length>=2){let[e,r]=D.location.coordinates;e&&r&&(Y({latitude:e,longitude:r}),await eA(e,r,5))}};$.latitude||$.longitude||!q||e()},[q,$.latitude,$.longitude,D]);let eA=async function(e,r){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(e&&r)try{var a;X(!0),er("");let t="".concat("https://broker-adda-be.algofolks.com/api","/regions/nearest?latitude=").concat(encodeURIComponent(e),"&longitude=").concat(encodeURIComponent(r),"&limit=").concat(encodeURIComponent(s)),l=await fetch(t,{headers:{"Content-Type":"application/json",...(null==k?void 0:k.token)?{Authorization:"Bearer ".concat(k.token)}:{}}});if(!l.ok)throw Error("Failed");let o=await l.json(),n=[];(null==o?void 0:o.success)&&Array.isArray(null==o||null==(a=o.data)?void 0:a.regions)?n=o.data.regions:Array.isArray(o)?n=o:Array.isArray(null==o?void 0:o.data)?n=o.data:Array.isArray(null==o?void 0:o.regions)?n=o.regions:(null==o?void 0:o._id)&&(null==o?void 0:o.name)&&(n=[o]),Q(Array.isArray(n)?n:[])}catch(e){er("Error loading nearest regions"),Q([])}finally{X(!1)}};(0,s.useEffect)(()=>{(null==k?void 0:k.phone)&&("customer"===k.role?W(e=>({...e,phone:k.phone})):B(e=>({...e,phone:k.phone})))},[k]),(0,s.useEffect)(()=>{let e=async()=>{try{let u;if(!(null==k?void 0:k.token))return void em(!1);let x=k.role||"broker";if("customer"===x){let e=k.userId;if(e)u=await fetch("".concat("https://broker-adda-be.algofolks.com/api","/customers/").concat(e),{headers:{Authorization:"Bearer ".concat(k.token),Accept:"application/json"}});else{t.default.error("Customer ID not found in token"),em(!1);return}}else{let e=k.userId;if(e){let r="".concat("https://broker-adda-be.algofolks.com/api","/brokers/").concat(e);u=await fetch(r,{headers:{Authorization:"Bearer ".concat(k.token),"Content-Type":"application/json",Accept:"application/json"}})}else{t.default.error("Broker ID not found in token"),em(!1);return}}if(u.ok){var e,r,s,a,l,o,n,i,d,m;let t=await u.json();if("customer"===x){let a=(null==(e=t.data)?void 0:e.customer)||t.data||t,l=c((null==(r=a.images)?void 0:r.customerImage)||(null==(s=a.files)?void 0:s.customerImage)||a.customerImage||null),o=a.preferences||{},n=o.budgetMin||"",i=o.budgetMax||"",d=o.propertyType||[],m=o.region||[],u=a.gender||E.gender||"";W(e=>({...e,name:a.name||e.name,email:a.email||e.email,phone:a.phone||e.phone,budgetMin:n,budgetMax:i,propertyType:d,regions:m,inquiryCount:a.inquiryCount||e.inquiryCount,customerImage:l,gender:u}))}else{let e;e=t.data?t.data.broker||t.data:t;let r=[];e.region&&Array.isArray(e.region)?r=e.region:e.regions&&Array.isArray(e.regions)&&(r=e.regions);let s=e.name||(null==(a=e.userId)?void 0:a.name)||D.name,u=e.email||(null==(l=e.userId)?void 0:l.email)||D.email,x=e.phone||(null==(o=e.userId)?void 0:o.phone)||D.phone,h=e.firmName||D.firmName,g=e.address||D.address||"",p=e.gender||D.gender||"",b=e.city||D.city||"",f=e.licenseNumber||D.licenseNumber||"",v=("object"==typeof e.experience&&null!==e.experience?null!=(d=e.experience.years)?d:"":null!=(m=e.experience)?m:"")||D.experience||"",y=e.content||e.about||D.about||"",j=e.address||e.officeAddress||D.officeAddress||"",w=e.specializations||D.specializations||[],N=e.state||D.state||"",k=e.socialMedia||{},C=k.linkedin||D.linkedin||"",F=k.twitter||D.twitter||"",L=k.instagram||D.instagram||"",M=k.facebook||D.facebook||"",A=e.whatsappNumber||D.whatsapp||"",P=e.website||D.website||"",I=e.kycDocs||{},S=I.aadhar||null,z=I.pan||null,E=I.gst||null,W=I.brokerLicense||null,V=I.companyId||null,R=c(e.brokerImage||(null==(n=e.userId)?void 0:n.profileImage)||(null==(i=e.personalInfo)?void 0:i.profileImage)||null),H=e.location||null;if(B(e=>({...e,name:s,email:u,phone:x,firmName:h,address:g,gender:p,city:b,licenseNumber:f,experience:v,about:y,officeAddress:j,specializations:w,state:N,linkedin:C,twitter:F,instagram:L,facebook:M,whatsapp:A,website:P,regions:r,aadharFile:S,panFile:z,gstFile:E,brokerLicenseFile:W,companyIdFile:V,brokerImage:R,location:H})),j){let e={value:j,label:j};eb(r=>r.some(e=>e.value===j)?r:[...r,e]),eg(e)}else eg(null);if(N){let e=es.find(e=>e.value===N.toLowerCase().replace(/\s+/g,"-"));e&&(en(e),eD(e.value))}b&&setTimeout(()=>{let e=et.find(e=>e.value===b.toLowerCase().replace(/\s+/g,"-"));if(e)ed(e),eB(e.value);else{let e={value:b.toLowerCase().replace(/\s+/g,"-"),label:b};ed(e),eB(e.value)}},100)}}else{let e=await u.json().catch(()=>({message:"Unknown error"}));401===u.status?t.default.error("Authentication failed. Please login again."):404===u.status?t.default.error("".concat("customer"===x?"Customer":"Broker"," profile not found.")):u.status>=500?t.default.error("Server error. Please try again later."):t.default.error(e.message||"Failed to load ".concat(x," profile data"))}}catch(e){"TypeError"===e.name&&e.message.includes("fetch")?t.default.error("Network error. Please check your connection and try again."):t.default.error("Error loading ".concat(currentUserRole," profile data: ").concat(e.message))}finally{em(!1)}};F&&(null==k?void 0:k.token)&&e()},[F,k]);let eP=e=>{let{name:r,value:s}=e.target;"email"===r&&ek(""),"customer"===F?W(e=>({...e,[r]:s})):B(e=>({...e,[r]:s}))},eI=e=>{let{name:r,files:s}=e.target;"customer"===F?W(e=>({...e,[r]:s[0]||null})):B(e=>({...e,[r]:s[0]||null}))},[eS,ez]=(0,s.useState)(!1);(0,s.useEffect)(()=>{Array.isArray(null==D?void 0:D.regions)&&D.regions.length>0&&ez(!0)},[null==D?void 0:D.regions]);let eD=e=>{let r=[];"uttar-pradesh"===e&&(r=[{value:"noida",label:"Noida"},{value:"agra",label:"Agra"}]),el(r)},eB=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{_(!0),K("");let r="".concat("https://broker-adda-be.algofolks.com/api","/regions");e&&(r+="?city=".concat(e));let s=await fetch(r,{headers:{Authorization:"Bearer ".concat(null==k?void 0:k.token)}});if(s.ok){let e=await s.json(),r=[];e.success&&e.data&&Array.isArray(e.data.regions)?r=e.data.regions:Array.isArray(e)?r=e:e.data&&Array.isArray(e.data)?r=e.data:e.regions&&Array.isArray(e.regions)?r=e.regions:e._id&&e.name&&(r=[e]),T(r)}else K("Failed to load regions"),T([])}catch(e){K("Error loading regions"),T([])}finally{_(!1)}},eE=async e=>{try{let r=(null==k?void 0:k.userId)||(null==k?void 0:k._id)||"",s=await fetch("".concat("https://broker-adda-be.algofolks.com/api","/auth/check-email?email=").concat(encodeURIComponent(e),"&userId=").concat(encodeURIComponent(r)),{method:"GET",headers:{"Content-Type":"application/json"}}),a=await s.json();if(a.success&&a.data&&!0===a.data.exists)return{exists:!0,message:a.data.message||"Email is already in use"};return{exists:!1,message:""}}catch(e){return{exists:!1,message:"Error checking email. Please try again."}}},eW=async()=>{if(1===I){let e="customer"===F?E:D;if(e.email){eF(!0),ek("");try{let r=await eE(e.email);if(r.exists){ek(r.message),eF(!1);return}}catch(e){ek("Error checking email. Please try again."),eF(!1);return}eF(!1)}}I<z&&("broker"===F&&3===I&&Array.isArray(null==D?void 0:D.regions)&&D.regions.length>0&&ez(!0),S(I+1))},eV=e=>{let r="customer"===F?E:D;switch(e){case 1:return r.name&&r.email&&r.phone&&r.gender&&("broker"!==F||!!r.firmName)&&!eN;case 2:if("broker"===F)return!!r.licenseNumber&&!!r.officeAddress;if(r.budgetMin&&r.budgetMax)return parseFloat(r.budgetMin)<=parseFloat(r.budgetMax);return!0;case 3:if("broker"===F){let e=Array.isArray(r.regions)&&r.regions.length>0;if(q)return e;return!!r.state&&!!r.city&&e}return!0;default:return!0}};return P?(0,r.jsxs)(o.default,{children:[(0,r.jsx)("link",{rel:"stylesheet",href:"/google-places.css"}),(0,r.jsx)(t.Toaster,{position:"top-right"}),(0,r.jsx)(n.default,{data:{title:"customer"===F?"Customer Profile":"Broker Profile",breadcrumb:[{label:"Home",href:"/"},{label:"Profile",href:"/profile"}]}}),(0,r.jsx)("div",{className:"min-h-screen bg-white py-12",children:(0,r.jsx)(d,{})})]}):(0,r.jsxs)(o.default,{children:[(0,r.jsx)("link",{rel:"stylesheet",href:"/google-places.css"}),(0,r.jsx)(t.Toaster,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#4ade80",secondary:"#fff"}},error:{duration:4e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}}),(0,r.jsx)(n.default,{data:{title:"customer"===F?"Customer Profile":"Broker Profile",breadcrumb:[{label:"Home",href:"/"},{label:"Profile",href:"/profile"}]}}),(0,r.jsx)("div",{className:"min-h-screen bg-white py-12",children:(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("div",{className:"text-left mb-12 ",children:(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h1",{className:"text-4xl font-display text-gray-900 mb-2",children:P?"customer"===F?"Customer Profile":"Broker Profile":"create"===M?"customer"===F?"Create Customer Profile":"Create Broker Profile":"customer"===F?"Edit Customer Profile":"Edit Broker Profile"}),(0,r.jsx)("p",{className:"text-sm font-body text-gray-600 text-left",children:P?"View your profile information":"create"===M?"Complete your profile to get started with ".concat("customer"===F?"finding your dream property":"connecting with potential clients"):"Update your profile information and preferences"})]}),P&&(0,r.jsx)("div",{className:"flex-shrink-0 ml-4",children:(0,r.jsxs)("button",{onClick:()=>{let e=new URL(window.location.href);e.searchParams.set("mode","edit"),window.history.pushState({},"",e.toString()),A("edit")},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2 shadow-md hover:shadow-lg",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 items-start",children:[(0,r.jsx)("div",{className:"lg:col-span-9 bg-white rounded-2xl shadow border border-gray-100 overflow-hidden",children:ec?(0,r.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-6"}),(0,r.jsx)("p",{className:"text-lg text-gray-600 font-medium",children:"Loading profile data..."})]})}):(0,r.jsxs)("div",{className:"p-8",children:[1===I&&(0,r.jsxs)("div",{className:"w-full mx-auto",children:[(0,r.jsx)("div",{className:"flex justify-left mb-8",children:(0,r.jsxs)("div",{className:"relative inline-block",children:[(0,r.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center overflow-hidden shadow-lg",children:("customer"===F?E.customerImage:D.brokerImage)?(0,r.jsx)("img",{src:"string"==typeof("customer"===F?E.customerImage:D.brokerImage)?"customer"===F?E.customerImage:D.brokerImage:URL.createObjectURL("customer"===F?E.customerImage:D.brokerImage),alt:"".concat(F," Profile"),className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/images/user-1.webp"}}):(0,r.jsx)("svg",{className:"w-8 h-8 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,r.jsx)("input",{type:"file",name:"customer"===F?"customerImage":"brokerImage",onChange:eI,accept:".jpg,.jpeg,.png",className:"hidden",id:"profile-image-upload"}),!P&&(0,r.jsx)("button",{type:"button",className:"absolute -bottom-1 -right-1 bg-blue-600 w-8 h-8 rounded-full flex items-center justify-center hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl",onClick:()=>document.getElementById("profile-image-upload").click(),children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-xs font-label text-gray-700 mb-2",children:["Full Name ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",name:"name",value:"customer"===F?E.name:D.name,onChange:eP,placeholder:"Enter your full name",disabled:P,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 text-sm font-body ".concat(P?"bg-gray-100 border-gray-200 text-gray-600 cursor-not-allowed":"bg-gray-50 border-gray-200 focus:ring-blue-100 focus:border-blue-500")})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-xs font-label text-gray-700 mb-2",children:["Email Address"," ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"email",name:"email",value:"customer"===F?E.email:D.email,onChange:eP,placeholder:"Enter your email address",disabled:P,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 text-sm font-body ".concat(P?"bg-gray-100 border-gray-200 text-gray-600 cursor-not-allowed":eN?"bg-gray-50 border-red-300 focus:ring-red-100 focus:border-red-500":"bg-gray-50 border-gray-200 focus:ring-blue-100 focus:border-blue-500")}),eN&&(0,r.jsxs)("p",{className:"mt-1 text-xs text-red-600 flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),eN]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-xs font-label text-gray-700 mb-2",children:["Phone Number ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"tel",name:"phone",value:"customer"===F?E.phone:D.phone,onChange:eP,placeholder:"Enter your phone number",disabled:!0,className:"w-full px-3 py-2 bg-gray-100 border border-gray-200 rounded-lg text-gray-500 cursor-not-allowed text-sm font-body"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-xs font-label text-gray-700 mb-2",children:["Gender ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(()=>{let e=("customer"===F?E.gender:D.gender)||"",s="male"===e,a="female"===e,t=e=>{"customer"===F?W(r=>({...r,gender:e})):B(r=>({...r,gender:e}))},l="w-10 h-10 rounded-full flex items-center justify-center transition-all",o="text-xs mt-1 text-center";return(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>t("male"),className:"flex flex-col items-center focus:outline-none",children:[(0,r.jsx)("div",{className:"".concat(l," ").concat(s?"bg-blue-600 text-white shadow":"bg-gray-200 text-gray-500"),children:(0,r.jsxs)("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"5",r:"2"}),(0,r.jsx)("path",{d:"M9 9h6"}),(0,r.jsx)("path",{d:"M7 22V12a3 3 0 0 1 3-3h4a3 3 0 0 1 3 3v10"}),(0,r.jsx)("path",{d:"M10 22v-7M14 22v-7"})]})}),(0,r.jsx)("span",{className:"".concat(o," ").concat(s?"text-blue-600":"text-gray-600"),children:"Male"})]}),(0,r.jsxs)("button",{type:"button",onClick:()=>t("female"),className:"flex flex-col items-center focus:outline-none",children:[(0,r.jsx)("div",{className:"".concat(l," ").concat(a?"bg-blue-600 text-white shadow":"bg-gray-200 text-gray-500"),children:(0,r.jsxs)("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"5",r:"2"}),(0,r.jsx)("path",{d:"M9 9h6"}),(0,r.jsx)("path",{d:"M9 9l-3 6h12l-3-6z"}),(0,r.jsx)("path",{d:"M8 22v-6M16 22v-6"})]})}),(0,r.jsx)("span",{className:"".concat(o," ").concat(a?"text-blue-600":"text-gray-600"),children:"Female"})]})]})})()]}),"broker"===F&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-label text-gray-700 mb-2",children:"Firm Name"}),(0,r.jsx)("input",{type:"text",name:"firmName",value:D.firmName,onChange:eP,placeholder:"Enter your firm name",className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 text-sm font-body"})]}),"broker"===F&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-xs font-label text-gray-700 mb-2 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"WhatsApp Number"]}),(0,r.jsx)("input",{type:"tel",name:"whatsapp",value:D.whatsapp,onChange:e=>{let r=e.target.value.replace(/\D/g,"");r.length<=10&&B(e=>({...e,whatsapp:r}))},placeholder:"Enter your WhatsApp number",maxLength:"10",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm font-body"})]})]})]})]}),2===I&&(0,r.jsx)("div",{className:"space-y-8",children:"broker"===F?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2V6"})}),"Professional Information"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["License Number"," ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsx)("input",{type:"text",name:"licenseNumber",value:D.licenseNumber,onChange:eP,placeholder:"e.g., BRE #01234567",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Experience (years)"}),(0,r.jsx)("input",{type:"number",min:0,value:D.experience||"",onChange:e=>{let r=e.target.value,s=""===r?"":r>=0?parseInt(r,10):"";B(e=>({...e,experience:s}))},placeholder:"e.g., 15",className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Address"," ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("button",{type:"button",onClick:()=>{if(!navigator.geolocation)return void t.default.error("Geolocation is not supported by this browser");t.default.loading("Getting your current location..."),navigator.geolocation.getCurrentPosition(e=>{let{latitude:r,longitude:s}=e.coords;if(window.google&&window.google.maps){let e=new window.google.maps.Geocoder,a=new window.google.maps.LatLng(r,s);e.geocode({location:a},(e,a)=>{if("OK"===a&&e[0]){let a=e[0].formatted_address,l={value:a,label:a,description:a};eb(e=>e.some(e=>e.value===a)?e:[...e,l]),eg(l),B(e=>({...e,officeAddress:a})),Y({latitude:r,longitude:s}),t.default.dismiss()}else t.default.dismiss(),t.default.error("Could not get address from location")})}else Y({latitude:r,longitude:s}),t.default.dismiss(),t.default.error("Google Maps API not loaded, but coordinates are set")},e=>{t.default.dismiss();let r="Error getting location: ";switch(e.code){case e.PERMISSION_DENIED:r+="Permission denied";break;case e.POSITION_UNAVAILABLE:r+="Position unavailable";break;case e.TIMEOUT:r+="Request timeout";break;default:r+="Unknown error"}t.default.error(r)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},className:"flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 hover:border-blue-300 transition-colors duration-200",children:[(0,r.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Use Current Location"]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none z-10",children:(0,r.jsxs)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,r.jsx)(a.default,{value:eh,onChange:e=>{if(eg(e),e){B(r=>({...r,officeAddress:e.description}));try{window.google&&window.google.maps&&e.placeId&&new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e.placeId},(e,r)=>{if(r===window.google.maps.places.PlacesServiceStatus.OK&&e&&e.geometry&&e.geometry.location){let r=e.geometry.location.lat(),s=e.geometry.location.lng();Y({latitude:r,longitude:s})}})}catch(e){}}},onInputChange:e=>{if(ey.current&&clearTimeout(ey.current),!eu||!window.google||!e||e.length<1)return void eb([]);ey.current=setTimeout(()=>{ev(!0),new window.google.maps.places.AutocompleteService().getPlacePredictions({input:e,types:["establishment","geocode"],componentRestrictions:{country:"in"}},(e,r)=>{ev(!1),r===window.google.maps.places.PlacesServiceStatus.OK&&e?eb(e.map(e=>({value:e.place_id,label:e.description,placeId:e.place_id,description:e.description}))):eb([])})},300)},options:ep,placeholder:eu?"Search for your address...":"Loading address search...",isClearable:!0,isSearchable:!0,isLoading:ef,noOptionsMessage:()=>"No addresses found",loadingMessage:()=>"Searching addresses...",classNamePrefix:"react-select",styles:{control:(e,r)=>({...e,minHeight:"48px",paddingLeft:"40px",border:r.isFocused?"2px solid #3b82f6":"1px solid #d1d5db",boxShadow:r.isFocused?"0 0 0 3px rgba(59, 130, 246, 0.1)":"none","&:hover":{border:"1px solid #9ca3af"}}),placeholder:e=>({...e,color:"#9ca3af",fontSize:"0.875rem"}),input:e=>({...e,color:"#374151",fontSize:"0.875rem"}),singleValue:e=>({...e,color:"#374151",fontSize:"0.875rem"}),option:(e,r)=>({...e,backgroundColor:r.isFocused?"#f3f4f6":"white",color:r.isSelected?"white":"#374151",fontSize:"0.875rem",padding:"0.75rem 1rem"}),menu:e=>({...e,zIndex:9999,border:"1px solid #e5e7eb",borderRadius:"0.5rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"})}}),!eu&&(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"About"}),(0,r.jsx)("textarea",{rows:4,value:D.about||"",onChange:e=>B(r=>({...r,about:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Specializations"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select your specializations"}),(0,r.jsx)(a.default,{isMulti:!0,name:"specializations",options:eM.map(e=>({value:e,label:e})),value:Array.isArray(D.specializations)?D.specializations.map(e=>({value:e,label:e})):[],onChange:e=>{let r=e?e.map(e=>e.value):[];B(e=>({...e,specializations:r}))},placeholder:"Select specializations...",className:"react-select-container",classNamePrefix:"react-select",styles:{control:(e,r)=>({...e,minHeight:"48px",border:r.isFocused?"2px solid #3b82f6":"1px solid #d1d5db",boxShadow:r.isFocused?"0 0 0 3px rgba(59, 130, 246, 0.1)":"none","&:hover":{border:"1px solid #3b82f6"}}),multiValue:e=>({...e,backgroundColor:"#dbeafe",color:"#1e40af"}),multiValueLabel:e=>({...e,color:"#1e40af"}),multiValueRemove:e=>({...e,color:"#1e40af","&:hover":{backgroundColor:"#bfdbfe",color:"#1e3a8a"}})}})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 0h10m-9 0a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V6a2 2 0 00-2-2M9 4h6"})}),"Social Media & Online Presence"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-blue-600 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),"LinkedIn"]}),(0,r.jsx)("input",{type:"url",name:"linkedin",value:D.linkedin,onChange:eP,placeholder:"https://linkedin.com/in/yourprofile",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-blue-400 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})}),"Twitter"]}),(0,r.jsx)("input",{type:"url",name:"twitter",value:D.twitter,onChange:eP,placeholder:"https://twitter.com/yourprofile",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-pink-500 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.746-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.012.001z"})}),"Instagram"]}),(0,r.jsx)("input",{type:"url",name:"instagram",value:D.instagram,onChange:eP,placeholder:"https://instagram.com/yourprofile",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-blue-600 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]}),(0,r.jsx)("input",{type:"url",name:"facebook",value:D.facebook,onChange:eP,placeholder:"https://facebook.com/yourprofile",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9"})}),"Website"]}),(0,r.jsx)("input",{type:"url",name:"website",value:D.website,onChange:eP,placeholder:"https://yourwebsite.com",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]})]}):(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),"Property Preferences"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Type Preferences"}),(0,r.jsx)(a.default,{isMulti:!0,name:"propertyType",options:eL.map(e=>({value:e,label:e.charAt(0).toUpperCase()+e.slice(1)})),value:Array.isArray(E.propertyType)?E.propertyType.map(e=>({value:e,label:e.charAt(0).toUpperCase()+e.slice(1)})):[],onChange:e=>{let r=e?e.map(e=>e.value):[];W(e=>({...e,propertyType:r}))},placeholder:"Select property types...",className:"react-select-container",classNamePrefix:"react-select",styles:{control:(e,r)=>({...e,minHeight:"48px",border:r.isFocused?"2px solid #3b82f6":"1px solid #d1d5db",boxShadow:r.isFocused?"0 0 0 3px rgba(59, 130, 246, 0.1)":"none","&:hover":{border:"1px solid #3b82f6"}}),multiValue:e=>({...e,backgroundColor:"#dbeafe",color:"#1e40af"}),multiValueLabel:e=>({...e,color:"#1e40af"}),multiValueRemove:e=>({...e,color:"#1e40af","&:hover":{backgroundColor:"#bfdbfe",color:"#1e3a8a"}})}})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget Min (â‚¹)"}),(0,r.jsx)("input",{type:"number",name:"budgetMin",value:E.budgetMin,onChange:eP,placeholder:"Enter minimum budget",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 ".concat(ej?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget Max (â‚¹)"}),(0,r.jsx)("input",{type:"number",name:"budgetMax",value:E.budgetMax,onChange:eP,placeholder:"Enter maximum budget",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 ".concat(ej?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500")})]})]}),ej&&(0,r.jsx)("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{className:"text-red-700 text-sm font-medium",children:ej})]})})]})]})})}),3===I&&"broker"===F&&(0,r.jsx)("div",{className:"space-y-8",children:(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,r.jsxs)("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Preferred Regions"," ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("button",{type:"button",onClick:()=>G(e=>!e),className:"inline-flex items-center px-3 py-1.5 text-xs rounded border border-gray-200 bg-white hover:bg-gray-50",children:q?"Choose manually":"Use nearest"})]}),!q&&(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"broker"===F?"Select the regions where you provide real estate services":"Select the regions where you are looking for properties"})}),!q&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-2",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["State ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(a.default,{name:"state",options:es,value:eo,onChange:e=>{en(e),ed(null),B(r=>({...r,state:(null==e?void 0:e.value)||"",city:"",regions:[]})),e?eD(e.value):el([])},placeholder:"Select state...",className:"react-select-container",classNamePrefix:"react-select",styles:{control:e=>({...e,border:"1px solid #d1d5db",borderRadius:"0.5rem",minHeight:"48px",fontSize:"14px"})}})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["City ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(a.default,{name:"city",options:et,value:ei,onChange:e=>{ed(e),B(r=>({...r,city:(null==e?void 0:e.value)||"",regions:[]})),e?eB(e.value):T([])},placeholder:"Select city...",className:"react-select-container",classNamePrefix:"react-select",styles:{control:e=>({...e,border:"1px solid #d1d5db",borderRadius:"0.5rem",minHeight:"48px",fontSize:"14px"})}})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[!q&&(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Regions ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),U?(0,r.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),(0,r.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading regions..."})]}):O?(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-sm text-red-600",children:O})}):q?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-2 text-[13px] text-slate-600 flex items-center gap-2",children:"Showing nearest regions based on your location. Choose one."}),ee&&(0,r.jsx)("div",{className:"text-[13px] text-rose-600 mb-2",children:ee}),Z?(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-3",children:[1,2,3,4,5].map(e=>(0,r.jsx)("div",{className:"relative p-4 rounded-xl border border-gray-200 bg-white animate-pulse",children:(0,r.jsx)("div",{className:"flex items-start justify-between",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-1"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})})},e))}):(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-3",children:(Array.isArray(J)?J.slice(0,5):[]).map(e=>{let s=e._id||e.id,a=e.name||e.region,t=e.centerLocation||[e.city,e.state].filter(Boolean).join(", "),l="number"==typeof e.distanceKm?e.distanceKm:null,o=null!==l?"".concat(l>=10?Math.round(l):Math.round(10*l)/10," km away"):"",n="number"==typeof e.brokerCount?"".concat(e.brokerCount," Broker").concat(1===e.brokerCount?"":"s"):"",i=Array.isArray(D.regions)&&D.regions.some(e=>"object"==typeof e&&e._id?e._id===s:"string"==typeof e&&e===s);return(0,r.jsx)("button",{type:"button",onClick:()=>{B(r=>({...r,regions:i?[]:[s],state:i?"":e.state||r.state||"",city:i?"":e.city||r.city||""})),ez(!i)},className:"relative text-left p-4 rounded-xl border transition-all ".concat(i?"border-sky-500 ring-2 ring-sky-100 shadow":"border-gray-200 hover:border-sky-400 hover:shadow-sm"," bg-white"),children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-[14px] font-semibold text-slate-900",children:a}),t?(0,r.jsx)("div",{className:"text-[12px] text-slate-500",children:t}):null,(o||n)&&(0,r.jsx)("div",{className:"text-[12px] text-slate-600 mt-1",children:[o,n].filter(Boolean).join(" / ")})]}),i&&(0,r.jsx)("div",{className:"absolute top-2 right-2 w-7 h-7 rounded-full bg-sky-600 text-white flex items-center justify-center",children:"âœ“"})]})},s||a)})})]}):(0,r.jsx)(a.default,{name:"regions",options:Array.isArray(H)?H.map(e=>({value:e._id,label:e.name})):[],value:Array.isArray(D.regions)&&D.regions.length>0&&Array.isArray(H)?(()=>{let e=D.regions[0];if("object"==typeof e&&e._id)return{value:e._id,label:e.name};if("string"==typeof e){let r=H.find(r=>r._id===e);return r?{value:r._id,label:r.name}:null}return null})():null,onChange:e=>{let r=e?e.value:null;"broker"===F&&(B(e=>({...e,regions:r?[r]:[]})),ez(!!r))},placeholder:"Select a region...",className:"react-select-container",classNamePrefix:"react-select",styles:{control:e=>({...e,border:"1px solid #d1d5db",borderRadius:"0.5rem",minHeight:"48px",fontSize:"14px"})}})]})]})}),3===I&&"customer"===F&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center mb-6",children:[(0,r.jsx)("svg",{className:"w-6 h-6 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Documents"})]}),(0,r.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:(0,r.jsx)("p",{className:"text-gray-600 text-center py-8",children:"No documents required for customer accounts."})})]}),4===I&&"broker"===F&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center mb-6",children:[(0,r.jsx)("svg",{className:"w-6 h-6 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Documents"," ",(0,r.jsx)("span",{className:"text-sm font-normal text-gray-500",children:"(Optional)"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Aadhar Card"}),(0,r.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-4 text-center transition-colors flex-1 flex flex-col justify-center ".concat(eS?"border-gray-300 hover:border-blue-400":"border-gray-200 bg-gray-50 opacity-70 cursor-not-allowed"),children:[(0,r.jsx)("input",{type:"file",name:"aadharFile",onChange:eI,accept:".pdf,.jpg,.jpeg,.png",className:"hidden",id:"aadhar-upload",disabled:!eS}),(0,r.jsxs)("label",{htmlFor:"aadhar-upload",className:"cursor-pointer ".concat(eS?"":"pointer-events-none"),children:[(0,r.jsx)("div",{className:"relative mx-auto w-full max-w-[380px] rounded-md bg-white",style:{aspectRatio:"85/54"},children:m(D.aadharFile)&&x(D.aadharFile)?(0,r.jsxs)("div",{className:"absolute inset-0",children:[(0,r.jsx)("img",{src:x(D.aadharFile),alt:"Aadhar Preview",className:"w-full h-full object-contain"}),(0,r.jsx)("a",{href:x(D.aadharFile),target:"_blank",rel:"noopener noreferrer",className:"absolute top-2 right-2 px-2 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors shadow-lg",onClick:e=>e.stopPropagation(),children:"View"})]}):u(D.aadharFile)&&h(D.aadharFile)?(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-50 border-2 border-red-200 rounded-md p-2",children:[(0,r.jsx)("svg",{className:"h-10 w-10 text-red-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,r.jsx)("span",{className:"text-xs font-medium text-red-700 text-center",children:"PDF Document"}),(0,r.jsx)("div",{className:"text-xs text-red-600 mt-1 text-center truncate w-full px-1",title:(null==(e=D.aadharFile)?void 0:e.name)||"PDF File",children:(null==(g=D.aadharFile)?void 0:g.name)||"PDF File"}),(0,r.jsx)("a",{href:h(D.aadharFile),target:"_blank",rel:"noopener noreferrer",className:"mt-2 px-2 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors",onClick:e=>e.stopPropagation(),children:"View PDF"})]}):(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"h-10 w-10 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,r.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),(0,r.jsx)("div",{className:"mt-2"})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"PAN Card"}),(0,r.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-4 text-center transition-colors flex-1 flex flex-col justify-center ".concat(eS?"border-gray-300 hover:border-blue-400":"border-gray-200 bg-gray-50 opacity-70 cursor-not-allowed"),children:[(0,r.jsx)("input",{type:"file",name:"panFile",onChange:eI,accept:".pdf,.jpg,.jpeg,.png",className:"hidden",id:"pan-upload",disabled:!eS}),(0,r.jsxs)("label",{htmlFor:"pan-upload",className:"cursor-pointer ".concat(eS?"":"pointer-events-none"),children:[(0,r.jsx)("div",{className:"relative mx-auto w-full max-w-[380px] rounded-md bg-white",style:{aspectRatio:"85/54"},children:m(D.panFile)&&x(D.panFile)?(0,r.jsxs)("div",{className:"absolute inset-0",children:[(0,r.jsx)("img",{src:x(D.panFile),alt:"PAN Preview",className:"w-full h-full object-contain"}),(0,r.jsx)("a",{href:x(D.panFile),target:"_blank",rel:"noopener noreferrer",className:"absolute top-2 right-2 px-2 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors shadow-lg",onClick:e=>e.stopPropagation(),children:"View"})]}):u(D.panFile)&&h(D.panFile)?(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-50 border-2 border-red-200 rounded-md p-2",children:[(0,r.jsx)("svg",{className:"h-10 w-10 text-red-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,r.jsx)("span",{className:"text-xs font-medium text-red-700 text-center",children:"PDF Document"}),(0,r.jsx)("div",{className:"text-xs text-red-600 mt-1 text-center truncate w-full px-1",title:(null==(p=D.panFile)?void 0:p.name)||"PDF File",children:(null==(b=D.panFile)?void 0:b.name)||"PDF File"}),(0,r.jsx)("a",{href:h(D.panFile),target:"_blank",rel:"noopener noreferrer",className:"mt-2 px-2 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors",onClick:e=>e.stopPropagation(),children:"View PDF"})]}):(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"h-10 w-10 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,r.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),(0,r.jsx)("div",{className:"mt-2"})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"GST Certificate"}),(0,r.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-4 text-center transition-colors flex-1 flex flex-col justify-center ".concat(eS?"border-gray-300 hover:border-blue-400":"border-gray-200 bg-gray-50 opacity-70 cursor-not-allowed"),children:[(0,r.jsx)("input",{type:"file",name:"gstFile",onChange:eI,accept:".pdf,.jpg,.jpeg,.png",className:"hidden",id:"gst-upload",disabled:!eS}),(0,r.jsxs)("label",{htmlFor:"gst-upload",className:"cursor-pointer ".concat(eS?"":"pointer-events-none"),children:[(0,r.jsx)("div",{className:"relative mx-auto w-full max-w-[380px] rounded-md bg-white",style:{aspectRatio:"85/54"},children:m(D.gstFile)&&x(D.gstFile)?(0,r.jsxs)("div",{className:"absolute inset-0",children:[(0,r.jsx)("img",{src:x(D.gstFile),alt:"GST Preview",className:"w-full h-full object-contain"}),(0,r.jsx)("a",{href:x(D.gstFile),target:"_blank",rel:"noopener noreferrer",className:"absolute top-2 right-2 px-2 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors shadow-lg",onClick:e=>e.stopPropagation(),children:"View"})]}):u(D.gstFile)&&h(D.gstFile)?(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-50 border-2 border-red-200 rounded-md p-2",children:[(0,r.jsx)("svg",{className:"h-10 w-10 text-red-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,r.jsx)("span",{className:"text-xs font-medium text-red-700 text-center",children:"PDF Document"}),(0,r.jsx)("div",{className:"text-xs text-red-600 mt-1 text-center truncate w-full px-1",title:(null==(f=D.gstFile)?void 0:f.name)||"PDF File",children:(null==(v=D.gstFile)?void 0:v.name)||"PDF File"}),(0,r.jsx)("a",{href:h(D.gstFile),target:"_blank",rel:"noopener noreferrer",className:"mt-2 px-2 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors",onClick:e=>e.stopPropagation(),children:"View PDF"})]}):(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"h-10 w-10 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,r.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),(0,r.jsx)("div",{className:"mt-2"})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Broker License"}),(0,r.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-4 text-center transition-colors flex-1 flex flex-col justify-center ".concat(eS?"border-gray-300 hover:border-blue-400":"border-gray-200 bg-gray-50 opacity-70 cursor-not-allowed"),children:[(0,r.jsx)("input",{type:"file",name:"brokerLicenseFile",onChange:eI,accept:".pdf,.jpg,.jpeg,.png",className:"hidden",id:"broker-license-upload",disabled:!eS}),(0,r.jsxs)("label",{htmlFor:"broker-license-upload",className:"cursor-pointer ".concat(eS?"":"pointer-events-none"),children:[(0,r.jsx)("div",{className:"relative mx-auto w-full max-w-[380px] rounded-md bg-white",style:{aspectRatio:"85/54"},children:m(D.brokerLicenseFile)&&x(D.brokerLicenseFile)?(0,r.jsxs)("div",{className:"absolute inset-0",children:[(0,r.jsx)("img",{src:x(D.brokerLicenseFile),alt:"License Preview",className:"w-full h-full object-contain"}),(0,r.jsx)("a",{href:x(D.brokerLicenseFile),target:"_blank",rel:"noopener noreferrer",className:"absolute top-2 right-2 px-2 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors shadow-lg",onClick:e=>e.stopPropagation(),children:"View"})]}):u(D.brokerLicenseFile)&&h(D.brokerLicenseFile)?(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-50 border-2 border-red-200 rounded-md p-2",children:[(0,r.jsx)("svg",{className:"h-10 w-10 text-red-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,r.jsx)("span",{className:"text-xs font-medium text-red-700 text-center",children:"PDF Document"}),(0,r.jsx)("div",{className:"text-xs text-red-600 mt-1 text-center truncate w-full px-1",title:(null==(y=D.brokerLicenseFile)?void 0:y.name)||"PDF File",children:(null==(j=D.brokerLicenseFile)?void 0:j.name)||"PDF File"}),(0,r.jsx)("a",{href:h(D.brokerLicenseFile),target:"_blank",rel:"noopener noreferrer",className:"mt-2 px-2 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors",onClick:e=>e.stopPropagation(),children:"View PDF"})]}):(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"h-10 w-10 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,r.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),(0,r.jsx)("div",{className:"mt-2"})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Company Identification Details"}),(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-400 transition-colors flex-1 flex flex-col justify-center",children:[(0,r.jsx)("input",{type:"file",name:"companyIdFile",onChange:eI,accept:".pdf,.jpg,.jpeg,.png",className:"hidden",id:"company-id-upload"}),(0,r.jsxs)("label",{htmlFor:"company-id-upload",className:"cursor-pointer",children:[(0,r.jsx)("div",{className:"relative mx-auto w-full max-w-[380px] rounded-md bg-white",style:{aspectRatio:"85/54"},children:m(D.companyIdFile)&&x(D.companyIdFile)?(0,r.jsx)("img",{src:x(D.companyIdFile),alt:"Company ID Preview",className:"absolute inset-0 w-full h-full object-contain"}):u(D.companyIdFile)&&h(D.companyIdFile)?(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-50 border-2 border-red-200 rounded-md p-2",children:[(0,r.jsx)("svg",{className:"h-10 w-10 text-red-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,r.jsx)("span",{className:"text-xs font-medium text-red-700 text-center",children:"PDF Document"}),(0,r.jsx)("div",{className:"text-xs text-red-600 mt-1 text-center truncate w-full px-1",title:(null==(w=D.companyIdFile)?void 0:w.name)||"PDF File",children:(null==(N=D.companyIdFile)?void 0:N.name)||"PDF File"}),(0,r.jsx)("a",{href:h(D.companyIdFile),target:"_blank",rel:"noopener noreferrer",className:"mt-2 px-2 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors",onClick:e=>e.stopPropagation(),children:"View PDF"})]}):(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"h-10 w-10 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,r.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),(0,r.jsx)("div",{className:"mt-2"})]})]})]})]})]}),!P&&(0,r.jsx)("div",{className:"mt-12 pt-8 border-t border-gray-100",children:(0,r.jsx)("div",{className:"max-w-3xl mx-auto",children:I<z?(0,r.jsx)("button",{type:"button",onClick:eW,disabled:eC||!eV(I),className:"w-full py-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl font-heading text-lg hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:eC?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Checking email..."]}):(0,r.jsxs)(r.Fragment,{children:["create"===M?"Continue to ".concat((e=>{switch(e){case 1:return"Personal Info";case 2:return"customer"===F?"Preferences":"Professional";case 3:return"broker"===F?"Regions":"Documents";case 4:return"Documents";default:return""}})(I+1)):"Update",(0,r.jsx)("svg",{className:"w-5 h-5 ml-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})}):(0,r.jsx)("button",{type:"button",onClick:async e=>{e.preventDefault(),R(!0);let r="customer"===F?E:D;if("broker"===F&&(!Array.isArray(r.regions)||0===r.regions.length)){t.default.error("Please select at least one region."),R(!1);return}try{if(!(null==k?void 0:k.token)){t.default.error("No authentication token found. Please login again."),R(!1);return}let e=new FormData;if(e.append("phone",r.phone),e.append("name",r.name),e.append("email",r.email),"customer"===F)e.append("customerDetails[preferences][budgetMin]",r.budgetMin?Number(r.budgetMin):""),e.append("customerDetails[preferences][budgetMax]",r.budgetMax?Number(r.budgetMax):""),r.propertyType.forEach((r,s)=>{e.append("customerDetails[preferences][propertyType][".concat(s,"]"),r)}),e.append("customerDetails[gender]",r.gender||""),e.append("customerDetails[inquiryCount]",r.inquiryCount||0),r.customerImage&&(r.customerImage instanceof File?e.append("customerImage",r.customerImage):r.customerImage);else{var s,a;e.append("brokerDetails[firmName]",r.firmName||""),e.append("brokerDetails[licenseNumber]",r.licenseNumber||""),e.append("brokerDetails[address]",r.officeAddress||r.address||""),e.append("brokerDetails[state]",r.state||Array.isArray(r.regions)&&(null==(s=r.regions[0])?void 0:s.state)||""),e.append("brokerDetails[city]",r.city||Array.isArray(r.regions)&&(null==(a=r.regions[0])?void 0:a.city)||""),e.append("brokerDetails[gender]",r.gender||""),"string"==typeof r.about&&e.append("content",r.about),void 0!==r.experience&&null!==r.experience&&""!==String(r.experience)&&e.append("experienceYears",String(r.experience)),r.specializations&&r.specializations.length>0&&r.specializations.forEach((r,s)=>{e.append("brokerDetails[specializations][".concat(s,"]"),r)}),r.linkedin&&e.append("brokerDetails[socialMedia][linkedin]",r.linkedin),r.twitter&&e.append("brokerDetails[socialMedia][twitter]",r.twitter),r.instagram&&e.append("brokerDetails[socialMedia][instagram]",r.instagram),r.facebook&&e.append("brokerDetails[socialMedia][facebook]",r.facebook),r.whatsapp&&e.append("brokerDetails[whatsappNumber]",r.whatsapp),r.website&&e.append("brokerDetails[website]",r.website),r.regions.forEach((r,s)=>{let a="object"==typeof r?r._id:r;e.append("brokerDetails[region][".concat(s,"]"),a)}),r.aadharFile&&r.aadharFile instanceof File&&e.append("aadhar",r.aadharFile),r.panFile&&r.panFile instanceof File&&e.append("pan",r.panFile),r.gstFile&&r.gstFile instanceof File&&e.append("gst",r.gstFile),r.brokerLicenseFile&&r.brokerLicenseFile instanceof File&&e.append("brokerLicense",r.brokerLicenseFile),r.companyIdFile&&r.companyIdFile instanceof File&&e.append("companyId",r.companyIdFile),r.brokerImage&&r.brokerImage instanceof File&&e.append("brokerImage",r.brokerImage)}let l=await fetch("".concat("https://broker-adda-be.algofolks.com/api","/auth/complete-profile"),{method:"POST",headers:{Authorization:"Bearer ".concat(k.token)},body:e});if(!l.ok){let e="Failed to update profile";try{let r=await l.json();e=r.error&&r.error.includes("E11000")?"This email address is already registered. Please use a different email.":r.error&&r.error.includes("validation")?"Please check your information and try again.":400===l.status?"Invalid information provided. Please check your details.":401===l.status?"Session expired. Please login again.":403===l.status?"You do not have permission to perform this action.":409===l.status?"This information is already in use. Please use different details.":l.status>=500?"Server error. Please try again later.":r.message||"Failed to update profile. Please try again."}catch(r){e="Request failed with status ".concat(l.status,". Please try again.")}throw Error(e)}await l.json(),t.default.success("Profile updated successfully!"),setTimeout(()=>{let e=new URLSearchParams(window.location.search).get("returnTo")||"/profile?mode=view";C.push(e)},1500)}catch(e){t.default.error((null==e?void 0:e.message)||"Failed to update profile. Please try again.")}finally{R(!1)}},disabled:V||!eV(I),className:"w-full py-4 bg-gradient-to-r from-green-800 to-green-900 text-white rounded-xl font-heading text-lg hover:from-green-700 hover:to-green-900 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-green-100 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 cursor-pointer",children:V?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2 inline"}),"Saving Profile..."]}):(0,r.jsxs)(r.Fragment,{children:["create"===M?"Complete Profile":"Update Profile",(0,r.jsx)("svg",{className:"w-5 h-5 ml-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]})})})})]})}),(0,r.jsxs)("aside",{className:"lg:col-span-3 space-y-5 lg:sticky lg:top-0 lg:-mt-30 self-start",children:[(0,r.jsx)("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center",children:(0,r.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,r.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Create broker profile"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Finish basic details and choose your nearest region to get started."}),(0,r.jsx)("div",{className:"mt-3",children:(()=>{let e=Array.from({length:z},(e,r)=>r+1);return(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)("div",{className:"flex items-center px-2",children:e.map((a,l)=>{let o=a===I,n=a<I;return(0,r.jsxs)(s.default.Fragment,{children:[(0,r.jsx)("button",{type:"button",onClick:()=>(e=>{if(e<=I)return void S(e);eV(I)?S(e):t.default.error("Please complete the required fields before continuing.")})(a),className:"w-7 h-7 rounded-full flex items-center justify-center text-[11px] font-bold ".concat(n?"bg-green-700 text-white":o?"bg-blue-600 text-white ring-4 ring-blue-100":"bg-gray-400 text-white"," cursor-pointer"),children:a}),l<e.length-1&&(0,r.jsx)("div",{className:"flex-1 h-1 bg-gray-200 rounded-full mx-2"})]},a)})})})})()})]})]})}),(0,r.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Profile summary"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm text-gray-700",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Status"}),(0,r.jsx)("span",{className:"font-medium",children:"customer"===F?(null==E?void 0:E.name)?"In progress":"New":(null==D?void 0:D.name)?"In progress":"New"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Name"}),(0,r.jsx)("span",{className:"font-medium truncate max-w-[140px]",children:"customer"===F?(null==E?void 0:E.name)||"â€”":(null==D?void 0:D.name)||"â€”"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Email"}),(0,r.jsx)("span",{className:"font-medium truncate max-w-[140px]",children:"customer"===F?(null==E?void 0:E.email)||"â€”":(null==D?void 0:D.email)||"â€”"})]})]})]}),(0,r.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Nearest regions"}),(0,r.jsx)("button",{type:"button",className:"text-xs text-blue-700 hover:underline",onClick:()=>null==G?void 0:G(!0),children:"Use nearest"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(Array.isArray(J)?J.slice(0,3):[]).map(e=>{let s=e._id||e.id,a=e.name||e.region||"Region",t="number"==typeof e.distanceKm?e.distanceKm:null,l=null!==t?"".concat(t>=10?Math.round(t):Math.round(10*t)/10," km"):"";return(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("div",{className:"truncate max-w-[160px] text-gray-700",children:a}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:l})]},s||a)}),(!J||0===J.length)&&(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Turn on location to fetch nearby regions."})]})]}),(0,r.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Tips"}),(0,r.jsxs)("ul",{className:"text-sm text-gray-600 list-disc pl-5 space-y-2",children:[(0,r.jsx)("li",{children:"Fill personal info first, then regions."}),(0,r.jsx)("li",{children:"Use nearest regions for quick setup."}),(0,r.jsx)("li",{children:"Keep KYC under 10MB per file."})]})]})]})]})]})})]})};function p(){return(0,r.jsx)(s.Suspense,{fallback:null,children:(0,r.jsx)(g,{})})}}]);