{"version":3,"sources":["turbopack:///[project]/src/app/leads/page.jsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback, useMemo, useRef } from \"react\";\nimport Link from \"next/link\";\nimport toast, { Toaster } from \"react-hot-toast\";\nimport HeaderFile from \"../components/Header\";\nimport Select, { components as RSComponents } from \"react-select\";\nimport ProtectedRoute from \"../components/ProtectedRoute\";\nimport siteConfig, { SUPPORT_EMAIL, SUPPORT_PHONE } from \"../config/siteConfig\";\n\n/* ───────────── Small stat card ───────────── */\nconst StatCard = ({ label, value, deltaText, trend = \"up\", color = \"sky\" }) => {\n  const colorStrip = {\n    sky: \"from-sky-500 to-sky-400\",\n    amber: \"from-amber-500 to-amber-400\",\n    emerald: \"from-emerald-500 to-emerald-400\",\n    violet: \"from-violet-500 to-violet-400\",\n    indigo: \"from-indigo-500 to-indigo-400\",\n  }[color];\n\n  const trendDown = trend === \"down\";\n  const deltaClass = trendDown ? \"text-rose-600\" : \"text-emerald-600\";\n\n  return (\n    <div className=\"relative overflow-hidden bg-white rounded-2xl border border-slate-200 shadow-[0_2px_12px_rgba(2,6,23,0.06)] hover:shadow-[0_6px_18px_rgba(2,6,23,0.08)] transition-shadow\">\n      {/* Left color strip */}\n      <div\n        className={`absolute inset-y-0 left-0 w-1.5 bg-gradient-to-b ${colorStrip}`}\n      />\n      <div className=\"px-5 py-6\">\n        <p className=\"text-xs font-body text-gray-600 font-medium\">{label}</p>\n        <p className=\"mt-5 text-3xl leading-none  text-gray-800\">{value}</p>\n        {/* <p className={`mt-5 flex items-center gap-1.5 text-[12px] font-medium ${deltaClass}`}>\n          {trendDown ? (\n            <svg className=\"w-3.5 h-3.5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19 12l-7 7-7-7\" />\n            </svg>\n          ) : (\n            <svg className=\"w-3.5 h-3.5\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5 12l7-7 7 7\" />\n            </svg>\n          )}\n          <span>{deltaText}</span>\n        </p> */}\n      </div>\n    </div>\n  );\n};\n\nexport default function BrokerLeadsPage() {\n  /* ───────────── Filters & UI state ───────────── */\n  const [showAdvanced, setShowAdvanced] = useState(false);\n  const [leadViewMode, setLeadViewMode] = useState(\"my-leads\"); // 'my-leads' or 'transferred'\n  const [filters, setFilters] = useState({\n    query: \"\",\n    status: { value: \"all\", label: \"All Status\" },\n    broker: { value: \"all\", label: \"All Brokers\" },\n    region: { value: \"all\", label: \"All Regions\" },\n    propertyType: { value: \"all\", label: \"All Property Types\" },\n    requirement: { value: \"all\", label: \"All Requirements\" },\n    startDate: \"\",\n    endDate: \"\",\n    budgetMin: 0,\n    budgetMax: 500000,\n  });\n\n  /* ───────────── Regions API ───────────── */\n  const [regionsList, setRegionsList] = useState([]);\n  const [regionsLoading, setRegionsLoading] = useState(false);\n  const [regionsError, setRegionsError] = useState(\"\");\n  // Nearest regions for Add Lead modal (based on logged-in broker)\n  const [nearestRegionsList, setNearestRegionsList] = useState([]);\n  const [nearestRegionsLoading, setNearestRegionsLoading] = useState(false);\n  const [nearestRegionsError, setNearestRegionsError] = useState(\"\");\n  const [applyingFilters, setApplyingFilters] = useState(false);\n  const isAdvancedFiltersApplied = useMemo(() => {\n    return (\n      (filters.status?.value && filters.status.value !== \"all\") ||\n      (filters.broker?.value && filters.broker.value !== \"all\") ||\n      (filters.region?.value && filters.region.value !== \"all\") ||\n      (filters.propertyType?.value && filters.propertyType.value !== \"all\") ||\n      (filters.requirement?.value && filters.requirement.value !== \"all\") ||\n      !!filters.startDate ||\n      !!filters.endDate ||\n      (typeof filters.budgetMax === \"number\" && filters.budgetMax !== 500000)\n    );\n  }, [filters]);\n\n  // clearAdvancedFilters is defined later, after pagination and loadLeads are created\n  let clearAdvancedFilters = () => {};\n\n  // Auth and API base\n  const token =\n    typeof window !== \"undefined\"\n      ? localStorage.getItem(\"token\") || localStorage.getItem(\"authToken\")\n      : null;\n  const apiUrl = process.env.NEXT_PUBLIC_API_URL || \"\";\n\n  // Get current user ID from token\n  const getCurrentUserIdFromToken = (jwtToken) => {\n    try {\n      if (!jwtToken || typeof window === \"undefined\") return \"\";\n      const base64Url = jwtToken.split(\".\")[1];\n      if (!base64Url) return \"\";\n      const base64 = base64Url.replace(/-/g, \"+\").replace(/_/g, \"/\");\n      const jsonPayload = decodeURIComponent(\n        atob(base64)\n          .split(\"\")\n          .map((c) => \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2))\n          .join(\"\")\n      );\n      const payload = JSON.parse(jsonPayload);\n      // no-op\n      // Use brokerId if available, otherwise fall back to userId\n      return (\n        payload.brokerId || payload.userId || payload.id || payload.sub || \"\"\n      );\n    } catch {\n      return \"\";\n    }\n  };\n  const currentUserId = useMemo(\n    () => getCurrentUserIdFromToken(token),\n    [token]\n  );\n\n  // State to store the actual broker ID (might be different from token userId)\n  const [brokerId, setBrokerId] = useState(\"\");\n  const [brokerIdLoading, setBrokerIdLoading] = useState(false);\n\n  // Function to get broker details and extract the correct broker ID\n  const getBrokerId = useCallback(async () => {\n    if (!currentUserId || !token) {\n      // missing auth\n      return;\n    }\n\n    // No hardcoded mapping. Always resolve via API only.\n\n    try {\n      setBrokerIdLoading(true);\n      // fetch broker details for user\n\n      // Try the most likely endpoint first\n      const res = await fetch(`${apiUrl}/brokers/${currentUserId}`, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n      });\n\n      // status read\n\n      if (res.ok) {\n        const data = await res.json();\n        // raw data\n\n        // Try different possible data structures\n        const brokerData =\n          data?.data?.broker || data?.broker || data?.data || data;\n        // processed data\n\n        // Use the broker's _id for filtering leads\n        if (brokerData && brokerData._id) {\n          setBrokerId(brokerData._id);\n          // set broker id\n        } else {\n          // no id in response\n          // Fallback: do not guess. Keep brokerId empty and log for visibility\n          // leave brokerId empty\n        }\n      } else {\n        // failed to fetch broker details\n        const errorText = await res.text();\n        // Do not fallback to userId; keep brokerId empty so queries won't filter wrongly\n      }\n    } catch (error) {\n      // error fetching broker details\n      // Do not fallback to userId; keep brokerId empty so queries won't filter wrongly\n    } finally {\n      setBrokerIdLoading(false);\n    }\n  }, [currentUserId, token, apiUrl]);\n\n  // Get broker ID when currentUserId changes\n  useEffect(() => {\n    if (currentUserId) {\n      getBrokerId();\n    }\n  }, [currentUserId, getBrokerId]);\n\n  /* ───────────── Metrics API ───────────── */\n  const [metrics, setMetrics] = useState({\n    totalLeads: 0,\n    newLeadsToday: 0,\n    convertedLeads: 0,\n    avgDealSize: 0,\n    transferredToMe: 0,\n    transferredByMe: 0,\n  });\n  const [metricsLoading, setMetricsLoading] = useState(false);\n  const [metricsError, setMetricsError] = useState(\"\");\n\n  const loadMetrics = useCallback(async () => {\n    // Only fetch metrics when brokerId is available to ensure broker-scoped numbers\n    if (!brokerId) return;\n    try {\n      setMetricsLoading(true);\n      setMetricsError(\"\");\n      const metricsUrl = `${apiUrl}/leads/metrics?createdBy=${brokerId}`;\n      const res = await fetch(metricsUrl, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        },\n      });\n      if (!res.ok) {\n        try {\n          const err = await res.json();\n          setMetricsError(\n            err?.message || err?.error || \"Failed to load metrics\"\n          );\n        } catch {\n          setMetricsError(\"Failed to load metrics\");\n        }\n        return;\n      }\n      const data = await res.json();\n      const payload = data?.data || data || {};\n      setMetrics({\n        totalLeads: Number(payload.totalLeads || payload.total || 0),\n        newLeadsToday: Number(payload.newLeadsToday || payload.today || 0),\n        convertedLeads: Number(\n          payload.convertedLeads || payload.converted || 0\n        ),\n        avgDealSize: Number(\n          payload.avgDealSize || payload.averageDealSize || 0\n        ),\n        transferredToMe: Number(\n          payload.transferredToMe || payload.transfersToMe || 0\n        ),\n        transferredByMe: Number(\n          payload.transferredByMe || payload.transfersByMe || 0\n        ),\n      });\n    } catch {\n      setMetricsError(\"Error loading metrics\");\n    } finally {\n      setMetricsLoading(false);\n    }\n  }, [apiUrl, token, brokerId]);\n  // Load metrics once brokerId is available\n  useEffect(() => {\n    if (brokerId) loadMetrics();\n  }, [brokerId, loadMetrics]);\n\n   /* ───────────── Notifications API ───────────── */\n  const [notifications, setNotifications] = useState([]);\n  const [notificationsLoading, setNotificationsLoading] = useState(false);\n  const [notificationsError, setNotificationsError] = useState(\"\");\n\n  const loadNotifications = useCallback(async () => {\n    if (!token) return;\n    try {\n      setNotificationsLoading(true);\n      setNotificationsError(\"\");\n      const notificationsUrl = `${apiUrl}/notifications/recent?days=7&type=lead`;\n      const res = await fetch(notificationsUrl, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      if (!res.ok) {\n        try {\n          const err = await res.json();\n          setNotificationsError(\n            err?.message || err?.error || \"Failed to load notifications\"\n          );\n        } catch {\n          setNotificationsError(\"Failed to load notifications\");\n        }\n        return;\n      }\n      const data = await res.json();\n      let notificationsList = [];\n      if (Array.isArray(data?.data?.items)) notificationsList = data.data.items;\n      else if (Array.isArray(data?.data?.notifications)) notificationsList = data.data.notifications;\n      else if (Array.isArray(data?.data)) notificationsList = data.data;\n      else if (Array.isArray(data?.notifications)) notificationsList = data.notifications;\n      else if (Array.isArray(data)) notificationsList = data;\n      \n      // Sort by createdAt (newest first) and take latest 3\n      const sortedNotifications = notificationsList\n        .sort((a, b) => {\n          const dateA = a.createdAt ? new Date(a.createdAt).getTime() : 0;\n          const dateB = b.createdAt ? new Date(b.createdAt).getTime() : 0;\n          return dateB - dateA;\n        })\n        .slice(0, 3);\n      \n      setNotifications(sortedNotifications);\n    } catch {\n      setNotificationsError(\"Error loading notifications\");\n    } finally {\n      setNotificationsLoading(false);\n    }\n  }, [apiUrl, token]);\n\n  // Load notifications when token is available\n  useEffect(() => {\n    if (token) {\n      loadNotifications();\n    }\n  }, [token, loadNotifications]);\n\n  /* ───────────── Leads API ───────────── */\n  const [leads, setLeads] = useState([]);\n  const [leadsLoading, setLeadsLoading] = useState(true);\n  const [leadsError, setLeadsError] = useState(\"\");\n  const [page, setPage] = useState(1);\n  const [limit, setLimit] = useState(10);\n  const [total, setTotal] = useState(0);\n  const totalPages = Math.max(1, Math.ceil(total / (limit || 10)));\n  const [debouncedQuery, setDebouncedQuery] = useState(\"\");\n  const [isSearching, setIsSearching] = useState(false);\n  const DEBOUNCE_DELAY = 500; // Configurable debounce delay\n  const [viewTab, setViewTab] = useState(\"overview\");\n  const [noteText, setNoteText] = useState(\"\");\n  useEffect(() => {\n    // Show searching indicator when user types (with small delay to avoid flickering)\n    const showSearchingTimer = setTimeout(() => {\n      if (filters.query !== debouncedQuery) {\n        setIsSearching(true);\n      }\n    }, 100);\n\n    const debounceTimer = setTimeout(() => {\n      setDebouncedQuery(filters.query || \"\");\n      setIsSearching(false);\n    }, DEBOUNCE_DELAY);\n\n    return () => {\n      clearTimeout(showSearchingTimer);\n      clearTimeout(debounceTimer);\n    };\n  }, [filters.query, debouncedQuery]);\n\n  const buildRequestUrl = useCallback(\n    (\n      effectiveFilters,\n      p = page,\n      l = limit,\n      q = debouncedQuery,\n      viewMode = leadViewMode\n    ) => {\n      const params = new URLSearchParams();\n      params.set(\"page\", String(p));\n      params.set(\"limit\", String(l));\n\n      // Use different endpoint and parameters for transferred leads\n      if (viewMode === \"transferred\") {\n        if (brokerId) {\n          params.set(\"toBroker\", brokerId);\n        }\n        if (q) params.set(\"search\", q);\n        if (\n          effectiveFilters.status?.value &&\n          effectiveFilters.status.value !== \"all\"\n        )\n          params.set(\"status\", effectiveFilters.status.value);\n        if (\n          effectiveFilters.region?.value &&\n          effectiveFilters.region.value !== \"all\"\n        )\n          params.set(\"region\", effectiveFilters.region.value);\n        if (\n          effectiveFilters.propertyType?.value &&\n          effectiveFilters.propertyType.value !== \"all\"\n        )\n          params.set(\"propertyType\", effectiveFilters.propertyType.value);\n        if (\n          effectiveFilters.requirement?.value &&\n          effectiveFilters.requirement.value !== \"all\"\n        )\n          params.set(\"requirement\", effectiveFilters.requirement.value);\n        if (effectiveFilters.startDate)\n          params.set(\"startDate\", effectiveFilters.startDate);\n        if (effectiveFilters.endDate)\n          params.set(\"endDate\", effectiveFilters.endDate);\n        if (\n          typeof effectiveFilters.budgetMax === \"number\" &&\n          effectiveFilters.budgetMax !== 500000\n        )\n          params.set(\"budgetMax\", String(effectiveFilters.budgetMax));\n        return `${apiUrl}/leads/transferred?${params.toString()}`;\n      }\n\n      // Default behavior for my leads\n      if (brokerId) {\n        params.set(\"createdBy\", brokerId);\n      }\n      if (q) params.set(\"search\", q);\n      if (\n        effectiveFilters.status?.value &&\n        effectiveFilters.status.value !== \"all\"\n      )\n        params.set(\"status\", effectiveFilters.status.value);\n      // Only add broker filter if specifically selected (not 'all')\n      if (\n        effectiveFilters.broker?.value &&\n        effectiveFilters.broker.value !== \"all\"\n      ) {\n        params.set(\"broker\", effectiveFilters.broker.value);\n      }\n      if (\n        effectiveFilters.region?.value &&\n        effectiveFilters.region.value !== \"all\"\n      )\n        params.set(\"regionId\", effectiveFilters.region.value);\n      if (\n        effectiveFilters.propertyType?.value &&\n        effectiveFilters.propertyType.value !== \"all\"\n      )\n        params.set(\"propertyType\", effectiveFilters.propertyType.value);\n      if (\n        effectiveFilters.requirement?.value &&\n        effectiveFilters.requirement.value !== \"all\"\n      )\n        params.set(\"requirement\", effectiveFilters.requirement.value);\n      if (effectiveFilters.startDate)\n        params.set(\"startDate\", effectiveFilters.startDate);\n      if (effectiveFilters.endDate)\n        params.set(\"endDate\", effectiveFilters.endDate);\n      if (\n        typeof effectiveFilters.budgetMax === \"number\" &&\n        effectiveFilters.budgetMax !== 500000\n      )\n        params.set(\"budgetMax\", String(effectiveFilters.budgetMax));\n      return `${apiUrl}/leads?${params.toString()}`;\n    },\n    [apiUrl, page, limit, debouncedQuery, brokerId, leadViewMode]\n  );\n\n  const loadLeads = useCallback(\n    async (\n      overrideFilters = null,\n      overridePage = null,\n      overrideLimit = null,\n      overrideQuery = null,\n      overrideViewMode = null\n    ) => {\n      // Don't load leads if we don't have brokerId yet\n      if (!brokerId && !brokerIdLoading) return;\n\n      try {\n        setLeadsLoading(true);\n        setLeadsError(\"\");\n        const f = overrideFilters ?? filters;\n        const p = overridePage ?? page;\n        const l = overrideLimit ?? limit;\n        const q = overrideQuery ?? debouncedQuery;\n        const v = overrideViewMode ?? leadViewMode;\n\n        const response = await fetch(buildRequestUrl(f, p, l, q, v), {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            ...(token ? { Authorization: `Bearer ${token}` } : {}),\n          },\n        });\n\n        if (response.ok) {\n          const data = await response.json();\n          let items = [],\n            totalCount = 0;\n          if (Array.isArray(data?.data?.items)) {\n            items = data.data.items;\n            totalCount = data.data.total ?? data.total ?? items.length;\n          } else if (Array.isArray(data?.data?.leads)) {\n            items = data.data.leads;\n            totalCount = data.data.total ?? data.total ?? items.length;\n          } else if (Array.isArray(data?.data)) {\n            items = data.data;\n            totalCount = data.total ?? items.length;\n          } else if (Array.isArray(data?.leads)) {\n            items = data.leads;\n            totalCount = data.total ?? items.length;\n          } else if (Array.isArray(data)) {\n            items = data;\n            totalCount = items.length;\n          }\n          \n          // Filter \"Transferred to Me\" view: exclude leads created by current broker\n          // Include leads with \"all\", \"region\", or \"individual\" transfers (API handles region matching)\n          if (v === \"transferred\") {\n            items = items.filter((lead) => {\n              // Exclude leads created by the current logged-in broker\n              // They should not appear in \"Transferred to Me\" even if shared with all/region\n              const leadCreatorId = \n                (lead?.createdBy?._id || lead?.createdBy?.id || lead?.createdBy)?.toString();\n              if (brokerId && leadCreatorId === brokerId.toString()) {\n                return false;\n              }\n              \n              // Include leads that have any transfers (all, region, or individual)\n              // The API endpoint already filters by toBroker, so region matching is handled there\n              const transfers = Array.isArray(lead?.transfers) ? lead.transfers : [];\n              return transfers.length > 0;\n            });\n            // Update total count after filtering\n            totalCount = items.length;\n          }\n          \n          setLeads(items);\n          setTotal(totalCount);\n        } else {\n          setLeadsError(\"Failed to load leads\");\n          setLeads([]);\n          setTotal(0);\n        }\n      } catch {\n        setLeadsError(\"Error loading leads\");\n        setLeads([]);\n        setTotal(0);\n      } finally {\n        setLeadsLoading(false);\n      }\n    },\n    [\n      filters,\n      page,\n      limit,\n      debouncedQuery,\n      token,\n      buildRequestUrl,\n      brokerId,\n      brokerIdLoading,\n      leadViewMode,\n    ]\n  );\n\n  // Now that page/limit/loadLeads exist, define clearAdvancedFilters\n  clearAdvancedFilters = () => {\n    const reset = {\n      ...filters,\n      status: { value: \"all\", label: \"All Status\" },\n      broker: { value: \"all\", label: \"All Brokers\" },\n      region: { value: \"all\", label: \"All Regions\" },\n      propertyType: { value: \"all\", label: \"All Property Types\" },\n      requirement: { value: \"all\", label: \"All Requirements\" },\n      startDate: \"\",\n      endDate: \"\",\n      budgetMax: 500000,\n    };\n    setFilters(reset);\n    setPage(1);\n    loadLeads(reset, 1, limit, debouncedQuery);\n  };\n\n  useEffect(() => {\n    loadLeads();\n  }, [page, limit]); // eslint-disable-line\n  useEffect(() => {\n    page !== 1 ? setPage(1) : loadLeads();\n  }, [debouncedQuery]); // eslint-disable-line\n  useEffect(() => {\n    if (brokerId) loadLeads();\n  }, [brokerId]); // Load leads when brokerId is available\n  useEffect(() => {\n    loadLeads();\n  }, [leadViewMode]); // Load leads when view mode changes\n\n  /* ───────────── Status styles to match screenshot ───────────── */\n  const getStatusBadgeClasses = (status) => {\n    const s = (status || \"\").toString().toLowerCase();\n    if (s === \"new\") return \"bg-green-50 text-green-900\";\n    if (s === \"contacted\" || s === \"in progress\")\n      return \"bg-amber-100 text-amber-700\";\n    if (s === \"qualified\" || s === \"closed\")\n      return \"bg-emerald-100 text-emerald-700\";\n    if (s === \"rejected\") return \"bg-rose-100 text-rose-700\";\n    return \"bg-gray-100 text-gray-700\";\n  };\n  const getStatusAvatarClasses = (status) => \"bg-green-50 text-green-900\";\n\n  const getInitials = (name) => {\n    if (!name || typeof name !== \"string\") return \"?\";\n    const [a = \"\", b = \"\"] = name.trim().split(/\\s+/);\n    return (a[0] || \"\" + b[0] || \"\").toUpperCase();\n  };\n\n  /* ───────────── Regions fetch ───────────── */\n  const loadRegions = async () => {\n    try {\n      setRegionsLoading(true);\n      setRegionsError(\"\");\n      const res = await fetch(`${apiUrl}/regions`, {\n        headers: { \"Content-Type\": \"application/json\" },\n      });\n      if (!res.ok) throw new Error(\"bad\");\n      const data = await res.json();\n      let regions = [];\n      if (data?.success && Array.isArray(data?.data?.regions))\n        regions = data.data.regions;\n      else if (Array.isArray(data)) regions = data;\n      else if (Array.isArray(data?.data)) regions = data.data;\n      else if (Array.isArray(data?.regions)) regions = data.regions;\n      else if (data?._id && data?.name) regions = [data];\n      setRegionsList(regions);\n    } catch {\n      setRegionsError(\"Error loading regions\");\n      setRegionsList([]);\n    } finally {\n      setRegionsLoading(false);\n    }\n  };\n  useEffect(() => {\n    loadRegions();\n  }, []); // eslint-disable-line\n\n  // Fetch nearest regions for the logged-in broker to suggest in Add Lead modal\n  const loadNearestRegions = useCallback(async () => {\n    if (!brokerId) return;\n    try {\n      setNearestRegionsLoading(true);\n      setNearestRegionsError(\"\");\n      const url = `${apiUrl}/regions/nearest?brokerId=${encodeURIComponent(\n        brokerId\n      )}&limit=5`;\n      const res = await fetch(url, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        },\n      });\n      if (!res.ok) throw new Error(\"bad\");\n      const data = await res.json();\n      let regions = [];\n      if (data?.success && Array.isArray(data?.data?.regions))\n        regions = data.data.regions;\n      else if (Array.isArray(data)) regions = data;\n      else if (Array.isArray(data?.data)) regions = data.data;\n      else if (Array.isArray(data?.regions)) regions = data.regions;\n      else if (data?._id && data?.name) regions = [data];\n      setNearestRegionsList(regions);\n    } catch {\n      setNearestRegionsError(\"Error loading nearest regions\");\n      setNearestRegionsList([]);\n    } finally {\n      setNearestRegionsLoading(false);\n    }\n  }, [apiUrl, token, brokerId]);\n\n  // (moved) Refresh nearest regions when Add Lead opens; placed after showAddLead is defined\n\n  /* ───────────── Options & Select styles (light blue per mock) ───────────── */\n  const statusOptions = [\n    { value: \"all\", label: \"All Status\", isAll: true },\n    { value: \"New\", label: \"New\" },\n    { value: \"Assigned\", label: \"Assigned\" },\n    { value: \"In Progress\", label: \"In Progress\" },\n    { value: \"Closed\", label: \"Closed\" },\n    { value: \"Rejected\", label: \"Rejected\" },\n  ];\n  const propertyTypeOptions = [\n    { value: \"all\", label: \"All Property Types\" },\n    { value: \"Residential\", label: \"Residential\" },\n    { value: \"Commercial\", label: \"Commercial\" },\n    { value: \"Plot\", label: \"Plot\" },\n    { value: \"Other\", label: \"Other\" },\n  ];\n\n  const requirementOptions = [\n    { value: \"all\", label: \"All Requirements\" },\n    { value: \"buy\", label: \"Buy\" },\n    { value: \"rent\", label: \"Rent\" },\n    { value: \"sell\", label: \"Sell\" },\n  ];\n  const regionOptions = useMemo(\n    () => [\n      { value: \"all\", label: \"All Regions\" },\n      ...(Array.isArray(regionsList)\n        ? regionsList.map((r) => ({\n            value: r._id || r.id || r,\n            label: r.name || r.region || r,\n          }))\n        : []),\n    ],\n    [regionsList]\n  );\n\n  const nearestRegionOptions = useMemo(\n    () =>\n      Array.isArray(nearestRegionsList)\n        ? nearestRegionsList.map((r) => ({\n            value: r._id || r.id || r,\n            label: r.name || r.region || r,\n          }))\n        : [],\n    [nearestRegionsList]\n  );\n\n  const customSelectStyles = {\n    control: (p, s) => ({\n      ...p,\n      minHeight: \"40px\",\n      borderRadius: 10,\n      border: \"1px solid #e5e7eb\",\n      fontFamily: \"var(--font-body, inherit)\",\n      fontSize: 12,\n      boxShadow: s.isFocused ? \"0 0 0 4px rgba(13,84,43,0.12)\" : \"0 0 1px #171a1f12, 0 0 2px #171a1f1F\",\n      borderColor: s.isFocused ? \"#0D542B\" : \"#e5e7eb\",\n      background: \"white\",\n      \":hover\": { borderColor: s.isFocused ? \"#0D542B\" : \"#0D542B\" },\n    }),\n    valueContainer: (p) => ({\n      ...p,\n      padding: \"2px 10px\",\n      fontFamily: \"var(--font-body, inherit)\",\n      fontSize: 12,\n    }),\n    indicatorSeparator: () => ({ display: \"none\" }),\n    menuPortal: (p) => ({ ...p, zIndex: 99999 }),\n    option: (p, s) => ({\n      ...p,\n      backgroundColor: s.isSelected\n        ? \"#0D542B\"\n        : s.isFocused\n        ? \"#E8F8F0\"\n        : \"transparent\",\n      color: s.isSelected ? \"#ffffff\" : s.isFocused ? \"#0D542B\" : \"#4b5563\",\n      fontSize: 12,\n      fontFamily: \"var(--font-body, inherit)\",\n      borderRadius: 6,\n      margin: \"2px 6px\",\n      padding: \"8px 12px\",\n      \":active\": {\n        backgroundColor: s.isSelected ? \"#0D542B\" : \"#C8F1DC\",\n        color: s.isSelected ? \"#ffffff\" : \"#0D542B\",\n      },\n    }),\n    singleValue: (p) => ({\n      ...p,\n      color: \"#6b7280\",\n      fontWeight: 400,\n      fontFamily: \"var(--font-body, inherit)\",\n      fontSize: 12,\n    }),\n    input: (p) => ({\n      ...p,\n      color: \"#6b7280\",\n      fontWeight: 400,\n      fontFamily: \"var(--font-body, inherit)\",\n      fontSize: 12,\n    }),\n    placeholder: (p) => ({\n      ...p,\n      color: \"#6b7280\",\n      fontWeight: 400,\n      fontFamily: \"var(--font-body, inherit)\",\n      fontSize: 12,\n    }),\n    multiValueLabel: (p) => ({\n      ...p,\n      color: \"#6b7280\",\n      fontWeight: 400,\n      fontFamily: \"var(--font-body, inherit)\",\n      fontSize: 12,\n    }),\n    menu: (p) => ({\n      ...p,\n      zIndex: 9999,\n      overflow: \"hidden\",\n      border: \"1px solid #e5e7eb\",\n      borderRadius: 10,\n      fontFamily: \"var(--font-body, inherit)\",\n      fontSize: 12,\n    }),\n    menuList: (p) => ({\n      ...p,\n      maxHeight: 320,\n      overflowY: \"auto\",\n      overflowX: \"hidden\",\n      paddingRight: 0,\n      fontFamily: \"var(--font-body, inherit)\",\n      fontSize: 12,\n    }),\n  };\n\n  // Light avatar color helper\n  const getAvatarColor = (seed) => {\n    // Solid light colors with dark text for high readability\n    const palette = [\n      { bg: \"bg-sky-100\", text: \"text-sky-800\" },\n      { bg: \"bg-emerald-100\", text: \"text-emerald-800\" },\n      { bg: \"bg-violet-100\", text: \"text-violet-800\" },\n    ];\n    const s = String(seed || \"\");\n    let hash = 0;\n    for (let i = 0; i < s.length; i++) {\n      hash = (hash * 31 + s.charCodeAt(i)) >>> 0;\n    }\n    return palette[hash % palette.length];\n  };\n\n  // No gradient needed now; avatars use solid light backgrounds\n\n  // Region helpers (support new and old API shapes)\n  const regionIdToName = useMemo(() => {\n    const map = new Map();\n    (Array.isArray(regionsList) ? regionsList : []).forEach((reg) => {\n      const id = reg?._id || reg?.id;\n      const name = reg?.name || reg?.region || reg?.city || \"\";\n      if (id && name) map.set(String(id), String(name));\n    });\n    return map;\n  }, [regionsList]);\n\n  const getRegionName = (r) => {\n    if (!r) return \"\";\n    if (typeof r === \"string\") return regionIdToName.get(r) || r;\n    if (typeof r === \"object\") return r.name || r.region || r.city || \"\";\n    return \"\";\n  };\n  const getPrimarySecondaryRegionText = (row) => {\n    const primary = row?.primaryRegion || row?.region;\n    const secondary = row?.secondaryRegion;\n    const p = getRegionName(primary);\n    const s = getRegionName(secondary);\n    return s ? `${p} • ${s}` : p || \"—\";\n  };\n\n  const getRegionNames = (row) => {\n    const primary = getRegionName(row?.primaryRegion || row?.region);\n    const secondary = getRegionName(row?.secondaryRegion);\n    return { primary, secondary };\n  };\n\n  /* ───────────── Budget formatting helper ───────────── */\n  const formatBudget = (budget) => {\n    if (!budget && budget !== 0) return \"—\";\n    \n    const num = typeof budget === \"number\" ? budget : Number(String(budget).replace(/[^0-9.]/g, \"\"));\n    if (isNaN(num) || num === 0) return \"—\";\n    \n    // 1 Crore = 1,00,00,000\n    if (num >= 10000000) {\n      const crores = num / 10000000;\n      return `₹${crores % 1 === 0 ? crores.toFixed(0) : crores.toFixed(2)} Cr`;\n    }\n    // 1 Lakh = 1,00,000\n    else if (num >= 100000) {\n      const lakhs = num / 100000;\n      return `₹${lakhs % 1 === 0 ? lakhs.toFixed(0) : lakhs.toFixed(2)} Lakh`;\n    }\n    // 1 Thousand = 1,000\n    else if (num >= 1000) {\n      const thousands = num / 1000;\n      return `₹${thousands % 1 === 0 ? thousands.toFixed(0) : thousands.toFixed(2)}K`;\n    }\n    // Less than 1000\n    else {\n      return `₹${num.toLocaleString('en-IN')}`;\n    }\n  };\n\n  /* ───────────── Notification helpers ───────────── */\n  const formatNotificationDate = (dateString) => {\n    if (!dateString) return \"\";\n    try {\n      const date = new Date(dateString);\n      const now = new Date();\n      const diffMs = now - date;\n      const diffMins = Math.floor(diffMs / 60000);\n      const diffHours = Math.floor(diffMs / 3600000);\n      const diffDays = Math.floor(diffMs / 86400000);\n\n      if (diffMins < 1) return \"Just now\";\n      if (diffMins < 60) return `${diffMins} minute${diffMins > 1 ? \"s\" : \"\"} ago`;\n      if (diffHours < 24) return `${diffHours} hour${diffHours > 1 ? \"s\" : \"\"} ago`;\n      if (diffDays === 1) return \"Yesterday\";\n      if (diffDays < 7) return `${diffDays} days ago`;\n      \n      // Format as date if older than a week\n      return date.toLocaleDateString(\"en-US\", {\n        month: \"short\",\n        day: \"numeric\",\n        year: date.getFullYear() !== now.getFullYear() ? \"numeric\" : undefined,\n      });\n    } catch {\n      return \"\";\n    }\n  };\n\n  const getNotificationIcon = (notification) => {\n    const type = (notification?.type || notification?.notificationType || \"\").toLowerCase();\n    const title = (notification?.title || notification?.message || \"\").toLowerCase();\n    \n    // Check for specific keywords in title/message\n    if (type.includes(\"lead\") || title.includes(\"lead created\") || title.includes(\"new lead\")) {\n      return (\n        <svg\n          className=\"w-4 h-4\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          aria-hidden=\"true\"\n        >\n          <path d=\"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\" />\n          <circle cx=\"10\" cy=\"7\" r=\"4\" />\n          <path d=\"M19 8v6M22 11h-6\" />\n        </svg>\n      );\n    }\n    if (type.includes(\"email\") || title.includes(\"email\") || title.includes(\"follow-up\")) {\n      return (\n        <svg\n          className=\"w-4 h-4\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          aria-hidden=\"true\"\n        >\n          <rect x=\"3\" y=\"5\" width=\"18\" height=\"14\" rx=\"2\" />\n          <path d=\"M22 7 12 13 2 7\" />\n        </svg>\n      );\n    }\n    if (type.includes(\"status\") || title.includes(\"status changed\") || title.includes(\"qualified\") || title.includes(\"closed\")) {\n      return (\n        <svg\n          className=\"w-4 h-4\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          aria-hidden=\"true\"\n        >\n          <path d=\"M20 6 9 17l-5-5\" />\n        </svg>\n      );\n    }\n    // Default icon\n    return (\n      <svg\n        className=\"w-4 h-4\"\n        viewBox=\"0 0 24 24\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        aria-hidden=\"true\"\n      >\n        <circle cx=\"12\" cy=\"12\" r=\"10\" />\n        <path d=\"M12 7v5l4 2\" />\n      </svg>\n    );\n  };\n\n  /* ───────────── Add Lead modal ───────────── */\n  const [showAddLead, setShowAddLead] = useState(false);\n  const [addLeadLoading, setAddLeadLoading] = useState(false);\n  const [newLead, setNewLead] = useState({\n    customerName: \"\",\n    customerPhone: \"\",\n    customerEmail: \"\",\n    requirement: { value: \"all\", label: \"All Requirements\" },\n    propertyType: { value: \"all\", label: \"All propertyType\" },\n    budget: \"\",\n    primaryRegion: null,\n    secondaryRegion: null,\n    notes: \"\",\n    files: null,\n  });\n  const [validationErrors, setValidationErrors] = useState({});\n\n  // Refresh nearest regions when Add Lead opens; ensure this is declared after showAddLead\n  useEffect(() => {\n    if (showAddLead && brokerId) {\n      loadNearestRegions();\n    }\n  }, [showAddLead, brokerId, loadNearestRegions]);\n\n  // Validation functions\n  const validatePhone = (phone) => {\n    const phoneRegex = /^\\d{10}$/;\n    return phoneRegex.test(phone.replace(/\\D/g, \"\"));\n  };\n\n  const validateEmail = (email) => {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n  };\n\n  const validateForm = () => {\n    const errors = {};\n\n    if (!newLead.customerName.trim()) {\n      errors.customerName = \"Customer name is required\";\n    }\n\n    if (!newLead.customerPhone.trim()) {\n      errors.customerPhone = \"Phone number is required\";\n    } else if (!validatePhone(newLead.customerPhone)) {\n      errors.customerPhone = \"Phone number must be exactly 10 digits\";\n    }\n\n    if (!newLead.customerEmail.trim()) {\n      errors.customerEmail = \"Email is required\";\n    } else if (!validateEmail(newLead.customerEmail)) {\n      errors.customerEmail = \"Please enter a valid email address\";\n    }\n\n    setValidationErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  const handleNewLeadChange = (e) => {\n    const { name, value, files } = e.target;\n\n    // Special handling for phone number - only allow digits and limit to 10\n    if (name === \"customerPhone\") {\n      const digitsOnly = value.replace(/\\D/g, \"\");\n      const limitedValue = digitsOnly.slice(0, 10);\n      setNewLead((p) => ({ ...p, [name]: limitedValue }));\n\n      // Real-time validation for phone - only show error if user tries to submit without 10 digits\n      const errors = { ...validationErrors };\n      if (limitedValue.length > 0 && limitedValue.length < 10) {\n        errors.customerPhone = `Phone number must be 10 digits`;\n      } else {\n        delete errors.customerPhone;\n      }\n      setValidationErrors(errors);\n      return;\n    }\n\n    // Special handling for email - real-time validation\n    if (name === \"customerEmail\") {\n      setNewLead((p) => ({ ...p, [name]: value }));\n\n      // Real-time validation for email - only show error if user tries to submit with invalid email\n      const errors = { ...validationErrors };\n      if (value.length > 0 && !validateEmail(value)) {\n        errors.customerEmail = \"Please enter a valid email address\";\n      } else {\n        delete errors.customerEmail;\n      }\n      setValidationErrors(errors);\n      return;\n    }\n\n    // For other fields\n    setNewLead((p) => ({ ...p, [name]: files ? files : value }));\n\n    // Clear validation error when user starts typing\n    if (validationErrors[name]) {\n      setValidationErrors((prev) => ({ ...prev, [name]: \"\" }));\n    }\n  };\n\n  const modalSelectStyles = {\n    ...customSelectStyles,\n    menuPortal: (base) => ({ ...base, zIndex: 999999 }), // above modal/overlay\n  };\n  const handleAddLeadSubmit = async () => {\n    // Validate form before submission\n    if (!validateForm()) {\n      toast.error(\"Please fix the validation errors before submitting\");\n      return;\n    }\n\n    try {\n      setAddLeadLoading(true);\n      const req =\n        typeof newLead.requirement === \"object\"\n          ? newLead.requirement.label || newLead.requirement.value\n          : newLead.requirement;\n      const ptype =\n        typeof newLead.propertyType === \"object\"\n          ? newLead.propertyType.label || newLead.propertyType.value\n          : newLead.propertyType;\n      const primaryRegionId =\n        newLead.primaryRegion && typeof newLead.primaryRegion === \"object\"\n          ? newLead.primaryRegion.value || newLead.primaryRegion._id\n          : newLead.primaryRegion;\n      const secondaryRegionId =\n        newLead.secondaryRegion && typeof newLead.secondaryRegion === \"object\"\n          ? newLead.secondaryRegion.value || newLead.secondaryRegion._id\n          : newLead.secondaryRegion;\n      const payload = {\n        customerName: newLead.customerName || \"\",\n        customerPhone: newLead.customerPhone || \"\",\n        customerEmail: newLead.customerEmail || \"\",\n        requirement: req || \"\",\n        propertyType: ptype || \"\",\n        budget:\n          newLead.budget !== \"\" && newLead.budget !== null\n            ? parseFloat(newLead.budget)\n            : 0,\n        // API requires primaryRegionId (required) and secondaryRegionId (optional)\n        primaryRegionId:\n          primaryRegionId && primaryRegionId !== \"select region\"\n            ? primaryRegionId\n            : \"\",\n        createdBy: brokerId, // Explicitly set the createdBy field\n      };\n      if (secondaryRegionId && secondaryRegionId !== \"select region\") {\n        payload.secondaryRegionId = secondaryRegionId;\n      }\n\n      // creating lead payload\n\n      const res = await fetch(`${apiUrl}/leads`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        },\n        body: JSON.stringify(payload),\n      });\n      if (!res.ok) {\n        try {\n          const err = await res.json();\n          const msg = err?.message || err?.error || \"Failed to create lead\";\n          toast.error(msg);\n        } catch {\n          toast.error(\"Failed to create lead\");\n        }\n        return;\n      }\n      // Read created lead from API to use its id for transfer\n      let createdLeadResp = null;\n      try {\n        createdLeadResp = await res.json();\n      } catch {}\n      const createdLead =\n        (createdLeadResp &&\n          (createdLeadResp.lead ||\n            createdLeadResp.data ||\n            createdLeadResp.newLead)) ||\n        createdLeadResp ||\n        null;\n\n      toast.success(\"Lead created successfully\");\n      await loadLeads();\n      // Prefill selectedLead with the newly created lead if available; else fetch latest\n      let leadForTransfer =\n        createdLead && (createdLead._id || createdLead.id)\n          ? createdLead\n          : await fetchLatestLead();\n      if (leadForTransfer) setSelectedLead(leadForTransfer);\n      // Open transfer modal immediately for the newly created lead\n      setShowTransfer(true);\n      setTransferForm({ brokerIds: [], notes: \"\", selectAllFiltered: false });\n      if (!brokersList || brokersList.length === 0) {\n        loadBrokers();\n      }\n      setShowAddLead(false);\n      setNewLead({\n        customerName: \"\",\n        customerPhone: \"\",\n        customerEmail: \"\",\n        requirement: \"select requirement\",\n        propertyType: \"select propertyType\",\n        budget: \"\",\n        region: \"select region\",\n        notes: \"\",\n        files: null,\n      });\n      setValidationErrors({});\n    } catch {\n      toast.error(\"Error creating lead\");\n    } finally {\n      setAddLeadLoading(false);\n    }\n  };\n\n  /* ───────────── Transfer modal ───────────── */\n  const [showTransfer, setShowTransfer] = useState(false);\n  const [transferForm, setTransferForm] = useState({\n    brokerIds: [],\n    notes: \"\",\n    selectAllFiltered: false,\n  });\n  const [transferFilter, setTransferFilter] = useState(\"\");\n  const transferSelectRef = useRef(null);\n  const [transferMode, setTransferMode] = useState(\"all\"); // 'all' | 'region' | 'select'\n  const [transferRegion, setTransferRegion] = useState(null);\n\n  // Custom react-select MenuList with a Select All checkbox\n  const BrokerMenuList = (props) => {\n    const { children } = props;\n    const selectAllChecked = !!transferForm.selectAllFiltered;\n    // Compute visible options from current props (supports single child and groups)\n    const rawChildren = props?.children;\n    const toArray = (c) => (Array.isArray(c) ? c : c ? [c] : []);\n    const options = toArray(rawChildren)\n      .flatMap((child) => {\n        const direct = child?.props?.data?.value;\n        if (direct) return [direct];\n        const grouped = toArray(child?.props?.children)\n          .map((gc) => gc?.props?.data?.value)\n          .filter(Boolean);\n        return grouped;\n      })\n      .filter(Boolean);\n    return (\n      <div>\n        <div className=\"flex items-center justify-between px-3 py-2 border-b border-gray-100 bg-gray-50\">\n          <span className=\"text-xs text-slate-600\">Filtered brokers</span>\n          <label className=\"flex items-center gap-2 text-xs text-slate-600 cursor-pointer select-none\">\n            <input\n              type=\"checkbox\"\n              className=\"rounded border-gray-300 text-emerald-600 focus:ring-emerald-500 cursor-pointer\"\n              checked={selectAllChecked}\n              onChange={(e) => {\n                const checked = e.target.checked;\n                setTransferForm((prev) => ({\n                  ...prev,\n                  selectAllFiltered: checked,\n                  brokerIds: checked\n                    ? Array.from(\n                        new Set([...(prev.brokerIds || []), ...options])\n                      )\n                    : (prev.brokerIds || []).filter(\n                        (id) => !options.includes(id)\n                      ),\n                }));\n                // keep the menu open and focus the input again\n                try {\n                  const input = document.querySelector(\n                    '[id^=\"react-select\"][id$=\"-input\"]'\n                  );\n                  input?.focus();\n                } catch {}\n                // Auto-uncheck after applying so user can use it again easily\n                if (checked) {\n                  setTimeout(\n                    () =>\n                      setTransferForm((prev) => ({\n                        ...prev,\n                        selectAllFiltered: false,\n                      })),\n                    0\n                  );\n                }\n              }}\n            />\n            Select all\n          </label>\n        </div>\n        <RSComponents.MenuList {...props}>{children}</RSComponents.MenuList>\n      </div>\n    );\n  };\n  const [transferLoading, setTransferLoading] = useState(false);\n  const [brokersList, setBrokersList] = useState([]);\n  const [brokersLoading, setBrokersLoading] = useState(false);\n  const [brokersError, setBrokersError] = useState(\"\");\n  // Helper: fetch the most recent lead for this broker\n  const fetchLatestLead = useCallback(async () => {\n    try {\n      const params = new URLSearchParams();\n      if (brokerId) params.set(\"createdBy\", brokerId);\n      // Fetch a few and sort client-side (API does not allow \"sort\")\n      params.set(\"limit\", \"5\");\n      const url = `${apiUrl}/leads?${params.toString()}`;\n      const res = await fetch(url, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        },\n      });\n      if (!res.ok) return null;\n      const data = await res.json();\n      const items = Array.isArray(data?.data?.items)\n        ? data.data.items\n        : Array.isArray(data?.data?.leads)\n        ? data.data.leads\n        : Array.isArray(data?.data)\n        ? data.data\n        : Array.isArray(data?.leads)\n        ? data.leads\n        : Array.isArray(data)\n        ? data\n        : [];\n      if (!items || items.length === 0) return null;\n      const withDate = items\n        .map((it) => ({\n          item: it,\n          ts: it?.createdAt\n            ? Date.parse(it.createdAt)\n            : it?._id\n            ? Date.parse(it._id?.toString().substring(0, 8))\n            : 0,\n        }))\n        .sort((a, b) => (b.ts || 0) - (a.ts || 0));\n      return withDate[0]?.item || items[0] || null;\n    } catch {\n      return null;\n    }\n  }, [apiUrl, token, brokerId]);\n\n  const loadBrokers = async () => {\n    try {\n      setBrokersLoading(true);\n      setBrokersError(\"\");\n      const base = apiUrl;\n      const res = await fetch(`${base}/brokers`, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        },\n      });\n      if (!res.ok) throw new Error(\"bad\");\n      const data = await res.json();\n      let items = [];\n      if (Array.isArray(data?.data?.brokers)) items = data.data.brokers;\n      else if (Array.isArray(data?.data)) items = data.data;\n      else if (Array.isArray(data?.brokers)) items = data.brokers;\n      else if (Array.isArray(data)) items = data;\n      setBrokersList(items);\n    } catch {\n      setBrokersError(\"Failed to load brokers\");\n      setBrokersList([]);\n    } finally {\n      setBrokersLoading(false);\n    }\n  };\n\n  // Delete lead\n  const handleDeleteLead = async (lead) => {\n    // Check if lead has been transferred\n    const transferredTo =\n      lead?.transferredTo || lead?.transferredBrokers || lead?.transfers || [];\n    if (Array.isArray(transferredTo) && transferredTo.length > 0) {\n      toast.error(\n        \"Cannot delete lead that has been transferred to other brokers\"\n      );\n      return;\n    }\n\n    try {\n      const leadId = lead?._id || lead?.id;\n      if (!leadId) {\n        toast.error(\"Invalid lead id\");\n        return;\n      }\n      const res = await fetch(`${apiUrl}/leads/${leadId}`, {\n        method: \"DELETE\",\n        headers: {\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        },\n      });\n      if (!res.ok) {\n        try {\n          const err = await res.json();\n          const msg = err?.message || err?.error || \"Failed to delete lead\";\n          toast.error(msg);\n        } catch {\n          toast.error(\"Failed to delete lead\");\n        }\n        return;\n      }\n      toast.success(\"Lead deleted\");\n      await loadLeads();\n    } catch (e) {\n      toast.error(\"Error deleting lead\");\n    }\n  };\n\n  const openTransferForLead = (lead) => {\n    setSelectedLead(lead);\n    setTransferForm({ brokerIds: [], notes: \"\" });\n    setTransferMode(\"all\");\n    setTransferRegion(null);\n    setShowTransfer(true);\n    if (!brokersList || brokersList.length === 0) {\n      loadBrokers();\n    }\n  };\n\n  const brokerMatchesRegion = (b, regionId) => {\n    if (!b || !regionId) return false;\n    // b.region can be array of objects, single object, or string id\n    if (Array.isArray(b.region)) {\n      return b.region.some(\n        (r) =>\n          r &&\n          (r._id || r.id || r) &&\n          String(r._id || r.id || r) === String(regionId)\n      );\n    }\n    if (b.region && typeof b.region === \"object\") {\n      const id = b.region._id || b.region.id;\n      return id ? String(id) === String(regionId) : false;\n    }\n    if (typeof b.region === \"string\") {\n      return String(b.region) === String(regionId);\n    }\n    // some backends use primaryRegion\n    if (b.primaryRegion) {\n      const id =\n        typeof b.primaryRegion === \"object\"\n          ? b.primaryRegion._id || b.primaryRegion.id\n          : b.primaryRegion;\n      return id ? String(id) === String(regionId) : false;\n    }\n    return false;\n  };\n\n  const submitTransfer = async () => {\n    if (!selectedLead) {\n      toast.error(\"No lead selected\");\n      return;\n    }\n    let leadId = selectedLead._id || selectedLead.id;\n    if (!leadId) {\n      const latest = await fetchLatestLead();\n      if (latest && (latest._id || latest.id)) {\n        leadId = latest._id || latest.id;\n        setSelectedLead((prev) => ({ ...(latest || prev) }));\n      }\n    }\n    if (!leadId) {\n      toast.error(\"Invalid lead id\");\n      return;\n    }\n\n    // Get fromBroker ID (current broker)\n    if (!brokerId) {\n      toast.error(\"Broker ID not found\");\n      return;\n    }\n\n    // Build transfers array based on shareType\n    // Matches curl examples: all, region, or individual shareType\n    let transfers = [];\n\n    if (transferMode === \"all\") {\n      // Case 1: Share with all brokers\n      // curl: { \"transfers\": [{ \"shareType\": \"all\" }], \"fromBroker\": \"...\", \"notes\": \"...\" }\n      transfers.push({\n        shareType: \"all\"\n      });\n    } else if (transferMode === \"region\") {\n      // Case 2: Share with brokers in a specific region\n      // curl: { \"transfers\": [{ \"shareType\": \"region\", \"region\": \"{REGION_ID}\" }], \"fromBroker\": \"...\" }\n      if (!(transferRegion && transferRegion.value)) {\n        toast.error(\"Select a region to share with\");\n        return;\n      }\n      const regionId = String(transferRegion.value);\n      transfers.push({\n        shareType: \"region\",\n        region: regionId\n      });\n    } else if (transferMode === \"select\") {\n      // Case 3: Share with individual broker(s)\n      // curl: { \"transfers\": [{ \"shareType\": \"individual\", \"toBroker\": \"{TO_BROKER_ID}\" }], \"fromBroker\": \"...\", \"notes\": \"...\" }\n      // For multiple brokers, creates one transfer per broker\n      let toBrokers = (transferForm.brokerIds || []).filter((id) => id !== \"all\");\n      if (!toBrokers.length) {\n        toast.error(\"Select at least one broker\");\n        return;\n      }\n      toBrokers.forEach(toBrokerId => {\n        transfers.push({\n          shareType: \"individual\",\n          toBroker: String(toBrokerId)\n        });\n      });\n    } else {\n      toast.error(\"Invalid share mode\");\n      return;\n    }\n\n    // Build request body matching API structure\n    // Matches curl examples exactly\n    const requestBody = {\n      transfers: transfers,\n      fromBroker: String(brokerId)\n    };\n\n    // Only add notes if provided (optional field)\n    if (transferForm.notes && transferForm.notes.trim()) {\n      requestBody.notes = transferForm.notes.trim();\n    }\n\n    console.log('Transfer request body:', JSON.stringify(requestBody, null, 2));\n    console.log('Transfer URL:', `${apiUrl}/leads/${leadId}/transfer-and-notes`);\n\n    try {\n      setTransferLoading(true);\n      // POST /leads/{leadId}/transfer-and-notes\n      // Headers: Content-Type: application/json, Authorization: Bearer {token}\n      const res = await fetch(`${apiUrl}/leads/${leadId}/transfer-and-notes`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        },\n        body: JSON.stringify(requestBody),\n      });\n      if (!res.ok) {\n        let errorMessage = \"Failed to share lead\";\n        try {\n          const errorData = await res.json();\n          console.error('Transfer API error response:', errorData);\n          errorMessage = errorData.message || errorData.error || errorMessage;\n        } catch (e) {\n          const errorText = await res.text().catch(() => '');\n          console.error('Transfer API error (text):', errorText);\n          errorMessage = errorText || errorMessage;\n        }\n        toast.error(errorMessage);\n        return;\n      }\n      toast.success(\"Share request sent\");\n      setShowTransfer(false);\n      setTransferForm({ brokerIds: [], notes: \"\" });\n      setTransferRegion(null);\n      setTransferMode(\"all\");\n    } catch (error) {\n      toast.error(\"Error sending transfer request\");\n    } finally {\n      setTransferLoading(false);\n    }\n  };\n\n  /* ───────────── View Drawer ───────────── */\n  const [showView, setShowView] = useState(false);\n  const [selectedLead, setSelectedLead] = useState(null);\n  const [viewEditMode, setViewEditMode] = useState(false);\n  const [viewClosing, setViewClosing] = useState(false);\n  const [statusEditMode, setStatusEditMode] = useState(false);\n  const [statusSaving, setStatusSaving] = useState(false);\n  const [viewForm, setViewForm] = useState({\n    name: \"\",\n    contact: \"\",\n    email: \"\",\n    budget: \"\",\n    requirement: \"\",\n    propertyType: \"\",\n    primaryRegion: null,\n    secondaryRegion: null,\n    status: \"\",\n  });\n  const [viewSaving, setViewSaving] = useState(false);\n  const [pendingDeleteTransferId, setPendingDeleteTransferId] = useState(null);\n  const [pendingDeleteRegionTransferId, setPendingDeleteRegionTransferId] = useState(null);\n\n  // Ensure nearest regions are loaded when the View Drawer opens as well\n  useEffect(() => {\n    if (showView && brokerId) {\n      loadNearestRegions();\n    }\n  }, [showView, brokerId, loadNearestRegions]);\n\n  // Delete a specific transfer (to-broker) for the selected lead\n  const deleteTransfer = async (toBrokerId) => {\n    try {\n      if (!selectedLead || !toBrokerId) return;\n      const leadId = selectedLead._id || selectedLead.id;\n      const res = await fetch(\n        `${apiUrl}/leads/${encodeURIComponent(\n          leadId\n        )}/transfers/${encodeURIComponent(toBrokerId)}`,\n        {\n          method: \"DELETE\",\n          headers: {\n            ...(token ? { Authorization: `Bearer ${token}` } : {}),\n            Accept: \"application/json\",\n          },\n        }\n      );\n      if (!res.ok) {\n        try {\n          const err = await res.json();\n          toast.error(\n            err?.message || err?.error || \"Failed to delete transfer\"\n          );\n        } catch {\n          toast.error(\"Failed to delete transfer\");\n        }\n        return;\n      }\n      toast.success(\"Transfer removed\");\n      // Refresh selectedLead transfers: reload lead or mutate locally\n      // Simple approach: reload the leads list and re-open view drawer\n      await loadLeads();\n      // Also optimistically remove from selectedLead in memory\n      setSelectedLead((prev) => {\n        if (!prev) return prev;\n        const toId = toBrokerId;\n        const filtered = Array.isArray(prev.transfers)\n          ? prev.transfers.filter((tr) => {\n              const id =\n                tr && typeof tr.toBroker === \"object\"\n                  ? tr.toBroker?._id || tr.toBroker?.id\n                  : tr?.toBroker;\n              return String(id) !== String(toId);\n            })\n          : [];\n        return { ...prev, transfers: filtered };\n      });\n      setPendingDeleteTransferId(null);\n    } catch {\n      toast.error(\"Error deleting transfer\");\n    }\n  };\n\n  // Delete a region transfer\n  const deleteRegionTransfer = async (regionId) => {\n    try {\n      if (!selectedLead || !regionId) return;\n      const leadId = selectedLead._id || selectedLead.id;\n      setPendingDeleteRegionTransferId(regionId);\n      const res = await fetch(\n        `${apiUrl}/leads/${encodeURIComponent(\n          leadId\n        )}/region-transfers/${encodeURIComponent(regionId)}`,\n        {\n          method: \"DELETE\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            ...(token ? { Authorization: `Bearer ${token}` } : {}),\n            Accept: \"application/json\",\n          },\n        }\n      );\n      if (!res.ok) {\n        try {\n          const err = await res.json();\n          toast.error(\n            err?.message || err?.error || \"Failed to delete region transfer\"\n          );\n        } catch {\n          toast.error(\"Failed to delete region transfer\");\n        }\n        setPendingDeleteRegionTransferId(null);\n        return;\n      }\n      toast.success(\"Region transfer removed\");\n      await loadLeads();\n      // Optimistically remove from selectedLead in memory\n      setSelectedLead((prev) => {\n        if (!prev) return prev;\n        const filtered = Array.isArray(prev.transfers)\n          ? prev.transfers.filter((tr) => {\n              const trRegionId = tr?.region;\n              return String(trRegionId) !== String(regionId);\n            })\n          : [];\n        return { ...prev, transfers: filtered };\n      });\n      setPendingDeleteRegionTransferId(null);\n    } catch {\n      toast.error(\"Error deleting region transfer\");\n      setPendingDeleteRegionTransferId(null);\n    }\n  };\n\n  const saveViewEdits = async () => {\n    if (!selectedLead) return;\n    try {\n      setViewSaving(true);\n      const leadId = selectedLead._id || selectedLead.id;\n      const payload = {\n        customerName:\n          viewForm.name !== undefined\n            ? viewForm.name\n            : selectedLead.customerName || selectedLead.name || \"\",\n        customerPhone:\n          viewForm.contact !== undefined\n            ? viewForm.contact\n            : selectedLead.customerPhone || \"\",\n        customerEmail:\n          viewForm.email !== undefined\n            ? viewForm.email\n            : selectedLead.customerEmail || \"\",\n        requirement:\n          viewForm.requirement !== undefined\n            ? viewForm.requirement\n            : selectedLead.requirement || \"\",\n        propertyType:\n          viewForm.propertyType !== undefined\n            ? viewForm.propertyType\n            : selectedLead.propertyType || \"\",\n        budget:\n          viewForm.budget !== \"\" && viewForm.budget !== null\n            ? Number(viewForm.budget)\n            : typeof selectedLead.budget === \"number\"\n            ? selectedLead.budget\n            : 0,\n        status: viewForm.status\n          ? viewForm.status\n          : selectedLead.status || \"New\",\n      };\n      if (\n        viewForm.primaryRegion &&\n        viewForm.primaryRegion.value &&\n        viewForm.primaryRegion.value !== \"all\"\n      ) {\n        payload.primaryRegionId = viewForm.primaryRegion.value;\n      }\n      if (\n        viewForm.secondaryRegion &&\n        viewForm.secondaryRegion.value &&\n        viewForm.secondaryRegion.value !== \"all\"\n      ) {\n        payload.secondaryRegionId = viewForm.secondaryRegion.value;\n      }\n\n      const res = await fetch(`${apiUrl}/leads/${leadId}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        },\n        body: JSON.stringify(payload),\n      });\n      if (!res.ok) {\n        try {\n          const err = await res.json();\n          const msg = err?.message || err?.error || \"Failed to update lead\";\n          toast.error(msg);\n        } catch {\n          toast.error(\"Failed to update lead\");\n        }\n        return;\n      }\n      const data = await res.json();\n      const updated = data?.data || data;\n\n      setSelectedLead((prev) => ({\n        ...prev,\n        ...updated,\n        name:\n          updated.name || updated.customerName || viewForm.name || prev?.name,\n        customerName:\n          updated.customerName || viewForm.name || prev?.customerName,\n        contact:\n          updated.contact ||\n          updated.customerPhone ||\n          viewForm.contact ||\n          prev?.contact,\n        customerPhone:\n          updated.customerPhone || viewForm.contact || prev?.customerPhone,\n        customerEmail:\n          updated.customerEmail || viewForm.email || prev?.customerEmail,\n        requirement:\n          updated.requirement || viewForm.requirement || prev?.requirement,\n        propertyType:\n          updated.propertyType || viewForm.propertyType || prev?.propertyType,\n        budget:\n          typeof updated.budget === \"number\"\n            ? updated.budget\n            : viewForm.budget !== \"\"\n            ? Number(viewForm.budget)\n            : prev?.budget,\n        primaryRegion:\n          updated.primaryRegion ||\n          (viewForm.primaryRegion\n            ? {\n                name: viewForm.primaryRegion.label,\n                _id: viewForm.primaryRegion.value,\n              }\n            : prev?.primaryRegion || prev?.region),\n        secondaryRegion:\n          updated.secondaryRegion ||\n          (viewForm.secondaryRegion\n            ? {\n                name: viewForm.secondaryRegion.label,\n                _id: viewForm.secondaryRegion.value,\n              }\n            : prev?.secondaryRegion),\n      }));\n\n      toast.success(\"Lead updated\");\n      setViewEditMode(false);\n      await loadLeads();\n    } catch (e) {\n      toast.error(\"Error updating lead\");\n    } finally {\n      setViewSaving(false);\n    }\n  };\n\n  const saveStatusUpdate = async (newStatus) => {\n    if (!selectedLead) return;\n    try {\n      setStatusSaving(true);\n      const leadId = selectedLead._id || selectedLead.id;\n      const payload = {\n        status: newStatus,\n      };\n\n      const res = await fetch(`${apiUrl}/leads/${leadId}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        },\n        body: JSON.stringify(payload),\n      });\n      if (!res.ok) {\n        try {\n          const err = await res.json();\n          const msg = err?.message || err?.error || \"Failed to update status\";\n          toast.error(msg);\n        } catch {\n          toast.error(\"Failed to update status\");\n        }\n        return;\n      }\n      const data = await res.json();\n      const updated = data?.data || data;\n\n      setSelectedLead((prev) => ({\n        ...prev,\n        status: updated.status || newStatus,\n      }));\n\n      toast.success(\"Status updated successfully\");\n      setStatusEditMode(false);\n      await loadLeads();\n    } catch (e) {\n      toast.error(\"Error updating status\");\n    } finally {\n      setStatusSaving(false);\n    }\n  };\n\n  const handleViewFieldChange = (e) =>\n    setViewForm((p) => ({ ...p, [e.target.name]: e.target.value }));\n\n  const clearFilters = () => {\n    const reset = {\n      query: \"\",\n      status: { value: \"all\", label: \"All Statuses\" },\n      broker: { value: \"all\", label: \"All Brokers\" },\n      region: { value: \"all\", label: \"All Regions\" },\n      propertyType: { value: \"all\", label: \"All Property Types\" },\n      requirement: { value: \"all\", label: \"All Requirements\" },\n      startDate: \"\",\n      endDate: \"\",\n      budgetMax: 500000,\n    };\n    setFilters(reset);\n    setPage(1);\n    loadLeads(reset, 1, limit, \"\");\n  };\n\n  /* ───────────── Content Loader Components ───────────── */\n  const ContentLoader = ({ className = \"\" }) => (\n    <div className={`animate-pulse ${className}`}>\n      <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\n      <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\n    </div>\n  );\n\n  const TableRowLoader = () => (\n    <div className=\"grid grid-cols-12 items-center px-6 py-4 animate-pulse\">\n      <div className=\"col-span-2 flex items-center gap-3\">\n        <div className=\"h-4 w-28 rounded bg-gray-200\" />\n      </div>\n      <div className=\"col-span-2 h-4 w-40 rounded bg-gray-200\" />\n      <div className=\"col-span-2 h-4 w-28 rounded bg-gray-200\" />\n      <div className=\"col-span-1 h-4 w-14 rounded bg-gray-200\" />\n      <div className=\"col-span-2 h-4 w-20 rounded bg-gray-200\" />\n      <div className=\"col-span-1 flex justify-center\">\n        <div className=\"h-6 w-16 rounded-full bg-gray-200\" />\n      </div>\n      <div className=\"col-span-2 flex justify-end gap-2\">\n        <div className=\"w-7 h-7 rounded-lg bg-gray-200\" />\n        <div className=\"w-7 h-7 rounded-lg bg-gray-200\" />\n        <div className=\"w-7 h-7 rounded-lg bg-gray-200\" />\n      </div>\n    </div>\n  );\n\n  const EmptyState = () => (\n    <div className=\"flex flex-col items-center justify-center py-12 px-6\">\n      <div className=\"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4\">\n        <svg\n          className=\"w-8 h-8 text-gray-400\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth=\"2\"\n            d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n          />\n        </svg>\n      </div>\n      <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n        No enquiries found\n      </h3>\n      <p className=\"text-sm text-gray-500 text-center max-w-sm\">\n        {filters.query ||\n        filters.status?.value !== \"all\" ||\n        filters.region?.value !== \"all\" ||\n        filters.propertyType?.value !== \"all\" ||\n        filters.requirement?.value !== \"all\" ||\n        filters.budgetMax !== 500000\n          ? \"No enquiries match your current filters. Try adjusting your search criteria.\"\n          : \"You don't have any leads yet. Click 'Add New Enquiry' to get started.\"}\n      </p>\n      {!filters.query &&\n        filters.status?.value === \"all\" &&\n        filters.region?.value === \"all\" &&\n        filters.propertyType?.value === \"all\" &&\n        filters.requirement?.value === \"all\" &&\n        filters.budgetMax === 500000 && (\n          <button\n            onClick={() => setShowAddLead(true)}\n            className=\"mt-4 px-4 py-2 bg-green-900 text-white text-sm font-semibold rounded-lg hover:bg-green-950 transition-colors\"\n          >\n            Add Your First Enquiry\n          </button>\n        )}\n    </div>\n  );\n\n  const headerData = {\n    title: \"My Enquiries\",\n    description: \"Manage your property requirements, track status, and collaborate with brokers — all in one place.\",\n    // breadcrumb: [\n    //   { label: \"Home\", href: \"/\" },\n    //   { label: \"Enquires\", href: \"/leads\" },\n    // ],\n  };\n\n  return (\n    <ProtectedRoute requiredRole=\"broker\">\n      <HeaderFile data={headerData} />\n      <div className=\"min-h-screen bg-white py-16\">\n        <Toaster position=\"top-right\" toastOptions={{ duration: 3000 }} />\n        <div className=\"w-full mx-auto px-4 md:px-0\">\n          {/* 9 / 3 layout */}\n          <div className=\"grid grid-cols-1 md:grid-cols-12 gap-6\">\n            {/* Header */}\n            {/* Left 9 */}\n            <div className=\"md:col-span-9\">\n              <div className=\"mb-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <h1 className=\" font-archivo text-[18px] leading-[36px] font-bold text-[#171A1FFF]\">\n                      Enquiry Management\n                    </h1>\n                    <p className=\"text-[12px] leading-[20px] font-normal text-[#565D6DFF]\">\n                      Capture enquiries, share with brokers, and track progress —\n                      all in one place.\n                    </p>\n                  </div>\n\n                  {/* View Mode Toggle (single switch with label) */}\n                  <div className=\"flex items-center gap-3\">\n                    <button\n                      type=\"button\"\n                      role=\"switch\"\n                      aria-checked={leadViewMode === \"transferred\"}\n                      onClick={() => {\n                        const next =\n                          leadViewMode === \"my-leads\"\n                            ? \"transferred\"\n                            : \"my-leads\";\n                        setLeadViewMode(next);\n                        setPage(1);\n                        loadLeads(filters, 1, limit, debouncedQuery, next);\n                      }}\n                      className={`relative inline-flex h-5 w-10 items-center rounded-full transition-colors duration-200 border ${\n                        leadViewMode === \"transferred\"\n                          ? \"bg-green-900 border-green-900\"\n                          : \"bg-gray-200 border-gray-300\"\n                      }`}\n                    >\n                      <span\n                        className={`inline-block h-5 w-5 transform rounded-full bg-white shadow transition-transform duration-200 ${\n                          leadViewMode === \"transferred\"\n                            ? \"translate-x-5\"\n                            : \"translate-x-0\"\n                        }`}\n                      />\n                    </button>\n                    <span className=\"text-[12px] leading-5 font-normal text-[#565D6D]\">\n                      {leadViewMode === \"transferred\"\n                        ? \"Transferred to Me\"\n                        : \" My Enquiries\"}\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Stat row */}\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5\">\n                {/* Total Leads (Active Card with Purple Border) */}\n                <div className=\"border border-gray-200 shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] bg-white rounded-lg p-4\">\n                  <p className=\"text-[12px] text-[#565D6DFF] font-medium\">\n                    Total Enquiries\n                  </p>\n                  <div className=\"flex items-center gap-2\">\n                    <p className=\"text-[18px] font-semibold text-gray-900\">\n                      {metricsLoading ? \"—\" : metrics.totalLeads.toLocaleString()}\n                    </p>\n\n                  </div>\n                </div>\n\n                {/* Shared With Me */}\n                <div className=\"border border-gray-200 shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] bg-white rounded-lg p-4\">\n                  <p className=\"text-[12px] text-[#565D6DFF] font-medium\">\n                    Shared With Me\n                  </p>\n                  <div className=\"flex items-center gap-2\">\n                    <p className=\"text-[18px] font-semibold text-gray-900\">\n                      {metricsLoading\n                        ? \"—\"\n                        : Number(\n                            metrics.transferredToMe || metrics.transfersToMe || 0\n                          ).toLocaleString()}\n                    </p>\n\n                  </div>\n                </div>\n\n                {/* Shared By Me */}\n                <div className=\"border shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] border-gray-200 bg-white rounded-lg p-4\">\n                  <p className=\"text-[12px] text-[#565D6DFF] font-medium\">\n                    Shared By Me\n                  </p>\n                  <div className=\"flex items-center gap-2\">\n                    <p className=\"text-[18px] font-semibold text-gray-900\">\n                      {metricsLoading\n                        ? \"—\"\n                        : Number(\n                            metrics.transferredByMe || metrics.transfersByMe || 0\n                          ).toLocaleString()}\n                    </p>\n\n                  </div>\n                </div>\n                {/* <StatCard\n    color=\"violet\"\n    label=\"Avg. Deal Size\"\n    value={metricsLoading ? '—' : `$${Number(metrics.avgDealSize || 0).toLocaleString()}`}\n    deltaText={metricsError ? 'Unable to load' : '↑ 5.1% vs last month'}\n    trend=\"up\"\n  /> */}\n              </div>\n\n              {/* subtle divider before lead cards */}\n              <div className=\"pt-4\">\n                <div className=\"h-px bg-gray-100\" />\n              </div>\n              {/* Search + status + buttons - Flexible layout */}\n              <div className=\"mt-6 flex flex-col sm:flex-row items-stretch sm:items-center gap-3\">\n                {/* Search - Fixed width to match status dropdown */}\n                <div className=\"w-full sm:w-80 relative\">\n                  <input\n                    type=\"text\"\n                    placeholder=\"Search by name, budget, region, or property type…\"\n                    value={filters.query}\n                    onChange={(e) =>\n                      setFilters({ ...filters, query: e.target.value })\n                    }\n                    className=\"w-full pl-11 pr-4 py-2 border border-gray-200 rounded-xl shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] bg-white text-[12px] font-body placeholder-gray-500 focus:outline-none focus:ring-4 focus:ring-green-100 focus:border-green-600\"\n                    style={{ minHeight: \"40px\", fontSize: \"12px\" }}\n                  />\n                  <svg\n                    className=\"w-5 h-5 text-gray-500 absolute left-3 top-1/2 -translate-y-1/2\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth=\"2\"\n                      d=\"M21 21l-4.35-4.35M10 18a8 8 0 100-16 8 8 0 000 16z\"\n                    />\n                  </svg>\n                  {/* Search indicator */}\n                  {isSearching && (\n                    <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\n                      <div className=\"w-4 h-4 border-2 border-green-600 border-t-transparent rounded-full animate-spin\"></div>\n                    </div>\n                  )}\n                </div>\n\n                {/* Status Filter - Same width as search */}\n                <div className=\"w-full sm:w-52\">\n                  <Select\n                    value={filters.status}\n                    onChange={(opt) => {\n                      const next = { ...filters, status: opt };\n                      setFilters(next);\n                      setPage(1);\n                      loadLeads(next, 1, limit, debouncedQuery);\n                    }}\n                    options={statusOptions}\n                    styles={customSelectStyles}\n                    isSearchable\n                    menuPlacement=\"bottom\"\n                  />\n                </div>\n\n                {/* Advanced Filters - Gray color with icon */}\n                <div className=\"w-full sm:w-auto\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowAdvanced(true)}\n                    className=\"w-full sm:w-auto px-3 py-2.5 rounded-xl text-[12px] font-body border border-gray-200 bg-white text-gray-500 hover:text-gray-600 hover:bg-white hover:border-gray-300 shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] cursor-pointer whitespace-nowrap flex items-center justify-center gap-2\"\n                    style={{ minHeight: \"40px\", fontSize: \"12px\" }}\n                  >\n                    <svg\n                      className=\"w-4 h-4\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth=\"2\"\n                        d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z\"\n                      />\n                    </svg>\n                    Advanced Filters\n                  </button>\n                </div>\n\n                {/* Add New Lead - Outline style */}\n                <div className=\"w-full sm:w-auto\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowAddLead(true)}\n                    className=\"w-full sm:w-auto px-3 py-2.5 rounded-xl text-[12px] border border-green-600 text-white bg-[#0D542B]  hover:bg-[#0B4624]  hover:border-green-700 shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] cursor-pointer whitespace-nowrap flex items-center justify-center gap-2\"\n                    style={{ minHeight: \"40px\", fontSize: \"12px\" }}\n                  >\n                    <svg\n                      className=\"w-4 h-4\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth=\"2\"\n                        d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"\n                      />\n                    </svg>\n                    Add New Enquiry\n                  </button>\n                </div>\n\n                {/* Clear Filters - Fixed width, only when needed */}\n                {isAdvancedFiltersApplied && (\n                  <div className=\"w-full sm:w-auto\">\n                    <button\n                      type=\"button\"\n                      onClick={clearAdvancedFilters}\n                      className=\"w-full sm:w-auto px-3 py-2.5 rounded-xl text-[12px] font-semibold border border-gray-200 text-gray-700 hover:bg-gray-50 shadow-sm cursor-pointer whitespace-nowrap\"\n                      title=\"Clear advanced filters\"\n                    >\n                      Clear Filters\n                    </button>\n                  </div>\n                )}\n              </div>\n\n              {/* Table */}\n              <div className=\"mt-6\">\n                {/* Loading */}\n                {leadsLoading && (\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n                    {[...Array(6)].map((_, i) => (\n                      <div\n                        key={i}\n                        className=\"rounded-2xl border border-gray-200 bg-white shadow-sm p-4 animate-pulse\"\n                      >\n                        <div className=\"h-5 w-2/3 bg-gray-200 rounded mb-3\" />\n                        <div className=\"h-4 w-1/2 bg-gray-200 rounded mb-4\" />\n                        <div className=\"h-28 w-full bg-gray-100 rounded mb-4\" />\n                        <div className=\"flex items-center justify-between\">\n                          <div className=\"h-7 w-28 bg-gray-200 rounded\" />\n                          <div className=\"flex gap-2\">\n                            <div className=\"h-7 w-7 bg-gray-200 rounded-lg\" />\n                            <div className=\"h-7 w-7 bg-gray-200 rounded-lg\" />\n                            <div className=\"h-7 w-7 bg-gray-200 rounded-lg\" />\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n\n                {/* Empty State */}\n                {!leadsLoading &&\n                  Array.isArray(leads) &&\n                  leads.length === 0 && <EmptyState />}\n\n                {/* Cards */}\n                {!leadsLoading && Array.isArray(leads) && leads.length > 0 && (\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 md:grid-cols-2 xl:grid-cols-2 gap-6\">\n                    {leads.map((row, idx) => {\n                      // ----- Shared With (avatars from transfers) -----\n                      const transfers = Array.isArray(row?.transfers)\n                        ? row.transfers\n                        : [];\n                      const toBrokers = transfers\n                        .map((t) =>\n                          typeof t?.toBroker === \"object\"\n                            ? t.toBroker\n                            : { _id: t?.toBroker }\n                        )\n                        .filter((b) => b && (b._id || b.name || b.email));\n                      const uniqueToBrokers = Array.from(\n                        new Map(\n                          toBrokers.map((b) => [b._id || b.email || b.name, b])\n                        ).values()\n                      );\n                      const idToBroker = new Map(\n                        (brokersList || []).map((b) => [b._id || b.id, b])\n                      );\n                      const avatars = uniqueToBrokers.map((b) => {\n                        const merged = b._id\n                          ? { ...(idToBroker.get(b._id) || {}), ...b }\n                          : b;\n                        return {\n                          id:\n                            merged._id ||\n                            merged.id ||\n                            merged.email ||\n                            merged.name,\n                          name:\n                            merged.name ||\n                            merged.fullName ||\n                            merged.email ||\n                            \"Broker\",\n                          image:\n                            merged.brokerImage ||\n                            merged.avatarUrl ||\n                            merged.imageUrl ||\n                            \"\",\n                        };\n                      });\n\n                      const isTransferred = (() => {\n                        const transferredTo =\n                          row?.transferredTo ||\n                          row?.transferredBrokers ||\n                          row?.transfers ||\n                          [];\n                        return (\n                          Array.isArray(transferredTo) &&\n                          transferredTo.length > 0\n                        );\n                      })();\n\n                      return (\n                        <div\n                          key={row._id || row.id || idx}\n                          className=\"group relative border shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] border-gray-200 bg-white rounded-lg\"\n                        >\n                          {/* Status Badge - Horizontal Ribbon with Folded Corner */}\n                          <div className=\"absolute top-0 right-0 z-10\">\n                            <div\n                              className=\"text-black text-[10px] leading-[20px] font-semibold px-[8px] py-[1px] rounded-full text-center shadow-md relative\"\n                              style={{\n                                background:\n                                  row.status?.toLowerCase() === \"new\"\n                                    ? \"#FDC700\"\n                                    : row.status?.toLowerCase() === \"assigned\"\n                                    ? \"linear-gradient(90deg, #3b82f6 0%, #1e40af 100%)\"\n                                    : row.status?.toLowerCase() === \"in progress\"\n                                    ? \"linear-gradient(90deg, #f59e0b 0%, #dc2626 100%)\"\n                                    : row.status?.toLowerCase() === \"completed\"\n                                    ? \"linear-gradient(90deg, #10b981 0%, #047857 100%)\"\n                                    : row.status?.toLowerCase() === \"shared\"\n                                    ? \"linear-gradient(90deg, #8b5cf6 0%, #6d28d9 100%)\"\n                                    : row.status?.toLowerCase() === \"closed\"\n                                    ? \"linear-gradient(90deg, #10b981 0%, #047857 100%)\"\n                                    : row.status?.toLowerCase() === \"rejected\"\n                                    ? \"linear-gradient(90deg, #ef4444 0%, #dc2626 100%)\"\n                                    : row.status?.toLowerCase() === \"transferred\"\n                                    ? \"linear-gradient(90deg, #f97316 0%, #ea580c 100%)\"\n                                    : row.status?.toLowerCase() === \"active\"\n                                    ? \"linear-gradient(90deg, #10b981 0%, #047857 100%)\"\n                                    : \"#FDC700\", // default yellow\n                                minWidth: \"50px\",\n                              }}\n                            >\n                              {row.status ? row.status.toUpperCase() : \"NEW\"}\n                            </div>\n                          </div>\n\n                          {/* Card Content */}\n                          <div className=\"p-6 pt-8\">\n                            {/* Header Section */}\n                            <div className=\"flex items-start justify-between mb-4\">\n                              {/* Left Side - Avatar and Name */}\n                              <div className=\"flex items-start gap-4\">\n                                {(() => {\n                                  const seed = row.customerName || row.name;\n                                  const c = getAvatarColor(seed);\n                                  return (\n                                    <div\n                                      className={`w-12 h-12 rounded-full flex items-center justify-center text-[12px] font-semibold ${c.bg} ${c.text}`}\n                                    >\n                                      {(row.customerName || row.name || \"-\")\n                                        .split(\" \")\n                                        .map((s) => s[0])\n                                        .filter(Boolean)\n                                        .join(\"\")\n                                        .slice(0, 2)\n                                        .toUpperCase()}\n                                    </div>\n                                  );\n                                })()}\n                                <div className=\"flex-1 pr-4\">\n                                  <h3 className=\"break-words text-[14px] leading-[24px] font-semibold text-[#171A1F]\">\n                                    {row.customerName || row.name || \"-\"}\n                                  </h3>\n                                  <p className=\"text-[12px] font-normal text-[#565D6D] break-words leading-tight\">\n                                    {row.customerEmail ||\n                                      row.customerPhone ||\n                                      row.contact ||\n                                      \"-\"}\n                                  </p>\n                                </div>\n                              </div>\n                            </div>\n\n                            {/* Lead Details Section - Two Rows */}\n                            <div className=\"space-y-3\">\n                              {/* First Row - Requirement and Property Type as Badges */}\n                              <div className=\"flex justify-between items-center gap-2\">\n                                <div className=\"flex-1\">\n                                  <div className=\"text-[12px] font-normal text-[#565D6D] break-words uppercase tracking-wide mb-1.5\">\n                                    Requirement\n                                  </div>\n                                  <div>\n                                    {row.requirement || row.req ? (\n                                      <span className={`inline-flex items-center px-2.5 py-1 rounded-full text-[11px] font-semibold ${\n                                        (row.requirement || row.req || \"\").toLowerCase() === \"sell\"\n                                          ? \"bg-green-100 text-green-800\"\n                                          : (row.requirement || row.req || \"\").toLowerCase() === \"buy\"\n                                          ? \"bg-blue-100 text-blue-800\"\n                                          : \"bg-gray-100 text-gray-800\"\n                                      }`}>\n                                        {row.requirement || row.req}\n                                      </span>\n                                    ) : (\n                                      <span className=\"text-[12px] text-gray-400\">—</span>\n                                    )}\n                                  </div>\n                                </div>\n                                <div className=\"flex-1 pl-4\">\n                                  <div className=\"text-[12px] font-normal text-[#565D6D] break-words uppercase tracking-wide mb-1.5\">\n                                    Property Type\n                                  </div>\n                                  <div>\n                                    {row.propertyType ? (\n                                      <span className={`inline-flex items-center px-2.5 py-1 rounded-full text-[11px] font-semibold ${\n                                        (row.propertyType || \"\").toLowerCase() === \"commercial\"\n                                          ? \"bg-yellow-100 text-yellow-800\"\n                                          : (row.propertyType || \"\").toLowerCase() === \"residential\"\n                                          ? \"bg-purple-100 text-purple-800\"\n                                          : \"bg-gray-100 text-gray-800\"\n                                      }`}>\n                                        {row.propertyType}\n                                      </span>\n                                    ) : (\n                                      <span className=\"text-[12px] text-gray-400\">—</span>\n                                    )}\n                                  </div>\n                                </div>\n                              </div>\n\n                              {/* Second Row - Budget and Location */}\n                              <div className=\"flex justify-between items-top gap-2\">\n                                <div className=\"flex-1\">\n                                  <div className=\"text-[12px] font-normal text-[#565D6D] break-words uppercase tracking-wide mb-1.5\">\n                                    Budget\n                                  </div>\n                                  <div className=\"break-words text-[12px] leading-[18px] font-bold text-green-700  py-1 rounded\">\n                                    {formatBudget(row.budget)}\n                                  </div>\n                                </div>\n                                <div className=\"flex-1 pl-4\">\n                                  <div className=\"text-[12px] font-normal text-[#565D6D] break-words uppercase tracking-wide mb-1.5\">\n                                    Location\n                                  </div>\n                                  {(() => {\n                                    const { primary, secondary } =\n                                      getRegionNames(row);\n                                    return (\n                                      <div className=\"break-words text-[12px] leading-[16px] flex flex-col gap-1 font-medium text-[#171A1F]\">\n                                        <div>{primary || \"—\"}</div>\n                                        {secondary && (\n                                          <div className=\"break-words text-[12px] leading-[16px]  font-medium text-[#171A1F]\">\n                                            {secondary}\n                                          </div>\n                                        )}\n                                      </div>\n                                    );\n                                  })()}\n                                </div>\n                              </div>\n                            </div>\n\n                            {/* Bottom Section - Shared With and Actions */}\n                            <div className=\"flex items-end justify-between  pt-4 \">\n                              {/* Shared With */}\n                              <div>\n                                <div className=\"uppercase tracking-wide mb-2 text-[12px] leading-[12px] font-normal text-[#565D6D]\">\n                                  SHARED WITH\n                                </div>\n                                {(() => {\n                                  const transfers = Array.isArray(\n                                    row?.transfers\n                                  )\n                                    ? row.transfers\n                                    : [];\n                                  \n                                  if (transfers.length === 0) {\n                                    return (\n                                      <span className=\"text-[11px] font-normal text-[#565D6D] italic\">\n                                        Not yet shared — <span \n                                          className=\"text-green-700 font-semibold cursor-pointer hover:underline\" \n                                          onClick={(e) => {\n                                            e.stopPropagation();\n                                            openTransferForLead(row);\n                                          }}\n                                        >Share now</span>\n                                      </span>\n                                    );\n                                  }\n\n                                  // Group transfers by shareType\n                                  const allTransfers = transfers.filter(t => \n                                    t.shareType === \"all\" || (!t.shareType && !t.toBroker && !t.region)\n                                  );\n                                  const regionTransfers = transfers.filter(t => \n                                    t.shareType === \"region\" || (!t.shareType && t.region && !t.toBroker)\n                                  );\n                                  const individualTransfers = transfers.filter(t => \n                                    t.shareType === \"individual\" || (!t.shareType && t.toBroker && !t.region)\n                                  );\n\n                                  // If shared with all brokers\n                                  if (allTransfers.length > 0) {\n                                    return (\n                                      <span className=\"text-[10px] font-normal text-[#565D6D] flex items-center gap-1\">\n                                        <span className=\"inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-medium bg-blue-100 text-blue-800\">\n                                          All\n                                        </span>\n                                        <span>All brokers</span>\n                                      </span>\n                                    );\n                                  }\n\n                                  // If shared with region(s) only\n                                  if (regionTransfers.length > 0 && individualTransfers.length === 0) {\n                                    const regions = regionTransfers\n                                      .map(t => {\n                                        const regionId = t?.region;\n                                        return getRegionName(regionId) || regionId || \"Unknown Region\";\n                                      })\n                                      .filter((r, i, arr) => arr.indexOf(r) === i); // unique\n                                    \n                                    return (\n                                      <span className=\"text-[10px] font-normal text-[#565D6D] flex items-center gap-1 flex-wrap\">\n                                        <span className=\"inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-medium bg-green-100 text-green-800\">\n                                          Region\n                                        </span>\n                                        <span>{regions.slice(0, 2).join(\", \")}{regions.length > 2 ? ` +${regions.length - 2}` : \"\"}</span>\n                                      </span>\n                                    );\n                                  }\n\n                                  // Extract toBroker objects/ids for individual transfers\n                                  const toBrokers = individualTransfers\n                                    .map((t) =>\n                                      typeof t?.toBroker === \"object\"\n                                        ? t.toBroker\n                                        : { _id: t?.toBroker }\n                                    )\n                                    .filter(\n                                      (b) => b && (b._id || b.name || b.email)\n                                    );\n                                  const uniqueToBrokers = Array.from(\n                                    new Map(\n                                      toBrokers.map((b) => [\n                                        b._id || b.email || b.name,\n                                        b,\n                                      ])\n                                    ).values()\n                                  );\n\n                                  // Map to avatar data: prefer brokerImage from embedded object; fallback to brokersList by id\n                                  const idToBroker = new Map(\n                                    (brokersList || []).map((b) => [\n                                      b._id || b.id,\n                                      b,\n                                    ])\n                                  );\n                                  const avatars = uniqueToBrokers.map((b) => {\n                                    const merged = b._id\n                                      ? {\n                                          ...(idToBroker.get(b._id) || {}),\n                                          ...b,\n                                        }\n                                      : b;\n                                    return {\n                                      id:\n                                        merged._id ||\n                                        merged.id ||\n                                        merged.email ||\n                                        merged.name,\n                                      name:\n                                        merged.name ||\n                                        merged.fullName ||\n                                        merged.email ||\n                                        \"Broker\",\n                                      image:\n                                        merged.brokerImage ||\n                                        merged.avatarUrl ||\n                                        merged.imageUrl ||\n                                        \"\",\n                                    };\n                                  });\n\n                                  // If mixed (region + individual), show both\n                                  if (regionTransfers.length > 0 && individualTransfers.length > 0) {\n                                    const regions = regionTransfers\n                                      .map(t => {\n                                        const regionId = t?.region;\n                                        return getRegionName(regionId) || regionId || \"Unknown\";\n                                      })\n                                      .filter((r, i, arr) => arr.indexOf(r) === i);\n                                    \n                                    const visible = avatars.slice(0, 2);\n                                    const remaining = Math.max(0, avatars.length - visible.length);\n                                    \n                                    return (\n                                      <div className=\"flex flex-col gap-1\">\n                                        <div className=\"flex items-center gap-1\">\n                                          <span className=\"inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-medium bg-green-100 text-green-800\">\n                                            Region\n                                          </span>\n                                          <span className=\"text-[10px] text-[#565D6D]\">{regions.slice(0, 1).join(\", \")}</span>\n                                        </div>\n                                        <div className=\"flex items-center\">\n                                          <div className=\"flex -space-x-2\">\n                                            {visible.map((a, i) => (\n                                              <div\n                                                key={`${a.id || \"broker\"}-${i}`}\n                                                className=\"w-7 h-7 rounded-full ring-2 ring-white bg-gray-200 overflow-hidden flex items-center justify-center text-[10px] text-gray-600\"\n                                                title={a.name}\n                                              >\n                                                <img\n                                                  src={\n                                                    a.image ||\n                                                    \"https://www.w3schools.com/howto/img_avatar.png\"\n                                                  }\n                                                  alt={a.name}\n                                                  className=\"w-full h-full object-cover\"\n                                                />\n                                              </div>\n                                            ))}\n                                            {remaining > 0 && (\n                                              <div\n                                                className=\"w-7 h-7 rounded-full ring-2 ring-white bg-yellow-400 text-black flex items-center justify-center text-[11px] font-semibold\"\n                                                title={`+${remaining} more`}\n                                              >\n                                                +{remaining}\n                                              </div>\n                                            )}\n                                          </div>\n                                        </div>\n                                      </div>\n                                    );\n                                  }\n\n                                  // Individual transfers only - show avatars\n                                  if (avatars.length === 0) {\n                                    return (\n                                      <span className=\"text-[10px] font-normal text-[#565D6D]\">\n                                        Not shared\n                                      </span>\n                                    );\n                                  }\n\n                                  const visible = avatars.slice(0, 2);\n                                  const remaining = Math.max(\n                                    0,\n                                    avatars.length - visible.length\n                                  );\n\n                                  return (\n                                    <div className=\"flex items-center\">\n                                      <div className=\"flex -space-x-2\">\n                                        {visible.map((a, i) => (\n                                          <div\n                                            key={`${a.id || \"broker\"}-${i}`}\n                                            className=\"w-7 h-7 rounded-full ring-2 ring-white bg-gray-200 overflow-hidden flex items-center justify-center text-[10px] text-gray-600\"\n                                            title={a.name}\n                                          >\n                                            <img\n                                              src={\n                                                a.image ||\n                                                \"https://www.w3schools.com/howto/img_avatar.png\"\n                                              }\n                                              alt={a.name}\n                                              className=\"w-full h-full object-cover\"\n                                            />\n                                          </div>\n                                        ))}\n                                        {remaining > 0 && (\n                                          <div\n                                            className=\"w-7 h-7 rounded-full ring-2 ring-white bg-yellow-400 text-black flex items-center justify-center text-[11px] font-semibold\"\n                                            title={`+${remaining} more`}\n                                          >\n                                            +{remaining}\n                                          </div>\n                                        )}\n                                      </div>\n                                    </div>\n                                  );\n                                })()}\n                              </div>\n\n                              {/* Action Icons */}\n                              <div className=\"flex items-center gap-4\">\n                                {/* View Button */}\n                                <button\n                                  title=\"View Details\"\n                                  className=\"flex items-center gap-1 text-[12px] font-medium text-[#565D6D] hover:text-green-900 transition-colors cursor-pointer\"\n                                  onClick={() => {\n                                    setSelectedLead(row);\n                                    setViewEditMode(false);\n                                    setViewClosing(false);\n                                    setViewForm({\n                                      name: row.customerName || row.name || \"\",\n                                      contact:\n                                        row.customerPhone || row.contact || \"\",\n                                      email: row.customerEmail || \"\",\n                                      budget: String(row.budget ?? \"\"),\n                                      requirement:\n                                        row.requirement || row.req || \"\",\n                                      propertyType: row.propertyType || \"\",\n                                      primaryRegion: row.primaryRegion\n                                        ? {\n                                            value:\n                                              row.primaryRegion._id ||\n                                              row.primaryRegion.id ||\n                                              row.primaryRegion,\n                                            label:\n                                              row.primaryRegion.name ||\n                                              row.primaryRegion,\n                                          }\n                                        : row.region\n                                        ? typeof row.region === \"object\"\n                                          ? {\n                                              value:\n                                                row.region._id ||\n                                                row.region.id ||\n                                                row.region,\n                                              label:\n                                                row.region.name || row.region,\n                                            }\n                                          : {\n                                              value: row.region,\n                                              label:\n                                                getRegionName(row.region) ||\n                                                row.region,\n                                            }\n                                        : null,\n                                      secondaryRegion: row.secondaryRegion\n                                        ? {\n                                            value:\n                                              row.secondaryRegion._id ||\n                                              row.secondaryRegion.id ||\n                                              row.secondaryRegion,\n                                            label:\n                                              row.secondaryRegion.name ||\n                                              row.secondaryRegion,\n                                          }\n                                        : null,\n                                      status: row.status || \"active\",\n                                    });\n                                    setShowView(true);\n                                  }}\n                                >\n                                  <svg\n                                    className=\"w-5 h-5\"\n                                    fill=\"none\"\n                                    stroke=\"currentColor\"\n                                    viewBox=\"0 0 24 24\"\n                                  >\n                                    <path\n                                      strokeLinecap=\"round\"\n                                      strokeLinejoin=\"round\"\n                                      strokeWidth={2}\n                                      d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n                                    />\n                                    <path\n                                      strokeLinecap=\"round\"\n                                      strokeLinejoin=\"round\"\n                                      strokeWidth={2}\n                                      d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"\n                                    />\n                                  </svg>\n                                  <span className=\"text-[12px] font-medium text-[#565D6D]\">\n                                    View\n                                  </span>\n                                </button>\n\n                                {/* Transfer Button */}\n                                <button\n                                  title=\"Transfer Lead\"\n                                  className=\"flex items-center gap-1 text-[12px] font-medium text-[#565D6D] hover:text-blue-800 transition-colors cursor-pointer\"\n                                  onClick={() => openTransferForLead(row)}\n                                >\n                                  <svg\n                                    className=\"w-4 h-4\"\n                                    viewBox=\"0 0 24 24\"\n                                    fill=\"none\"\n                                    stroke=\"currentColor\"\n                                    strokeWidth=\"2\"\n                                    strokeLinecap=\"round\"\n                                    strokeLinejoin=\"round\"\n                                  >\n                                    <line x1=\"22\" y1=\"2\" x2=\"11\" y2=\"13\" />\n                                    <polygon points=\"22 2 15 22 11 13 2 9 22 2\" />\n                                  </svg>\n                                  <span className=\"text-[12px] font-medium text-[#565D6D]\">\n                                    Share\n                                  </span>\n                                </button>\n\n                                {/* Delete Button */}\n                                <button\n                                  title=\"Delete Lead\"\n                                  className={`flex items-center gap-1 text-[12px] font-medium transition-colors ${\n                                    isTransferred\n                                      ? \"text-gray-300 cursor-not-allowed\"\n                                      : \"text-[#565D6D] hover:text-[#565D6D] cursor-pointer\"\n                                  }`}\n                                  onClick={() =>\n                                    !isTransferred && handleDeleteLead(row)\n                                  }\n                                  disabled={isTransferred}\n                                >\n                                  <svg\n                                    className={`w-4 h-4 ${\n                                      isTransferred ? \"text-gray-300\" : \"\"\n                                    }`}\n                                    fill=\"none\"\n                                    stroke=\"currentColor\"\n                                    viewBox=\"0 0 24 24\"\n                                  >\n                                    <path\n                                      strokeLinecap=\"round\"\n                                      strokeLinejoin=\"round\"\n                                      strokeWidth={2}\n                                      d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n                                    />\n                                  </svg>\n                                  <span\n                                    className={`text-[12px] font-medium ${\n                                      isTransferred\n                                        ? \"text-gray-300\"\n                                        : \"text-[#565D6D]\"\n                                    }`}\n                                  >\n                                    Delete\n                                  </span>\n                                </button>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                )}\n              </div>\n\n              {/* Pagination */}\n              <div className=\"flex items-center justify-between mt-4\">\n                <div className=\"text-sm text-gray-600\">\n                  Page {page} of {totalPages}\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <button\n                    className=\"px-3 py-1.5 rounded-lg border border-gray-200 text-sm disabled:opacity-50 bg-white cursor-pointer\"\n                    onClick={() => setPage((p) => Math.max(1, p - 1))}\n                    disabled={page <= 1}\n                  >\n                    Prev\n                  </button>\n                  <button\n                    className=\"px-3 py-1.5 rounded-lg border border-gray-200 text-sm disabled:opacity-50 bg-white cursor-pointer\"\n                    onClick={() => setPage((p) => Math.min(totalPages, p + 1))}\n                    disabled={page >= totalPages}\n                  >\n                    Next\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            {/* Right 3 (sticky) */}\n            <aside className=\"md:col-span-3 space-y-6 md:sticky md:top-6 self-start\">\n              {/* Recent Activity */}\n              <div className=\"bg-white  p-4 rounded-[10px] border border-[#DEE1E6] shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F]\">\n                <h4 className=\" mb-3 flex items-center gap-2 text-[14px] leading-6 font-semibold text-[#171A1F]\">\n                  {/* clock-in-circle */}\n                  <svg\n                    className=\"w-4 h-4 text-gray-600 shrink-0 overflow-visible\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"2\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    aria-hidden=\"true\"\n                  >\n                    <circle cx=\"12\" cy=\"12\" r=\"10\" />\n                    <path d=\"M12 7v5l4 2\" />\n                  </svg>\n                  Recent Activity\n                </h4>\n\n                <ul className=\"text-sm text-slate-900 space-y-3\">\n                  {notificationsLoading ? (\n                    <li className=\"flex items-center justify-center py-4\">\n                      <div className=\"flex items-center gap-2 text-[12px] text-gray-500\">\n                        <svg\n                          className=\"w-4 h-4 animate-spin\"\n                          fill=\"none\"\n                          viewBox=\"0 0 24 24\"\n                        >\n                          <circle\n                            className=\"opacity-25\"\n                            cx=\"12\"\n                            cy=\"12\"\n                            r=\"10\"\n                            stroke=\"currentColor\"\n                            strokeWidth=\"4\"\n                          ></circle>\n                          <path\n                            className=\"opacity-75\"\n                            fill=\"currentColor\"\n                            d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                          ></path>\n                        </svg>\n                        Loading...\n                      </div>\n                    </li>\n                  ) : notificationsError ? (\n                    <li className=\"flex items-center justify-center py-4\">\n                      <div className=\"text-[12px] text-red-600\">\n                        {notificationsError}\n                      </div>\n                    </li>\n                  ) : notifications.length === 0 ? (\n                    <li className=\"flex items-center justify-center py-4\">\n                      <div className=\"text-[12px] text-gray-500\">\n                        No recent activity\n                      </div>\n                    </li>\n                  ) : (\n                    notifications.map((notification, index) => {\n                      const notificationTitle = notification?.title || notification?.message || notification?.text || \"Notification\";\n                      const notificationDate = notification?.createdAt || notification?.date || notification?.timestamp;\n                      \n                      return (\n                        <li key={notification?._id || notification?.id || index} className=\"flex items-start gap-3\">\n                          <span className=\"mt-0.5 inline-flex items-center justify-center w-7 h-7 rounded-full bg-gray-100 text-gray-600 ring-1 ring-gray-200\">\n                            {getNotificationIcon(notification)}\n                          </span>\n                          <div className=\"flex-1\">\n                            <div className=\"text-[12px] leading-5 font-normal text-[#171A1F]\">\n                              {notificationTitle}\n                            </div>\n                            <div className=\"text-[10px] leading-5 font-normal text-[#565D6D]\">\n                              {formatNotificationDate(notificationDate)}\n                            </div>\n                          </div>\n                        </li>\n                      );\n                    })\n                  )}\n                </ul>\n              </div>\n\n              {/* Lead Help & Resources */}\n              <div className=\"bg-white  p-4 rounded-[10px] border border-[#DEE1E6] shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F]\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <h4 className=\"flex items-center gap-2 text-[14px] leading-6 font-semibold text-[#171A1F]\">\n                    {/* chat/faq icon */}\n                    <svg\n                      className=\"w-4 h-4 text-gray-600 shrink-0 overflow-visible\"\n                      viewBox=\"0 0 24 24\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      strokeWidth=\"2\"\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      aria-hidden=\"true\"\n                    >\n                      {/* message square */}\n                      <rect x=\"3\" y=\"4\" width=\"18\" height=\"14\" rx=\"3\" />\n                      {/* tail */}\n                      <path d=\"M8 18v3l3-3\" />\n                    </svg>\n                    FAQ\n                  </h4>\n                  <a\n                    href=\"/faq\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\" text-green-950 hover:underline hover:text-green-950 transition-colors text-[12px] leading-5 font-medium \"\n                  >\n                    View all\n                  </a>\n                </div>\n\n                <div className=\"space-y-2 text-[12px\">\n                  {/* FAQ 1 - tailored to leads */}\n                  <details\n                    className=\"group relative rounded-xl border border-slate-100 p-4 pr-5 transition-colors\"\n                    open\n                  >\n                    <summary className=\"list-none cursor-pointer flex items-center justify-between\">\n                      <span className=\"text-[12px] leading-5 font-normal text-[#171A1F]\">\n                        What's the fastest way to add a new enquiry?\n                      </span>\n                      <svg\n                        className=\"w-4 h-4 text-slate-400 transition-transform group-open:rotate-180 group-open:text-gray-600 shrink-0 overflow-visible\"\n                        viewBox=\"0 0 24 24\"\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                      >\n                        <path d=\"m6 9 6 6 6-6\" />\n                      </svg>\n                    </summary>\n                    <p className=\"mt-2 pl-3 md:pl-4 text-[10px] leading-4 text-gray-600 border-l-2 border-gray-300\">\n                      Use the Add Enquiry button, fill name, phone, requirement and\n                      region. You can edit details later in Enquiry Details.\n                    </p>\n                  </details>\n\n                  {/* FAQ 2 */}\n                  <details className=\"group relative rounded-xl border border-slate-100 p-4 pr-5 transition-colors\">\n                    <summary className=\"list-none cursor-pointer flex items-center justify-between\">\n                      <span className=\"text-[12px] leading-5 font-normal text-[#171A1F]\">\n                        How do I update my enquiry status?\n                      </span>\n                      <svg\n                        className=\"w-4 h-4 text-slate-400 transition-transform group-open:rotate-180 group-open:text-gray-600 shrink-0 overflow-visible\"\n                        viewBox=\"0 0 24 24\"\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                      >\n                        <path d=\"m6 9 6 6 6-6\" />\n                      </svg>\n                    </summary>\n                    <p className=\"mt-2 pl-3 md:pl-4 text-[10px] leading-4 text-slate-600 border-l-2 border-gray-300\">\n                      Open an enquiry, click Edit Status in the drawer header, pick\n                      the status and save.\n                    </p>\n                  </details>\n\n                  {/* FAQ 3 */}\n                  <details className=\"group relative rounded-xl border border-slate-100 p-4 pr-5 transition-colors\">\n                    <summary className=\"list-none cursor-pointer flex items-center justify-between\">\n                      <span className=\"text-[12px] leading-5 font-normal text-[#171A1F]\">\n                        How do I share my enquiry securely?\n                      </span>\n                      <svg\n                        className=\"w-4 h-4 text-slate-400 transition-transform group-open:rotate-180 group-open:text-gray-600 shrink-0 overflow-visible\"\n                        viewBox=\"0 0 24 24\"\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                      >\n                        <path d=\"m6 9 6 6 6-6\" />\n                      </svg>\n                    </summary>\n                    <p className=\"mt-2 pl-3 md:pl-4 text-[10px] leading-4 text-slate-600 border-l-2 border-gray-300\">\n                      Use Share/Transfer, choose brokers, add notes and confirm.\n                      The transfer history appears in Enquiry Details.\n                    </p>\n                  </details>\n                </div>\n              </div>\n\n              {/* Help & Support */}\n              <div className=\"bg-white rounded-[10px] border border-[#DEE1E6] shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] p-4\">\n                {/* Title */}\n                <h4 className=\"mb-3 text-[12px] leading-6 font-semibold text-[#171A1F]\">\n                  Help & Support\n                </h4>\n\n                {/* Introductory Text */}\n                <p className=\"text-[10px] font-normal text-[#565D6D] mb-6 leading-relaxed\">\n                  Need help or looking for more details? Our comprehensive resources and support team are here for you.\n                </p>\n\n                {/* Support Options List */}\n                <div className=\"space-y-3\">\n                  {/* Visit Support Center */}\n                  <Link href=\"/contact\" className=\"flex items-start gap-3 cursor-pointer hover:opacity-80 transition-opacity\">\n                    <div className=\"mt-0.5 inline-flex items-center justify-center w-7 h-7  text-[#0D542B] shrink-0\">\n                      <svg\n                        className=\"w-4 h-4\"\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        viewBox=\"0 0 24 24\"\n                      >\n                        <path\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          strokeWidth=\"2\"\n                          d=\"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                        />\n                      </svg>\n                    </div>\n                    <div className=\"flex-1\">\n                      <h5 className=\"text-[12px] leading-5 font-medium text-[#171A1F] hover:text-[#0D542B] transition-colors\">\n                        Visit Support Center\n                      </h5>\n                      <p className=\"text-[10px] leading-4 font-normal text-[#565D6D] hover:text-[#0D542B] transition-colors\">\n                        Get answers to frequently asked questions.\n                      </p>\n                    </div>\n                  </Link>\n\n                  {/* Read Documentation */}\n                  <Link href=\"/help/documentation\" className=\"flex items-start gap-3 hover:opacity-80 transition-opacity cursor-pointer\">\n                    <div className=\"mt-0.5 inline-flex items-center justify-center w-7 h-7 text-[#0D542B] shrink-0\">\n                      <svg\n                        className=\"w-4 h-4\"\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        viewBox=\"0 0 24 24\"\n                      >\n                        <path\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          strokeWidth=\"2\"\n                          d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\"\n                        />\n                      </svg>\n                    </div>\n                    <div className=\"flex-1\">\n                      <h5 className=\"text-[12px] leading-5 font-medium text-[#171A1F]\">\n                        Read Documentation\n                      </h5>\n                      <p className=\"text-[10px] leading-4 font-normal text-[#565D6D]\">\n                        Explore our guides and platform tutorials.\n                      </p>\n                    </div>\n                  </Link>\n\n                  {/* Email Support */}\n                  <div className=\"flex items-start gap-3\">\n                    <div className=\"mt-0.5 inline-flex items-center justify-center w-7 h-7  text-[#0D542B] shrink-0\">\n                      <svg\n                        className=\"w-4 h-4\"\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        viewBox=\"0 0 24 24\"\n                      >\n                        <path\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          strokeWidth=\"2\"\n                          d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"\n                        />\n                      </svg>\n                    </div>\n                    <div className=\"flex-1\">\n                      <h5 className=\"text-[12px] leading-5 font-medium text-[#171A1F]\">\n                        Email Support\n                      </h5>\n                      <a\n                        href={`mailto:${SUPPORT_EMAIL}`}\n                        className=\"text-[10px] leading-4 font-normal text-[#565D6D] hover:text-green-900 transition-colors\"\n                      >\n                        {SUPPORT_EMAIL}\n                      </a>\n                    </div>\n                  </div>\n\n                  {/* Phone Support */}\n                  <div className=\"flex items-start gap-3\">\n                    <div className=\"mt-0.5 inline-flex items-center justify-center w-7 h-7  text-[#0D542B] shrink-0\">\n                      <svg\n                        className=\"w-4 h-4\"\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        viewBox=\"0 0 24 24\"\n                      >\n                        <path\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          strokeWidth=\"2\"\n                          d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\"\n                        />\n                      </svg>\n                    </div>\n                    <div className=\"flex-1\">\n                      <h5 className=\"text-[12px] leading-5 font-medium text-[#171A1F]\">\n                        Phone Support\n                      </h5>\n                      <a\n                        href={`tel:${SUPPORT_PHONE.replace(/\\s+/g, \"\")}`}\n                        className=\"text-[10px] leading-4 font-normal text-[#565D6D] hover:text-green-900 transition-colors\"\n                      >\n                        {SUPPORT_PHONE}\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </aside>\n          </div>\n        </div>\n\n        {/* Advanced Filters Modal */}\n        {showAdvanced && (\n          <div\n            className=\"fixed inset-0 z-[100] flex items-center justify-center\"\n            role=\"dialog\"\n            aria-modal=\"true\"\n          >\n            <div\n              className=\"absolute inset-0 bg-black/60\"\n              onClick={() => setShowAdvanced(false)}\n            />\n            <div className=\"relative w-full max-w-xl mx-4 bg-white rounded-2xl shadow-xl\">\n              <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-100\">\n                <div>\n                  <h4 className=\"text-lg font-semibold text-slate-900\">\n                    Advanced Filters\n                  </h4>\n                  <p className=\"text-sm text-gray-600 mt-1\">\n                    Refine your enquiry list using region, requirement, property type, and budget filters.\n                  </p>\n                </div>\n                <button\n                  onClick={() => setShowAdvanced(false)}\n                  className=\"p-2 rounded-lg hover:bg-gray-100\"\n                  aria-label=\"Close\"\n                >\n                  <svg\n                    className=\"w-5 h-5 text-gray-500\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth=\"2\"\n                      d=\"M6 18L18 6M6 6l12 12\"\n                    />\n                  </svg>\n                </button>\n              </div>\n\n              <div className=\"px-6 py-5 space-y-6 max-h-[70vh] overflow-auto\">\n                {/* Region */}\n                <div>\n                  <label className=\"block text-xs font-label text-gray-700 mb-2\">\n                    Preferred Regions\n                  </label>\n                  {regionsLoading ? (\n                    <div className=\"flex items-center justify-center py-3 border border-gray-200 rounded-lg bg-gray-50\">\n                      <div className=\"flex items-center gap-2\">\n                        <svg\n                          className=\"w-4 h-4 animate-spin text-gray-500\"\n                          fill=\"none\"\n                          viewBox=\"0 0 24 24\"\n                        >\n                          <circle\n                            className=\"opacity-25\"\n                            cx=\"12\"\n                            cy=\"12\"\n                            r=\"10\"\n                            stroke=\"currentColor\"\n                            strokeWidth=\"4\"\n                          ></circle>\n                          <path\n                            className=\"opacity-75\"\n                            fill=\"currentColor\"\n                            d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                          ></path>\n                        </svg>\n                        <span className=\"text-sm text-gray-500\">\n                          Loading regions...\n                        </span>\n                      </div>\n                    </div>\n                  ) : regionsError ? (\n                    <div className=\"bg-rose-50 border border-rose-200 rounded-lg p-3 text-sm text-rose-700\">\n                      {regionsError}\n                    </div>\n                  ) : (\n                    <Select\n                      value={filters.region}\n                      onChange={(opt) =>\n                        setFilters({ ...filters, region: opt })\n                      }\n                      options={regionOptions}\n                      placeholder=\"Select Region (optional)\"\n                      styles={{\n                        ...customSelectStyles,\n                        menuPortal: (base) => ({ ...base, zIndex: 99999 }),\n                        menu: (base) => ({ ...base, zIndex: 99999 }),\n                      }}\n                      menuPortalTarget={\n                        typeof window !== \"undefined\" ? document.body : null\n                      }\n                      menuPosition=\"fixed\"\n                      isSearchable\n                    />\n                  )}\n                </div>\n                {/* Requirement */}\n                <div>\n                  <label className=\"block text-xs font-label text-gray-700 mb-2\">\n                    Requirement Type\n                  </label>\n                  <Select\n                    value={filters.requirement}\n                    onChange={(opt) =>\n                      setFilters({ ...filters, requirement: opt })\n                    }\n                    options={requirementOptions}\n                    placeholder=\"Buy / Sell / Rent\"\n                    styles={{\n                      ...customSelectStyles,\n                      menuPortal: (base) => ({ ...base, zIndex: 99999 }),\n                      menu: (base) => ({ ...base, zIndex: 99999 }),\n                    }}\n                    menuPortalTarget={\n                      typeof window !== \"undefined\" ? document.body : null\n                    }\n                    menuPosition=\"fixed\"\n                    isSearchable\n                  />{\" \"}\n                </div>\n\n                {/* Property Type */}\n                <div>\n                  <label className=\"block text-xs font-label text-gray-700 mb-2\">\n                    Property Category\n                  </label>\n                  <Select\n                    value={filters.propertyType}\n                    onChange={(opt) =>\n                      setFilters({ ...filters, propertyType: opt })\n                    }\n                    options={propertyTypeOptions}\n                    placeholder=\"Commercial / Residential / Plot\"\n                    styles={{\n                      ...customSelectStyles,\n                      menuPortal: (base) => ({ ...base, zIndex: 99999 }),\n                      menu: (base) => ({ ...base, zIndex: 99999 }),\n                    }}\n                    menuPortalTarget={\n                      typeof window !== \"undefined\" ? document.body : null\n                    }\n                    menuPosition=\"fixed\"\n                    isSearchable\n                  />{\" \"}\n                </div>\n\n                {/* Budget Range */}\n                <div>\n                  <label className=\"block text-xs font-label text-gray-700 mb-4\">\n                    Max Budget:{\" \"}\n                    <span className=\"text-green-900 font-semibold\">\n                      ${filters.budgetMax.toLocaleString()}\n                    </span>\n                  </label>\n                  <input\n                    type=\"range\"\n                    min=\"0\"\n                    max=\"1000000\"\n                    step=\"10000\"\n                    value={filters.budgetMax}\n                    onChange={(e) =>\n                      setFilters({\n                        ...filters,\n                        budgetMax: Number(e.target.value),\n                      })\n                    }\n                    className=\"w-full accent-green-900\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"px-6 py-4 border-t border-gray-100 flex items-center justify-end gap-3\">\n                {isAdvancedFiltersApplied && (\n                  <button\n                    onClick={clearAdvancedFilters}\n                    disabled={applyingFilters}\n                    className=\"px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-slate-700 bg-white hover:bg-slate-50 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    Clear Filters\n                  </button>\n                )}\n                <button\n                  onClick={async () => {\n                    setApplyingFilters(true);\n                    setPage(1);\n                    await loadLeads(filters, 1, limit, debouncedQuery);\n                    setApplyingFilters(false);\n                    setShowAdvanced(false);\n                  }}\n                  disabled={applyingFilters}\n                  className=\"px-3 py-2.5 rounded-xl text-sm font-semibold text-white bg-green-900 hover:bg-green-950 shadow-sm cursor-pointer disabled:opacity-60 disabled:cursor-not-allowed flex items-center gap-2\"\n                >\n                  {applyingFilters && (\n                    <svg\n                      className=\"w-4 h-4 animate-spin\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <circle\n                        className=\"opacity-25\"\n                        cx=\"12\"\n                        cy=\"12\"\n                        r=\"10\"\n                        stroke=\"currentColor\"\n                        strokeWidth=\"4\"\n                      ></circle>\n                      <path\n                        className=\"opacity-75\"\n                        fill=\"currentColor\"\n                        d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                      ></path>\n                    </svg>\n                  )}\n                  {applyingFilters ? \"Applying...\" : \"Apply Filters\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Add Lead Modal */}\n        {showAddLead && (\n          <div\n            className=\"fixed inset-0 z-[100] flex items-center justify-center\"\n            role=\"dialog\"\n            aria-modal=\"true\"\n          >\n            <div\n              className=\"absolute inset-0 bg-black/60\"\n              onClick={() => {\n                setShowAddLead(false);\n                setValidationErrors({});\n              }}\n            />\n            <div className=\"relative w-full max-w-xl mx-4 bg-white rounded-2xl shadow-xl\">\n              <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-100\">\n                <h4 className=\"text-lg font-semibold text-slate-900\">\n                  Add New Enquiry\n                </h4>\n                <button\n                  onClick={() => {\n                    setShowAddLead(false);\n                    setValidationErrors({});\n                  }}\n                  className=\"p-2 rounded-lg hover:bg-gray-100\"\n                  aria-label=\"Close\"\n                >\n                  <svg\n                    className=\"w-5 h-5 text-gray-500\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth=\"2\"\n                      d=\"M6 18L18 6M6 6l12 12\"\n                    />\n                  </svg>\n                </button>\n              </div>\n\n              <div className=\"px-6 py-5 space-y-5 max-h-[70vh] overflow-auto\">\n                <div>\n                  <label className=\"block text-xs font-label text-gray-700 mb-1\">\n                    Customer Name\n                  </label>\n                  <input\n                    name=\"customerName\"\n                    value={newLead.customerName}\n                    onChange={handleNewLeadChange}\n                    type=\"text\"\n                    placeholder=\"Enter customer's full name\"\n                    className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-4 focus:bg-green-50 selection:bg-green-100 selection:text-green-900 caret-green-900 text-sm bg-white ${\n                      validationErrors.customerName\n                        ? \"border-red-300 focus:ring-red-100 focus:border-red-500\"\n                        : \"border-gray-200 focus:ring-green-100 focus:border-green-600\"\n                    }`}\n                  />\n                  {validationErrors.customerName && (\n                    <p className=\"mt-1 text-xs text-red-600\">\n                      {validationErrors.customerName}\n                    </p>\n                  )}\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-xs font-label text-gray-700 mb-1\">\n                      Contact Phone\n                    </label>\n                    <input\n                      name=\"customerPhone\"\n                      value={newLead.customerPhone}\n                      onChange={handleNewLeadChange}\n                      type=\"tel\"\n                      placeholder=\"Enter 10-digit phone number\"\n                      maxLength=\"10\"\n                      className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-4 focus:bg-green-50 selection:bg-green-100 selection:text-green-900 caret-green-900 text-sm bg-white ${\n                        validationErrors.customerPhone\n                          ? \"border-red-300 focus:ring-red-100 focus:border-red-500\"\n                          : \"border-gray-200 focus:ring-green-100 focus:border-green-600\"\n                      }`}\n                    />\n                    {validationErrors.customerPhone && (\n                      <p className=\"mt-1 text-xs text-red-600\">\n                        {validationErrors.customerPhone}\n                      </p>\n                    )}\n                  </div>\n                  <div>\n                    <label className=\"block text-xs font-label text-gray-700 mb-1\">\n                      Contact Email\n                    </label>\n                    <input\n                      name=\"customerEmail\"\n                      value={newLead.customerEmail}\n                      onChange={handleNewLeadChange}\n                      type=\"email\"\n                      placeholder=\"e.g., john.doe@example.com\"\n                      className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-4 focus:bg-green-50 selection:bg-green-100 selection:text-green-900 caret-green-900 text-sm bg-white ${\n                        validationErrors.customerEmail\n                          ? \"border-red-300 focus:ring-red-100 focus:border-red-500\"\n                          : \"border-gray-200 focus:ring-green-100 focus:border-green-600\"\n                      }`}\n                    />\n                    {validationErrors.customerEmail && (\n                      <div className=\"mt-1\">\n                        <p className=\"text-xs text-red-600\">\n                          {validationErrors.customerEmail}\n                        </p>\n                        <p className=\"text-xs text-gray-500\">\n                          eg. john@example.com\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-xs font-label text-gray-700 mb-1\">\n                      Requirement\n                    </label>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {requirementOptions\n                        .filter((o) => o.value !== \"all\")\n                        .map((opt) => {\n                          const isSelected =\n                            (newLead.requirement &&\n                              (newLead.requirement.value ||\n                                newLead.requirement)) === opt.value;\n                          return (\n                            <button\n                              key={opt.value}\n                              type=\"button\"\n                              aria-pressed={isSelected}\n                              onClick={() =>\n                                setNewLead({ ...newLead, requirement: opt })\n                              }\n                              className={`px-3.5 py-1.5 rounded-full text-[12px] font-semibold border transition-colors transition-shadow duration-150 ${\n                                isSelected\n                                  ? \"bg-green-50 text-green-900 border-green-200 ring-1 ring-green-100 shadow-sm\"\n                                  : \"bg-white text-slate-700 border-gray-200 hover:border-gray-300 hover:bg-slate-50\"\n                              }`}\n                            >\n                              {opt.label}\n                            </button>\n                          );\n                        })}\n                    </div>\n                  </div>\n                  <div>\n                    <label className=\"block text-xs font-label text-gray-700 mb-1\">\n                      Property Type\n                    </label>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {propertyTypeOptions\n                        .filter((o) => o.value !== \"all\")\n                        .map((opt) => {\n                          const isSelected =\n                            (newLead.propertyType &&\n                              (newLead.propertyType.value ||\n                                newLead.propertyType)) === opt.value;\n                          return (\n                            <button\n                              key={opt.value}\n                              type=\"button\"\n                              aria-pressed={isSelected}\n                              onClick={() =>\n                                setNewLead({ ...newLead, propertyType: opt })\n                              }\n                              className={`px-3.5 py-1.5 rounded-full text-[12px] font-semibold border transition-colors transition-shadow duration-150 ${\n                                isSelected\n                                  ? \"bg-green-50 text-green-900 border-green-200 ring-1 ring-green-100 shadow-sm\"\n                                  : \"bg-white text-slate-700 border-gray-200 hover:border-gray-300 hover:bg-slate-50\"\n                              }`}\n                            >\n                              {opt.label}\n                            </button>\n                          );\n                        })}\n                    </div>\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-xs font-label text-gray-700 mb-1\">\n                    Budget\n                  </label>\n                  {(() => {\n                    const pTypeRaw =\n                      typeof newLead.propertyType === \"object\"\n                        ? newLead.propertyType.value ||\n                          newLead.propertyType.label ||\n                          \"\"\n                        : newLead.propertyType || \"\";\n                    const pType = String(pTypeRaw).toLowerCase();\n                    const presets = {\n                      residential: { min: 5000, max: 100000000, step: 5000 }, // 10 Cr\n                      commercial: { min: 10000, max: 500000000, step: 10000 }, // 50 Cr\n                      plot: { min: 50000, max: 250000000, step: 50000 }, // 25 Cr\n                      other: { min: 1000, max: 50000000, step: 1000 }, // 5 Cr\n                    };\n                    const preset = presets[pType] || {\n                      min: 0,\n                      max: 10000000,\n                      step: 5000,\n                    };\n                    const budgetMin = preset.min;\n                    const budgetMax = preset.max;\n                    const budgetStep = preset.step;\n                    const raw = Number(newLead.budget || 0);\n                    const value = isNaN(raw)\n                      ? budgetMin\n                      : Math.min(budgetMax, Math.max(budgetMin, raw));\n                    const pct =\n                      ((value - budgetMin) / (budgetMax - budgetMin)) * 100;\n                    const fillPct = value > budgetMin ? Math.max(2, pct) : 0;\n                    return (\n                      <div className=\"space-y-2\">\n                        <div className=\"relative\">\n                          <input\n                            type=\"range\"\n                            min={budgetMin}\n                            max={budgetMax}\n                            step={budgetStep}\n                            value={value}\n                            onChange={(e) =>\n                              setNewLead({\n                                ...newLead,\n                                budget: Number(e.target.value),\n                              })\n                            }\n                            className=\"w-full h-2 rounded-full appearance-none focus:outline-none accent-green-900\"\n                            style={{\n                              background: `linear-gradient(to right, #14532d 0%, #14532d ${fillPct}%, #e5e7eb ${fillPct}%, #e5e7eb 100%)`,\n                            }}\n                          />\n                          <div className=\"absolute -top-6 right-0 flex items-center border border-green-200 rounded-full bg-green-50 px-2 py-0.5\">\n                            <span className=\"text-[11px] font-semibold text-green-900 mr-1\">\n                              ₹\n                            </span>\n                            <input\n                              type=\"text\"\n                              inputMode=\"numeric\"\n                              value={String(value)}\n                              onChange={(e) => {\n                                const n = Number(\n                                  (e.target.value || \"\").replace(/[^0-9]/g, \"\")\n                                );\n                                const clamped = isNaN(n)\n                                  ? 0\n                                  : Math.min(budgetMax, Math.max(budgetMin, n));\n                                setNewLead({ ...newLead, budget: clamped });\n                              }}\n                              className=\"w-[2ch] text-[11px] font-semibold text-green-900 bg-transparent text-right focus:outline-none font-mono tabular-nums\"\n                              style={{\n                                width: `calc(${Math.max(\n                                  3,\n                                  String(value).length\n                                )}ch + 0.15rem)`, // dynamic width\n                              }}\n                            />\n                          </div>\n                        </div>\n                        {/* removed below-slider controls per request */}\n                      </div>\n                    );\n                  })()}\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-xs font-label text-gray-700 mb-1\">\n                      Primary Region *\n                    </label>\n                    <Select\n                      value={newLead.primaryRegion}\n                      onChange={(opt) =>\n                        setNewLead({ ...newLead, primaryRegion: opt })\n                      }\n                      options={regionOptions}\n                      styles={modalSelectStyles}\n                      isSearchable\n                      isLoading={nearestRegionsLoading}\n                      menuPortalTarget={\n                        typeof window !== \"undefined\" ? document.body : null\n                      }\n                      menuPosition=\"fixed\"\n                      menuPlacement=\"auto\"\n                    />{\" \"}\n                  </div>\n                  <div>\n                    <label className=\"block text-xs font-label text-gray-700 mb-1\">\n                      Optional Region\n                    </label>\n                    <Select\n                      value={newLead.secondaryRegion}\n                      onChange={(opt) =>\n                        setNewLead({ ...newLead, secondaryRegion: opt })\n                      }\n                      options={regionOptions}\n                      styles={modalSelectStyles}\n                      isSearchable\n                      isLoading={nearestRegionsLoading}\n                      menuPortalTarget={\n                        typeof window !== \"undefined\" ? document.body : null\n                      }\n                      menuPosition=\"fixed\"\n                      menuPlacement=\"auto\"\n                    />{\" \"}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"px-6 py-4 border-t border-gray-100 flex items-center justify-end gap-3\">\n                <button\n                  onClick={() => {\n                    setShowAddLead(false);\n                    setValidationErrors({});\n                  }}\n                  disabled={addLeadLoading}\n                  className=\"px-4 py-2 rounded-lg border border-gray-200 text-sm font-medium text-slate-700 bg-white hover:bg-slate-50 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleAddLeadSubmit}\n                  disabled={addLeadLoading}\n                  className=\"px-4 py-2 rounded-lg text-sm font-semibold text-white bg-green-900 hover:bg-green-950 cursor-pointer disabled:opacity-60 disabled:cursor-not-allowed flex items-center gap-2\"\n                >\n                  {addLeadLoading && (\n                    <svg\n                      className=\"w-4 h-4 animate-spin\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <circle\n                        className=\"opacity-25\"\n                        cx=\"12\"\n                        cy=\"12\"\n                        r=\"10\"\n                        stroke=\"currentColor\"\n                        strokeWidth=\"4\"\n                      ></circle>\n                      <path\n                        className=\"opacity-75\"\n                        fill=\"currentColor\"\n                        d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                      ></path>\n                    </svg>\n                  )}\n                  {addLeadLoading ? \"Adding Lead...\" : \"Add Lead\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Transfer Modal */}\n        {showTransfer && (\n          <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n            <div\n              className=\"absolute inset-0 bg-black/60\"\n              onClick={() => setShowTransfer(false)}\n            />\n            <div className=\"relative w-full max-w-md mx-4 bg-white rounded-2xl shadow-xl\">\n              <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-100\">\n                <h4 className=\"text-lg font-semibold text-slate-900\">\n                  Share Lead\n                </h4>\n                <button\n                  onClick={() => setShowTransfer(false)}\n                  className=\"p-2 rounded-lg hover:bg-gray-100\"\n                >\n                  <svg\n                    className=\"w-5 h-5 text-gray-500 cursor-pointer\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth=\"2\"\n                      d=\"M6 18L18 6M6 6l12 12\"\n                    />\n                  </svg>\n                </button>\n              </div>\n              <div className=\"px-6 py-5 space-y-5\">\n                {/* Share mode toggles (radio) */}\n                <div className=\"space-y-3\">\n                  <label className=\"inline-flex items-center gap-2 cursor-pointer select-none\">\n                      <input\n                      type=\"radio\"\n                      name=\"transferMode\"\n                        className=\"h-4 w-4 accent-green-900 cursor-pointer\"\n                      checked={transferMode === \"all\"}\n                      onChange={() => setTransferMode(\"all\")}\n                    />\n                    <span className=\"text-sm  text-slate-800\">\n                      Share with all brokers\n                    </span>\n                  </label>\n                  <div className=\"flex items-center gap-3\">\n                    <label className=\"inline-flex items-center gap-2 cursor-pointer select-none\">\n                      <input\n                        type=\"radio\"\n                        name=\"transferMode\"\n                        className=\"h-4 w-4 accent-green-900 cursor-pointer\"\n                        checked={transferMode === \"region\"}\n                        onChange={() => setTransferMode(\"region\")}\n                      />\n                      <span className=\"text-sm  text-slate-800\">\n                        Share with brokers of a region\n                      </span>\n                    </label>\n                  </div>\n                  <label className=\"inline-flex items-center gap-2 cursor-pointer select-none\">\n                    <input\n                      type=\"radio\"\n                      name=\"transferMode\"\n                      className=\"h-4 w-4 accent-green-900 cursor-pointer\"\n                      checked={transferMode === \"select\"}\n                      onChange={() => setTransferMode(\"select\")}\n                    />\n                    <span className=\"text-sm  text-slate-800\">\n                      Share with selected brokers\n                    </span>\n                  </label>\n                </div>\n\n                {transferMode === \"region\" && (\n                  <div>\n                    <label className=\"block text-xs font-label text-gray-700 mb-1\">\n                      Select Region\n                    </label>\n                    <Select\n                      value={transferRegion}\n                      onChange={(opt) => setTransferRegion(opt)}\n                      options={regionOptions.filter((o) => o.value !== \"all\")}\n                      styles={customSelectStyles}\n                      isSearchable\n                      placeholder=\"Select region\"\n                    />\n                  </div>\n                )}\n\n                {transferMode === \"select\" && (\n                  <div>\n                    <label className=\"block text-xs font-label text-gray-700 mb-1\">\n                      Select Broker(s)\n                    </label>\n                    <Select\n                      value={transferForm.brokerIds\n                        .filter((id) =>\n                          (brokersList || []).some(\n                            (x) =>\n                              (x._id || x.id) === id &&\n                              (x._id || x.id) !== currentUserId\n                          )\n                        )\n                        .map((id) => {\n                          const b = (brokersList || []).find(\n                            (x) => (x._id || x.id) === id\n                          );\n                          let regionName = \"\";\n                          if (\n                            b?.region &&\n                            Array.isArray(b.region) &&\n                            b.region.length > 0\n                          ) {\n                            regionName = b.region[0].name || \"Unknown\";\n                          } else if (\n                            b?.region &&\n                            typeof b.region === \"object\" &&\n                            !Array.isArray(b.region)\n                          ) {\n                            regionName =\n                              b.region.name || b.region.region || \"Unknown\";\n                          } else if (typeof b?.region === \"string\") {\n                            regionName = b.region;\n                          }\n                          return {\n                            value: id,\n                            label: `${\n                              b?.name || b?.fullName || b?.email || id\n                            }${regionName ? ` (${regionName})` : \"\"}`,\n                          };\n                        })}\n                      onChange={(opts, meta) => {\n                        const selectedValues = (opts || []).map((o) => o.value);\n                        setTransferForm((prev) => ({\n                          ...prev,\n                          brokerIds: selectedValues,\n                        }));\n                      }}\n                      options={(brokersList || [])\n                        .filter(\n                          (b) =>\n                            (b._id || b.id) && (b._id || b.id) !== currentUserId\n                        )\n                        .map((b) => {\n                          let regionName = \"\";\n                          if (\n                            b.region &&\n                            Array.isArray(b.region) &&\n                            b.region.length > 0\n                          ) {\n                            regionName = b.region[0].name || \"Unknown\";\n                          } else if (\n                            b.region &&\n                            typeof b.region === \"object\" &&\n                            !Array.isArray(b.region)\n                          ) {\n                            regionName =\n                              b.region.name || b.region.region || \"Unknown\";\n                          } else if (typeof b.region === \"string\") {\n                            regionName = b.region;\n                          }\n                          return {\n                            value: b._id || b.id,\n                            label: `${\n                              b.name || b.fullName || b.email || \"Unnamed\"\n                            }${regionName ? ` (${regionName})` : \"\"}`,\n                          };\n                        })}\n                      styles={customSelectStyles}\n                      components={{ MenuList: BrokerMenuList }}\n                      onInputChange={(inputValue, { action }) => {\n                        if (\n                          action === \"input-change\" &&\n                          transferForm.selectAllFiltered\n                        ) {\n                          // Defer actual selection to MenuList header using props.children\n                        }\n                        setTransferFilter(inputValue || \"\");\n                        return inputValue;\n                      }}\n                      isMulti\n                      isSearchable\n                      closeMenuOnSelect={false}\n                      hideSelectedOptions\n                      placeholder={\n                        brokersLoading\n                          ? \"Loading brokers...\"\n                          : brokersError\n                          ? brokersError\n                          : \"Choose brokers...\"\n                      }\n                      isLoading={brokersLoading}\n                    />\n                  </div>\n                )}\n                <div>\n                  <label className=\"block text-xs font-label text-gray-700 mb-1\">\n                    Share Notes (Optional)\n                  </label>\n                  <textarea\n                    rows={3}\n                    value={transferForm.notes}\n                    onChange={(e) =>\n                      setTransferForm({\n                        ...transferForm,\n                        notes: e.target.value,\n                      })\n                    }\n                    placeholder=\"Add any specific instructions or context...\"\n                    className=\"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-green-100 focus:border-green-600 text-sm bg-white\"\n                  />\n                </div>\n              </div>\n              <div className=\"px-6 py-4 border-t border-gray-100 flex items-center justify-end gap-3\">\n                <button\n                  onClick={() => setShowTransfer(false)}\n                  className=\"px-4 py-2 rounded-lg border border-gray-200 text-sm font-medium text-slate-700 bg-white hover:bg-slate-50 cursor-pointer\"\n                  disabled={transferLoading}\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={submitTransfer}\n                  className=\"px-4 py-2 rounded-lg text-sm font-semibold text-white bg-green-900 hover:bg-green-950 cursor-pointer disabled:opacity-60 flex items-center gap-2\"\n                  disabled={transferLoading}\n                >\n                  {transferLoading && (\n                    <svg\n                      className=\"w-4 h-4 animate-spin\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <circle\n                        className=\"opacity-25\"\n                        cx=\"12\"\n                        cy=\"12\"\n                        r=\"10\"\n                        stroke=\"currentColor\"\n                        strokeWidth=\"4\"\n                      ></circle>\n                      <path\n                        className=\"opacity-75\"\n                        fill=\"currentColor\"\n                        d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                      ></path>\n                    </svg>\n                  )}\n                  {transferLoading ? \"Sending...\" : \"Share with broker\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* View Drawer */}\n        {showView && selectedLead && (\n          <div\n            className={`fixed inset-0 z-50 ${\n              viewClosing ? \"pointer-events-none\" : \"\"\n            }`}\n          >\n            {/* Backdrop */}\n            <div\n              className=\"absolute inset-0 bg-black/50\"\n              onClick={() => {\n                setViewClosing(true);\n                setTimeout(() => setShowView(false), 200);\n              }}\n            />\n            {/* Panel */}\n            <div\n              className={`absolute right-0 top-0 h-full w-full max-w-md bg-slate-50 shadow-2xl ${\n                viewClosing ? \"animate-slide-out\" : \"animate-slide-in\"\n              }`}\n            >\n              {/* Header Bar */}\n              <div className=\"flex items-center justify-between px-5 py-4 border-b border-gray-200 bg-white\">\n                <h4 className=\"text-[18px] font-semibold text-slate-900 flex items-center gap-2\">\n                  <svg\n                    className=\"w-5 h-5 text-green-900\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth=\"2\"\n                      d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                    />\n                  </svg>\n                  Enquiry Details\n                </h4>\n                <button\n                  onClick={() => {\n                    setViewClosing(true);\n                    setTimeout(() => setShowView(false), 200);\n                  }}\n                  className=\"p-2 rounded hover:bg-gray-100\"\n                  aria-label=\"Close\"\n                >\n                  <svg\n                    className=\"w-5 h-5 text-gray-500\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth=\"2\"\n                      d=\"M6 18L18 6M6 6l12 12\"\n                    />\n                  </svg>\n                </button>\n              </div>\n\n              {/* Scroll Area */}\n              <div className=\"h-[calc(100%-56px)] overflow-y-auto no-scrollbar p-5\">\n                {/* Profile Header */}\n                <div className=\"bg-white rounded-2xl border border-gray-200 shadow-sm p-4\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"w-12 h-12 rounded-full overflow-hidden ring-2 ring-white bg-green-50 text-green-900 flex items-center justify-center text-sm font-semibold\">\n                      {getInitials(\n                        selectedLead.name || selectedLead.customerName || \"?\"\n                      )}\n                    </div>\n                    <div className=\"min-w-0\">\n                      <div className=\"text-[16px] font-semibold text-slate-900 truncate\">\n                        {selectedLead.name || selectedLead.customerName || \"—\"}\n                      </div>\n                      <div className=\"text-[12px] text-slate-500 mt-0.5\">\n                        {selectedLead.contact ||\n                          selectedLead.customerPhone ||\n                          \"—\"}\n                      </div>\n                    </div>\n                    <span\n                      className={`ml-auto inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-semibold ${getStatusBadgeClasses(\n                        selectedLead.status || \"Closed\"\n                      )}`}\n                    >\n                      {selectedLead.status || \"Closed\"}\n                    </span>\n                  </div>\n                </div>\n\n                {/* Tabs */}\n                <div className=\"mt-4 bg-white rounded-2xl border border-gray-200 shadow-sm\">\n                  <div className=\"flex items-center gap-1 px-3 pt-3\">\n                    {(() => {\n                      const TabButton = ({ active, children, onClick }) => (\n                        <button\n                          onClick={onClick}\n                          className={`px-3 py-1.5 rounded-lg text-sm font-semibold ${\n                            active\n                              ? \"bg-slate-900 text-white\"\n                              : \"text-slate-600 hover:bg-slate-100\"\n                          }`}\n                        >\n                          {children}\n                        </button>\n                      );\n                      return (\n                        <div className=\"flex gap-2\">\n                          <TabButton\n                            active={viewTab === \"overview\"}\n                            onClick={() => setViewTab(\"overview\")}\n                          >\n                            Overview\n                          </TabButton>\n                          <TabButton\n                            active={viewTab === \"share\"}\n                            onClick={() => setViewTab(\"share\")}\n                          >\n                            Share\n                          </TabButton>\n                          {/* Removed Notes tab as requested */}\n                        </div>\n                      );\n                    })()}\n                  </div>\n\n                  {/* Tab Panels */}\n                  <div className=\"p-4\">\n                    {/* OVERVIEW */}\n                    {(!viewTab || viewTab === \"overview\") && (\n                      <div className=\"space-y-4\">\n                        {/* Contact Details */}\n                        <div className=\"rounded-xl border border-gray-200 bg-white p-4\">\n                          <div className=\"flex items-center justify-between mb-3\">\n                            <h5 className=\"text-[14px] font-semibold text-slate-900 flex items-center gap-2\">\n                              <svg\n                                className=\"w-4 h-4 text-green-900\"\n                                fill=\"none\"\n                                stroke=\"currentColor\"\n                                viewBox=\"0 0 24 24\"\n                              >\n                                <path\n                                  strokeLinecap=\"round\"\n                                  strokeLinejoin=\"round\"\n                                  strokeWidth=\"2\"\n                                  d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\"\n                                />\n                              </svg>\n                              Contact Details\n                            </h5>\n                          </div>\n                          <div className=\"space-y-3 text-[12px]\">\n                            {(() => {\n                              const isOwner = !!(\n                                (selectedLead?.createdBy &&\n                                  (selectedLead.createdBy._id ||\n                                    selectedLead.createdBy.id) ===\n                                    currentUserId) ||\n                                (selectedLead?.brokerId &&\n                                  String(selectedLead.brokerId) ===\n                                    String(currentUserId))\n                              );\n                              return null;\n                            })()}\n                            <div className=\"flex items-center gap-2 text-slate-700\">\n                              <span className=\"w-5 h-5 inline-flex items-center justify-center rounded bg-sky-50\">\n                                <svg\n                                  className=\"w-3.5 h-3.5 text-gray-500\"\n                                  viewBox=\"0 0 24 24\"\n                                  fill=\"none\"\n                                  stroke=\"currentColor\"\n                                >\n                                  <path\n                                    strokeLinecap=\"round\"\n                                    strokeLinejoin=\"round\"\n                                    strokeWidth=\"2\"\n                                    d=\"M3 5h6l2 5-2 1a10 10 0 005 5l1-2 5 2v6a2 2 0 01-2 2A16 16 0 013 7z\"\n                                  />\n                                </svg>\n                              </span>\n                              {viewEditMode &&\n                              ((selectedLead?.createdBy &&\n                                (selectedLead.createdBy._id ||\n                                  selectedLead.createdBy.id) === brokerId) ||\n                                (selectedLead?.brokerId &&\n                                  String(selectedLead.brokerId) ===\n                                    String(brokerId))) ? (\n                                <input\n                                  type=\"tel\"\n                                  name=\"contact\"\n                                  value={\n                                    viewForm.contact ??\n                                    (selectedLead.contact ||\n                                      selectedLead.customerPhone ||\n                                      \"\")\n                                  }\n                                  onChange={handleViewFieldChange}\n                                  className=\"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-600 text-[12px]\"\n                                  placeholder=\"Phone number\"\n                                />\n                              ) : (\n                                selectedLead.contact ||\n                                selectedLead.customerPhone ||\n                                \"—\"\n                              )}\n                            </div>\n                            <div className=\"flex items-center gap-2 text-slate-700\">\n                              <span className=\"w-5 h-5 inline-flex items-center justify-center rounded bg-green-50\">\n                                <svg\n                                  className=\"w-3.5 h-3.5 text-gray-500\"\n                                  viewBox=\"0 0 24 24\"\n                                  fill=\"none\"\n                                  stroke=\"currentColor\"\n                                >\n                                  <path\n                                    strokeLinecap=\"round\"\n                                    strokeLinejoin=\"round\"\n                                    strokeWidth=\"2\"\n                                    d=\"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"\n                                  />\n                                </svg>\n                              </span>\n                              {viewEditMode &&\n                              ((selectedLead?.createdBy &&\n                                (selectedLead.createdBy._id ||\n                                  selectedLead.createdBy.id) === brokerId) ||\n                                (selectedLead?.brokerId &&\n                                  String(selectedLead.brokerId) ===\n                                    String(brokerId))) ? (\n                                <input\n                                  type=\"email\"\n                                  name=\"email\"\n                                  value={\n                                    viewForm.email ??\n                                    (selectedLead.customerEmail || \"\")\n                                  }\n                                  onChange={handleViewFieldChange}\n                                  className=\"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-600 text-[12px]\"\n                                  placeholder=\"Email address\"\n                                />\n                              ) : (\n                                selectedLead.customerEmail || \"—\"\n                              )}\n                            </div>\n                          </div>\n                        </div>\n\n                        {/* Property Preferences */}\n                        <div className=\"rounded-xl border border-gray-200 bg-white p-4\">\n                          <div className=\"flex items-center justify-between mb-3\">\n                            <h5 className=\"text-[14px] font-semibold text-slate-900 flex items-center gap-2\">\n                              <svg\n                                className=\"w-4 h-4 text-green-900\"\n                                fill=\"none\"\n                                stroke=\"currentColor\"\n                                viewBox=\"0 0 24 24\"\n                              >\n                                <path\n                                  strokeLinecap=\"round\"\n                                  strokeLinejoin=\"round\"\n                                  strokeWidth=\"2\"\n                                  d=\"M7 8h10M7 12h7M5 20l2.5-2.5M19 20l-2.5-2.5\"\n                                />\n                              </svg>\n                              Property Preferences\n                            </h5>\n                          </div>\n                          <div className=\"space-y-3 text-[12px]\">\n                            <div className=\"flex items-center gap-2 text-slate-700\">\n                              <span className=\"w-5 h-5 inline-flex items-center justify-center rounded bg-green-50\">\n                                <svg\n                                  className=\"w-3 h-3 text-slate-400\"\n                                  fill=\"none\"\n                                  stroke=\"currentColor\"\n                                  viewBox=\"0 0 24 24\"\n                                >\n                                  <path\n                                    strokeLinecap=\"round\"\n                                    strokeLinejoin=\"round\"\n                                    strokeWidth=\"2\"\n                                    d=\"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z\"\n                                  />\n                                  <path\n                                    strokeLinecap=\"round\"\n                                    strokeLinejoin=\"round\"\n                                    strokeWidth=\"2\"\n                                    d=\"M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z\"\n                                  />\n                                </svg>\n                              </span>\n                              <span className=\"text-slate-500 mr-1\">\n                                Property Type:\n                              </span>\n                              {viewEditMode &&\n                              ((selectedLead?.createdBy &&\n                                (selectedLead.createdBy._id ||\n                                  selectedLead.createdBy.id) === brokerId) ||\n                                (selectedLead?.brokerId &&\n                                  String(selectedLead.brokerId) ===\n                                    String(brokerId))) ? (\n                                <Select\n                                  name=\"propertyType\"\n                                  options={(() => {\n                                    const base = propertyTypeOptions.filter(\n                                      (o) => o.value !== \"all\"\n                                    );\n                                    const v =\n                                      viewForm.propertyType ??\n                                      selectedLead.propertyType ??\n                                      \"\";\n                                    return base.some((o) => o.value === v)\n                                      ? base\n                                      : [...base, { value: v, label: v }];\n                                  })()}\n                                  value={(() => {\n                                    const v =\n                                      viewForm.propertyType ??\n                                      selectedLead.propertyType ??\n                                      \"\";\n                                    const opts = (() => {\n                                      const base = propertyTypeOptions.filter(\n                                        (o) => o.value !== \"all\"\n                                      );\n                                      return base.some((o) => o.value === v)\n                                        ? base\n                                        : [...base, { value: v, label: v }];\n                                    })();\n                                    return (\n                                      opts.find((o) => o.value === v) || null\n                                    );\n                                  })()}\n                                  onChange={(opt) =>\n                                    setViewForm((prev) => ({\n                                      ...prev,\n                                      propertyType: opt?.value || \"\",\n                                    }))\n                                  }\n                                  classNamePrefix=\"react-select\"\n                                  styles={customSelectStyles}\n                                />\n                              ) : (\n                                <span className=\"text-slate-900\">\n                                  {selectedLead.propertyType || \"—\"}\n                                </span>\n                              )}\n                            </div>\n                            <div className=\"flex items-center gap-2 text-slate-700\">\n                              <span className=\"w-5 h-5 inline-flex items-center justify-center rounded bg-green-50\">\n                                <svg\n                                  className=\"w-3 h-3 text-slate-400\"\n                                  fill=\"currentColor\"\n                                  viewBox=\"0 0 24 24\"\n                                >\n                                  <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16z\" />\n                                </svg>\n                              </span>\n                              <span className=\"text-slate-500 mr-1\">\n                                Budget:\n                              </span>\n                              {viewEditMode &&\n                              ((selectedLead?.createdBy &&\n                                (selectedLead.createdBy._id ||\n                                  selectedLead.createdBy.id) === brokerId) ||\n                                (selectedLead?.brokerId &&\n                                  String(selectedLead.brokerId) ===\n                                    String(brokerId))) ? (\n                                <input\n                                  type=\"number\"\n                                  name=\"budget\"\n                                  value={\n                                    viewForm.budget ?? selectedLead.budget ?? \"\"\n                                  }\n                                  onChange={handleViewFieldChange}\n                                  className=\"flex-1 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-600 text-[12px]\"\n                                  placeholder=\"Budget\"\n                                />\n                              ) : (\n                                <span className=\"text-slate-900\">\n                                  {formatBudget(selectedLead.budget)}\n                                </span>\n                              )}\n                            </div>\n                            <div className=\"flex items-center gap-2 text-slate-700\">\n                              <span className=\"w-5 h-5 inline-flex items-center justify-center rounded bg-green-50\">\n                                <svg\n                                  className=\"w-3 h-3 text-slate-400\"\n                                  fill=\"none\"\n                                  stroke=\"currentColor\"\n                                  viewBox=\"0 0 24 24\"\n                                >\n                                  <path\n                                    strokeLinecap=\"round\"\n                                    strokeLinejoin=\"round\"\n                                    strokeWidth=\"2\"\n                                    d=\"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"\n                                  />\n                                </svg>\n                              </span>\n                              <span className=\"text-slate-500 mr-1\">\n                                Requirement:\n                              </span>\n                              {viewEditMode &&\n                              ((selectedLead?.createdBy &&\n                                (selectedLead.createdBy._id ||\n                                  selectedLead.createdBy.id) === brokerId) ||\n                                (selectedLead?.brokerId &&\n                                  String(selectedLead.brokerId) ===\n                                    String(brokerId))) ? (\n                                <Select\n                                  name=\"requirement\"\n                                  options={(() => {\n                                    const base = requirementOptions.filter(\n                                      (o) => o.value !== \"all\"\n                                    );\n                                    const v =\n                                      viewForm.requirement ??\n                                      selectedLead.requirement ??\n                                      selectedLead.req ??\n                                      \"\";\n                                    return base.some((o) => o.value === v)\n                                      ? base\n                                      : [...base, { value: v, label: v }];\n                                  })()}\n                                  value={(() => {\n                                    const v =\n                                      viewForm.requirement ??\n                                      selectedLead.requirement ??\n                                      selectedLead.req ??\n                                      \"\";\n                                    const opts = (() => {\n                                      const base = requirementOptions.filter(\n                                        (o) => o.value !== \"all\"\n                                      );\n                                      return base.some((o) => o.value === v)\n                                        ? base\n                                        : [...base, { value: v, label: v }];\n                                    })();\n                                    return (\n                                      opts.find((o) => o.value === v) || null\n                                    );\n                                  })()}\n                                  onChange={(opt) =>\n                                    setViewForm((prev) => ({\n                                      ...prev,\n                                      requirement: opt?.value || \"\",\n                                    }))\n                                  }\n                                  classNamePrefix=\"react-select\"\n                                  styles={customSelectStyles}\n                                />\n                              ) : (\n                                <span className=\"text-slate-900\">\n                                  {selectedLead.requirement ||\n                                    selectedLead.req ||\n                                    \"—\"}\n                                </span>\n                              )}\n                            </div>\n                            {/* Regions */}\n                            <div className=\"flex items-center gap-2 text-slate-700\">\n                              <span className=\"w-5 h-5 inline-flex items-center justify-center rounded bg-green-50\">\n                                <svg\n                                  className=\"w-3 h-3 text-slate-400\"\n                                  fill=\"none\"\n                                  stroke=\"currentColor\"\n                                  viewBox=\"0 0 24 24\"\n                                >\n                                  <path\n                                    strokeLinecap=\"round\"\n                                    strokeLinejoin=\"round\"\n                                    strokeWidth=\"2\"\n                                    d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"\n                                  />\n                                  <path\n                                    strokeLinecap=\"round\"\n                                    strokeLinejoin=\"round\"\n                                    strokeWidth=\"2\"\n                                    d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"\n                                  />\n                                </svg>\n                              </span>\n                              <span className=\"text-slate-500 mr-1\">\n                                Primary Region:\n                              </span>\n                              {viewEditMode &&\n                              ((selectedLead?.createdBy &&\n                                (selectedLead.createdBy._id ||\n                                  selectedLead.createdBy.id) === brokerId) ||\n                                (selectedLead?.brokerId &&\n                                  String(selectedLead.brokerId) ===\n                                    String(brokerId))) ? (\n                                <Select\n                                  name=\"primaryRegion\"\n                                  options={regionOptions}\n                                  value={viewForm.primaryRegion || null}\n                                  onChange={(opt) =>\n                                    setViewForm((prev) => ({\n                                      ...prev,\n                                      primaryRegion: opt,\n                                    }))\n                                  }\n                                  classNamePrefix=\"react-select\"\n                                styles={customSelectStyles}\n                                menuPlacement=\"top\"\n                                menuPortalTarget={typeof window !== \"undefined\" ? document.body : null}\n                                menuPosition=\"fixed\"\n                                />\n                              ) : (\n                                <span className=\"text-slate-900\">\n                                  {getRegionName(\n                                    selectedLead?.primaryRegion ||\n                                      selectedLead?.region\n                                  ) || \"—\"}\n                                </span>\n                              )}\n                            </div>\n                            <div className=\"flex items-center gap-2 text-slate-700\">\n                              <span className=\"w-5 h-5 inline-flex items-center justify-center rounded bg-green-50\">\n                                <svg\n                                  className=\"w-3 h-3 text-slate-400\"\n                                  fill=\"none\"\n                                  stroke=\"currentColor\"\n                                  viewBox=\"0 0 24 24\"\n                                >\n                                  <path\n                                    strokeLinecap=\"round\"\n                                    strokeLinejoin=\"round\"\n                                    strokeWidth=\"2\"\n                                    d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"\n                                  />\n                                  <path\n                                    strokeLinecap=\"round\"\n                                    strokeLinejoin=\"round\"\n                                    strokeWidth=\"2\"\n                                    d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"\n                                  />\n                                </svg>\n                              </span>\n                              <span className=\"text-slate-500 mr-1\">\n                                Secondary Region:\n                              </span>\n                              {viewEditMode &&\n                              ((selectedLead?.createdBy &&\n                                (selectedLead.createdBy._id ||\n                                  selectedLead.createdBy.id) === brokerId) ||\n                                (selectedLead?.brokerId &&\n                                  String(selectedLead.brokerId) ===\n                                    String(brokerId))) ? (\n                                <Select\n                                  name=\"secondaryRegion\"\n                                  options={regionOptions}\n                                  value={viewForm.secondaryRegion || null}\n                                  onChange={(opt) =>\n                                    setViewForm((prev) => ({\n                                      ...prev,\n                                      secondaryRegion: opt,\n                                    }))\n                                  }\n                                  classNamePrefix=\"react-select\"\n                                styles={customSelectStyles}\n                                menuPlacement=\"top\"\n                                menuPortalTarget={typeof window !== \"undefined\" ? document.body : null}\n                                menuPosition=\"fixed\"\n                                />\n                              ) : (\n                                <span className=\"text-slate-900\">\n                                  {getRegionName(\n                                    selectedLead?.secondaryRegion\n                                  ) || \"—\"}\n                                </span>\n                              )}\n                            </div>\n                          </div>\n                        </div>\n\n                        {/* Lead Status + Actions */}\n                        <div className=\"rounded-xl border border-gray-200 bg-white p-4\">\n                          <div className=\"flex items-center justify-between\">\n                            <div>\n                              <div className=\"text-[13px] text-slate-500\">\n                                Status\n                              </div>\n                              <div className=\"mt-0.5\">\n                                {viewEditMode ? (\n                                  <Select\n                                    name=\"status\"\n                                    options={statusOptions.filter(\n                                      (o) => o.value !== \"all\"\n                                    )}\n                                    value={(() => {\n                                      const v =\n                                        viewForm.status ??\n                                        selectedLead.status ??\n                                        \"New\";\n                                      return (\n                                        statusOptions.find(\n                                          (o) => o.value === v\n                                        ) || null\n                                      );\n                                    })()}\n                                    onChange={(opt) =>\n                                      setViewForm((prev) => ({\n                                        ...prev,\n                                        status: opt?.value || \"New\",\n                                      }))\n                                    }\n                                    classNamePrefix=\"react-select\"\n                                    styles={customSelectStyles}\n                                  menuPlacement=\"top\"\n                                  menuPortalTarget={typeof window !== \"undefined\" ? document.body : null}\n                                  menuPosition=\"fixed\"\n                                  />\n                                ) : (\n                                  <span\n                                    className={`inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-semibold ${getStatusBadgeClasses(\n                                      selectedLead.status || \"Closed\"\n                                    )}`}\n                                  >\n                                    {selectedLead.status || \"Closed\"}\n                                  </span>\n                                )}\n                              </div>\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                              {!viewEditMode ? (\n                                <button\n                                  onClick={() => {\n                                    // prefill edit form from selectedLead\n                                    const primaryId =\n                                      (selectedLead?.primaryRegion &&\n                                        (selectedLead.primaryRegion._id ||\n                                          selectedLead.primaryRegion.id ||\n                                          selectedLead.primaryRegion.value)) ||\n                                      selectedLead?.region ||\n                                      null;\n                                    const primaryLabel =\n                                      (selectedLead?.primaryRegion &&\n                                        (selectedLead.primaryRegion.name ||\n                                          selectedLead.primaryRegion.label)) ||\n                                      getRegionName(\n                                        selectedLead?.primaryRegion ||\n                                          selectedLead?.region\n                                      ) ||\n                                      \"\";\n                                    const secondaryId =\n                                      selectedLead?.secondaryRegion &&\n                                      (selectedLead.secondaryRegion._id ||\n                                        selectedLead.secondaryRegion.id ||\n                                        selectedLead.secondaryRegion.value);\n                                    const secondaryLabel =\n                                      selectedLead?.secondaryRegion &&\n                                      (selectedLead.secondaryRegion.name ||\n                                        selectedLead.secondaryRegion.label);\n                                    setViewForm({\n                                      name:\n                                        selectedLead.name ||\n                                        selectedLead.customerName ||\n                                        \"\",\n                                      contact:\n                                        selectedLead.contact ||\n                                        selectedLead.customerPhone ||\n                                        \"\",\n                                      email: selectedLead.customerEmail || \"\",\n                                      requirement:\n                                        selectedLead.requirement ||\n                                        selectedLead.req ||\n                                        \"\",\n                                      propertyType:\n                                        selectedLead.propertyType || \"\",\n                                      budget:\n                                        typeof selectedLead.budget === \"number\"\n                                          ? selectedLead.budget\n                                          : selectedLead.budget || \"\",\n                                      status: selectedLead.status || \"Closed\",\n                                      primaryRegion: primaryId\n                                        ? {\n                                            value: primaryId,\n                                            label: primaryLabel,\n                                          }\n                                        : null,\n                                      secondaryRegion: secondaryId\n                                        ? {\n                                            value: secondaryId,\n                                            label: secondaryLabel || \"\",\n                                          }\n                                        : null,\n                                    });\n                                    setViewEditMode(true);\n                                  }}\n                                  className=\"px-3 py-1.5 rounded-lg text-[12px] font-semibold text-white bg-green-900 hover:bg-green-950\"\n                                >\n                                  {(selectedLead?.createdBy &&\n                                    (selectedLead.createdBy._id ||\n                                      selectedLead.createdBy.id) ===\n                                      brokerId) ||\n                                  (selectedLead?.brokerId &&\n                                    String(selectedLead.brokerId) ===\n                                      String(brokerId))\n                                    ? \"Edit\"\n                                    : \"Edit Status\"}\n                                </button>\n                              ) : (\n                                <>\n                                  <button\n                                    onClick={saveViewEdits}\n                                    className=\"px-3 py-1.5 rounded-lg text-[12px] font-semibold text-white bg-green-900 hover:bg-green-950\"\n                                  >\n                                    Save\n                                  </button>\n                                  <button\n                                    onClick={() => setViewEditMode(false)}\n                                    className=\"px-3 py-1.5 rounded-lg text-[12px] font-semibold text-slate-700 bg-gray-100 hover:bg-gray-200 border border-gray-200\"\n                                  >\n                                    Cancel\n                                  </button>\n                                </>\n                              )}\n                              {/* <button\n                        onClick={() => setViewTab(\"share\")}\n                        className=\"px-3 py-1.5 rounded-lg text-sm font-semibold text-slate-700 bg-gray-100 hover:bg-gray-200 border border-gray-200\"\n                      >\n                        Share\n                      </button> */}\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    )}\n\n                    {/* SHARE DETAILS */}\n                    {viewTab === \"share\" && (\n                      <div className=\"space-y-3 text-[14px]\">\n                        <div className=\"border border-gray-200 rounded-xl p-4 shadow-sm bg-white\">\n                          <h5 className=\"text-[16px] font-semibold text-slate-900 mb-3 flex items-center gap-2\">\n                            <svg\n                              className=\"w-4 h-4 text-green-900\"\n                              fill=\"none\"\n                              stroke=\"currentColor\"\n                              viewBox=\"0 0 24 24\"\n                            >\n                              <path\n                                strokeLinecap=\"round\"\n                                strokeLinejoin=\"round\"\n                                strokeWidth=\"2\"\n                                d=\"M7 8h10M7 12h7M5 20l2.5-2.5M19 20l-2.5-2.5\"\n                              />\n                            </svg>\n                            Share History\n                          </h5>\n                          {(() => {\n                            const transfers = Array.isArray(\n                              selectedLead?.transfers\n                            )\n                              ? selectedLead.transfers\n                              : [];\n                            if (!transfers.length) {\n                              return (\n                                <div className=\"text-[14px] text-slate-500\">\n                                  Not shared yet.\n                                </div>\n                              );\n                            }\n                            const idToBroker = new Map(\n                              (brokersList || []).map((b) => [b._id || b.id, b])\n                            );\n                            \n                            // Group transfers by shareType\n                            const allTransfers = transfers.filter(t => \n                              t.shareType === \"all\" || (!t.shareType && !t.toBroker && !t.region)\n                            );\n                            const regionTransfers = transfers.filter(t => \n                              t.shareType === \"region\" || (!t.shareType && t.region && !t.toBroker)\n                            );\n                            const individualTransfers = transfers.filter(t => \n                              t.shareType === \"individual\" || (!t.shareType && t.toBroker && !t.region)\n                            );\n\n                            return (\n                              <ul className=\"text-[14px] text-slate-700 space-y-3\">\n                                {/* Display All transfers */}\n                                {allTransfers.map((t, i) => {\n                                  const fromB =\n                                    t && typeof t.fromBroker === \"object\" && t.fromBroker !== null\n                                      ? t.fromBroker\n                                      : idToBroker.get(t?.fromBroker) || {};\n                                  const fromName =\n                                    (fromB && fromB.name) ||\n                                    (fromB && fromB.fullName) ||\n                                    (fromB && fromB.email) ||\n                                    (fromB && fromB._id) ||\n                                    t?.fromBroker ||\n                                    \"Unknown broker\";\n                                  const fromAvatar =\n                                    (fromB && fromB.brokerImage) ||\n                                    (fromB && fromB.avatarUrl) ||\n                                    (fromB && fromB.imageUrl) ||\n                                    \"\";\n                                  const when = t?.createdAt\n                                    ? new Date(t.createdAt).toLocaleString()\n                                    : \"\";\n                                  const keyFrom =\n                                    (typeof t?.fromBroker === \"object\"\n                                      ? t?.fromBroker?._id\n                                      : t?.fromBroker) || `all-from-${i}`;\n                                  \n                                  return (\n                                    <li\n                                      key={`all-${keyFrom}-${t?._id || i}`}\n                                      className=\"flex items-center gap-3\"\n                                    >\n                                      <div className=\"flex items-center gap-2\">\n                                        <div className=\"w-7 h-7 rounded-full bg-blue-100 overflow-hidden ring-2 ring-white flex items-center justify-center text-[10px] text-blue-800 font-semibold\">\n                                          All\n                                        </div>\n                                      </div>\n                                      <div className=\"flex-1 min-w-0\">\n                                        <div className=\"font-medium text-slate-900 truncate\">\n                                          {fromName} → All Brokers\n                                        </div>\n                                        {when && (\n                                          <div className=\"text-[11px] text-slate-400\">\n                                            Shared on {when}\n                                          </div>\n                                        )}\n                                      </div>\n                                    </li>\n                                  );\n                                })}\n\n                                {/* Display Region transfers */}\n                                {regionTransfers.map((t, i) => {\n                                  const fromB =\n                                    t && typeof t.fromBroker === \"object\" && t.fromBroker !== null\n                                      ? t.fromBroker\n                                      : idToBroker.get(t?.fromBroker) || {};\n                                  const fromName =\n                                    (fromB && fromB.name) ||\n                                    (fromB && fromB.fullName) ||\n                                    (fromB && fromB.email) ||\n                                    (fromB && fromB._id) ||\n                                    t?.fromBroker ||\n                                    \"Unknown broker\";\n                                  const fromAvatar =\n                                    (fromB && fromB.brokerImage) ||\n                                    (fromB && fromB.avatarUrl) ||\n                                    (fromB && fromB.imageUrl) ||\n                                    \"\";\n                                  const regionId = t?.region;\n                                  const regionName = getRegionName(regionId) || regionId || \"Unknown Region\";\n                                  const when = t?.createdAt\n                                    ? new Date(t.createdAt).toLocaleString()\n                                    : \"\";\n                                  const keyFrom =\n                                    (typeof t?.fromBroker === \"object\"\n                                      ? t?.fromBroker?._id\n                                      : t?.fromBroker) || `region-from-${i}`;\n                                  const fromId =\n                                    t && typeof t.fromBroker === \"object\"\n                                      ? t.fromBroker?._id || t.fromBroker?.id\n                                      : t?.fromBroker;\n                                  const isPendingDelete = pendingDeleteRegionTransferId === regionId;\n                                  // Only show delete button if current broker is the one who created the transfer (fromBroker)\n                                  const canDelete = brokerId && fromId && String(fromId) === String(brokerId);\n                                  \n                                  return (\n                                    <li\n                                      key={`region-${keyFrom}-${regionId || i}`}\n                                      className=\"flex items-start gap-3\"\n                                    >\n                                      <div className=\"flex items-center gap-2 pt-0.5\">\n                                        <div className=\"w-7 h-7 rounded-full bg-green-100 overflow-hidden ring-2 ring-white flex items-center justify-center text-[10px] text-green-800 font-semibold\">\n                                          R\n                                        </div>\n                                      </div>\n                                      <div className=\"flex-1 min-w-0\">\n                                        <div className=\"font-medium text-slate-900 truncate\">\n                                          {fromName} → {regionName}\n                                        </div>\n                                        {when && (\n                                          <div className=\"text-[11px] text-slate-400\">\n                                            Shared on {when}\n                                          </div>\n                                        )}\n                                        {canDelete && (\n                                        <div className=\"flex items-center gap-2 mt-2\">\n                                          <button\n                                            type=\"button\"\n                                            disabled={isPendingDelete}\n                                            onClick={async () => {\n                                              if (!regionId) return;\n                                              await deleteRegionTransfer(regionId);\n                                            }}\n                                            className={`inline-flex items-center px-2 py-1 text-[12px] rounded border ${\n                                              isPendingDelete\n                                                ? \"border-gray-200 text-gray-400\"\n                                                : \"border-rose-200 text-rose-700 hover:bg-rose-50\"\n                                            } disabled:opacity-50 disabled:cursor-not-allowed`}\n                                            title=\"Delete transfer\"\n                                          >\n                                            {isPendingDelete ? \"Removing…\" : \"Delete\"}\n                                          </button>\n                                        </div>\n                                        )}\n                                      </div>\n                                    </li>\n                                  );\n                                })}\n\n                                {/* Display Individual transfers */}\n                                {individualTransfers.map((t, i) => {\n                                  const toB =\n                                    t && typeof t.toBroker === \"object\" && t.toBroker !== null\n                                      ? t.toBroker\n                                      : idToBroker.get(t?.toBroker) || {};\n                                  const fromB =\n                                    t && typeof t.fromBroker === \"object\" && t.fromBroker !== null\n                                      ? t.fromBroker\n                                      : idToBroker.get(t?.fromBroker) || {};\n                                  const toName =\n                                    (toB && toB.name) ||\n                                    (toB && toB.fullName) ||\n                                    (toB && toB.email) ||\n                                    (toB && toB._id) ||\n                                    t?.toBroker ||\n                                    \"Unknown broker\";\n                                  const fromName =\n                                    (fromB && fromB.name) ||\n                                    (fromB && fromB.fullName) ||\n                                    (fromB && fromB.email) ||\n                                    (fromB && fromB._id) ||\n                                    t?.fromBroker ||\n                                    \"Unknown broker\";\n                                  const toAvatar =\n                                    (toB && toB.brokerImage) ||\n                                    (toB && toB.avatarUrl) ||\n                                    (toB && toB.imageUrl) ||\n                                    \"\";\n                                  const fromAvatar =\n                                    (fromB && fromB.brokerImage) ||\n                                    (fromB && fromB.avatarUrl) ||\n                                    (fromB && fromB.imageUrl) ||\n                                    \"\";\n                                  const when = t?.createdAt\n                                    ? new Date(t.createdAt).toLocaleString()\n                                    : \"\";\n                                  const keyFrom =\n                                    (typeof t?.fromBroker === \"object\"\n                                      ? t?.fromBroker?._id\n                                      : t?.fromBroker) || \"from\";\n                                  const keyTo =\n                                    (typeof t?.toBroker === \"object\"\n                                      ? t?.toBroker?._id\n                                      : t?.toBroker) || \"to\";\n                                  const fromRegion =\n                                    getRegionName(fromB?.region) ||\n                                    getRegionName(fromB?.primaryRegion) ||\n                                    \"\";\n                                  const toRegion =\n                                    getRegionName(toB?.region) ||\n                                    getRegionName(toB?.primaryRegion) ||\n                                    \"\";\n                                  const toId =\n                                    t && typeof t.toBroker === \"object\"\n                                      ? t.toBroker?._id || t.toBroker?.id\n                                      : t?.toBroker;\n                                  const fromId =\n                                    t && typeof t.fromBroker === \"object\"\n                                      ? t.fromBroker?._id || t.fromBroker?.id\n                                      : t?.fromBroker;\n                                  const isPending =\n                                    pendingDeleteTransferId === String(toId);\n                                  // Only show delete button if current broker is the one who created the transfer (fromBroker)\n                                  const canDelete = brokerId && fromId && String(fromId) === String(brokerId);\n                                  return (\n                                    <li\n                                      key={`${keyFrom}-${keyTo}-${t?._id || i}`}\n                                      className=\"flex items-center gap-3\"\n                                    >\n                                      <div className=\"flex items-center gap-2\">\n                                        <div\n                                          className=\"w-7 h-7 rounded-full bg-gray-200 overflow-hidden ring-2 ring-white flex items-center justify-center text-[12px] text-gray-700\"\n                                          title={\n                                            typeof toName === \"string\"\n                                              ? toName\n                                              : String(toName)\n                                          }\n                                        >\n                                          <img\n                                            src={\n                                              toAvatar ||\n                                              \"https://www.w3schools.com/howto/img_avatar.png\"\n                                            }\n                                            alt={\n                                              typeof toName === \"string\"\n                                                ? toName\n                                                : \"Broker\"\n                                            }\n                                            className=\"w-full h-full object-cover\"\n                                          />\n                                        </div>\n                                      </div>\n                                      <div className=\"flex-1 min-w-0\">\n                                        <div className=\"font-medium text-slate-900 truncate\">\n                                          {typeof fromName === \"string\"\n                                            ? fromName\n                                            : String(fromName)}\n                                          <span className=\"mx-1 text-slate-400\">\n                                            →\n                                          </span>\n                                          {typeof toName === \"string\"\n                                            ? toName\n                                            : String(toName)}\n                                        </div>\n                                        <div className=\"text-[12px] text-slate-500 truncate\">\n                                          {fromRegion || \"—\"}{\" \"}\n                                          <span className=\"mx-1 text-slate-400\">\n                                            →\n                                          </span>{\" \"}\n                                          {toRegion || \"—\"}\n                                        </div>\n                                        {when && (\n                                          <div className=\"text-[11px] text-slate-400\">\n                                            Shared on {when}\n                                          </div>\n                                        )}\n                                      </div>\n                                      {canDelete && (\n                                        <button\n                                          type=\"button\"\n                                          disabled={isPending}\n                                          onClick={async () => {\n                                            if (!toId) return;\n                                            setPendingDeleteTransferId(\n                                              String(toId)\n                                            );\n                                            await deleteTransfer(toId);\n                                          }}\n                                          className={`ml-2 inline-flex items-center px-2 py-1 text-[12px] rounded border ${\n                                            isPending\n                                              ? \"border-gray-200 text-gray-400\"\n                                              : \"border-rose-200 text-rose-700 hover:bg-rose-50\"\n                                          }`}\n                                          title=\"Delete transfer\"\n                                        >\n                                          {isPending ? \"Removing…\" : \"Delete\"}\n                                        </button>\n                                      )}\n                                    </li>\n                                  );\n                                })}\n                              </ul>\n                            );\n                          })()}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* (Optional) Share history card – keep your existing logic if you want it below */}\n                {/* <YourShareHistoryCard /> */}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      <style jsx global>{`\n        .no-scrollbar::-webkit-scrollbar {\n          display: none;\n        }\n        .no-scrollbar {\n          -ms-overflow-style: none;\n          scrollbar-width: none;\n        }\n        @keyframes slideInFromRight {\n          from {\n            transform: translateX(100%);\n            opacity: 0.6;\n          }\n          to {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n        .animate-slide-in {\n          animation: slideInFromRight 0.25s ease-out both;\n        }\n        @keyframes slideOutToRight {\n          from {\n            transform: translateX(0);\n            opacity: 1;\n          }\n          to {\n            transform: translateX(100%);\n            opacity: 0.4;\n          }\n        }\n        .animate-slide-out {\n          animation: slideOutToRight 0.2s ease-in both;\n        }\n      `}</style>\n    </ProtectedRoute>\n  );\n}\n"],"names":[],"mappings":"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"}