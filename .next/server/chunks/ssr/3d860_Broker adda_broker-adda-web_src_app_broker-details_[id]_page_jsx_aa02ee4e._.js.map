{"version":3,"sources":["turbopack:///[project]/Desktop/Broker adda/broker-adda-web/src/app/broker-details/[id]/page.jsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport ContentLoader from 'react-content-loader';\r\nimport HeaderFile from '../../components/Header';\r\nimport toast, { Toaster } from 'react-hot-toast';\r\n\r\nconst headerData = {\r\n  title: 'Broker Details',\r\n  description: 'View broker profile, ratings, experience, specializations, and contact information.',\r\n  // breadcrumb: [\r\n  //   { label: 'Home', href: '/' },\r\n  //   { label: 'Broker Details', href: '/broker-details' }\r\n  // ]\r\n};\r\n\r\nexport default function BrokerDetailsPage() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const brokerId = params?.id;\r\n  const [broker, setBroker] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [similar, setSimilar] = useState([]);\r\n  const [similarLoading, setSimilarLoading] = useState(false);\r\n  const [brokerLeads, setBrokerLeads] = useState([]);\r\n  const [leadsLoading, setLeadsLoading] = useState(false);\r\n  const [leadsError, setLeadsError] = useState('');\r\n  const [showRatingModal, setShowRatingModal] = useState(false);\r\n  const [userRating, setUserRating] = useState(0);\r\n  const [ratingReview, setRatingReview] = useState('');\r\n  const [ratingLoading, setRatingLoading] = useState(false);\r\n  const [brokerRatingsStats, setBrokerRatingsStats] = useState(null);\r\n  const [ratingsLoading, setRatingsLoading] = useState(false);\r\n  const [canScrollLeft, setCanScrollLeft] = useState(false);\r\n  const [canScrollRight, setCanScrollRight] = useState(true);\r\n  const [brokerProperties, setBrokerProperties] = useState([]);\r\n  const [propertiesLoading, setPropertiesLoading] = useState(false);\r\n  const [path, setPath] = useState(null);\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setPath(window.location.pathname);\r\n    const fetchBroker = async () => {\r\n      setLoading(true);\r\n      setError('');\r\n      if (!brokerId) { setLoading(false); return; }\r\n      try {\r\n        const token = typeof window !== 'undefined'\r\n          ? localStorage.getItem('token') || localStorage.getItem('authToken')\r\n          : null;\r\n        setIsLoggedIn(!!token);\r\n        const base = process.env.NEXT_PUBLIC_API_URL || '';\r\n        const headers = {\r\n          'Content-Type': 'application/json',\r\n          ...(token ? { 'Authorization': `Bearer ${token}` } : {})\r\n        };\r\n\r\n        // Canonical: fetch by path id only\r\n        const res = await fetch(`${base}/brokers/${encodeURIComponent(String(brokerId))}`, { headers });\r\n        if (!res.ok) throw new Error('Failed details fetch');\r\n        const data = await res.json();\r\n        const b = data?.data?.broker || data?.broker || data?.data;\r\n        if (b) setBroker(b);\r\n      } catch (e) {\r\n        setError('Failed to load broker details');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchBroker();\r\n  }, [brokerId]);\r\n\r\n  const nonEmpty = (v) => typeof v === 'string' && v.trim().length > 0 && v !== 'null' && v !== 'undefined';\r\n  const pickImage = (...cands) => (cands.find(nonEmpty) || '');\r\n  const displayName = nonEmpty(broker?.name) ? broker.name : nonEmpty(broker?.fullName) ? broker.fullName : 'Unknown Broker';\r\n  const profileImage = pickImage(broker?.brokerImage, broker?.profileImage, broker?.image);\r\n  const firmName = nonEmpty(broker?.firmName) ? broker.firmName : '';\r\n  const firmDisplay = nonEmpty(firmName) ? firmName : '-';\r\n  const website = nonEmpty(broker?.website) ? broker.website : '';\r\n  const websiteDisplay = nonEmpty(website) ? website : '-';\r\n  const licenseNumber = nonEmpty(broker?.licenseNumber) ? broker.licenseNumber : '';\r\n  const licenseDisplay = nonEmpty(licenseNumber) ? licenseNumber : '-';\r\n  const city = nonEmpty(broker?.city) ? broker.city : '';\r\n  const regionsArr = Array.isArray(broker?.region) ? broker.region : [];\r\n  const regionsText = regionsArr.length > 0\r\n    ? regionsArr.map(r => (typeof r === 'string' ? r : (r?.name || ''))).filter(nonEmpty).join(', ')\r\n    : '';\r\n  const regionsDisplay = nonEmpty(regionsText) ? regionsText : '-';\r\n  const specializations = Array.isArray(broker?.specializations) && broker.specializations.length > 0\r\n    ? broker.specializations\r\n    : [];\r\n  const years = (typeof broker?.experience === 'object' ? broker?.experience?.years : broker?.experience) || '';\r\n  const leads = broker?.leadsCreated?.count ?? broker?.closedDeals ?? 0;\r\n  const propertiesCount = broker?.propertiesListed?.count ?? broker?.propertyCount ?? 0;\r\n  // Use averageRating from API if available, otherwise fallback to broker.rating or default\r\n  const rating = brokerRatingsStats?.averageRating ?? broker?.rating ?? 4.8;\r\n  const status = nonEmpty(broker?.status) ? broker.status : '';\r\n  const about = nonEmpty(broker?.content) ? broker.content : (nonEmpty(broker?.about) ? broker.about : (nonEmpty(broker?.bio) ? broker.bio : (broker?.experience?.description || '')));\r\n  const phone = nonEmpty(broker?.phone) ? broker.phone : (nonEmpty(broker?.whatsappNumber) ? broker.whatsappNumber : '');\r\n\r\n  // Helpers for Leads UI (match LatestLeads design)\r\n  const ago = (d) => {\r\n    if (!d) return '';\r\n    const t = new Date(d).getTime();\r\n    if (!t) return '';\r\n    const s = Math.floor((Date.now() - t) / 1000);\r\n    const units = [\r\n      [31536000, 'y'],\r\n      [2592000, 'mo'],\r\n      [604800, 'w'],\r\n      [86400, 'd'],\r\n      [3600, 'h'],\r\n      [60, 'm']\r\n    ];\r\n    for (const [sec, label] of units) {\r\n      if (s >= sec) return Math.floor(s / sec) + label + ' ago';\r\n    }\r\n    return s + 's ago';\r\n  };\r\n  const regionName = (region) => {\r\n    if (!region) return '';\r\n    const str = typeof region === 'string' ? region : (region?.name || region?.city || region?.state || '');\r\n    return str.replace(/[-_]+/g, ' ').replace(/\\b\\w/g, (m) => m.toUpperCase()).replace(/Ncr\\b/i, 'NCR');\r\n  };\r\n\r\n  // Fetch similar brokers once main broker is loaded\r\n  useEffect(() => {\r\n    const fetchSimilar = async () => {\r\n      if (!broker) return;\r\n      try {\r\n        setSimilarLoading(true);\r\n        const token = typeof window !== 'undefined'\r\n          ? localStorage.getItem('token') || localStorage.getItem('authToken')\r\n          : null;\r\n        const base = process.env.NEXT_PUBLIC_API_URL || '';\r\n        const headers = {\r\n          'Content-Type': 'application/json',\r\n          ...(token ? { 'Authorization': `Bearer ${token}` } : {})\r\n        };\r\n\r\n        const res = await fetch(`${base}/brokers`, { headers });\r\n        if (!res.ok) { setSimilar([]); return; }\r\n        const data = await res.json();\r\n        let list = [];\r\n        if (Array.isArray(data?.data?.brokers)) list = data.data.brokers;\r\n        else if (Array.isArray(data?.data)) list = data.data;\r\n        else if (Array.isArray(data?.brokers)) list = data.brokers;\r\n        else if (Array.isArray(data)) list = data;\r\n\r\n        // Exclude current broker, pick first 3 similar by region or specialization when possible\r\n        const currentId = broker?.userId?._id || broker?.userId || broker?._id || broker?.id;\r\n        const currentRegions = Array.isArray(broker?.region) ? broker.region.map(r => (typeof r === 'string' ? r : r?.name)).filter(Boolean) : [];\r\n        const currentSpecs = Array.isArray(broker?.specializations) ? broker.specializations : [];\r\n\r\n        const scored = list\r\n          .filter(b => {\r\n            const id = b?.userId?._id || b?.userId || b?._id || b?.id;\r\n            return id && id !== currentId;\r\n          })\r\n          .map(b => {\r\n            const regions = Array.isArray(b?.region) ? b.region.map(r => (typeof r === 'string' ? r : r?.name)).filter(Boolean) : [];\r\n            const specs = Array.isArray(b?.specializations) ? b.specializations : [];\r\n            const regionScore = regions.some(r => currentRegions.includes(r)) ? 1 : 0;\r\n            const specScore = specs.some(s => currentSpecs.includes(s)) ? 1 : 0;\r\n            return { broker: b, score: regionScore + specScore };\r\n          })\r\n          .sort((a, b) => b.score - a.score)\r\n          .slice(0, 3)\r\n          .map(x => x.broker);\r\n\r\n        setSimilar(scored);\r\n      } catch (e) {\r\n        setSimilar([]);\r\n      } finally {\r\n        setSimilarLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchSimilar();\r\n  }, [broker]);\r\n\r\n  // Update scroll button states when similar brokers change\r\n  useEffect(() => {\r\n    const carousel = document.getElementById('similar-brokers-carousel');\r\n    if (carousel) {\r\n      const updateScrollState = () => {\r\n        const { scrollLeft, scrollWidth, clientWidth } = carousel;\r\n        const maxScroll = scrollWidth - clientWidth;\r\n        setCanScrollLeft(scrollLeft > 10);\r\n        setCanScrollRight(scrollLeft < maxScroll - 10);\r\n      };\r\n\r\n      // Small delay to ensure DOM is ready\r\n      setTimeout(updateScrollState, 100);\r\n      carousel.addEventListener('scroll', updateScrollState);\r\n      window.addEventListener('resize', updateScrollState);\r\n      return () => {\r\n        carousel.removeEventListener('scroll', updateScrollState);\r\n        window.removeEventListener('resize', updateScrollState);\r\n      };\r\n    }\r\n  }, [similar, similarLoading]);\r\n\r\n  // Fetch broker leads using broker's _id from broker details\r\n  useEffect(() => {\r\n    const fetchBrokerLeads = async () => {\r\n      if (!broker || !broker._id) return;\r\n      try {\r\n        setLeadsLoading(true);\r\n        setLeadsError('');\r\n        const token = typeof window !== 'undefined'\r\n          ? localStorage.getItem('token') || localStorage.getItem('authToken')\r\n          : null;\r\n        const base = process.env.NEXT_PUBLIC_API_URL || '';\r\n        const headers = {\r\n          'Content-Type': 'application/json',\r\n          ...(token ? { 'Authorization': `Bearer ${token}` } : {})\r\n        };\r\n\r\n        // Use broker's _id from the broker details API response\r\n        const brokerMongoId = broker._id;\r\n        const leadsEndpoint = `/leads?createdBy=${encodeURIComponent(String(brokerMongoId))}`;\r\n\r\n        const res = await fetch(`${base}${leadsEndpoint}`, { headers });\r\n        if (!res.ok) {\r\n          throw new Error(`Failed to fetch leads: ${res.status}`);\r\n        }\r\n\r\n        const data = await res.json();\r\n        // Handle the response structure - leads are in data.items array\r\n        let leadsData = [];\r\n        if (Array.isArray(data?.data?.items)) {\r\n          leadsData = data.data.items;\r\n        } else if (Array.isArray(data?.data?.leads)) {\r\n          leadsData = data.data.leads;\r\n        } else if (Array.isArray(data?.leads)) {\r\n          leadsData = data.leads;\r\n        } else if (Array.isArray(data?.data)) {\r\n          leadsData = data.data;\r\n        } else if (Array.isArray(data)) {\r\n          leadsData = data;\r\n        }\r\n\r\n        setBrokerLeads(leadsData);\r\n      } catch (e) {\r\n        setLeadsError(`Failed to load broker leads: ${e.message}`);\r\n        setBrokerLeads([]);\r\n      } finally {\r\n        setLeadsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchBrokerLeads();\r\n  }, [broker]); // Changed dependency from brokerId to broker\r\n\r\n  // Fetch broker ratings\r\n  useEffect(() => {\r\n    const fetchBrokerRatings = async () => {\r\n      // Use broker._id if available (from API), otherwise fallback to brokerId from URL\r\n      const brokerMongoId = broker?._id || brokerId;\r\n      if (!brokerMongoId) return;\r\n\r\n      setRatingsLoading(true);\r\n      try {\r\n        const token = typeof window !== 'undefined'\r\n          ? localStorage.getItem('token') || localStorage.getItem('authToken')\r\n          : null;\r\n        const base = process.env.NEXT_PUBLIC_API_URL;\r\n        const headers = {\r\n          'Content-Type': 'application/json',\r\n          ...(token ? { 'Authorization': `Bearer ${token}` } : {})\r\n        };\r\n\r\n        const ratingsEndpoint = `/broker-ratings/broker/${encodeURIComponent(String(brokerMongoId))}`;\r\n\r\n        const res = await fetch(`${base}${ratingsEndpoint}`, { headers });\r\n\r\n        const data = await res.json();\r\n\r\n        if (!res.ok) {\r\n          // Check if it's a \"Broker not found\" error\r\n          if (data.message && data.message.includes('not found')) {\r\n            setBrokerRatingsStats(null);\r\n            return;\r\n          }\r\n          throw new Error(data.message || `Failed to fetch ratings: ${res.status}`);\r\n        }\r\n\r\n        if (data.success && data.data && data.data.stats) {\r\n          setBrokerRatingsStats(data.data.stats);\r\n        } else {\r\n          setBrokerRatingsStats(null);\r\n        }\r\n      } catch (e) {\r\n        setBrokerRatingsStats(null);\r\n      } finally {\r\n        setRatingsLoading(false);\r\n      }\r\n    };\r\n\r\n    // Only fetch ratings after broker data is loaded\r\n    if (broker) {\r\n      fetchBrokerRatings();\r\n    }\r\n  }, [broker, brokerId]);\r\n\r\n  // Get broker properties from broker API response\r\n  useEffect(() => {\r\n    if (broker) {\r\n      // Use properties from broker API response (broker.properties or broker.propertiesListed.items)\r\n      let propertiesList = [];\r\n      if (Array.isArray(broker?.propertiesListed?.items)) {\r\n        propertiesList = broker.propertiesListed.items;\r\n      } else if (Array.isArray(broker?.properties)) {\r\n        propertiesList = broker.properties;\r\n      }\r\n\r\n      // Filter to show properties that are not closed/sold\r\n      const availableProperties = propertiesList.filter((property) => {\r\n        const status = property?.status || property?.availabilityStatus || '';\r\n        const statusLower = status?.toLowerCase() || '';\r\n        // Exclude closed, sold, inactive properties\r\n        const excludedStatuses = ['closed', 'sold', 'inactive', 'deleted', 'cancelled'];\r\n        // Include if status is empty, or if it's not in excluded list\r\n        return !status || !excludedStatuses.includes(statusLower);\r\n      });\r\n\r\n      setBrokerProperties(availableProperties);\r\n    } else {\r\n      setBrokerProperties([]);\r\n    }\r\n  }, [broker]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen\">\r\n        <HeaderFile data={headerData} />\r\n        <div className=\"py-8\">\r\n          <div className=\"w-full mx-auto px-4 md:px-0\">\r\n            {/* Main Content Grid */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-8\">\r\n              {/* Left Content - 8 columns */}\r\n              <div className=\"lg:col-span-8 space-y-12\">\r\n                {/* Hero Section Skeleton */}\r\n                <div className=\"bg-white overflow-hidden border border-gray-200 rounded-[10px] mb-8\" style={{ boxShadow: '0px 0px 1px rgba(23, 26, 31, 0.07), 0px 0px 2px rgba(23, 26, 31, 0.12)' }}>\r\n                  <div className=\"p-8\">\r\n                    <ContentLoader\r\n                      speed={2}\r\n                      width={800}\r\n                      height={180}\r\n                      viewBox=\"0 0 800 180\"\r\n                      backgroundColor=\"#f3f3f3\"\r\n                      foregroundColor=\"#ecebeb\"\r\n                      style={{ width: '100%', height: '100%' }}\r\n                    >\r\n                      {/* Avatar */}\r\n                      <circle cx=\"48\" cy=\"48\" r=\"48\" />\r\n                      {/* Name */}\r\n                      <rect x=\"120\" y=\"20\" rx=\"4\" ry=\"4\" width=\"200\" height=\"24\" />\r\n                      {/* Badge */}\r\n                      <rect x=\"120\" y=\"52\" rx=\"12\" ry=\"12\" width=\"140\" height=\"24\" />\r\n                      {/* Firm and city */}\r\n                      <rect x=\"120\" y=\"88\" rx=\"4\" ry=\"4\" width=\"300\" height=\"16\" />\r\n                      {/* Chips row */}\r\n                      <rect x=\"0\" y=\"120\" rx=\"13\" ry=\"13\" width=\"150\" height=\"26\" />\r\n                      <rect x=\"160\" y=\"120\" rx=\"13\" ry=\"13\" width=\"150\" height=\"26\" />\r\n                      <rect x=\"320\" y=\"120\" rx=\"13\" ry=\"13\" width=\"80\" height=\"26\" />\r\n                    </ContentLoader>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* About Section Skeleton */}\r\n                <section className=\"bg-white\">\r\n                  <ContentLoader\r\n                    speed={2}\r\n                    width={600}\r\n                    height={150}\r\n                    viewBox=\"0 0 600 150\"\r\n                    backgroundColor=\"#f3f3f3\"\r\n                    foregroundColor=\"#ecebeb\"\r\n                    style={{ width: '100%', height: '100%' }}\r\n                  >\r\n                    {/* Title */}\r\n                    <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"180\" height=\"24\" />\r\n                    {/* Paragraph lines */}\r\n                    <rect x=\"0\" y=\"40\" rx=\"4\" ry=\"4\" width=\"600\" height=\"12\" />\r\n                    <rect x=\"0\" y=\"60\" rx=\"4\" ry=\"4\" width=\"580\" height=\"12\" />\r\n                    <rect x=\"0\" y=\"80\" rx=\"4\" ry=\"4\" width=\"550\" height=\"12\" />\r\n                    <rect x=\"0\" y=\"100\" rx=\"4\" ry=\"4\" width=\"520\" height=\"12\" />\r\n                  </ContentLoader>\r\n                </section>\r\n\r\n                {/* Professional Details Skeleton */}\r\n                <section className=\"\">\r\n                  <ContentLoader\r\n                    speed={2}\r\n                    width={600}\r\n                    height={120}\r\n                    viewBox=\"0 0 600 120\"\r\n                    backgroundColor=\"#f3f3f3\"\r\n                    foregroundColor=\"#ecebeb\"\r\n                    style={{ width: '100%', height: '100%' }}\r\n                  >\r\n                    {/* Title */}\r\n                    <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"200\" height=\"24\" />\r\n\r\n                    {/* Two cards side by side */}\r\n                    {/* Card 1 - Firm Name */}\r\n                    <rect x=\"0\" y=\"40\" rx=\"10\" ry=\"10\" width=\"372\" height=\"76\" />\r\n                    <circle cx=\"30\" cy=\"78\" r=\"20\" />\r\n                    <rect x=\"60\" y=\"65\" rx=\"4\" ry=\"4\" width=\"80\" height=\"12\" />\r\n                    <rect x=\"60\" y=\"85\" rx=\"4\" ry=\"4\" width=\"150\" height=\"16\" />\r\n\r\n                    {/* Card 2 - License Number */}\r\n                    <rect x=\"400\" y=\"40\" rx=\"10\" ry=\"10\" width=\"372\" height=\"76\" />\r\n                    <circle cx=\"430\" cy=\"78\" r=\"20\" />\r\n                    <rect x=\"460\" y=\"65\" rx=\"4\" ry=\"4\" width=\"100\" height=\"12\" />\r\n                    <rect x=\"460\" y=\"85\" rx=\"4\" ry=\"4\" width=\"180\" height=\"16\" />\r\n                    <rect x=\"650\" y=\"85\" rx=\"12\" ry=\"12\" width=\"70\" height=\"20\" />\r\n                  </ContentLoader>\r\n                </section>\r\n\r\n                {/* Leads Section Skeleton */}\r\n                <div className=\"\">\r\n                  <ContentLoader\r\n                    speed={2}\r\n                    width={600}\r\n                    height={40}\r\n                    viewBox=\"0 0 600 40\"\r\n                    backgroundColor=\"#f3f3f3\"\r\n                    foregroundColor=\"#ecebeb\"\r\n                    style={{ width: '100%', height: '100%', marginBottom: '24px' }}\r\n                  >\r\n                    <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"250\" height=\"28\" />\r\n                  </ContentLoader>\r\n\r\n                  <div className=\"space-y-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-4\">\r\n                    {[...Array(3)].map((_, index) => (\r\n                      <div key={index} className=\"border border-gray-200 rounded-2xl p-6\">\r\n                        <ContentLoader\r\n                          speed={2}\r\n                          width={350}\r\n                          height={280}\r\n                          viewBox=\"0 0 350 280\"\r\n                          backgroundColor=\"#f3f3f3\"\r\n                          foregroundColor=\"#ecebeb\"\r\n                          style={{ width: '100%', height: '100%' }}\r\n                        >\r\n                          {/* Title */}\r\n                          <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"250\" height=\"20\" />\r\n                          {/* Tags and time */}\r\n                          <rect x=\"0\" y=\"32\" rx=\"11\" ry=\"11\" width=\"80\" height=\"22\" />\r\n                          <rect x=\"90\" y=\"32\" rx=\"11\" ry=\"11\" width=\"100\" height=\"22\" />\r\n                          <rect x=\"250\" y=\"36\" rx=\"4\" ry=\"4\" width=\"80\" height=\"14\" />\r\n                          {/* Divider */}\r\n                          <rect x=\"0\" y=\"70\" rx=\"1\" ry=\"1\" width=\"350\" height=\"1\" />\r\n                          {/* Location items */}\r\n                          <circle cx=\"8\" cy=\"95\" r=\"4\" />\r\n                          <rect x=\"20\" y=\"88\" rx=\"4\" ry=\"4\" width=\"150\" height=\"12\" />\r\n                          <circle cx=\"8\" cy=\"120\" r=\"4\" />\r\n                          <rect x=\"20\" y=\"113\" rx=\"4\" ry=\"4\" width=\"180\" height=\"12\" />\r\n                          {/* Budget */}\r\n                          <rect x=\"0\" y=\"145\" rx=\"4\" ry=\"4\" width=\"80\" height=\"12\" />\r\n                          <rect x=\"90\" y=\"145\" rx=\"4\" ry=\"4\" width=\"120\" height=\"12\" />\r\n                          {/* Broker profile */}\r\n                          <circle cx=\"24\" cy=\"200\" r=\"24\" />\r\n                          <rect x=\"60\" y=\"190\" rx=\"4\" ry=\"4\" width=\"100\" height=\"14\" />\r\n                          <rect x=\"60\" y=\"210\" rx=\"4\" ry=\"4\" width=\"150\" height=\"12\" />\r\n                        </ContentLoader>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Right Sidebar - 4 columns */}\r\n              <div className=\"lg:col-span-4 space-y-8\">\r\n                {/* Quick Contact Skeleton */}\r\n                <div className=\"bg-white rounded-lg border border-gray-200 p-6 shadow-sm\">\r\n                  <ContentLoader\r\n                    speed={2}\r\n                    width={400}\r\n                    height={160}\r\n                    viewBox=\"0 0 400 160\"\r\n                    backgroundColor=\"#f3f3f3\"\r\n                    foregroundColor=\"#ecebeb\"\r\n                    style={{ width: '100%', height: '100%' }}\r\n                  >\r\n                    {/* Title */}\r\n                    <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"120\" height=\"20\" />\r\n                    {/* Buttons */}\r\n                    <rect x=\"0\" y=\"40\" rx=\"6\" ry=\"6\" width=\"100%\" height=\"40\" />\r\n                    <rect x=\"0\" y=\"95\" rx=\"6\" ry=\"6\" width=\"100%\" height=\"40\" />\r\n                  </ContentLoader>\r\n                </div>\r\n\r\n                {/* Performance Metrics Grid Skeleton */}\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  {[1, 2, 3, 4].map((i) => (\r\n                    <div key={i} className=\"bg-gray-50 rounded-[10px] p-4 text-center\">\r\n                      <ContentLoader\r\n                        speed={2}\r\n                        width={200}\r\n                        height={100}\r\n                        viewBox=\"0 0 200 100\"\r\n                        backgroundColor=\"#e5e5e5\"\r\n                        foregroundColor=\"#d4d4d4\"\r\n                        style={{ width: '100%', height: '100%' }}\r\n                      >\r\n                        {/* Number */}\r\n                        <rect x=\"70\" y=\"10\" rx=\"4\" ry=\"4\" width=\"60\" height=\"36\" />\r\n                        {/* Label */}\r\n                        <rect x=\"20\" y=\"55\" rx=\"4\" ry=\"4\" width=\"160\" height=\"20\" />\r\n                      </ContentLoader>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                {/* Lead Generation Support Skeleton */}\r\n                <div className=\"bg-[#EDFDF4] rounded-[10px] p-6 shadow-sm\">\r\n                  <ContentLoader\r\n                    speed={2}\r\n                    width={400}\r\n                    height={350}\r\n                    viewBox=\"0 0 400 350\"\r\n                    backgroundColor=\"#e0f2e9\"\r\n                    foregroundColor=\"#c8e6d5\"\r\n                    style={{ width: '100%', height: '100%' }}\r\n                  >\r\n                    {/* Title */}\r\n                    <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"220\" height=\"28\" />\r\n                    {/* Description */}\r\n                    <rect x=\"0\" y=\"40\" rx=\"4\" ry=\"4\" width=\"400\" height=\"12\" />\r\n                    <rect x=\"0\" y=\"58\" rx=\"4\" ry=\"4\" width=\"380\" height=\"12\" />\r\n                    <rect x=\"0\" y=\"76\" rx=\"4\" ry=\"4\" width=\"350\" height=\"12\" />\r\n\r\n                    {/* 3 feature items */}\r\n                    {[0, 1, 2].map((i) => (\r\n                      <React.Fragment key={i}>\r\n                        <circle cx=\"18\" cy={110 + i * 60} r=\"18\" />\r\n                        <rect x=\"50\" y={102 + i * 60} rx=\"4\" ry=\"4\" width=\"120\" height=\"16\" />\r\n                        <rect x=\"50\" y={122 + i * 60} rx=\"4\" ry=\"4\" width=\"280\" height=\"12\" />\r\n                      </React.Fragment>\r\n                    ))}\r\n\r\n                    {/* Button */}\r\n                    <rect x=\"0\" y=\"300\" rx=\"6\" ry=\"6\" width=\"100%\" height=\"40\" />\r\n                  </ContentLoader>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!broker) {\r\n    return (\r\n      <div className=\"min-h-screen\">\r\n        <HeaderFile data={headerData} />\r\n        <div className=\"py-10\">\r\n          <div className=\"w-full mx-auto px-4 md:px-0\">\r\n            <div className=\"bg-white rounded-2xl border border-gray-200 shadow-sm mb-8 p-6\">\r\n              <p className=\"text-sm text-gray-600\">{error || 'No broker details found.'}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen \">\r\n      <Toaster position=\"top-right\" toastOptions={{ duration: 3000 }} />\r\n      <HeaderFile data={headerData} />\r\n      <div className=\"py-8\">\r\n        <div className=\"w-full mx-auto px-4 md:px-0\">\r\n\r\n\r\n          {/* Main Content Grid */}\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-8\">\r\n            {/* Left Content - 9 columns */}\r\n            <div className=\"lg:col-span-8 space-y-12\">\r\n\r\n              {/* Hero Section - Broker Header */}\r\n              <div className=\"bg-white overflow-hidden border border-gray-200 rounded-[10px] mb-8\" style={{ boxShadow: '0px 0px 1px rgba(23, 26, 31, 0.07), 0px 0px 2px rgba(23, 26, 31, 0.12)' }}>\r\n                <div className=\"p-8\">\r\n                  <div className=\"grid grid-cols-[5rem_1fr] items-center gap-6\">\r\n                    {/* Avatar */}\r\n                    <div className=\"relative  w-[96px] h-[96px] bg-[#E5F0FA] opacity-100 overflow-hidden rounded-[48px]\">\r\n                      <img src={profileImage} alt=\"Broker\" className=\"w-[96px] h-[96px] object-cover\" />\r\n                      <div className=\"absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 rounded-full border-2 border-white flex items-center justify-center\">\r\n                        <svg className=\"w-3 h-3 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                          <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\r\n                        </svg>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Broker Info */}\r\n                    <div>\r\n                      <div className=\"flex items-center gap-3 mb-1 flex-wrap \">\r\n                        <h1 className=\"text-[20px]  font-extrabold text-[#171A1F] px-4\">{displayName}</h1>\r\n                        <span className=\" px-6 rounded-full bg-[#FDC700] flex items-center justify-center font-[Inter] text-[12px] leading-[22px] font-medium opacity-100\">\r\n                          Top Rated Broker\r\n                          {/* <svg className=\"w-4 h-4 text-yellow-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                        <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"/>\r\n                      </svg> */}\r\n                        </span>\r\n                      </div>\r\n                      <p className=\"font-[Inter] text-[14px]  font-normal text-[#565D6D] mb-2 px-4 \">{firmDisplay} - {city}</p>\r\n\r\n                      {/* Social Media Icons - Only for platforms in the section */}\r\n                      {/* {(() => {\r\n                const socialLinks = [];\r\n                \r\n                if (nonEmpty(broker?.socialMedia?.linkedin)) {\r\n                  socialLinks.push({\r\n                    name: 'LinkedIn',\r\n                    url: broker.socialMedia.linkedin,\r\n                    icon: (\r\n                      <svg className=\"w-3 h-3 text-white group-hover:scale-110 transition-transform\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path d=\"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z\"/>\r\n                      </svg>\r\n                    ),\r\n                    bgColor: 'bg-blue-600 hover:bg-blue-700'\r\n                  });\r\n                }\r\n                \r\n                if (nonEmpty(broker?.socialMedia?.twitter)) {\r\n                  socialLinks.push({\r\n                    name: 'Twitter',\r\n                    url: broker.socialMedia.twitter,\r\n                    icon: (\r\n                      <svg className=\"w-3 h-3 text-white group-hover:scale-110 transition-transform\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path d=\"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z\"/>\r\n                      </svg>\r\n                    ),\r\n                    bgColor: 'bg-blue-400 hover:bg-blue-500'\r\n                  });\r\n                }\r\n                \r\n                if (nonEmpty(broker?.socialMedia?.instagram)) {\r\n                  socialLinks.push({\r\n                    name: 'Instagram',\r\n                    url: broker.socialMedia.instagram,\r\n                    icon: (\r\n                      <svg className=\"w-3 h-3 text-white group-hover:scale-110 transition-transform\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path d=\"M7 2C4.24 2 2 4.24 2 7v10c0 2.76 2.24 5 5 5h10c2.76 0 5-2.24 5-5V7c0-2.76-2.24-5-5-5H7zm10 2c1.66 0 3 1.34 3 3v10c0 1.66-1.34 3-3 3H7c-1.66 0-3-1.34-3-3V7c0-1.66 1.34-3 3-3h10zm-5 3a5 5 0 100 10 5 5 0 000-10zm0 2a3 3 0 110 6 3 3 0 010-6zm5.5-.75a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0z\"/>\r\n                      </svg>\r\n                    ),\r\n                    bgColor: 'bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600'\r\n                  });\r\n                }\r\n                \r\n                if (nonEmpty(broker?.socialMedia?.facebook)) {\r\n                  socialLinks.push({\r\n                    name: 'Facebook',\r\n                    url: broker.socialMedia.facebook,\r\n                    icon: (\r\n                      <svg className=\"w-3 h-3 text-white group-hover:scale-110 transition-transform\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path d=\"M22 12a10 10 0 10-11.5 9.95v-7.04H7.9V12h2.6V9.8c0-2.57 1.53-3.99 3.87-3.99 1.12 0 2.29.2 2.29.2v2.52h-1.29c-1.27 0-1.66.79-1.66 1.6V12h2.83l-.45 2.91h-2.38v7.04C19.55 21.47 22 17.1 22 12z\"/>\r\n                      </svg>\r\n                    ),\r\n                    bgColor: 'bg-blue-800 hover:bg-blue-900'\r\n                  });\r\n                }\r\n                \r\n                if (nonEmpty(broker?.website)) {\r\n                  socialLinks.push({\r\n                    name: 'Website',\r\n                    url: broker.website,\r\n                    icon: (\r\n                      <svg className=\"w-3 h-3 text-white group-hover:scale-110 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" strokeWidth=\"2\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9\"/>\r\n                      </svg>\r\n                    ),\r\n                    bgColor: 'bg-green-600 hover:bg-green-700'\r\n                  });\r\n                }\r\n                \r\n                // Only render if there are social links\r\n                if (socialLinks.length === 0) return null;\r\n                \r\n                return (\r\n                  <div className=\"flex items-center gap-2 mb-4\">\r\n                    {socialLinks.map((link, index) => (\r\n                      <a \r\n                        key={index}\r\n                        href={link.url} \r\n                        target=\"_blank\" \r\n                        rel=\"noreferrer\"\r\n                        className={`w-6 h-6 ${link.bgColor} rounded-lg flex items-center justify-center transition-colors group`}\r\n                        title={link.name}\r\n                      >\r\n                        {link.icon}\r\n                      </a>\r\n                    ))}\r\n                  </div>\r\n                );\r\n              })()} */}\r\n                    </div>\r\n\r\n\r\n                    {/* Chips row - spans full width starting from avatar's left edge */}\r\n                    <div className=\"col-span-2  flex flex-wrap items-center gap-2 text-xs\">\r\n                      <span className=\"inline-flex items-center  px-2.5 rounded-full  h-[26px] bg-[#F3F4F6] border border-transparent\">\r\n                        <img\r\n                          src=\"/images/lucide-Circle-Outlined (2).svg\"\r\n                          alt=\"status\"\r\n                          className=\"w-2 h-2 mr-1.5 inline-block fill-[#565D6D]\"\r\n                        />\r\n\r\n                        {years !== '' ? `${years}+ Years Experience` : '0 Years Experience'}\r\n                      </span>\r\n                      <span\r\n                        onClick={() => {\r\n                          if (propertiesCount > 0) {\r\n                            const brokerMongoId = broker?._id || brokerId;\r\n                            if (brokerMongoId) {\r\n                              router.push(`/search?tab=properties&createdBy=${encodeURIComponent(String(brokerMongoId))}`);\r\n                            }\r\n                          }\r\n                        }}\r\n                        className={`inline-flex items-center px-2.5 rounded-full h-[26px] border border-transparent transition-colors ${propertiesCount > 0\r\n                            ? 'bg-[#E5FCE4] text-[#0D542B] cursor-pointer hover:bg-[#D9F5E8]'\r\n                            : 'bg-[#F3F4F6] text-[#565D6D] cursor-default pointer-events-none'\r\n                          }`}\r\n                      >\r\n                        <img\r\n                          src=\"/images/lucide-Building2-Outlined (2).svg\"\r\n                          alt=\"status\"\r\n                          className={`w-3 h-3 mr-1.5 inline-block ${propertiesCount > 0 ? 'fill-[#0D542B]' : 'fill-[#565D6D]'}`}\r\n                        />\r\n\r\n                        {propertiesCount} Active Listings\r\n                      </span>\r\n                      <span className=\"inline-flex items-center px-2.5 h-[26px] bg-[#0D542B] rounded-full border border-transparent font-[Inter] text-[12px] leading-[16px] font-medium text-white\">\r\n                        <img\r\n                          src=\"/images/lucide-Circle-Outlined (2).svg\"\r\n                          alt=\"status\"\r\n                          className=\"w-2 h-2 mr-1.5 inline-block\"\r\n                          style={{ filter: 'brightness(0) invert(1)' }}\r\n                        />\r\n\r\n                        active\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              {/* About Section */}\r\n              <section className=\"bg-white\">\r\n                <div className=\"flex items-center gap-2 mb-6\">\r\n                  {/* <span className=\"inline-block h-0.5 w-6 rounded bg-yellow-400\"></span> */}\r\n                  <h2 className=\"text-[18px] leading-[36px] font-bold text-[#171A1F]\">About {displayName}</h2>\r\n                </div>\r\n                {nonEmpty(about) ? (\r\n                  <p className=\"text-gray-700 leading-relaxed\">\r\n                    {about}\r\n                  </p>\r\n                ) : (\r\n                  <p className=\"text-gray-700 leading-relaxed text-[12px]\">\r\n                    Welcome! I'm {displayName} at {firmDisplay}, a dedicated real estate professional specializing in Luxury Homes. With years of experience in the real estate market, I'm committed to helping you find the perfect property or sell your current one. My expertise covers residential and commercial properties, ensuring you get the best deals and guidance throughout your real estate journey. I believe in transparency, integrity, and providing personalized service to meet your unique needs.\r\n                  </p>\r\n                )}\r\n              </section>\r\n\r\n              {/* Professional Details */}\r\n              <section className=\"\">\r\n                <div className=\"flex items-center gap-2 mb-6\">\r\n                  {/* <span className=\"inline-block h-0.5 w-6 rounded bg-yellow-400\"></span> */}\r\n                  <h3 className=\"text-[18px] leading-[36px] font-bold text-[#171A1F]\">Professional Details</h3>\r\n                </div>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div className=\"flex items-center gap-3 p-4 w-[372px] h-[76px] bg-[#FAFAFB] rounded-[10px]\">\r\n                    <div className=\"w-10 h-10 rounded-full bg-white flex items-center justify-center\">\r\n                      <img src=\"/images/lucide-Briefcase-Outlined (1).svg\" alt=\"Firm\" className=\"w-5 h-5\" style={{ filter: 'brightness(0) saturate(100%) invert(15%) sepia(95%) saturate(700%) hue-rotate(115deg) brightness(95%) contrast(90%)' }} />\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"text-[14px] text-gray-500\">Real Estate Firm</div>\r\n                      <div className=\"font-medium text-[12px] text-gray-900\">{firmDisplay}</div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center gap-3 p-4 w-[372px] h-[76px] bg-[#FAFAFB] rounded-[10px]\">\r\n                    <div className=\"w-10 h-10 rounded-full bg-white flex items-center justify-center\">\r\n                      <img src=\"/images/lucide-Award-Outlined.svg\" alt=\"License\" className=\"w-5 h-5\" style={{ filter: 'brightness(0) saturate(100%) invert(15%) sepia(95%) saturate(700%) hue-rotate(115deg) brightness(95%) contrast(90%)' }} />\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"text-[14px] text-gray-500\">RERA License Number</div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"font-medium   text-[12px] text-gray-900\">{licenseDisplay}</span>\r\n                        {nonEmpty(licenseNumber) && (\r\n                          <span className=\"px-2 py-1 rounded-full  text-[12px] bg-green-100 text-green-800 font-medium\">\r\n                            Verified\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </section>\r\n              {/* Leads Section */}\r\n              <div className=\"\">\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                  {/* <span className=\"inline-block h-0.5 w-6 rounded bg-yellow-400\"></span> */}\r\n                  <h3 className=\"text-[18px] leading-[36px] font-bold text-[#171A1F]\">Queries posted by this broker</h3>\r\n                  {broker?._id && brokerLeads.length > 3 && (\r\n                    <p\r\n                      onClick={() => {\r\n                        router.push(`/leads?createdBy=${encodeURIComponent(String(broker._id))}`);\r\n                      }}\r\n                      className=\" text-gray-600 rounded-lg text-sm font-medium  cursor-pointer hover:text-[#0D542B] transition-colors\"\r\n                    >\r\n                      View All\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                {leadsLoading ? (\r\n                  <div className=\"space-y-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-4\">\r\n                    {[...Array(3)].map((_, index) => (\r\n                      <div key={index} className=\"border border-gray-200 rounded-2xl p-6\">\r\n                        <ContentLoader\r\n                          speed={2}\r\n                          width={350}\r\n                          height={280}\r\n                          viewBox=\"0 0 350 280\"\r\n                          backgroundColor=\"#f3f3f3\"\r\n                          foregroundColor=\"#ecebeb\"\r\n                          style={{ width: '100%', height: '100%' }}\r\n                        >\r\n                          {/* Title */}\r\n                          <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"250\" height=\"20\" />\r\n                          {/* Tags and time */}\r\n                          <rect x=\"0\" y=\"32\" rx=\"11\" ry=\"11\" width=\"80\" height=\"22\" />\r\n                          <rect x=\"90\" y=\"32\" rx=\"11\" ry=\"11\" width=\"100\" height=\"22\" />\r\n                          <rect x=\"250\" y=\"36\" rx=\"4\" ry=\"4\" width=\"80\" height=\"14\" />\r\n                          {/* Divider */}\r\n                          <rect x=\"0\" y=\"70\" rx=\"1\" ry=\"1\" width=\"350\" height=\"1\" />\r\n                          {/* Location items */}\r\n                          <circle cx=\"8\" cy=\"95\" r=\"4\" />\r\n                          <rect x=\"20\" y=\"88\" rx=\"4\" ry=\"4\" width=\"150\" height=\"12\" />\r\n                          <circle cx=\"8\" cy=\"120\" r=\"4\" />\r\n                          <rect x=\"20\" y=\"113\" rx=\"4\" ry=\"4\" width=\"180\" height=\"12\" />\r\n                          {/* Budget */}\r\n                          <rect x=\"0\" y=\"145\" rx=\"4\" ry=\"4\" width=\"80\" height=\"12\" />\r\n                          <rect x=\"90\" y=\"145\" rx=\"4\" ry=\"4\" width=\"120\" height=\"12\" />\r\n                          {/* Broker profile */}\r\n                          <circle cx=\"24\" cy=\"200\" r=\"24\" />\r\n                          <rect x=\"60\" y=\"190\" rx=\"4\" ry=\"4\" width=\"100\" height=\"14\" />\r\n                          <rect x=\"60\" y=\"210\" rx=\"4\" ry=\"4\" width=\"150\" height=\"12\" />\r\n                        </ContentLoader>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : leadsError ? (\r\n                  <div className=\"text-center py-8\">\r\n                    <div className=\"text-red-500 mb-2\">\r\n                      <svg className=\"w-12 h-12 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                      </svg>\r\n                    </div>\r\n                    <p className=\"text-gray-600\">{leadsError}</p>\r\n                  </div>\r\n                ) : brokerLeads.length > 0 ? (\r\n                  <div className=\"space-y-4  grid  md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-4\">\r\n                    {brokerLeads.slice(0, 3).map((lead, index) => {\r\n                      const leadId = lead?._id || lead?.id || index;\r\n                      const title = `${lead?.customerName || 'Customer'} - ${lead?.requirement || 'Property'} Lead`;\r\n                      const description = `${lead?.propertyType || 'Property'} in ${lead?.primaryRegion?.name || lead?.region?.name || 'Location'}`;\r\n                      const price = lead?.budget || '';\r\n                      const location = lead?.primaryRegion?.name || lead?.region?.name || lead?.primaryRegion?.city || lead?.region?.city || '';\r\n                      const image = lead?.createdBy?.brokerImage || '/images/realestate.png';\r\n                      const type = lead?.propertyType || 'Property';\r\n                      const status = lead?.status || 'New';\r\n                      const customerPhone = lead?.customerPhone || '';\r\n                      const customerEmail = lead?.customerEmail || '';\r\n\r\n                      // Extract broker ID and broker object from lead.createdBy\r\n                      let viewBrokerId = null;\r\n                      let viewBroker = null;\r\n                      const createdBy = lead?.createdBy;\r\n\r\n                      if (createdBy) {\r\n                        if (typeof createdBy === 'string') {\r\n                          viewBrokerId = createdBy;\r\n                          viewBroker = { _id: createdBy, id: createdBy };\r\n                        } else if (typeof createdBy === 'object' && createdBy !== null) {\r\n                          viewBroker = createdBy;\r\n                          viewBrokerId = createdBy?.userId?._id ||\r\n                            createdBy?.userId?.id ||\r\n                            createdBy?.userId ||\r\n                            createdBy?._id ||\r\n                            createdBy?.id ||\r\n                            createdBy?.brokerId ||\r\n                            createdBy?.brokerDetailId ||\r\n                            createdBy?.brokerDetailsId ||\r\n                            null;\r\n                          viewBrokerId = viewBrokerId ? String(viewBrokerId) : null;\r\n                        }\r\n                      }\r\n\r\n                      return (\r\n                        <Link\r\n                          key={leadId}\r\n                          href={`/lead-details/${leadId}`}\r\n                          className=\"block h-full\"\r\n                        >\r\n                          <article className=\"group h-full relative rounded-2xl border border-gray-200 bg-white shadow-sm transition-all duration-300 overflow-hidden hover:-translate-y-1 hover:shadow-lg cursor-pointer\">\r\n                            <div className=\"p-4\">\r\n                              {/* Top Section - Main Title */}\r\n                              <div className=\"mb-3\">\r\n                                <h3 className=\"text-[18px] leading-[20px] font-semibold mb-2\" style={{ color: '#323743' }}>\r\n                                  {lead?.propertyType || 'Property'} for {lead?.requirement || 'inquiry'}\r\n                                </h3>\r\n                                {/* Tags and Time */}\r\n                                <div className=\"flex items-center justify-between gap-2 flex-nowrap\">\r\n                                  <div className=\"flex items-center gap-2 flex-nowrap\">\r\n                                    {lead?.requirement && (\r\n                                      <span className=\"inline-flex items-center justify-center rounded-full h-[22px] px-3 whitespace-nowrap\" style={{ fontFamily: 'Inter', fontSize: '12px', lineHeight: '20px', fontWeight: '600', background: '#0D542B', color: '#FFFFFF' }}>\r\n                                        {lead.requirement}\r\n                                      </span>\r\n                                    )}\r\n                                    {lead?.propertyType && (\r\n                                      <span className=\"inline-flex items-center justify-center rounded-full h-[22px] px-3 whitespace-nowrap\" style={{ fontFamily: 'Inter', fontSize: '12px', lineHeight: '20px', fontWeight: '600', background: '#FDC700', color: '#1b1d20ff' }}>\r\n                                        {lead.propertyType}\r\n                                      </span>\r\n                                    )}\r\n                                  </div>\r\n                                  <div className=\"flex items-center gap-1.5 text-[12px] leading-5 font-normal whitespace-nowrap flex-shrink-0\" style={{ color: '#565D6D' }}>\r\n                                    <svg className=\"h-3 w-3\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                      <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                                      <path d=\"M12 6v6l4 2\" />\r\n                                    </svg>\r\n                                    {ago(lead?.createdAt)}\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n\r\n                              {/* Horizontal Divider */}\r\n                              <div className=\"border-t border-gray-200 my-3\"></div>\r\n\r\n                              {/* Middle Section - Property Details */}\r\n                              <div className=\"space-y-2\">\r\n                                {/* Preferred Location */}\r\n                                <div className=\"flex items-center gap-2\">\r\n                                  <svg className=\"h-3 w-3 flex-shrink-0 text-[#565D6D]\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                    <path d=\"M21 10c0 7-9 13-9 13S3 17 3 10a9 9 0 0 1 18 0z\" />\r\n                                    <circle cx=\"12\" cy=\"10\" r=\"3\" />\r\n                                  </svg>\r\n                                  <div className=\"flex items-center flex-wrap gap-1\">\r\n                                    <span className=\"font-inter text-[12px] leading-5 font-medium text-[#171A1FFF]\">Primary Location:</span>\r\n                                    <span className=\"font-inter text-[12px] leading-5 font-normal capitalize text-[#565D6DFF]\">{regionName(lead?.primaryRegion || lead?.region)}</span>\r\n                                  </div>\r\n                                </div>\r\n                                {/* Secondary Location */}\r\n                                {lead?.secondaryRegion && (\r\n                                  <div className=\"flex items-center gap-2\">\r\n                                    <svg className=\"h-3 w-3 flex-shrink-0 text-[#565D6D]\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                      <path d=\"M21 10c0 7-9 13-9 13S3 17 3 10a9 9 0 0 1 18 0z\" />\r\n                                      <circle cx=\"12\" cy=\"10\" r=\"3\" />\r\n                                    </svg>\r\n                                    <div className=\"flex items-center flex-wrap gap-1\">\r\n                                      <span className=\"font-inter text-[12px] leading-5 font-medium text-[#171A1FFF]\">Secondary Location:</span>\r\n                                      <span className=\"font-inter text-[12px] leading-5 font-normal capitalize text-[#565D6DFF]\">{regionName(lead?.secondaryRegion)}</span>\r\n                                    </div>\r\n                                  </div>\r\n                                )}\r\n                                {/* Budget */}\r\n                                <div className=\"flex items-center gap-2\">\r\n                                  <svg className=\"h-3 w-3 flex-shrink-0 text-[#565D6D]\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                    <rect x=\"3\" y=\"7\" width=\"18\" height=\"11\" rx=\"2\" />\r\n                                    <path d=\"M8 7V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" />\r\n                                  </svg>\r\n                                  <div className=\"flex items-center flex-wrap gap-1\">\r\n                                    <span className=\"font-inter text-[12px] leading-5 font-medium text-[#171A1FFF]\">Budget:</span>\r\n                                    <span className=\"text-[12px] leading-5 font-normal\" style={{ color: '#565D6D' }}>\r\n                                      {typeof price === 'number' ? `${price.toLocaleString('en-IN')}` : (price || '')}\r\n                                    </span>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n\r\n                              {/* Bottom Section - Broker Profile and Actions - Commented out */}\r\n                              {false && (\r\n                                <div className=\"pt-4\">\r\n                                  <div className=\"flex items-center justify-between\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                      <div className=\"relative w-12 h-12 text-sm font-semibold\" style={{ color: '#323743' }}>\r\n                                        {(() => {\r\n                                          const createdBy = lead?.createdBy;\r\n                                          let nameTxt = '';\r\n                                          let brokerImageUrl;\r\n                                          if (!createdBy) {\r\n                                            nameTxt = '';\r\n                                          } else if (typeof createdBy === 'string') {\r\n                                            nameTxt = createdBy;\r\n                                          } else {\r\n                                            nameTxt = createdBy?.name || createdBy?.fullName || createdBy?.email || '';\r\n                                            brokerImageUrl = createdBy?.brokerImage || createdBy?.profileImage || createdBy?.image;\r\n                                          }\r\n                                          if (brokerImageUrl) {\r\n                                            return (\r\n                                              <>\r\n                                                <div className=\"w-12 h-12 rounded-full bg-[#E5FCE4FF] overflow-hidden\">\r\n                                                  <img src={brokerImageUrl} alt={nameTxt} className=\"w-full h-full object-cover\" onError={(e) => { e.currentTarget.style.display = 'none'; }} />\r\n                                                </div>\r\n                                                <div className=\"absolute bottom-0 right-0 w-3 h-3 rounded-full bg-[#1DD75BFF] border-[1.5px] border-white translate-x-1/4 translate-y-1/8\"></div>\r\n                                              </>\r\n                                            );\r\n                                          }\r\n                                          return (\r\n                                            <>\r\n                                              <div className=\"w-12 h-12 rounded-full bg-[#E5FCE4FF] flex items-center justify-center\">\r\n                                                {nameTxt.split(' ').map((n) => n[0]).slice(0, 2).join('').toUpperCase()}\r\n                                              </div>\r\n                                              <div className=\"absolute bottom-0 right-0 w-3 h-3 rounded-full bg-[#1DD75BFF] border-[1.5px] border-white translate-x-1/2 translate-y-1/2\"></div>\r\n                                            </>\r\n                                          );\r\n                                        })()}\r\n                                      </div>\r\n                                      <div>\r\n                                        <div className=\"flex items-center gap-6\">\r\n                                          <p className=\"font-inter text-[12px] leading-5 font-medium text-[#171A1FFF]\">\r\n                                            {(() => {\r\n                                              const createdBy = lead?.createdBy;\r\n                                              if (!createdBy) return 'Unknown';\r\n                                              if (typeof createdBy === 'string') return createdBy;\r\n                                              return createdBy?.name || createdBy?.fullName || createdBy?.email || 'Unknown';\r\n                                            })()}\r\n                                          </p>\r\n                                          {viewBrokerId ? (\r\n                                            <span\r\n                                              onClick={(e) => {\r\n                                                e.stopPropagation();\r\n                                                e.preventDefault();\r\n                                                router.push(`/broker-details/${viewBrokerId}`);\r\n                                              }}\r\n                                              className=\"text-[12px] font-normal text-[#565D6DFF] hover:text-gray-900 transition-colors cursor-pointer\"\r\n                                            >\r\n                                              View\r\n                                            </span>\r\n                                          ) : (\r\n                                            <p className=\"text-[12px] font-normal text-[#565D6DFF]\">View</p>\r\n                                          )}\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-3 mt-1\">\r\n                                          <button\r\n                                            type=\"button\"\r\n                                            onClick={(e) => {\r\n                                              e.stopPropagation();\r\n                                              e.preventDefault();\r\n\r\n                                              const token = typeof window !== 'undefined'\r\n                                                ? localStorage.getItem('token') || localStorage.getItem('authToken')\r\n                                                : null;\r\n\r\n                                              if (!token) {\r\n                                                // User not logged in, redirect to login page\r\n                                                router.push(`/login?redirect=${path}`);\r\n                                                return;\r\n                                              }\r\n\r\n                                              if (window.openChatWithBroker && viewBroker) {\r\n                                                window.openChatWithBroker({ broker: viewBroker });\r\n                                              }\r\n                                            }}\r\n                                            className=\"flex items-center gap-2 cursor-pointer\"\r\n                                          >\r\n                                            <svg className=\"w-3 h-3 fill-none stroke-[#171A1FFF]\" viewBox=\"0 0 24 24\" strokeWidth=\"2\"><path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\" /></svg>\r\n                                            <span className=\"font-inter text-[12px] leading-5 font-normal text-[#565D6DFF] hover:text-gray-900 transition-colors\">Chat</span>\r\n                                          </button>\r\n                                        </div>\r\n                                      </div>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          </article>\r\n                        </Link>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-8\">\r\n                    <div className=\"text-gray-400 mb-4\">\r\n                      <svg className=\"w-16 h-16 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\r\n                      </svg>\r\n                    </div>\r\n                    <p className=\"text-gray-600 mb-2\">No leads posted yet</p>\r\n                    <p className=\"text-sm text-gray-500\">This broker hasn't posted any property leads yet.</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n              {/* Similar Brokers */}\r\n              <section className=\"bg-white rounded-2xl border border-gray-200 shadow-sm p-8 hidden\">\r\n                <div className=\"flex items-center gap-2 mb-6\">\r\n                  <span className=\"inline-block h-0.5 w-6 rounded bg-yellow-400\"></span>\r\n                  <h3 className=\"text-[18px] font-semibold text-gray-900\">Similar Brokers</h3>\r\n                </div>\r\n                <div className=\"space-y-4\">\r\n                  {similarLoading ? (\r\n                    [...Array(3)].map((_, index) => (\r\n                      <div key={index} className=\"flex items-center gap-4 p-4 rounded-xl border border-gray-200 animate-pulse\">\r\n                        <div className=\"w-12 h-12 rounded-full bg-gray-200\" />\r\n                        <div className=\"flex-1 space-y-2\">\r\n                          <div className=\"h-4 bg-gray-200 rounded w-32\" />\r\n                          <div className=\"h-3 bg-gray-200 rounded w-40\" />\r\n                        </div>\r\n                        <div className=\"h-8 w-28 bg-gray-200 rounded\" />\r\n                      </div>\r\n                    ))\r\n                  ) : (\r\n                    similar.map((b, index) => {\r\n                      const img = b?.brokerImage || b?.profileImage || b?.image || '/images/user-2.jpeg';\r\n                      const name = nonEmpty(b?.name) ? b.name : nonEmpty(b?.fullName) ? b.fullName : 'Unknown Broker';\r\n                      const firm = nonEmpty(b?.firmName) ? b.firmName : '';\r\n                      const expYears = typeof b?.experience === 'object' ? b?.experience?.years : b?.experience;\r\n                      const rating = b?.rating || '4.7';\r\n                      const specs = Array.isArray(b?.specializations) && b.specializations.length > 0 ? b.specializations : specializations;\r\n                      const id = b?.userId?._id || b?.userId || b?._id || b?.id;\r\n                      return (\r\n                        <div key={id || index} className=\"flex items-center gap-4 p-4 rounded-xl border border-gray-200 hover:shadow-md transition-all duration-300\">\r\n                          <div className=\"relative\">\r\n                            <img src={img} alt={name} className=\"w-12 h-12 rounded-full object-cover\" />\r\n                            <div className=\"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white\"></div>\r\n                          </div>\r\n                          <div className=\"flex-1\">\r\n                            <div className=\"flex items-center gap-2 mb-1\">\r\n                              <h4 className=\"font-semibold text-gray-900\">{name}</h4>\r\n                              <div className=\"flex items-center gap-1\">\r\n                                <svg className=\"w-4 h-4 text-yellow-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                                  <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\r\n                                </svg>\r\n                                <span className=\"text-sm font-medium text-gray-700\">{rating}</span>\r\n                              </div>\r\n                            </div>\r\n                            <p className=\"text-sm text-gray-600 mb-2\">{firm}{firm && expYears ? '  ' : ''}{expYears ? `${expYears}+ Years` : ''}</p>\r\n                            <div className=\"flex flex-wrap gap-1\">\r\n                              {specs.slice(0, 3).map((spec, specIndex) => (\r\n                                <span key={specIndex} className=\"px-2 py-1 rounded-full bg-gray-100 text-gray-700 text-xs border border-gray-200\">\r\n                                  {spec}\r\n                                </span>\r\n                              ))}\r\n                            </div>\r\n                          </div>\r\n                          {id && (\r\n                            <Link href={`/broker-details/${id}`} className=\"px-4 py-2 rounded-lg bg-green-100 text-green-700 text-sm font-medium border border-green-500 hover:bg-green-200 transition-colors\">\r\n                              View Profile\r\n                            </Link>\r\n                          )}\r\n                        </div>\r\n                      );\r\n                    })\r\n                  )}\r\n                </div>\r\n              </section>\r\n\r\n              {/* Brokers in this Region - Carousel (hidden here; shown full-width below) */}\r\n              <section className=\"mt-6 hidden\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <span className=\"inline-block h-0.5 w-6 rounded bg-yellow-400\"></span>\r\n                    <h3 className=\"text-lg font-semibold text-gray-900\">Brokers in this Region</h3>\r\n                  </div>\r\n                  <div className=\"flex gap-2\">\r\n                    <button type=\"button\" onClick={() => {\r\n                      const el = document.getElementById('region-carousel');\r\n                      if (el) el.scrollBy({ left: -500, behavior: 'smooth' });\r\n                    }} className=\"h-8 w-8 rounded-full border border-gray-300 text-gray-700 hover:bg-gray-50\">{'<'}</button>\r\n                    <button type=\"button\" onClick={() => {\r\n                      const el = document.getElementById('region-carousel');\r\n                      if (el) el.scrollBy({ left: 500, behavior: 'smooth' });\r\n                    }} className=\"h-8 w-8 rounded-full border border-gray-300 text-gray-700 hover:bg-gray-50\">{'>'}</button>\r\n                  </div>\r\n                </div>\r\n                <div id=\"region-carousel\" className=\"overflow-x-auto scroll-smooth\">\r\n                  <div className=\"flex gap-5 min-w-0 pr-2\">\r\n                    {similar\r\n                      .filter((b) => {\r\n                        const currentRegions = Array.isArray(broker?.region) ? broker.region.map(r => (typeof r === 'string' ? r : r?.name)).filter(Boolean) : [];\r\n                        const regions = Array.isArray(b?.region) ? b.region.map(r => (typeof r === 'string' ? r : r?.name)).filter(Boolean) : [];\r\n                        return regions.some(r => currentRegions.includes(r));\r\n                      })\r\n                      .slice(0, 20)\r\n                      .map((b, index) => {\r\n                        const img = b?.brokerImage || b?.profileImage || b?.image || '/images/user-2.jpeg';\r\n                        const name = (typeof b?.name === 'string' && b.name) || (typeof b?.fullName === 'string' && b.fullName) || 'Unknown Broker';\r\n                        const firm = (typeof b?.firmName === 'string' && b.firmName) || '';\r\n                        const id = b?.userId?._id || b?.userId || b?._id || b?.id;\r\n                        return (\r\n                          <div key={id || index} className=\"flex-shrink-0 w-72 bg-white rounded-2xl border border-gray-200 shadow-sm p-5\">\r\n                            <div className=\"flex items-center gap-3 mb-3\">\r\n                              <img src={img} alt={name} className=\"w-12 h-12 rounded-full object-cover\" />\r\n                              <div className=\"min-w-0\">\r\n                                <div className=\"font-semibold text-gray-900 truncate\">{name}</div>\r\n                                <div className=\"text-xs text-gray-600 truncate\">{firm || '-'}</div>\r\n                              </div>\r\n                            </div>\r\n                            <p className=\"text-sm text-gray-600 line-clamp-3 mb-4\">Trusted regional broker with strong local expertise.</p>\r\n                            <div className=\"flex gap-2\">\r\n                              {id && (\r\n                                <a href={`/broker-details/${id}`} className=\"inline-flex items-center justify-center px-3 py-1.5 text-sm rounded-lg border border-green-500 text-green-700 bg-green-50 hover:bg-green-100\">View Profile</a>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                  </div>\r\n                </div>\r\n              </section>\r\n\r\n            </div>\r\n\r\n            {/* Right Sidebar - 4 columns */}\r\n            <div className=\"lg:col-span-4 space-y-8\">\r\n\r\n              {/* Properties Section - Show 2 property cards with View All - Moved to Top */}\r\n              {brokerProperties.length > 0 ? (\r\n                <div className=\"\">\r\n                  <div className=\"flex items-center justify-between mb-4\">\r\n                    <h3 className=\"text-[18px] leading-[30px] font-semibold text-[#565D6D]\">Properties</h3>\r\n                    <Link\r\n                      href={`/search?tab=properties&createdBy=${encodeURIComponent(String(broker?._id))}`}\r\n                      className=\"text-[12px] font-medium text-[#0D542B] hover:underline\"\r\n                    >\r\n                      View All\r\n                    </Link>\r\n                  </div>\r\n                  <div className=\"space-y-4\">\r\n                    {brokerProperties.slice(0, 2).map((property, index) => {\r\n                      // Use property's _id from API response\r\n                      const propertyId = property?._id || property?.id || index;\r\n                      const propertyImage = property?.images?.[0] || property?.image || '/images/realestate.png';\r\n                      const propertyTitle = property?.title || property?.name || 'Property';\r\n                      const propertyPrice = property?.price || 0;\r\n                      const propertyLocation = property?.city || property?.region?.name || property?.location || '';\r\n                      const propertyType = property?.propertyType || property?.type || 'Property';\r\n                      const propertyStatus = property?.status || property?.availabilityStatus || 'available';\r\n                      const isOpen = propertyStatus?.toLowerCase() === 'open' ||\r\n                        propertyStatus?.toLowerCase() === 'available' ||\r\n                        propertyStatus?.toLowerCase() === 'active' ||\r\n                        !propertyStatus || propertyStatus === '';\r\n\r\n                      // Format price in lakhs\r\n                      const formatPriceInLakhs = (price) => {\r\n                        if (!price || price === 0) return '';\r\n                        const lakhs = price / 100000;\r\n                        return `${lakhs.toFixed(2)} Lakhs`;\r\n                      };\r\n\r\n                      // Use broker's _id from the API response\r\n                      const brokerMongoId = broker?._id;\r\n\r\n                      return (\r\n                        <Link\r\n                          key={propertyId}\r\n                          href={`/property-details?id=${encodeURIComponent(String(propertyId))}${brokerMongoId ? `&brokerId=${encodeURIComponent(String(brokerMongoId))}` : ''}`}\r\n                          className=\"block border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow\"\r\n                        >\r\n                          <div className=\"flex gap-3\">\r\n                            <div className=\"relative\">\r\n                              <img\r\n                                src={propertyImage}\r\n                                alt={propertyTitle}\r\n                                className=\"w-24 h-24 object-cover flex-shrink-0\"\r\n                                onError={(e) => {\r\n                                  e.currentTarget.src = '/images/realestate.png';\r\n                                }}\r\n                              />\r\n                              {isOpen && (\r\n                                <span className=\"absolute top-1 right-1 bg-green-500 text-white text-[10px] font-semibold px-1.5 py-0.5 rounded\">\r\n                                  Open\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                            <div className=\"flex-1 p-2 min-w-0\">\r\n                              <div className=\"flex items-start justify-between gap-2 mb-1\">\r\n                                <h4 className=\"text-[14px] font-semibold text-gray-900 truncate flex-1\">\r\n                                  {propertyTitle}\r\n                                </h4>\r\n                                {isOpen && (\r\n                                  <span className=\"flex items-center gap-1 text-[10px] text-green-600 font-medium flex-shrink-0\">\r\n                                    <span className=\"w-1.5 h-1.5 bg-green-500 rounded-full\"></span>\r\n                                    Open\r\n                                  </span>\r\n                                )}\r\n                              </div>\r\n                              <p className=\"text-[12px] text-gray-600 truncate mb-1\">{propertyLocation}</p>\r\n                              <p className=\"text-[12px] text-gray-500 mb-1\">{propertyType}</p>\r\n                              <p className=\"text-[14px] font-bold text-[#0D542B]\">\r\n                                {formatPriceInLakhs(propertyPrice)}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                        </Link>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                // Show properties count card if no properties to display\r\n                <div\r\n                  onClick={() => {\r\n                    const brokerMongoId = broker?._id || brokerId;\r\n                    if (brokerMongoId) {\r\n                      router.push(`/search?tab=properties&createdBy=${encodeURIComponent(String(brokerMongoId))}`);\r\n                    }\r\n                  }}\r\n                  className=\"bg-[#EDFDF4] rounded-[10px] p-4 text-center cursor-pointer hover:bg-[#D9F5E8] transition-colors\"\r\n                  style={{ boxShadow: '0px 0px 1px rgba(23, 26, 31, 0.07), 0px 0px 2px rgba(23, 26, 31, 0.12)' }}\r\n                >\r\n                  <div className=\" text-[20px] leading-[36px] font-bold text-[#19191F]\">{propertiesCount}</div>\r\n                  <div className=\"font-[Inter] text-[12px] leading-[24px] font-normal text-[#19191F] mt-1\">Properties</div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Performance Metrics Grid - Only Rating and Experience */}\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div className=\"bg-[#FFF9E6] rounded-[10px] p-4 text-center\" style={{ boxShadow: '0px 0px 1px rgba(23, 26, 31, 0.07), 0px 0px 2px rgba(23, 26, 31, 0.12)' }}>\r\n                  <div className=\" text-[20px] leading-[36px] font-bold text-[#19191F]\">\r\n                    {typeof rating === 'number' ? rating.toFixed(1) : rating}\r\n                  </div>\r\n                  <div className=\"font-[Inter] text-[12px] leading-[24px] font-normal text-[#19191F] mt-1\">Client Rating</div>\r\n                </div>\r\n                <div className=\"bg-[#FAFAFB] rounded-[10px] p-4 text-center\" style={{ boxShadow: '0px 0px 1px rgba(23, 26, 31, 0.07), 0px 0px 2px rgba(23, 26, 31, 0.12)' }}>\r\n                  <div className=\" text-[20px] leading-[36px] font-bold text-[#19191F]\">{years === '' ? '0' : (typeof years === 'number' ? `${years}+` : years)}</div>\r\n                  <div className=\"font-[Inter] text-[12px] leading-[24px] font-normal text-[#19191F] mt-1\">Years Experience</div>\r\n                </div>\r\n              </div>\r\n\r\n\r\n              {/* Quick Contact */}\r\n              <div className=\"bg-white rounded-lg p-6 shadow-sm\">\r\n                <h3 className=\" text-[18px] leading-[30px] font-semibold text-[#565D6D] mb-4\">Quick Contact</h3>\r\n                <button type=\"button\"\r\n                  onClick={() => {\r\n\r\n                    const token =\r\n                      typeof window !== \"undefined\"\r\n                        ? localStorage.getItem(\"token\") ||\r\n                        localStorage.getItem(\"authToken\")\r\n                        : null;\r\n\r\n                    if (!token) {\r\n                      // User not logged in, redirect to login page\r\n                      router.push(`/login?redirect=${path}`);\r\n                      return;\r\n                    }\r\n\r\n                    if (window.openChatWithBroker) {\r\n                      window.openChatWithBroker({ broker });\r\n                    }\r\n                  }}\r\n                  className=\"w-full px-6 py-3 bg-green-700 hover:bg-green-800 text-white rounded-full text-sm font-medium\">\r\n                  Send Message\r\n                </button>\r\n                {!isLoggedIn && (\r\n                  <a\r\n                    href=\"/signup\"\r\n                    className=\"mt-3 w-full h-[40px] px-3 flex items-center justify-center \r\n            font-[Inter] text-[12px] leading-[22px] font-medium text-[#0D542B]\r\n            bg-transparent border border-[#D0D5DD] rounded-lg\r\n            transition-all duration-200 ease-out\r\n            hover:bg-[#F6FBF8] hover:border-[#0D542B] hover:text-[#083E20]\r\n            hover:-translate-y-[1px]\r\n            active:bg-gray-100 active:translate-y-0\"\r\n                  >\r\n                    Become a Partner Broker\r\n                  </a>\r\n\r\n                )}\r\n              </div>\r\n\r\n\r\n              {/* Lead Generation Support */}\r\n              <div className=\"bg-[#EDFDF4] rounded-[10px] p-6 shadow-sm\" style={{ boxShadow: '0px 0px 1px rgba(23, 26, 31, 0.07), 0px 0px 2px rgba(23, 26, 31, 0.12)' }}>\r\n                <h3 className=\" text-[18px] leading-[36px] font-bold text-[#19191F] mb-3\">Query Generation Support</h3>\r\n                <p className=\"font-[Inter] text-[12px] leading-[26px] font-normal text-[#19191F] mb-4\">\r\n                  Join our exclusive broker network and get access to premium lead generation tools and support.\r\n                </p>\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <div className=\"w-9 h-9 bg-white rounded-full flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                      <img src=\"/images/lucide-CircleCheckBig-Outlined.svg\" alt=\"Verified\" className=\"w-5 h-5\" style={{ filter: 'brightness(0) saturate(100%) invert(15%) sepia(95%) saturate(700%) hue-rotate(115deg) brightness(95%) contrast(90%)' }} />\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"font-[Inter] text-[14px] leading-[24px] font-medium text-[#19191F]\">Verified Queries</div>\r\n                      <div className=\"font-[Inter] text-[12px] leading-[19px] font-normal text-[#19191FCC]\">Pre-qualified properties ready to buy</div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <div className=\"w-9 h-9 bg-white rounded-full flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                      <img src=\"/images/lucide-GraduationCap-Outlined.svg\" alt=\"Training\" className=\"w-5 h-5\" style={{ filter: 'brightness(0) saturate(100%) invert(15%) sepia(95%) saturate(700%) hue-rotate(115deg) brightness(95%) contrast(90%)' }} />\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"font-[Inter] text-[14px] leading-[24px] font-medium text-[#19191F]\">Exclusive Training</div>\r\n                      <div className=\"font-[Inter] text-[12px] leading-[19px] font-normal text-[#19191FCC]\">Advanced sales techniques & higher commissions</div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-start gap-3\">\r\n                    <div className=\"w-9 h-9 bg-white rounded-full flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                      <img src=\"/images/lucide-DollarSign-Outlined.svg\" alt=\"Commissions\" className=\"w-5 h-5\" style={{ filter: 'brightness(0) saturate(100%) invert(15%) sepia(95%) saturate(700%) hue-rotate(115deg) brightness(95%) contrast(90%)' }} />\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"font-[Inter] text-[14px] leading-[24px] font-medium text-[#19191F]\">Higher Commissions</div>\r\n                      <div className=\"font-[Inter] text-[12px] leading-[19px] font-normal text-[#19191FCC]\">Up to 10% more than standard rates</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {!isLoggedIn && (\r\n                  <Link href=\"/signup\" className=\"w-full h-[40px] px-3 mt-4 flex items-center justify-center font-[Inter] text-[12px] leading-[22px] font-medium text-white bg-[#0D542B] hover:bg-[#0B4624] hover:active:bg-[#08321A] disabled:opacity-40 border-none opacity-100 rounded-md transition-colors\">\r\n                    Become a Partner Broker\r\n                  </Link>\r\n                )}\r\n\r\n                {/* Rating Button */}\r\n                <button\r\n                  onClick={() => {\r\n                    // Check if user is logged in\r\n                    const token = typeof window !== 'undefined'\r\n                      ? localStorage.getItem('token') || localStorage.getItem('authToken')\r\n                      : null;\r\n\r\n                    if (!token) {\r\n                      router.push('/login');\r\n                      return;\r\n                    }\r\n                    setShowRatingModal(true);\r\n                  }}\r\n                  className=\"w-full h-[40px] px-3 mt-3 flex items-center justify-center gap-2 font-[Inter] text-[12px] leading-[22px] font-medium text-[#0D542B] bg-white border border-[#0D542B] hover:bg-[#EDFDF4] hover:active:bg-[#D9F5E8] disabled:opacity-40 rounded-md transition-colors\"\r\n                >\r\n                  <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\" />\r\n                  </svg>\r\n                  Rate This Broker\r\n                </button>\r\n              </div>\r\n\r\n            </div>\r\n\r\n            {/* Brokers in this Region - Full Width Carousel (12 columns) */}\r\n            <div className=\"lg:col-span-12\">\r\n              <section className=\"mt-12\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    {/* <span className=\"inline-block h-0.5 w-6 rounded bg-yellow-400\"></span> */}\r\n                    <h3 className=\"text-[18px] leading-[36px] font-bold text-[#171A1F]\">Similar Brokers</h3>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    {similar.length > 4 && (\r\n                      <Link href=\"/search?type=brokers\" className=\"px-4 py-2 text-gray-600 rounded-lg text-sm font-medium transition-colors hover:bg-gray-50\">\r\n                        View All\r\n                      </Link>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Carousel with scrollable cards */}\r\n                <div\r\n                  id=\"similar-brokers-carousel\"\r\n                  className=\"overflow-x-auto scroll-smooth p-4 -m-4\"\r\n                  style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}\r\n                  onScroll={(e) => {\r\n                    const carousel = e.currentTarget;\r\n                    const { scrollLeft, scrollWidth, clientWidth } = carousel;\r\n                    const maxScroll = scrollWidth - clientWidth;\r\n                    setCanScrollLeft(scrollLeft > 10);\r\n                    setCanScrollRight(scrollLeft < maxScroll - 10);\r\n                  }}\r\n                >\r\n                  <div className=\"flex gap-6 min-w-0\">\r\n                    {similarLoading ? (\r\n                      // Loading state\r\n                      Array.from({ length: 4 }).map((_, index) => (\r\n                        <div key={index} className=\"flex-shrink-0 w-80 rounded-2xl border border-gray-100 bg-white shadow-sm overflow-hidden\">\r\n                          <ContentLoader\r\n                            speed={2}\r\n                            width={320}\r\n                            height={400}\r\n                            viewBox=\"0 0 320 400\"\r\n                            backgroundColor=\"#f3f3f3\"\r\n                            foregroundColor=\"#ecebeb\"\r\n                            style={{ width: '100%', height: '100%' }}\r\n                          >\r\n                            {/* Image */}\r\n                            <rect x=\"0\" y=\"0\" rx=\"0\" ry=\"0\" width=\"320\" height=\"240\" />\r\n                            {/* Name */}\r\n                            <rect x=\"24\" y=\"260\" rx=\"4\" ry=\"4\" width=\"180\" height=\"20\" />\r\n                            {/* Title */}\r\n                            <rect x=\"24\" y=\"290\" rx=\"4\" ry=\"4\" width=\"150\" height=\"14\" />\r\n                            {/* Location */}\r\n                            <circle cx=\"28\" cy=\"320\" r=\"6\" />\r\n                            <rect x=\"40\" y=\"315\" rx=\"4\" ry=\"4\" width=\"120\" height=\"12\" />\r\n                            {/* Leads */}\r\n                            <circle cx=\"28\" cy=\"345\" r=\"6\" />\r\n                            <rect x=\"40\" y=\"340\" rx=\"4\" ry=\"4\" width=\"140\" height=\"12\" />\r\n                          </ContentLoader>\r\n                        </div>\r\n                      ))\r\n                    ) : similar.length > 0 ? (\r\n                      // Sort brokers: region matches first, then by other criteria\r\n                      (() => {\r\n                        const currentRegions = Array.isArray(broker?.region) ? broker.region.map(r => (typeof r === 'string' ? r : r?.name)).filter(Boolean) : [];\r\n\r\n                        const sortedBrokers = similar\r\n                          .map(b => {\r\n                            const regions = Array.isArray(b?.region) ? b.region.map(r => (typeof r === 'string' ? r : r?.name)).filter(Boolean) : [];\r\n                            const hasRegionMatch = regions.some(r => currentRegions.includes(r));\r\n                            const specs = Array.isArray(b?.specializations) ? b.specializations : [];\r\n                            const currentSpecs = Array.isArray(broker?.specializations) ? broker.specializations : [];\r\n                            const hasSpecMatch = specs.some(s => currentSpecs.includes(s));\r\n\r\n                            return {\r\n                              broker: b,\r\n                              score: (hasRegionMatch ? 2 : 0) + (hasSpecMatch ? 1 : 0) + Math.random() * 0.5 // Add randomness for variety\r\n                            };\r\n                          })\r\n                          .sort((a, b) => b.score - a.score)\r\n                          .slice(0, 4)\r\n                          .map(item => item.broker);\r\n\r\n                        return sortedBrokers.map((b, index) => {\r\n                          const pickValidImage = (...cands) => {\r\n                            const valid = cands.find((s) => typeof s === 'string' && s.trim() && s !== 'null' && s !== 'undefined');\r\n                            return valid || '';\r\n                          };\r\n                          const fallbackImages = [\r\n                            '/images/broker2.webp',\r\n                            '/images/broker7.webp',\r\n                            '/images/broker8.jpg',\r\n                            '/images/broker5.webp'\r\n                          ];\r\n                          const imageUrl = pickValidImage(\r\n                            b?.brokerImage,\r\n                            b?.image,\r\n                            b?.profileImage,\r\n                            b?.avatar,\r\n                            b?.photo,\r\n                            b?.picture,\r\n                            b?.profilePicture,\r\n                            b?.defaultImage,\r\n                            fallbackImages[index % fallbackImages.length]\r\n                          );\r\n                          const id = b?.userId?._id || b?.userId || b?._id || b?.id;\r\n                          const name = (typeof b?.name === 'string' && b.name) || (typeof b?.fullName === 'string' && b.fullName) || b?.name?.name || b?.fullName?.name || 'Unknown Broker';\r\n                          const title = Array.isArray(b?.specializations) && b.specializations.length > 0\r\n                            ? b.specializations[0]\r\n                            : (typeof b?.specialization === 'string' ? b.specialization\r\n                              : (typeof b?.expertise === 'string' ? b.expertise\r\n                                : (typeof b?.role === 'string' ? b.role : (b?.firmName || 'Real Estate Specialist'))));\r\n                          const regionText = (() => {\r\n                            const r = b?.region;\r\n                            if (Array.isArray(r) && r.length > 0) {\r\n                              const first = r[0];\r\n                              return typeof first === 'string' ? first : (first?.name || first?.city || first?.state || 'Location');\r\n                            }\r\n                            if (typeof r === 'string') return r;\r\n                            if (r && typeof r === 'object') return r?.name || r?.city || r?.state || 'Location';\r\n                            return b?.state || b?.city || 'Location';\r\n                          })();\r\n                          const leadsCompleted = b?.leadsCreated?.count || b?.leadCount || b?.totalLeads || b?.leads || 0;\r\n\r\n                          return (\r\n                            <Link\r\n                              key={id || index}\r\n                              href={id ? `/broker-details/${id}` : '#'}\r\n                              className={`group relative flex-shrink-0 w-[280px] md:w-[calc(50%-12px)] lg:w-[calc(33.33%-16px)] xl:w-[calc(25%-18px)] rounded-2xl border border-gray-100 bg-white shadow-sm hover:shadow-xl transition duration-300 overflow-hidden hover:bg-yellow-400 hover:ring-1 hover:ring-yellow-500/60 hover:-translate-y-0.5 flex flex-col ${!id ? 'pointer-events-none' : ''}`}\r\n                            >\r\n                              <div className=\"aspect-[4/3] w-full bg-gray-100 overflow-hidden relative\">\r\n                                <img\r\n                                  src={imageUrl}\r\n                                  alt={`Broker portrait - ${name}`}\r\n                                  className=\"h-full w-full object-cover group-hover:scale-[1.02] transition-transform duration-300\"\r\n                                  onError={(e) => { e.currentTarget.src = fallbackImages[index % fallbackImages.length]; }}\r\n                                />\r\n                                {/* Overlay to ensure entire card is clickable visually */}\r\n                                <div className=\"absolute inset-0 bg-transparent\" />\r\n                              </div>\r\n                              <div className=\"p-6 flex flex-col flex-1\">\r\n                                <div className=\"flex items-start justify-between mb-3\">\r\n                                  <div className=\"flex items-center gap-1 group/name\">\r\n                                    <h3 className=\"text-[18px] leading-7 font-semibold text-gray-900 line-clamp-1\">{name}</h3>\r\n                                    <svg className=\"h-5 w-5 text-emerald-600 flex-shrink-0 transition-transform group-hover/name:translate-x-1 group-hover/name:-translate-y-1\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                                      <path d=\"M7 17L17 7\" />\r\n                                      <path d=\"M7 7h10v10\" />\r\n                                    </svg>\r\n                                  </div>\r\n                                </div>\r\n\r\n                                <div className=\"mb-3\">\r\n                                  <p className=\"text-[12px] leading-5 font-normal text-gray-600 line-clamp-1\">{title}</p>\r\n                                </div>\r\n\r\n                                <div className=\"flex items-center gap-2 mb-3 mt-auto\">\r\n                                  <svg className=\"h-3 w-3 text-gray-600 flex-shrink-0\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                    <path d=\"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z\"></path>\r\n                                    <circle cx=\"12\" cy=\"10\" r=\"3\"></circle>\r\n                                  </svg>\r\n                                  <p className=\"text-[12px] leading-5 font-normal text-gray-600 line-clamp-1\">{regionText}</p>\r\n                                </div>\r\n\r\n                                <div className=\"flex items-center gap-2\">\r\n                                  <svg className=\"h-3 w-3 text-gray-600 flex-shrink-0\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                    <path d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\"></path>\r\n                                    <circle cx=\"9\" cy=\"7\" r=\"4\"></circle>\r\n                                    <path d=\"M23 21v-2a4 4 0 0 0-3-3.87\"></path>\r\n                                    <path d=\"M16 3.13a4 4 0 0 1 0 7.75\"></path>\r\n                                  </svg>\r\n                                  <p className=\"text-[12px] leading-5 font-normal text-gray-600 line-clamp-1\">{leadsCompleted} Client Requests Closed</p>\r\n                                </div>\r\n                              </div>\r\n                            </Link>\r\n                          );\r\n                        });\r\n                      })()\r\n                    ) : (\r\n                      // No brokers found\r\n                      <div className=\"col-span-full text-center py-12\">\r\n                        <div className=\"text-gray-500\">\r\n                          <svg className=\"w-12 h-12 mx-auto mb-4 text-gray-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\r\n                          </svg>\r\n                          <p className=\"text-lg font-medium text-gray-900 mb-2\">No similar brokers found</p>\r\n                          <p className=\"text-sm text-gray-500\">We couldn't find any brokers with similar specializations or regions.</p>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  {similar.length > 4 && (\r\n                    <div className=\"flex gap-2 mt-7 justify-center\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => {\r\n                          const carousel = document.getElementById('similar-brokers-carousel');\r\n                          if (carousel && canScrollLeft) carousel.scrollBy({ left: -300, behavior: 'smooth' });\r\n                        }}\r\n                        disabled={!canScrollLeft}\r\n                        className={`w-8 h-8 rounded-full flex items-center justify-center transition-colors shadow-md ${canScrollLeft\r\n                            ? 'bg-yellow-500 text-white hover:bg-yellow-600 cursor-pointer'\r\n                            : 'bg-gray-200 text-gray-400 cursor-not-allowed'\r\n                          }`}\r\n                        title=\"Previous\"\r\n                      >\r\n                        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n                        </svg>\r\n                      </button>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => {\r\n                          const carousel = document.getElementById('similar-brokers-carousel');\r\n                          if (carousel && canScrollRight) carousel.scrollBy({ left: 300, behavior: 'smooth' });\r\n                        }}\r\n                        disabled={!canScrollRight}\r\n                        className={`w-8 h-8 rounded-full flex items-center justify-center transition-colors shadow-md ${canScrollRight\r\n                            ? 'bg-yellow-500 text-white hover:bg-yellow-600 cursor-pointer'\r\n                            : 'bg-gray-200 text-gray-400 cursor-not-allowed'\r\n                          }`}\r\n                        title=\"Next\"\r\n                      >\r\n                        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n                        </svg>\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </section>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* CTA Section */}\r\n        <div className=\"bg-[#EDFDF4] rounded-[16px]  shadow-xl mt-12\">\r\n          <div className=\"px-6 py-8 text-center relative overflow-hidden\">\r\n            {/* Decorative elements */}\r\n            <div className=\"absolute top-0 left-0 w-full h-1 \"></div>\r\n            <div className=\"absolute top-3 right-3 w-12 h-12 bg-yellow-100 rounded-full opacity-20\"></div>\r\n            <div className=\"absolute bottom-3 left-3 w-10 h-10 bg-yellow-200 rounded-full opacity-30\"></div>\r\n\r\n            <div className=\"max-w-2xl mx-auto relative z-10\">\r\n              <div className=\"inline-flex items-center gap-2 h-[26px] px-3 bg-[#FDC700] border border-transparent rounded-full mb-4\">\r\n                <img src=\"/images/lucide-CircleCheckBig-Outlined.svg\" alt=\"Verified\" className=\"w-3 h-3\" style={{ filter: 'brightness(0)' }} />\r\n                <span className=\"font-[Inter] text-[12px] leading-[16px] font-medium text-[#19191F]\">Trusted Real Estate Expert</span>\r\n              </div>\r\n\r\n              <h2 className=\" text-[18px] leading-[30px] font-bold text-[#19191F] mb-1\">\r\n                Ready to Find Your Perfect Property?\r\n              </h2>\r\n              <p className=\" text-[12px] leading-[30px] font-normal text-[#19191F] mb-3 max-w-xl mx-auto\">\r\n                Connect with <span className=\"font-semibold text-[#19191F]\">{displayName}</span> and discover the best real estate opportunities in your area.\r\n                Get personalized assistance and expert guidance throughout your property journey.\r\n              </p>\r\n\r\n              <div className=\"flex flex-col sm:flex-row gap-4 justify-center mb-6\">\r\n                <button\r\n                  onClick={() => {\r\n                    // Check if user is logged in\r\n                    const token = typeof window !== 'undefined'\r\n                      ? localStorage.getItem('token') || localStorage.getItem('authToken')\r\n                      : null;\r\n\r\n                    if (!token) {\r\n                      // User not logged in, redirect to login page\r\n                      router.push(`/login?redirect=${path}`);\r\n                      return;\r\n                    }\r\n\r\n                    // User is logged in, open chat\r\n                    if (window.openChatWithBroker) {\r\n                      window.openChatWithBroker({ broker });\r\n                    }\r\n                  }}\r\n                  className=\"h-[40px] px-3 flex items-center justify-center font-[Inter] text-[12px] leading-[22px] font-medium text-[#584500] bg-[#FDC700] hover:bg-[#E3B200] hover:active:bg-[#C79C00] disabled:opacity-40 border-none opacity-100 rounded-md\"\r\n                >\r\n                  Send Message\r\n                </button>\r\n                {/* <button \r\n                disabled={!phone}\r\n                onClick={() => {\r\n                  if (phone) {\r\n                    window.location.href = `tel:${phone}`;\r\n                  }\r\n                }}\r\n                  className=\"w-[92px] h-[40px] px-3 flex items-center justify-center\r\n             font-[Inter] text-[12px] leading-[22px] font-medium\r\n             text-[#FDC700] hover:text-[#FDC700] active:text-[#FDC700]\r\n             bg-transparent border border-[#E5E7EB] rounded-[6px]\r\n             hover:border-[#D1D5DB] active:border-[#C0C4CC]\r\n              transition-colors duration-200\r\n             appearance-none\"\r\n\r\n              >\r\n                Call Now\r\n              </button> */}\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 text-center\">\r\n                <div className=\"flex flex-col items-center justify-center gap-2 p-6 h-[172px] bg-white rounded-[10px]\" style={{ boxShadow: '0px 0px 1px rgba(23, 26, 31, 0.07), 0px 0px 2px rgba(23, 26, 31, 0.12)' }}>\r\n                  <div className=\"w-8 h-8 rounded-full flex items-center justify-center\">\r\n                    <img src=\"/images/lucide-UserCheck-Outlined.svg\" alt=\"Verified\" className=\"w-6 h-6\" style={{ filter: 'brightness(0)' }} />\r\n                  </div>\r\n                  <span className=\"font-[Inter] text-[14px] leading-[24px] font-medium text-[#171A1F]\">Verified Broker</span>\r\n                  <span className=\"font-[Inter] text-[12px] leading-[20px] font-normal text-[#565D6D]\">Licensed & Certified</span>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col items-center justify-center gap-2 p-6 h-[172px] bg-white rounded-[10px]\" style={{ boxShadow: '0px 0px 1px rgba(23, 26, 31, 0.07), 0px 0px 2px rgba(23, 26, 31, 0.12)' }}>\r\n                  <div className=\"w-8 h-8 rounded-full flex items-center justify-center\">\r\n                    <img src=\"/images/lucide-MessageCircle-Outlined.svg\" alt=\"Consultation\" className=\"w-6 h-6\" style={{ filter: 'brightness(0)' }} />\r\n                  </div>\r\n                  <span className=\"font-[Inter] text-[14px] leading-[24px] font-medium text-[#171A1F]\">Free Consultation</span>\r\n                  <span className=\"font-[Inter] text-[12px] leading-[20px] font-normal text-[#565D6D]\">No Obligation</span>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col items-center justify-center gap-2 p-6 h-[172px] bg-white rounded-[10px]\" style={{ boxShadow: '0px 0px 1px rgba(23, 26, 31, 0.07), 0px 0px 2px rgba(23, 26, 31, 0.12)' }}>\r\n                  <div className=\"w-8 h-8 rounded-full flex items-center justify-center\">\r\n                    <img src=\"/images/lucide-MapPin-Outlined.svg\" alt=\"Guidance\" className=\"w-6 h-6\" style={{ filter: 'brightness(0)' }} />\r\n                  </div>\r\n                  <span className=\"font-[Inter] text-[14px] leading-[24px] font-medium text-[#171A1F]\">Expert Guidance</span>\r\n                  <span className=\"font-[Inter] text-[12px] leading-[20px] font-normal text-[#565D6D]\">Personalized Service</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Rating Modal */}\r\n      {showRatingModal && (\r\n        <div\r\n          className=\"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4\"\r\n          onClick={() => setShowRatingModal(false)}\r\n        >\r\n          <div\r\n            className=\"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 relative border border-gray-100\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"p-6\">\r\n              {/* Header */}\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <h3 className=\"text-[18px] font-bold text-gray-900\">\r\n                  Rate This Broker\r\n                </h3>\r\n                <button\r\n                  onClick={() => {\r\n                    setShowRatingModal(false);\r\n                    setUserRating(0);\r\n                    setRatingReview('');\r\n                  }}\r\n                  className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n                >\r\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n\r\n              {/* Broker Info */}\r\n              {broker && (\r\n                <div className=\"flex items-center gap-3 mb-6 pb-4 border-b border-gray-200\">\r\n                  <div className=\"w-12 h-12 rounded-full bg-[#E5F0FA] overflow-hidden\">\r\n                    <img\r\n                      src={pickImage(broker?.brokerImage, broker?.profileImage, broker?.image) || '/images/user-2.jpeg'}\r\n                      alt={displayName}\r\n                      className=\"w-full h-full object-cover\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <h4 className=\"text-[14px] font-semibold text-gray-900\">{displayName}</h4>\r\n                    <p className=\"text-[12px] text-gray-500\">{firmDisplay}</p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Star Rating */}\r\n              <div className=\"mb-6\">\r\n                <label className=\"block text-[14px] font-medium text-gray-700 mb-3\">\r\n                  Your Rating\r\n                </label>\r\n                <div className=\"flex items-center gap-2\">\r\n                  {[1, 2, 3, 4, 5].map((star) => (\r\n                    <button\r\n                      key={star}\r\n                      type=\"button\"\r\n                      onClick={() => setUserRating(star)}\r\n                      className=\"focus:outline-none transition-transform hover:scale-110\"\r\n                    >\r\n                      <svg\r\n                        className={`w-8 h-8 ${star <= userRating\r\n                            ? 'text-yellow-400 fill-yellow-400'\r\n                            : 'text-gray-300 fill-gray-300'\r\n                          }`}\r\n                        viewBox=\"0 0 24 24\"\r\n                      >\r\n                        <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\" />\r\n                      </svg>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n                {userRating > 0 && (\r\n                  <p className=\"text-[12px] text-gray-600 mt-2\">\r\n                    {userRating === 1 && 'Poor'}\r\n                    {userRating === 2 && 'Fair'}\r\n                    {userRating === 3 && 'Good'}\r\n                    {userRating === 4 && 'Very Good'}\r\n                    {userRating === 5 && 'Excellent'}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Comment */}\r\n              <div className=\"mb-6\">\r\n                <label className=\"block text-[14px] font-medium text-gray-700 mb-2\">\r\n                  Your Review (Optional)\r\n                </label>\r\n                <textarea\r\n                  value={ratingReview}\r\n                  onChange={(e) => setRatingReview(e.target.value)}\r\n                  placeholder=\"Share your experience with this broker...\"\r\n                  rows={4}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg text-[13px] focus:outline-none focus:ring-2 focus:ring-[#0D542B] focus:border-[#0D542B] resize-none\"\r\n                />\r\n              </div>\r\n\r\n              {/* Submit Button */}\r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  onClick={() => {\r\n                    setShowRatingModal(false);\r\n                    setUserRating(0);\r\n                    setRatingReview('');\r\n                  }}\r\n                  className=\"flex-1 h-[40px] px-4 flex items-center justify-center font-[Inter] text-[13px] leading-[22px] font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={async () => {\r\n                    if (userRating === 0) {\r\n                      toast.error('Please select a rating');\r\n                      return;\r\n                    }\r\n\r\n                    setRatingLoading(true);\r\n                    try {\r\n                      const token = typeof window !== 'undefined'\r\n                        ? localStorage.getItem('token') || localStorage.getItem('authToken')\r\n                        : null;\r\n\r\n                      if (!token) {\r\n                        toast.error('Please login to submit a rating');\r\n                        setShowRatingModal(false);\r\n                        router.push('/login');\r\n                        return;\r\n                      }\r\n\r\n                      const base = process.env.NEXT_PUBLIC_API_URL;\r\n                      const headers = {\r\n                        'Content-Type': 'application/json',\r\n                        'Authorization': `Bearer ${token}`\r\n                      };\r\n\r\n                      const brokerMongoId = broker?._id || brokerId;\r\n\r\n                      // API expects: brokerId, rating, and review (optional)\r\n                      const ratingData = {\r\n                        brokerId: brokerMongoId,\r\n                        rating: userRating,\r\n                        review: ratingReview || ''\r\n                      };\r\n\r\n                      const res = await fetch(`${base}/broker-ratings`, {\r\n                        method: 'POST',\r\n                        headers,\r\n                        body: JSON.stringify(ratingData)\r\n                      });\r\n\r\n                      const responseData = await res.json().catch(() => ({}));\r\n\r\n                      if (!res.ok) {\r\n                        throw new Error(responseData.message || 'Failed to submit rating');\r\n                      }\r\n\r\n                      // Handle success response\r\n                      if (responseData.success && responseData.data) {\r\n                        toast.success(responseData.message || 'Thank you for your rating!');\r\n                      } else {\r\n                        toast.success('Thank you for your rating!');\r\n                      }\r\n\r\n                      setShowRatingModal(false);\r\n                      setUserRating(0);\r\n                      setRatingReview('');\r\n\r\n                      // Refresh ratings after submitting\r\n                      const refreshRatings = async () => {\r\n                        try {\r\n                          const refreshToken = typeof window !== 'undefined'\r\n                            ? localStorage.getItem('token') || localStorage.getItem('authToken')\r\n                            : null;\r\n                          const refreshBase = process.env.NEXT_PUBLIC_API_URL;\r\n                          const refreshHeaders = {\r\n                            'Content-Type': 'application/json',\r\n                            ...(refreshToken ? { 'Authorization': `Bearer ${refreshToken}` } : {})\r\n                          };\r\n\r\n                          const brokerMongoId = broker?._id || brokerId;\r\n                          const ratingsEndpoint = `/broker-ratings/broker/${encodeURIComponent(String(brokerMongoId))}`;\r\n\r\n                          const refreshRes = await fetch(`${refreshBase}${ratingsEndpoint}`, { headers: refreshHeaders });\r\n                          if (refreshRes.ok) {\r\n                            const refreshData = await refreshRes.json();\r\n                            if (refreshData.success && refreshData.data && refreshData.data.stats) {\r\n                              setBrokerRatingsStats(refreshData.data.stats);\r\n                            }\r\n                          }\r\n                        } catch (e) {\r\n                        }\r\n                      };\r\n\r\n                      refreshRatings();\r\n                    } catch (error) {\r\n                      toast.error(error.message || 'Failed to submit rating. Please try again.');\r\n                    } finally {\r\n                      setRatingLoading(false);\r\n                    }\r\n                  }}\r\n                  disabled={userRating === 0 || ratingLoading}\r\n                  className=\"flex-1 h-[40px] px-4 flex items-center justify-center font-[Inter] text-[13px] leading-[22px] font-medium text-white bg-[#0D542B] hover:bg-[#0B4624] disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors\"\r\n                >\r\n                  {ratingLoading ? 'Submitting...' : 'Submit Rating'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"+EAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEA,IAAM,EAAa,CACjB,MAAO,iBACP,YAAa,qFAKf,EAEe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAW,GAAQ,GACnB,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,MAC/B,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IAC7B,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,EAAE,EACnC,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC/C,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,EAAE,EAC3C,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC3C,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACvC,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjD,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GACvC,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC3C,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC7C,CAAC,EAAoB,EAAsB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,MACvD,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC/C,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC7C,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC/C,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,EAAE,EACrD,CAAC,EAAmB,EAAqB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACrD,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,MAC3B,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAE7C,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,EAAQ,OAAO,QAAQ,CAAC,QAAQ,EA6BhC,CA5BoB,UAGlB,GAFA,GAAW,GACX,EAAS,IACL,CAAC,EAAU,OAAE,GAAW,GAC5B,GAAI,CAIF,GAAc,CAAC,CAAC,CAQhB,IAAM,EAAM,MAAM,MAAM,GAAG,KAAK,SAAS,6BAAE,mBAAmB,OAAO,KAAY,CAAE,CAAE,QANrE,CACd,eAAgB,kBAElB,CAG6F,GAC7F,GAAI,CAAC,EAAI,EAAE,CAAE,MAAM,AAAI,MAAM,wBAC7B,IAAM,EAAO,MAAM,EAAI,IAAI,GACrB,EAAI,GAAM,MAAM,QAAU,GAAM,QAAU,GAAM,KAClD,GAAG,EAAU,EACnB,CAAE,MAAO,EAAG,CACV,EAAS,gCACX,QAAU,CACR,GAAW,EACb,CACF,IAGF,EAAG,CAAC,EAAS,EAEb,IAAM,EAAW,AAAC,GAAmB,UAAb,OAAO,GAAkB,EAAE,IAAI,GAAG,MAAM,CAAG,GAAW,SAAN,GAAsB,cAAN,EAClF,EAAY,CAAC,GAAG,IAAW,EAAM,IAAI,CAAC,IAAa,GACnD,EAAc,EAAS,GAAQ,MAAQ,EAAO,IAAI,CAAG,EAAS,GAAQ,UAAY,EAAO,QAAQ,CAAG,iBACpG,GAAe,EAAU,GAAQ,YAAa,GAAQ,aAAc,GAAQ,OAC5E,GAAW,EAAS,GAAQ,UAAY,EAAO,QAAQ,CAAG,GAC1D,GAAc,EAAS,IAAY,GAAW,IAC9C,GAAU,EAAS,GAAQ,SAAW,EAAO,OAAO,CAAG,GACtC,EAAS,IAChC,IAAM,GADqC,AACrB,EAAS,GAAQ,KADc,UACG,EAAO,aAAa,CAAG,GACzE,GAAiB,EAAS,IAAiB,GAAgB,IAC3D,GAAO,EAAS,GAAQ,MAAQ,EAAO,IAAI,CAAG,GAC9C,GAAa,MAAM,OAAO,CAAC,GAAQ,QAAU,EAAO,MAAM,CAAG,EAAE,CAC/D,GAAc,GAAW,MAAM,CAAG,EACpC,GAAW,GAAG,CAAC,GAAmB,UAAb,OAAO,EAAiB,EAAK,GAAG,MAAQ,IAAM,MAAM,CAAC,GAAU,IAAI,CAAC,MACzF,GACmB,EAAS,IAChC,IAAM,GAAkB,IADuB,EACjB,OAAO,CAAC,GAAQ,CADe,iBACK,EAAO,eAAe,CAAC,MAAM,CAAG,EAC9F,EAAO,eAAe,CACtB,EAAE,CACA,GAAQ,CAA+B,UAA9B,OAAO,GAAQ,WAA0B,GAAQ,YAAY,MAAQ,GAAQ,UAAA,CAAU,EAAK,EAC7F,IAAQ,cAAc,OAAS,GAAQ,YACrD,GADoE,CAC9D,GAAkB,GAAQ,kBAAkB,OAAS,GAAQ,eAAiB,EAE9E,GAAS,GAAoB,eAAiB,GAAQ,QAAU,GACvD,GAAS,GAAQ,SAAU,EAAO,MAAM,CACvD,EAD0D,EACpD,GAAQ,EAAS,GAAQ,SAAW,EAAO,OAAO,CAAI,EAAS,GAAQ,OAAS,EAAO,KAAK,CAAI,EAAS,GAAQ,KAAO,EAAO,GAAG,CAAI,GAAQ,YAAY,aAAe,GACjK,EAAS,GAAQ,OAAS,EAAO,KAAK,CAAI,EAAS,GAAQ,iBAAkB,EAAO,cAAc,CAqBhH,EArBmH,EAqB7G,GAAa,AAAC,GAClB,AAAK,EAEE,CADuB,CAD1B,IAAS,KACD,OAAO,EAAsB,EAAU,GAAQ,MAAQ,GAAQ,MAAQ,GAAQ,OAAS,EAAA,EACzF,OAAO,CAAC,SAAU,KAAK,OAAO,CAAC,QAAS,AAAC,GAAM,EAAE,WAAW,IAAI,OAAO,CAAC,SAAU,OAFzE,SAqNtB,CA/MA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAoDR,CAnDqB,UACnB,GAAK,CAAD,CACJ,GAAI,CACF,EAFW,CAEO,GAUlB,IAAM,EAAM,MAAM,MAAM,GAAG,KAAK,QAAQ,CAAC,4BAAE,CAAE,QAL7B,CACd,eAAgB,kBAElB,CAEqD,GACrD,GAAI,CAAC,EAAI,EAAE,CAAE,YAAE,EAAW,EAAE,EAC5B,IAAM,EAAO,MAAM,EAAI,IAAI,GACvB,EAAO,EAAE,CACT,MAAM,OAAO,CAAC,GAAM,MAAM,SAAU,EAAO,EAAK,IAAI,CAAC,OAAO,CACvD,MAAM,OAAO,CAAC,GAAM,MAAO,EAAO,EAAK,IAAI,CAC3C,MAAM,OAAO,CAAC,GAAM,SAAU,EAAO,EAAK,OAAO,CACjD,MAAM,OAAO,CAAC,KAAO,EAAO,CAAA,EAGrC,IAAM,EAAY,GAAQ,QAAQ,KAAO,GAAQ,QAAU,GAAQ,KAAO,GAAQ,GAC5E,EAAiB,MAAM,OAAO,CAAC,GAAQ,QAAU,EAAO,MAAM,CAAC,GAAG,CAAC,GAAmB,UAAb,OAAO,EAAiB,EAAI,GAAG,MAAO,MAAM,CAAC,SAAW,EAAE,CACnI,EAAe,MAAM,OAAO,CAAC,GAAQ,iBAAmB,EAAO,eAAe,CAAG,EAAE,CAEnF,EAAS,EACZ,MAAM,CAAC,IACN,IAAM,EAAK,GAAG,QAAQ,KAAO,GAAG,QAAU,GAAG,KAAO,GAAG,GACvD,OAAO,GAAM,IAAO,CACtB,GACC,GAAG,CAAC,IACH,IAAM,EAAU,MAAM,OAAO,CAAC,GAAG,QAAU,EAAE,MAAM,CAAC,GAAG,CAAC,GAAmB,UAAb,OAAO,EAAiB,EAAI,GAAG,MAAO,MAAM,CAAC,SAAW,EAAE,CAClH,EAAQ,MAAM,OAAO,CAAC,GAAG,iBAAmB,EAAE,eAAe,CAAG,EAAE,CAClE,KAAc,EAAQ,IAAI,CAAC,GAAK,EAAe,QAAQ,CAAC,IACxD,EAD8D,GAClD,CADsD,CAChD,IAAI,CAAC,GAAK,EAAa,QAAQ,CAAC,IACxD,EAD8D,IAAI,AAC3D,CAAE,OAAQ,EAAG,MAAO,EAAc,CAAU,CACrD,GACC,IAAI,CAAC,CAAC,EAAG,IAAM,EAAE,KAAK,CAAG,EAAE,KAAK,EAChC,KAAK,CAAC,EAAG,GACT,GAAG,CAAC,GAAK,EAAE,MAAM,EAEpB,EAAW,EACb,CAAE,MAAO,EAAG,CACV,EAAW,EAAE,CACf,QAAU,CACR,GAAkB,EACpB,CACF,IAGF,EAAG,CAAC,EAAO,EAGX,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KACR,IAAM,EAAW,SAAS,cAAc,CAAC,4BACzC,GAAI,EAAU,CACZ,IAAM,EAAoB,KACxB,GAAM,YAAE,CAAU,aAAE,CAAW,aAAE,CAAW,CAAE,CAAG,EAEjD,EAAiB,EAAa,IAC9B,EAAkB,EAFA,AAEa,EAFC,EAEW,GAC7C,EAMA,OAHA,WAAW,EAAmB,KAC9B,EAAS,gBAAgB,CAAC,SAAU,GACpC,OAAO,gBAAgB,CAAC,SAAU,GAC3B,KACL,EAAS,mBAAmB,CAAC,SAAU,GACvC,OAAO,mBAAmB,CAAC,SAAU,EACvC,CACF,CACF,EAAG,CAAC,EAAS,EAAe,EAG5B,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAgDR,CA/CyB,UACvB,GAAI,AAAC,GAAW,EAAO,GAAG,CAC1B,CADe,AAAa,EACxB,CACF,EAAgB,IAChB,EAAc,IAWd,IAAM,EAAgB,EAAO,GAAG,CAC1B,EAAgB,CAAC,iBAAiB,EAAE,mBAAmB,OAAO,IAAA,CAAiB,CAE/E,EAAM,MAAM,MAAM,GAAG,kCAAO,GAAe,CAAE,CAAE,QATrC,CACd,eAAgB,kBAElB,CAM6D,GAC7D,GAAI,CAAC,EAAI,EAAE,CACT,CADW,KACL,AAAI,MAAM,CAAC,uBAAuB,EAAE,EAAI,MAAM,CAAA,CAAE,EAGxD,IAAM,EAAO,MAAM,EAAI,IAAI,GAEvB,EAAY,EAAE,CACd,MAAM,OAAO,CAAC,GAAM,MAAM,OAC5B,CADoC,CACxB,EAAK,IAAI,CAAC,KAAK,CAClB,MAAM,OAAO,CAAC,GAAM,MAAM,OACnC,CAD2C,CAC/B,EAAK,IAAI,CAAC,KAAK,CAClB,MAAM,OAAO,CAAC,GAAM,OAC7B,CADqC,CACzB,EAAK,KAAK,CACb,MAAM,OAAO,CAAC,GAAM,MAC7B,CADoC,CACxB,EAAK,IAAI,CACZ,MAAM,OAAO,CAAC,KACvB,EAAY,AADkB,CAClB,EAGd,EAAe,EACjB,CAAE,MAAO,EAAG,CACV,EAAc,CAAC,6BAA6B,EAAE,EAAE,OAAO,CAAA,CAAE,EACzD,EAAe,EAAE,CACnB,QAAU,CACR,GAAgB,EAClB,EACF,GAGF,EAAG,CAAC,EAAO,EAGX,CAHc,AAGd,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAM,EAAqB,UAEzB,IAAM,EAAgB,GANiC,AAMzB,KAAO,EACrC,GAAK,CAAD,EAEJ,GAAkB,GAClB,GAAI,CAUF,EAbkB,EAaZ,EAAkB,CAAC,uBAAuB,EAAE,mBAAmB,OAAO,IAAA,CAAiB,CAEvF,EAAM,MAAM,MAAM,GAAG,kCAAO,GAAiB,CAAE,CAAE,QAPvC,CACd,eAAgB,kBAElB,CAI+D,GAEzD,EAAO,MAAM,EAAI,IAAI,GAE3B,GAAI,CAAC,EAAI,EAAE,CAAE,CAEX,GAAI,EAAK,OAAO,EAAI,EAAK,OAAO,CAAC,QAAQ,CAAC,aAAc,YACtD,EAAsB,KAGxB,OAAM,AAAI,MAAM,EAAK,OAAO,EAAI,CAAC,yBAAyB,EAAE,EAAI,MAAM,CAAA,CAAE,CAC1E,CAEI,EAAK,OAAO,EAAI,EAAK,IAAI,EAAI,EAAK,IAAI,CAAC,KAAK,CAC9C,CADgD,CAC1B,EAAK,IAAI,CAAC,KAAK,EAErC,EAAsB,KAE1B,CAAE,MAAO,EAAG,CACV,EAAsB,KACxB,QAAU,CACR,GAAkB,EACpB,EACF,EAGI,GACF,GAEJ,EAHc,AAGX,CAAC,EAAQ,EAAS,EAGrB,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KACR,GAAI,EAAQ,CAEV,IAAI,EAAiB,EAAE,CACnB,MAAM,OAAO,CAAC,GAAQ,kBAAkB,OAC1C,CADkD,CACjC,EAAO,gBAAgB,CAAC,KAAK,CACrC,MAAM,OAAO,CAAC,GAAQ,aAAa,CAC5C,EAAiB,EAAO,UAAA,AAAU,EAapC,EAT4B,EAAe,MAAM,CAAC,AAAC,IACjD,IAAM,CAQY,CARH,GAAU,QAAU,GAAU,oBAAsB,GAC7D,EAAc,GAAQ,eAAiB,GAI7C,MAAO,CAAC,GAAU,CAAC,AAFM,CAAC,SAAU,OAAQ,WAAY,UAAW,YAAY,CAE3C,QAAQ,CAAC,EAC/C,GAGF,MACE,CADK,CACe,EAAE,CAE1B,EAAG,CAAC,EAAO,EAEP,GAEA,CAAA,EAAA,EAAA,CAFS,GAET,EAAC,MAAA,CAAI,UAAU,yBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAU,CAAA,CAAC,KAAM,IAClB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uCAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qCAEb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sEAAsE,MAAO,CAAE,UAAW,wEAAyE,WAChL,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,eACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAa,CAAA,CACZ,MAAO,EACP,MAAO,IACP,OAAQ,IACR,QAAQ,cACR,gBAAgB,UAChB,gBAAgB,UAChB,MAAO,CAAE,MAAO,OAAQ,OAAQ,MAAO,YAGvC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,OAE1B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,MAAM,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OAEtD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,MAAM,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,MAAM,MAAM,OAAO,OAExD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,MAAM,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OAEtD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,MAAM,GAAG,KAAK,GAAG,KAAK,MAAM,MAAM,OAAO,OACvD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,MAAM,EAAE,MAAM,GAAG,KAAK,GAAG,KAAK,MAAM,MAAM,OAAO,OACzD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,MAAM,EAAE,MAAM,GAAG,KAAK,GAAG,KAAK,MAAM,KAAK,OAAO,cAM9D,CAAA,EAAA,EAAA,GAAA,EAAC,UAAA,CAAQ,UAAU,oBACjB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAa,CAAA,CACZ,MAAO,EACP,MAAO,IACP,OAAQ,IACR,QAAQ,cACR,gBAAgB,UAChB,gBAAgB,UAChB,MAAO,CAAE,MAAO,OAAQ,OAAQ,MAAO,YAGvC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,IAAI,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OAEnD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OACpD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OACpD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OACpD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,MAAM,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,YAKzD,CAAA,EAAA,EAAA,GAAA,EAAC,UAAA,CAAQ,UAAU,YACjB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAa,CAAA,CACZ,MAAO,EACP,MAAO,IACP,OAAQ,IACR,QAAQ,cACR,gBAAgB,UAChB,gBAAgB,UAChB,MAAO,CAAE,MAAO,OAAQ,OAAQ,MAAO,YAGvC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,IAAI,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OAInD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,MAAM,MAAM,OAAO,OACtD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,OAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,KAAK,OAAO,OACpD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OAGrD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,MAAM,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,MAAM,MAAM,OAAO,OACxD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,MAAM,GAAG,KAAK,EAAE,OAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,MAAM,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OACtD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,MAAM,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OACtD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,MAAM,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,MAAM,KAAK,OAAO,YAK3D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,aACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAa,CAAA,CACZ,MAAO,EACP,MAAO,IACP,OAAQ,GACR,QAAQ,aACR,gBAAgB,UAChB,gBAAgB,UAChB,MAAO,CAAE,MAAO,OAAQ,OAAQ,OAAQ,aAAc,MAAO,WAE7D,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,IAAI,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,SAGrD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yFACZ,sBAAa,CAAC,GAAG,CAAC,CAAC,EAAG,IACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAgB,UAAU,kDACzB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAa,CAAA,CACZ,MAAO,EACP,MAAO,IACP,OAAQ,IACR,QAAQ,cACR,gBAAgB,UAChB,gBAAgB,UAChB,MAAO,CAAE,MAAO,OAAQ,OAAQ,MAAO,YAGvC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,IAAI,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OAEnD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,MAAM,KAAK,OAAO,OACrD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,MAAM,MAAM,OAAO,OACvD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,MAAM,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,KAAK,OAAO,OAErD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,MAEpD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,IAAI,GAAG,KAAK,EAAE,MACzB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OACrD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,IAAI,GAAG,MAAM,EAAE,MAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,MAAM,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OAEtD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,MAAM,GAAG,IAAI,GAAG,IAAI,MAAM,KAAK,OAAO,OACpD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,MAAM,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OAEtD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,MAAM,EAAE,OAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,MAAM,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OACtD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,MAAM,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,WA7BhD,YAsClB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCAEb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oEACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAa,CAAA,CACZ,MAAO,EACP,MAAO,IACP,OAAQ,IACR,QAAQ,cACR,gBAAgB,UAChB,gBAAgB,UAChB,MAAO,CAAE,MAAO,OAAQ,OAAQ,MAAO,YAGvC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,IAAI,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OAEnD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,OAAO,OAAO,OACrD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,OAAO,OAAO,YAKzD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kCACZ,CAAC,EAAG,EAAG,EAAG,EAAE,CAAC,GAAG,CAAE,AAAD,GAChB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAY,UAAU,qDACrB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAa,CAAA,CACZ,MAAO,EACP,MAAO,IACP,OAAQ,IACR,QAAQ,cACR,gBAAgB,UAChB,gBAAgB,UAChB,MAAO,CAAE,MAAO,OAAQ,OAAQ,MAAO,YAGvC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,KAAK,OAAO,OAEpD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,WAb/C,MAoBd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qDACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAa,CAAA,CACZ,MAAO,EACP,MAAO,IACP,OAAQ,IACR,QAAQ,cACR,gBAAgB,UAChB,gBAAgB,UAChB,MAAO,CAAE,MAAO,OAAQ,OAAQ,MAAO,YAGvC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,IAAI,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OAEnD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OACpD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OACpD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OAGnD,CAAC,EAAG,EAAG,EAAE,CAAC,GAAG,CAAC,AAAC,GACd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAK,CAAC,QAAQ,CAAA,WACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAI,IAAU,GAAJ,EAAQ,EAAE,OACpC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAG,IAAU,GAAJ,EAAQ,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OAC/D,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAG,IAAU,GAAJ,EAAQ,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,SAH5C,IAQvB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,MAAM,GAAG,IAAI,GAAG,IAAI,MAAM,OAAO,OAAO,yBAWnE,EAgBH,CAAA,EAAA,EAAA,CAhBW,GAgBX,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,SAAS,YAAY,aAAc,CAAE,SAAU,GAAK,IAC7D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAU,CAAA,CAAC,KAAM,IAClB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uCAIb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qCAGb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sEAAsE,MAAO,CAAE,UAAW,wEAAyE,WAChL,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,eACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yDAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gGACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,GAAc,IAAI,SAAS,UAAU,mCAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gIACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBAAqB,KAAK,eAAe,QAAQ,qBAC9D,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,SAAS,UAAU,EAAE,qHAAqH,SAAS,mBAM/J,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2DAAmD,IACjE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,4IAAmI,wBAOrJ,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,4EAAmE,GAAY,MAAI,SA+FlG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kEACb,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,2GACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAI,yCACJ,IAAI,SACJ,UAAU,+CAGD,KAAV,GAAe,CAAA,EAAG,GAAM,kBAAkB,CAAC,CAAG,wBAEjD,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CACC,QAAS,KACP,GAAI,GAAkB,EAAG,CACvB,IAAM,EAAgB,GAAQ,KAAO,EACjC,GACF,EAAO,IAAI,CAAC,CAAC,IADI,6BAC6B,EAAE,mBAAmB,OAAO,IAAA,CAAiB,CAE/F,CACF,EACA,UAAW,CAAC,kGAAkG,EAAE,GAAkB,EAC5H,gEACA,iEAAA,CACF,WAEJ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAI,4CACJ,IAAI,SACJ,UAAW,CAAC,4BAA4B,EAAE,GAAkB,EAAI,iBAAmB,iBAAA,CAAkB,GAGtG,GAAgB,sBAEnB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,wKACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAI,yCACJ,IAAI,SACJ,UAAU,8BACV,MAAO,CAAE,OAAQ,yBAA0B,IAC3C,sBASZ,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,qBACjB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wCAEb,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,gEAAsD,SAAO,OAE5E,EAAS,IACR,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCACV,KAGH,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,sDAA4C,gBACzC,EAAY,OAAK,GAAY,mcAMjD,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,aACjB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wCAEb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+DAAsD,2BAEtE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uFACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4EACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAI,4CAA4C,IAAI,OAAO,UAAU,UAAU,MAAO,CAAE,OAAQ,qHAAsH,MAE7N,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCAA4B,qBAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iDAAyC,WAI5D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uFACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4EACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAI,oCAAoC,IAAI,UAAU,UAAU,UAAU,MAAO,CAAE,OAAQ,qHAAsH,MAExN,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCAA4B,wBAC3C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mDAA2C,KAC1D,EAAS,KACR,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uFAA8E,4BAU1G,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,aACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDAEb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+DAAsD,kCACnE,GAAQ,KAAO,EAAY,MAAM,CAAG,GACnC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CACC,QAAS,KACP,EAAO,IAAI,CAAC,CAAC,iBAAiB,EAAE,mBAAmB,OAAO,EAAO,GAAG,GAAA,CAAI,CAC1E,EACA,UAAU,gHACX,gBAMJ,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yFACZ,sBAAa,CAAC,GAAG,CAAC,CAAC,EAAG,IACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAgB,UAAU,kDACzB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAa,CAAA,CACZ,MAAO,EACP,MAAO,IACP,OAAQ,IACR,QAAQ,cACR,gBAAgB,UAChB,gBAAgB,UAChB,MAAO,CAAE,MAAO,OAAQ,OAAQ,MAAO,YAGvC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,IAAI,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OAEnD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,MAAM,KAAK,OAAO,OACrD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,KAAK,GAAG,KAAK,GAAG,KAAK,MAAM,MAAM,OAAO,OACvD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,MAAM,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,KAAK,OAAO,OAErD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,MAEpD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,IAAI,GAAG,KAAK,EAAE,MACzB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OACrD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,IAAI,GAAG,MAAM,EAAE,MAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,MAAM,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OAEtD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,MAAM,GAAG,IAAI,GAAG,IAAI,MAAM,KAAK,OAAO,OACpD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,MAAM,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OAEtD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,MAAM,EAAE,OAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,MAAM,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OACtD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,MAAM,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,WA7BhD,MAkCZ,EACF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAyB,KAAK,OAAO,OAAO,eAAe,QAAQ,qBAChF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,0DAGzE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yBAAiB,OAE9B,EAAY,MAAM,CAAG,EACvB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+EACZ,EAAY,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,CAAC,EAAM,KAClC,IAAM,EAAS,GAAM,KAAO,GAAM,IAAM,EACvB,GAAM,aAAgC,GAAhB,AAAsB,WAAX,CAC3B,EAD8B,CAAuB,AAC/C,WAD0D,EACzB,GAD8B,AAC/C,AAAuB,CADyB,UACrC,IAAI,AAAuB,MAAQ,GAAM,QAAQ,KACzG,GADiH,CAC3G,EAAQ,GAAM,MADyG,EAC/F,GACb,GAAM,eAAe,MAAQ,GAAM,QAAQ,MAAQ,GAAM,eAAe,MAAQ,GAAM,QAAQ,KACjG,GADyG,AACnG,WAAW,YAClB,GADiC,AAC3B,aACJ,GADoB,AACd,OACC,GAAM,AADG,cAET,GADuB,AACjB,cAG5B,GAH6C,CAGzC,EAAe,KAEb,EAAY,GAAM,UAqBxB,OAnBI,IACuB,OADZ,GACT,AAA+B,OAAxB,EACT,EAAe,EAEe,UAArB,OAAO,GAAwC,MAAM,CAApB,IAW1C,EAAe,CATf,EAAe,GAAW,QAAQ,KAChC,GAAW,QAAQ,IACnB,GAAW,QACX,GAAW,KACX,GAAW,IACX,GAAW,UACX,GAAW,gBACX,GAAW,iBACX,IAAA,EAC4B,OAAO,GAAgB,IAAA,GAKvD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAEH,KAAM,CAAC,cAAc,EAAE,EAAA,CAAQ,CAC/B,UAAU,wBAEV,CAAA,EAAA,EAAA,GAAA,EAAC,UAAA,CAAQ,UAAU,uLACjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,gDAAgD,MAAO,CAAE,MAAO,SAAU,YACrF,GAAM,cAAgB,WAAW,QAAM,GAAM,aAAe,aAG/D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gDACZ,GAAM,aACL,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uFAAuF,MAAO,CAAE,WAAY,QAAS,SAAU,OAAQ,WAAY,OAAQ,WAAY,MAAO,WAAY,UAAW,MAAO,SAAU,WACnO,EAAK,WAAW,GAGpB,GAAM,cACL,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uFAAuF,MAAO,CAAE,WAAY,QAAS,SAAU,OAAQ,WAAY,OAAQ,WAAY,MAAO,WAAY,UAAW,MAAO,WAAY,WACrO,EAAK,YAAY,MAIxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8FAA8F,MAAO,CAAE,MAAO,SAAU,YACrI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,UAAU,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,cACzF,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,OAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,mBAET,CAn0BtB,AAAD,IACV,GAAI,CAAC,EAAG,MAAO,GACf,IAAM,EAAI,IAAI,KAAK,GAAG,OAAO,GAC7B,GAAI,CAAC,EAAG,MAAO,GACf,IAAM,EAAI,KAAK,KAAK,CAAC,CAAC,KAAK,GAAG,IAAK,CAAC,CAAI,KASxC,IAAK,GAAM,CAAC,EAAK,EAAM,EART,CACZ,CAAC,AAOwB,MAAO,EAPrB,IAAI,CACf,CAAC,OAAS,KAAK,CACf,CAAC,OAAQ,IAAI,CACb,CAAC,MAAO,IAAI,CACZ,CAAC,KAAM,IAAI,CACX,CAAC,GAAI,IAAI,CACV,CAEC,GAAI,GAAK,EAAK,OAAO,KAAK,KAAK,CAAC,EAAI,GAAO,EAAQ,OAErD,OAAO,EAAI,OACb,GAkzBuC,GAAM,oBAMjB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kCAGf,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uCAAuC,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,cACtH,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,mDACR,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,SAE5B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yEAAgE,sBAChF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oFAA4E,GAAW,GAAM,eAAiB,GAAM,gBAIvI,GAAM,iBACL,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uCAAuC,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,cACtH,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,mDACR,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,SAE5B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yEAAgE,wBAChF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oFAA4E,GAAW,GAAM,yBAKnH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uCAAuC,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,cACtH,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,IAAI,MAAM,KAAK,OAAO,KAAK,GAAG,MAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,8CAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yEAAgE,YAChF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oCAAoC,MAAO,CAAE,MAAO,SAAU,WAC3E,AAAiB,iBAAV,EAAqB,CAAC,CAAC,EAAE,EAAM,cAAc,CAAC,SAAA,CAAU,CAAI,GAAS,eAOpF,SAhFA,EAkLX,KAGF,CAAA,EAAA,EAAA,EApGc,EAoGd,EAAC,MAAA,CAAI,UAAU,6BACb,CArGa,AAqGb,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oBAAoB,KAAK,OAAO,OAAO,eAAe,QAAQ,qBAC3E,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,kJAGzE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8BAAqB,wBAClC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,4DAW3C,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,6EACjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iDAChB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mDAA0C,uBAE1D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EACC,sBAAa,CAAC,GAAG,CAAC,CAAC,EAAG,IACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAgB,UAAU,wFACzB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uCACf,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCACf,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oCAEjB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCANP,IAUZ,EAAQ,GAAG,CAAC,CAAC,EAAG,KACd,IAAM,EAAM,GAAG,aAAe,GAAG,cAAgB,GAAG,OAAS,sBACvD,EAAO,EAAS,GAAG,MAAQ,EAAE,IAAI,CAAG,EAAS,GAAG,UAAY,EAAE,QAAQ,CAAG,iBACzE,EAAO,EAAS,GAAG,UAAY,EAAE,QAAQ,CAAG,GAC5C,EAAoC,UAAzB,OAAO,GAAG,WAA0B,GAAG,YAAY,MAAQ,GAAG,WACzE,EAAS,GAAG,QAAU,MACtB,EAAQ,MAAM,OAAO,CAAC,GAAG,kBAAoB,EAAE,eAAe,CAAC,MAAM,CAAG,EAAI,EAAE,eAAe,CAAG,GAChG,EAAK,GAAG,QAAQ,KAAO,GAAG,QAAU,GAAG,KAAO,GAAG,GACvD,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAsB,UAAU,sHAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,EAAK,IAAK,EAAM,UAAU,wCACpC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2FAEjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uCAA+B,IAC7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BAA0B,KAAK,eAAe,QAAQ,qBACnE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,+VAEV,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,6CAAqC,UAGzD,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,uCAA8B,EAAM,GAAQ,EAAW,MAAQ,GAAI,EAAW,CAAA,EAAG,EAAS,OAAO,CAAC,CAAG,MAClH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gCACZ,EAAM,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,CAAC,EAAM,IAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAqB,UAAU,2FAC7B,GADQ,SAMhB,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAM,CAAC,gBAAgB,EAAE,EAAA,CAAI,CAAE,UAAU,6IAAoI,mBAzB7K,GAAM,EA+BpB,QAMN,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,wBACjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iDAChB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+CAAsC,8BAEtD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,QAAS,KAC7B,IAAM,EAAK,SAAS,cAAc,CAAC,mBAC/B,GAAI,EAAG,QAAQ,CAAC,CAAE,KAAM,CAAC,IAAK,SAAU,QAAS,EACvD,EAAG,UAAU,sFAA8E,MAC3F,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,QAAS,KAC7B,IAAM,EAAK,SAAS,cAAc,CAAC,kBAC/B,IAAI,EAAG,QAAQ,CAAC,CAAE,KAAM,IAAK,SAAU,QAAS,EACtD,EAAG,UAAU,sFAA8E,YAG/F,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,GAAG,kBAAkB,UAAU,yCAClC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCACZ,EACE,MAAM,CAAC,AAAC,IACP,IAAM,EAAiB,MAAM,OAAO,CAAC,GAAQ,QAAU,EAAO,MAAM,CAAC,GAAG,CAAC,GAAmB,UAAb,OAAO,EAAiB,EAAI,GAAG,MAAO,MAAM,CAAC,SAAW,EAAE,CAEzI,MAAO,CADS,MAAM,OAAO,CAAC,GAAG,QAAU,EAAE,MAAM,CAAC,GAAG,CAAC,GAAmB,UAAb,OAAO,EAAiB,EAAI,GAAG,MAAO,MAAM,CAAC,SAAW,EAAA,AAAE,EACzG,IAAI,CAAC,GAAK,EAAe,QAAQ,CAAC,GACnD,GACC,KAAK,CAAC,EAAG,IACT,GAAG,CAAC,CAAC,EAAG,KACP,IAAM,EAAM,GAAG,aAAe,GAAG,cAAgB,GAAG,OAAS,sBACvD,EAA2B,UAAnB,OAAO,GAAG,MAAqB,EAAE,IAAI,EAA6B,UAAvB,OAAO,GAAG,UAAyB,EAAE,QAAQ,EAAK,iBACrG,EAA+B,UAAvB,OAAO,GAAG,UAAyB,EAAE,QAAQ,EAAK,GAC1D,EAAK,GAAG,QAAQ,KAAO,GAAG,QAAU,GAAG,KAAO,GAAG,GACvD,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAsB,UAAU,yFAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,EAAK,IAAK,EAAM,UAAU,wCACpC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gDAAwC,IACvD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0CAAkC,GAAQ,YAG7D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mDAA0C,yDACvD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBACZ,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAM,CAAC,gBAAgB,EAAE,EAAA,CAAI,CAAE,UAAU,wJAA+I,qBAXvL,GAAM,EAgBpB,aAQV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCAGZ,EAAiB,MAAM,CAAG,EACzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,aACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mEAA0D,eACxE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAM,CAAC,iCAAiC,EAAE,mBAAmB,OAAO,GAAQ,MAAA,CAAO,CACnF,UAAU,kEACX,gBAIH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAiB,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,CAAC,EAAU,KAE3C,IAAM,EAAa,GAAU,KAAO,GAAU,IAAM,EAC9C,EAAgB,GAAU,QAAQ,CAAC,EAAE,EAAI,GAAU,OAAS,yBAC5D,EAAgB,GAAU,OAAS,GAAU,MAAQ,WACrD,EAAgB,GAAU,OAAS,EACnC,EAAmB,GAAU,MAAQ,GAAU,QAAQ,MAAQ,GAAU,UAAY,GACrF,EAAe,GAAU,cAAgB,GAAU,MAAQ,WAC3D,EAAiB,GAAU,QAAU,GAAU,oBAAsB,YACrE,EAAS,GAAgB,gBAAkB,QAC/C,GAAgB,gBAAkB,aAClC,GAAgB,gBAAkB,UAClC,CAAC,GAAqC,KAAnB,EAUf,EAAgB,GAAQ,IAE9B,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAEH,KAAM,CAAC,qBAAqB,EAAE,mBAAmB,OAAO,IAAA,EAAe,EAAgB,CAAC,UAAU,EAAE,mBAAmB,OAAO,IAAA,CAAiB,CAAG,GAAA,CAAI,CACtJ,UAAU,qGAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EACL,IAAK,EACL,UAAU,uCACV,QAAS,AAAC,IACR,EAAE,aAAa,CAAC,GAAG,CAAG,wBACxB,IAED,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,0GAAiG,YAKrH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mEACX,IAEF,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,yFACd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,0CAA+C,aAKrE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mDAA2C,IACxD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,0CAAkC,IAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gDA5CnB,AAAI,AA6CwB,CA7CvB,AA6CI,EA7CK,AAAU,GAAG,GAEpB,CAAC,CAAC,EAAE,AADG,GAAQ,GAAA,EACL,OAAO,CAAC,GAAG,MAAM,CAAC,CAFD,aAU3B,EAyCX,QAKJ,CAAA,CADA,CACA,EAAA,IAAA,EAAC,MAAA,CACC,QAAS,KACP,IAAM,EAAgB,GAAQ,KAAO,EACjC,GACF,EAAO,IAAI,CAAC,CAAC,CALsC,GAIlC,6BAC6B,EAAE,mBAAmB,OAAO,IAAA,CAAiB,CAE/F,EACA,UAAU,kGACV,MAAO,CAAE,UAAW,wEAAyE,YAE7F,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gEAAwD,KACvE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mFAA0E,kBAK7F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CAA8C,MAAO,CAAE,UAAW,wEAAyE,YACxJ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gEACM,UAAlB,OAAO,GAAsB,GAAO,OAAO,CAAC,GAAK,KAEpD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mFAA0E,qBAE3F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CAA8C,MAAO,CAAE,UAAW,wEAAyE,YACxJ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gEAAwD,AAAU,QAAK,IAAwB,UAAjB,OAAO,GAAqB,CAAA,EAAG,GAAM,CAAC,CAAC,CAAG,KACvI,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mFAA0E,2BAM7F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,yEAAgE,kBAC9E,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SACX,QAAS,KAUL,EAAO,IAAI,CAAC,CAAC,gBAAgB,EAAE,EAAA,CAAM,CAOzC,EACA,UAAU,wGAA+F,iBAG1G,CAAC,GACA,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CACC,KAAK,UACL,UAAU,6WAOX,+BASL,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4CAA4C,MAAO,CAAE,UAAW,wEAAyE,YACtJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qEAA4D,6BAC1E,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mFAA0E,mGAGvF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+FACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAI,6CAA6C,IAAI,WAAW,UAAU,UAAU,MAAO,CAAE,OAAQ,qHAAsH,MAElO,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8EAAqE,qBACpF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gFAAuE,gDAI1F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+FACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAI,4CAA4C,IAAI,WAAW,UAAU,UAAU,MAAO,CAAE,OAAQ,qHAAsH,MAEjO,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8EAAqE,uBACpF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gFAAuE,yDAI1F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+FACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAI,yCAAyC,IAAI,cAAc,UAAU,UAAU,MAAO,CAAE,OAAQ,qHAAsH,MAEjO,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8EAAqE,uBACpF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gFAAuE,gDAK3F,CAAC,GACA,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,UAAU,UAAU,wQAA+P,4BAMhS,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,KAOL,EAAO,IAAI,CAAC,SAIhB,EACA,UAAU,+QAEV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,qBACjE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,8WACjE,4BAQZ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,kBACjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCAEb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+DAAsD,sBAEtE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCACZ,EAAQ,MAAM,CAAG,GAChB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,uBAAuB,UAAU,qGAA4F,kBAQ9I,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,GAAG,2BACH,UAAU,yCACV,MAAO,CAAE,eAAgB,OAAQ,gBAAiB,MAAO,EACzD,SAAU,AAAC,IAET,GAAM,YAAE,CAAU,aAAE,CAAW,aAAE,CAAW,CAAE,CAD7B,EAAE,AAC8B,aADjB,CAGhC,EAAiB,EAAa,IAC9B,EAAkB,EAAa,AAFb,EAAc,EAEW,GAC7C,YAEA,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BACZ,EAEC,MAAM,IAAI,CAAC,CAAE,GADb,IACqB,CAAE,GAAG,GAAG,CAAC,CAAC,EAAG,CADlB,GAEd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAgB,UAAU,oGACzB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAa,CAAA,CACZ,MAAO,EACP,MAAO,IACP,OAAQ,IACR,QAAQ,cACR,gBAAgB,UAChB,gBAAgB,UAChB,MAAO,CAAE,MAAO,OAAQ,OAAQ,MAAO,YAGvC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,IAAI,EAAE,IAAI,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,QAEnD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,MAAM,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OAEtD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,MAAM,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OAEtD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,MAAM,EAAE,MAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,MAAM,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,OAEtD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,MAAM,EAAE,MAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,KAAK,EAAE,MAAM,GAAG,IAAI,GAAG,IAAI,MAAM,MAAM,OAAO,WArBhD,IAyBV,EAAQ,MAAM,CAAG,EAEnB,CAAC,CADD,IAEE,IAAM,EAAiB,MAAM,OAAO,CAAC,GAAQ,QAAU,EAAO,MAAM,CAAC,GAAG,CAAC,GAAmB,UAFjC,AAEoB,OAAO,EAAiB,EAAI,GAAG,MAAO,MAAM,CAAC,SAAW,EAAE,CAmBzI,OAjBsB,AAiBf,EAhBJ,GAAG,CAAC,IAEH,IAAM,EAAiB,CADP,MAAM,OAAO,CAAC,GAAG,QAAU,EAAE,MAAM,CAAC,GAAG,CAAC,GAAmB,UAAb,OAAO,EAAiB,EAAI,GAAG,MAAO,MAAM,CAAC,SAAW,EAAA,AAAE,EACzF,IAAI,CAAC,GAAK,EAAe,QAAQ,CAAC,IAC3D,EAAQ,MAAM,OAAO,CAAC,GAAG,iBAAmB,EAAE,eAAe,CAAG,EAAE,CAClE,EAAe,MAAM,OAAO,CAAC,GAAQ,iBAAmB,EAAO,eAAe,CAAG,EAAE,CAGzF,MAAO,CACL,OAAQ,EACR,MAAO,AAAkB,IAAjB,AAAqB,CAAC,EAAK,EAAD,CAJf,EAAM,IAAI,CAAC,GAAK,EAIe,AAJF,IAIM,CAAC,GAJC,CAAC,IAIkB,GAAhB,CAAoB,IAAf,MAAM,EACxE,CACF,GACC,IAAI,CAAC,CAAC,EAAG,IAAM,CAHgG,CAG9F,KAAK,CAAG,EAAE,KAAK,EAChC,KAAK,CAAC,EAAG,GACT,GAAG,CAAC,GAAQ,EAAK,MAAM,EAEL,GAAG,CAAC,CAAC,EAAG,KAK3B,IAAM,EAAiB,CACrB,uBACA,uBACA,sBACA,uBACD,CACK,EAAW,CAVM,CAAC,GAAG,IAElB,AADO,EAAM,IAAI,CAAC,AAAC,GAAmB,UAAb,OAAO,GAAkB,EAAE,IAAI,IAAY,SAAN,GAAsB,cAAN,IACrE,EAClB,EAQE,GAAG,YACH,GAAG,MACH,GAAG,aACH,GAAG,OACH,GAAG,MACH,GAAG,QACH,GAAG,eACH,GAAG,aACH,CAAc,CAAC,EAAQ,EAAe,MAAM,CAAC,EAEzC,EAAK,GAAG,QAAQ,KAAO,GAAG,QAAU,GAAG,KAAO,GAAG,GACjD,EAA2B,UAAnB,OAAO,GAAG,MAAqB,EAAE,IAAI,EAA6B,UAAvB,OAAO,GAAG,UAAyB,EAAE,QAAQ,EAAK,GAAG,MAAM,MAAQ,GAAG,UAAU,MAAQ,iBAC3I,EAAQ,MAAM,OAAO,CAAC,GAAG,kBAAoB,EAAE,eAAe,CAAC,MAAM,CAAG,EAC1E,EAAE,eAAe,CAAC,EAAE,CACnB,AAA6B,iBAAtB,GAAG,eAA8B,EAAE,cAAc,CAC9B,UAAxB,OAAO,GAAG,UAAyB,EAAE,SAAS,CACzB,UAAnB,OAAO,GAAG,KAAoB,EAAE,IAAI,CAAI,GAAG,UAAY,yBAC1D,EAAa,CAAC,KAClB,IAAM,EAAI,GAAG,OACb,GAAI,MAAM,OAAO,CAAC,IAAM,EAAE,MAAM,CAAG,EAAG,CACpC,IAAM,EAAQ,CAAC,CAAC,EAAE,CAClB,MAAwB,UAAjB,OAAO,EAAqB,EAAS,GAAO,MAAQ,GAAO,MAAQ,GAAO,OAAS,UAC5F,OACA,AAAiB,UAAb,AAAuB,OAAhB,EAAuB,EAC9B,GAAkB,UAAU,AAAvB,OAAO,EAAuB,GAAG,MAAQ,GAAG,MAAQ,GAAG,OAAS,WAClE,GAAG,OAAS,GAAG,MAAQ,WAChC,CAAC,GACK,EAAiB,GAAG,cAAc,OAAS,GAAG,WAAa,GAAG,YAAc,GAAG,OAAS,EAE9F,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAEH,KAAM,EAAK,CAAC,gBAAgB,EAAE,EAAA,CAAI,CAAG,IACrC,UAAW,CAAC,yTAAyT,EAAE,CAAC,EAAK,sBAAwB,GAAA,CAAI,WAEzW,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EACL,IAAK,CAAC,kBAAkB,EAAE,EAAA,CAAM,CAChC,UAAU,wFACV,QAAS,AAAC,IAAQ,EAAE,aAAa,CAAC,GAAG,CAAG,CAAc,CAAC,EAAQ,EAAe,MAAM,CAAC,AAAE,IAGzF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uCAEjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+CACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0EAAkE,IAChF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6HAA6H,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,IAAI,cAAc,QAAQ,eAAe,kBACrP,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,eACR,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,uBAKd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wEAAgE,MAG/E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCAAsC,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,cACrH,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,mDACR,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,SAE5B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wEAAgE,OAG/E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCAAsC,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,cACrH,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,8CACR,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,IAAI,GAAG,IAAI,EAAE,MACxB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,+BACR,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,iCAEV,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,yEAAgE,EAAe,qCA5C3F,GAAM,EAiDjB,GACF,CAAC,GAGD,CAAA,EAAA,AADA,EACA,GAAA,EAAC,MAAA,CAAI,KADc,KACJ,2CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uCAAuC,KAAK,OAAO,OAAO,eAAe,QAAQ,qBAC9F,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,6QAEvE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kDAAyC,6BACtD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,iFAK5C,EAAQ,MAAM,CAAG,GAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,QAAS,KACP,IAAM,EAAW,SAAS,cAAc,CAAC,4BACrC,GAAY,GAAe,EAAS,QAAQ,CAAC,CAAE,KAAM,CAAC,IAAK,SAAU,QAAS,EACpF,EACA,SAAU,CAAC,EACX,UAAW,CAAC,kFAAkF,EAAE,EAC1F,8DACA,+CAAA,CACF,CACJ,MAAM,oBAEN,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,qBACjE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,wBAGzE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,QAAS,KACP,IAAM,EAAW,SAAS,cAAc,CAAC,4BACrC,GAAY,GAAgB,EAAS,QAAQ,CAAC,CAAE,KAAM,IAAK,SAAU,QAAS,EACpF,EACA,SAAU,CAAC,EACX,UAAW,CAAC,kFAAkF,EAAE,EAC1F,8DACA,+CAAA,CACF,CACJ,MAAM,gBAEN,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,qBACjE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,qCAYvF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2DAEb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCACf,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2EACf,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6EAEf,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kHACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAI,6CAA6C,IAAI,WAAW,UAAU,UAAU,MAAO,CAAE,OAAQ,eAAgB,IAC1H,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8EAAqE,kCAGvF,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qEAA4D,yCAG1E,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,yFAA+E,gBAC7E,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,wCAAgC,IAAmB,sJAIlF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+DACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,KAQL,EAAO,IAAI,CAAC,CAAC,gBAAgB,EAAE,EAAA,CAAM,CAQzC,EACA,UAAU,8OACX,mBAuBH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8DACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wFAAwF,MAAO,CAAE,UAAW,wEAAyE,YAClM,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAI,wCAAwC,IAAI,WAAW,UAAU,UAAU,MAAO,CAAE,OAAQ,eAAgB,MAEvH,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8EAAqE,oBACrF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8EAAqE,4BAGvF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wFAAwF,MAAO,CAAE,UAAW,wEAAyE,YAClM,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAI,4CAA4C,IAAI,eAAe,UAAU,UAAU,MAAO,CAAE,OAAQ,eAAgB,MAE/H,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8EAAqE,sBACrF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8EAAqE,qBAGvF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wFAAwF,MAAO,CAAE,UAAW,wEAAyE,YAClM,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAI,qCAAqC,IAAI,WAAW,UAAU,UAAU,MAAO,CAAE,OAAQ,eAAgB,MAEpH,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8EAAqE,oBACrF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8EAAqE,0CAShG,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAU,sEACV,QAAS,IAAM,GAAmB,YAElC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAU,uFACV,QAAS,AAAC,GAAM,EAAE,eAAe,YAEjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gBAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+CAAsC,qBAGpD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,KACP,EAAmB,IACnB,EAAc,GACd,EAAgB,GAClB,EACA,UAAU,+DAEV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,qBACjE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,gCAM1E,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+DACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EAAU,GAAQ,YAAa,GAAQ,aAAc,GAAQ,QAAU,sBAC5E,IAAK,EACL,UAAU,iCAGd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mDAA2C,IACzD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qCAA6B,WAMhD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4DAAmD,gBAGpE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCACZ,CAAC,EAAG,EAAG,EAAG,EAAG,EAAE,CAAC,GAAG,CAAC,AAAC,GACpB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAEC,KAAK,SACL,QAAS,IAAM,EAAc,GAC7B,UAAU,mEAEV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAW,CAAC,QAAQ,EAAE,GAAQ,EACxB,kCACA,8BAAA,CACF,CACJ,QAAQ,qBAER,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,oGAZL,MAiBV,EAAa,GACZ,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,2CACK,IAAf,GAAoB,OACL,IAAf,GAAoB,OACL,IAAf,GAAoB,OACL,AAAf,OAAoB,YACL,IAAf,GAAoB,kBAM3B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,4DAAmD,2BAGpE,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACC,MAAO,EACP,SAAU,AAAC,GAAM,EAAgB,EAAE,MAAM,CAAC,KAAK,EAC/C,YAAY,4CACZ,KAAM,EACN,UAAU,8JAKd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,KACP,GAAmB,GACnB,EAAc,GACd,EAAgB,GAClB,EACA,UAAU,8LACX,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,UACP,GAAmB,IAAf,EAAkB,YACpB,EAAA,OAAK,CAAC,KAAK,CAAC,0BAId,GAAiB,GACjB,GAAI,CAMA,EAAA,OAAK,CAAC,KAAK,CAAC,mCACZ,GAAmB,GACnB,EAAO,IAAI,CAAC,UACZ,MAoEJ,CAAE,MAAO,EAAO,CACd,EAAA,OAAK,CAAC,KAAK,CAAC,EAAM,OAAO,EAAI,6CAC/B,QAAU,CACR,GAAiB,EACnB,CACF,EACA,SAAyB,IAAf,GAAoB,EAC9B,UAAU,6OAET,EAAgB,gBAAkB,+BAj5C/C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAU,CAAA,CAAC,KAAM,IAClB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0EACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAyB,GAAS,qCAq5C7D"}