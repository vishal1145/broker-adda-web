{"version":3,"sources":["turbopack:///[project]/Desktop/Broker adda/broker-adda-web/src/app/property-details/page.jsx"],"sourcesContent":["\"use client\";\r\nimport React, { Suspense, useMemo, useState, useEffect } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useSearchParams, useRouter } from \"next/navigation\";\r\nimport ContentLoader from \"react-content-loader\";\r\nimport data from \"../data/furnitureData.json\";\r\nimport HeaderFile from \"../components/Header\";\r\nimport PropertyEnquiryModal from \"../components/PropertyEnquiryModal\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport toast, { Toaster } from \"react-hot-toast\";\r\n\r\nconst TABS = [{ label: \"Description\" }, { label: \"Review\" }];\r\n\r\n// Helper function to convert YouTube URL to embed URL\r\nconst getEmbedUrl = (url) => {\r\n  if (!url || typeof url !== 'string') return null;\r\n  \r\n  const trimmedUrl = url.trim();\r\n  if (!trimmedUrl) return null;\r\n  \r\n  // If already an embed URL, return as is\r\n  if (trimmedUrl.includes('youtube.com/embed') || trimmedUrl.includes('youtu.be/embed')) {\r\n    return trimmedUrl;\r\n  }\r\n  \r\n  // Extract video ID from various YouTube URL formats\r\n  let videoId = null;\r\n  \r\n  // youtube.com/watch?v=VIDEO_ID\r\n  const watchMatch = trimmedUrl.match(/(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([^&\\n?#]+)/);\r\n  if (watchMatch) {\r\n    videoId = watchMatch[1];\r\n  }\r\n  \r\n  // youtube.com/embed/VIDEO_ID\r\n  const embedMatch = trimmedUrl.match(/youtube\\.com\\/embed\\/([^&\\n?#]+)/);\r\n  if (embedMatch) {\r\n    videoId = embedMatch[1];\r\n  }\r\n  \r\n  if (videoId) {\r\n    return `https://www.youtube.com/embed/${videoId}?rel=0`;\r\n  }\r\n  \r\n  // If not a YouTube URL, return as is (for other video platforms)\r\n  return trimmedUrl;\r\n};\r\n\r\nfunction PropertyDetailsPageInner() {\r\n  const searchParams = useSearchParams();\r\n  const router = useRouter();\r\n  const { user, isAuthenticated } = useAuth();\r\n\r\n  // Helper function to format price based on value (thousands, lakhs, crores)\r\n  const formatPrice = (price) => {\r\n    if (!price || price === 0) return \"0\";\r\n    // Convert to number\r\n    const numPrice = typeof price === \"string\" ? parseFloat(price.replace(/[â‚¹,]/g, '')) : price;\r\n    if (isNaN(numPrice) || numPrice === 0) return \"0\";\r\n    \r\n    // If price is >= 1 crore (1,00,00,000)\r\n    if (numPrice >= 10000000) {\r\n      const crores = numPrice / 10000000;\r\n      return `${crores.toFixed(2)} Cr`;\r\n    }\r\n    // If price is >= 1 lakh (1,00,000)\r\n    else if (numPrice >= 100000) {\r\n      const lakhs = numPrice / 100000;\r\n      return `${lakhs.toFixed(2)} Lakhs`;\r\n    }\r\n    // If price is >= 1 thousand (1,000)\r\n    else if (numPrice >= 1000) {\r\n      const thousands = numPrice / 1000;\r\n      return `${thousands.toFixed(2)} K`;\r\n    }\r\n    // If price is < 1 thousand, show as is\r\n    else {\r\n      return Math.round(numPrice).toLocaleString(\"en-IN\");\r\n    }\r\n  };\r\n\r\n  // Also support dynamic route /property-details/[id] by reading path when query is missing\r\n  const [routeId, setRouteId] = useState(null);\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n    try {\r\n      const path = window.location.pathname || \"\";\r\n      const m = path.match(/\\/property-details\\/(.+)$/);\r\n      if (m && m[1]) setRouteId(m[1]);\r\n    } catch {}\r\n  }, []);\r\n  const [product, setProduct] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n  const [activeTab, setActiveTab] = useState(0);\r\n  const [agent, setAgent] = useState(null);\r\n  const [agentLoading, setAgentLoading] = useState(false);\r\n  const [agentError, setAgentError] = useState(\"\");\r\n  const [similarProperties, setSimilarProperties] = useState([]);\r\n  const [similarLoading, setSimilarLoading] = useState(false);\r\n  const [canScrollLeft, setCanScrollLeft] = useState(false);\r\n  const [canScrollRight, setCanScrollRight] = useState(true);\r\n  const [isEnquiryModalOpen, setIsEnquiryModalOpen] = useState(false);\r\n  const [broker, setBroker] = useState(null);\r\n  const [isSaved, setIsSaved] = useState(false);\r\n  const [savingProperty, setSavingProperty] = useState(false);\r\n  const [showRatingModal, setShowRatingModal] = useState(false);\r\n  const [userRating, setUserRating] = useState(0);\r\n  const [ratingReview, setRatingReview] = useState(\"\");\r\n  const [ratingLoading, setRatingLoading] = useState(false);\r\n  const [propertyRatings, setPropertyRatings] = useState([]);\r\n  const [ratingsStats, setRatingsStats] = useState(null);\r\n  const [ratingsLoading, setRatingsLoading] = useState(false);\r\n  const [showVideo, setShowVideo] = useState(false);\r\n  const [selectedImageIndex, setSelectedImageIndex] = useState(0);\r\n  const [path, setPath] = useState('');\r\n\r\n  // Fetch property details from API\r\n  useEffect(() => {\r\n    setPath(window.location.pathname);\r\n    const fetchPropertyDetails = async () => {\r\n      setLoading(true);\r\n      setError(\"\");\r\n\r\n      const idParam = searchParams?.get(\"id\") || routeId;\r\n      if (!idParam) {\r\n        // Wait until an id is available (from dynamic route or query)\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const token =\r\n          typeof window !== \"undefined\"\r\n            ? localStorage.getItem(\"token\") || localStorage.getItem(\"authToken\")\r\n            : null;\r\n        const apiUrl = process.env.NEXT_PUBLIC_API_URL || \"\";\r\n        const headers = {\r\n          \"Content-Type\": \"application/json\",\r\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n        };\r\n\r\n        const res = await fetch(\r\n          `${apiUrl}/properties/${encodeURIComponent(String(idParam))}`,\r\n          { headers }\r\n        );\r\n        if (!res.ok) throw new Error(\"Failed to fetch property details\");\r\n\r\n        const responseData = await res.json();\r\n        const propertyData =\r\n          responseData?.data?.property ||\r\n          responseData?.property ||\r\n          responseData?.data ||\r\n          responseData;\r\n\r\n        if (propertyData) {\r\n          // Map API response to expected format\r\n          const mappedProperty = {\r\n            id: propertyData._id || propertyData.id || idParam,\r\n            name: propertyData.title || propertyData.name || \"Property\",\r\n            category:\r\n              propertyData.propertyType ||\r\n              propertyData.type ||\r\n              propertyData.category ||\r\n              \"Property\",\r\n            price: propertyData.price || 0,\r\n            originalPrice:\r\n              propertyData.originalPrice || propertyData.oldPrice || 0,\r\n            discount: propertyData.discount || \"\",\r\n            rating: propertyData.rating || 4.7,\r\n            reviewCount: propertyData.reviewCount || 245,\r\n            image:\r\n              propertyData.images?.[0] ||\r\n              propertyData.image ||\r\n              \"/images/pexels-binyaminmellish-106399.jpg\",\r\n            images: propertyData.images || [\r\n              propertyData.image || \"/images/pexels-binyaminmellish-106399.jpg\",\r\n            ],\r\n            propertyDescription:\r\n              propertyData.propertyDescription ||\r\n              propertyData.description ||\r\n              \"\",\r\n            description:\r\n              propertyData.description ||\r\n              propertyData.propertyDescription ||\r\n              \"Modern property with excellent connectivity and amenities.\",\r\n            bedrooms: propertyData.bedrooms || 3,\r\n            bathrooms: propertyData.bathrooms || 2,\r\n            areaSqft:\r\n              propertyData.propertySize ||\r\n              propertyData.areaSqft ||\r\n              propertyData.area ||\r\n              1450,\r\n            city: propertyData.city || \"Delhi NCR\",\r\n            region: propertyData.region || \"Prime Location\",\r\n            amenities: propertyData.amenities || [],\r\n            nearbyAmenities: propertyData.nearbyAmenities || [],\r\n            features: propertyData.features || [],\r\n            locationBenefits: propertyData.locationBenefits || [],\r\n            status: propertyData.status || \"Available\",\r\n            address: propertyData.address || \"\",\r\n            propertyType:\r\n              propertyData.propertyType || propertyData.type || \"Apartment\",\r\n            subType: propertyData.subType || \"\",\r\n            facing: propertyData.facing || \"East\",\r\n            floor: propertyData.floor || \"5th of 12 floors\",\r\n            maintenance: propertyData.maintenance || \"â‚¹3,000/month\",\r\n            propertyTax: propertyData.propertyTax || \"â‚¹1,200/month\",\r\n            registrationCost:\r\n              propertyData.registrationCost || \"â‚¹50,000 (approx)\",\r\n            loanAvailable: propertyData.loanAvailable !== false,\r\n            pricePerSqft:\r\n              propertyData.pricePerSqft ||\r\n              (propertyData.price && propertyData.areaSqft\r\n                ? Math.round(propertyData.price / propertyData.areaSqft)\r\n                : 0),\r\n            videos: Array.isArray(propertyData.videos) ? propertyData.videos : [],\r\n            // capture possible agent identifiers for downstream fetch\r\n            _raw: propertyData,\r\n          };\r\n          setProduct(mappedProperty);\r\n          setShowVideo(false); // Reset video state when product changes\r\n          setSelectedImageIndex(0); // Reset selected image index when product changes\r\n\r\n          // If broker object is embedded on the property, use it directly\r\n          if (propertyData?.broker && typeof propertyData.broker === \"object\") {\r\n            const b = propertyData.broker;\r\n            const mappedAgent = {\r\n              id: b._id || b.id || \"\",\r\n              name: b.name || b.fullName || b.firmName || \"Agent\",\r\n              phone: b.phone || b.mobile || \"\",\r\n              email: b.email || \"\",\r\n              firm: b.firmName || b.company || \"\",\r\n              image:\r\n                b.brokerImage ||\r\n                b.profileImage ||\r\n                b.avatar ||\r\n                \"/images/user-1.webp\",\r\n              region:\r\n                b.region || propertyData.city || propertyData.region || \"\",\r\n              experience: b.experience || b.experienceYears || \"\",\r\n            };\r\n            setAgent(mappedAgent);\r\n            setBroker(b);\r\n          }\r\n\r\n          // Try to resolve an agent/broker id from the property payload\r\n          const candidateId =\r\n            (typeof propertyData?.createdBy === \"object\" &&\r\n            propertyData.createdBy?._id\r\n              ? propertyData.createdBy._id\r\n              : typeof propertyData?.createdBy === \"string\"\r\n              ? propertyData.createdBy\r\n              : null) ||\r\n            propertyData?.brokerId ||\r\n            propertyData?.agentId ||\r\n            propertyData?.ownerId ||\r\n            propertyData?.userId;\r\n\r\n          if (candidateId) {\r\n            setAgentLoading(true);\r\n            setAgentError(\"\");\r\n            try {\r\n              const brokerRes = await fetch(\r\n                `${apiUrl}/brokers/${encodeURIComponent(String(candidateId))}`,\r\n                { headers }\r\n              );\r\n              if (brokerRes.ok) {\r\n                const brokerJson = await brokerRes.json().catch(() => ({}));\r\n                const brokerData =\r\n                  brokerJson?.data?.broker ||\r\n                  brokerJson?.broker ||\r\n                  brokerJson?.data ||\r\n                  brokerJson;\r\n                if (brokerData) {\r\n                  const mappedAgent = {\r\n                    id: brokerData._id || brokerData.id || candidateId,\r\n                    name:\r\n                      brokerData.name ||\r\n                      brokerData.fullName ||\r\n                      brokerData.firmName ||\r\n                      \"Agent\",\r\n                    phone:\r\n                      brokerData.phone ||\r\n                      brokerData.mobile ||\r\n                      brokerData.contact ||\r\n                      \"\",\r\n                    email: brokerData.email || \"\",\r\n                    firm: brokerData.firmName || brokerData.company || \"\",\r\n                    image:\r\n                      brokerData.brokerImage ||\r\n                      brokerData.profileImage ||\r\n                      brokerData.avatar ||\r\n                      \"/images/user-1.webp\",\r\n                    region: (() => {\r\n                      const r = brokerData.region;\r\n                      if (Array.isArray(r) && r.length > 0) {\r\n                        const first = r[0];\r\n                        return typeof first === \"string\"\r\n                          ? first\r\n                          : first?.name || first?.city || first?.state || \"\";\r\n                      }\r\n                      if (typeof r === \"string\") return r;\r\n                      if (r && typeof r === \"object\")\r\n                        return r.name || r.city || r.state || \"\";\r\n                      return brokerData.city || brokerData.state || \"\";\r\n                    })(),\r\n                    experience:\r\n                      brokerData.experience || brokerData.experienceYears || \"\",\r\n                  };\r\n                  setAgent(mappedAgent);\r\n                  setBroker(brokerData);\r\n                }\r\n              } else {\r\n                setAgentError(\"Failed to fetch agent details\");\r\n              }\r\n            } catch (e) {\r\n              setAgentError(\"Failed to fetch agent details\");\r\n            } finally {\r\n              setAgentLoading(false);\r\n            }\r\n          }\r\n        } else {\r\n          setError(\"Property not found\");\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Error fetching property details:\", err);\r\n        setError(\"Failed to load property details\");\r\n        // Fallback to static data if API fails\r\n        const items = data?.products?.items || [];\r\n        const idNum = Number(idParam);\r\n        const found = items.find((p) => p.id === idNum);\r\n        if (found) {\r\n          setProduct(found);\r\n          setError(\"\");\r\n        }\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchPropertyDetails();\r\n  }, [searchParams, routeId]);\r\n\r\n  // Fetch property ratings\r\n  useEffect(() => {\r\n    const fetchPropertyRatings = async () => {\r\n      if (!product?.id && !product?._id) return;\r\n\r\n      setRatingsLoading(true);\r\n      try {\r\n        const token =\r\n          typeof window !== \"undefined\"\r\n            ? localStorage.getItem(\"token\") || localStorage.getItem(\"authToken\")\r\n            : null;\r\n        const base =\r\n          process.env.NEXT_PUBLIC_API_URL ||\r\n          \"https://broker-adda-be.algofolks.com/api\";\r\n        const headers = {\r\n          \"Content-Type\": \"application/json\",\r\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n        };\r\n\r\n        const propertyId = product?.id || product?._id;\r\n        const ratingsEndpoint = `/property-ratings/property/${encodeURIComponent(\r\n          String(propertyId)\r\n        )}`;\r\n\r\n        const res = await fetch(`${base}${ratingsEndpoint}`, { headers });\r\n        if (!res.ok) {\r\n          throw new Error(`Failed to fetch ratings: ${res.status}`);\r\n        }\r\n\r\n        const data = await res.json();\r\n\r\n        if (data.success && data.data) {\r\n          // Set ratings array\r\n          const ratings = Array.isArray(data.data.ratings)\r\n            ? data.data.ratings\r\n            : [];\r\n          setPropertyRatings(ratings);\r\n\r\n          // Set stats (averageRating, totalRatings, distribution)\r\n          if (data.data.stats) {\r\n            setRatingsStats(data.data.stats);\r\n            console.log(\"Property ratings stats:\", data.data.stats);\r\n            console.log(\r\n              \"Total ratings/comments:\",\r\n              data.data.stats.totalRatings\r\n            );\r\n          }\r\n        } else {\r\n          // If no ratings found, set empty state\r\n          setPropertyRatings([]);\r\n          setRatingsStats(null);\r\n        }\r\n      } catch (e) {\r\n        console.error(\"Error fetching property ratings:\", e);\r\n        setPropertyRatings([]);\r\n        setRatingsStats(null);\r\n      } finally {\r\n        setRatingsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchPropertyRatings();\r\n  }, [product?.id, product?._id]);\r\n\r\n  // Check if property is saved when product loads and user is authenticated\r\n  useEffect(() => {\r\n    const checkSavedStatus = async () => {\r\n      if (!product?.id || !isAuthenticated() || !user?.token) {\r\n        setIsSaved(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const apiUrl = process.env.NEXT_PUBLIC_API_URL || \"\";\r\n        const token = user.token;\r\n        const response = await fetch(`${apiUrl}/saved-properties`, {\r\n          method: \"GET\",\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        });\r\n\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          const savedProperties =\r\n            data?.data?.savedProperties || data?.savedProperties || [];\r\n          const propertyId = product.id || product._id;\r\n          const isPropertySaved = savedProperties.some(\r\n            (sp) =>\r\n              (sp.propertyId?._id || sp.propertyId?.id || sp.propertyId) ===\r\n                propertyId ||\r\n              (sp.property?._id || sp.property?.id || sp.property) ===\r\n                propertyId ||\r\n              sp._id === propertyId\r\n          );\r\n          setIsSaved(isPropertySaved);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error checking saved status:\", error);\r\n      }\r\n    };\r\n\r\n    checkSavedStatus();\r\n  }, [product?.id, isAuthenticated, user?.token]);\r\n\r\n  // Handle wishlist toggle\r\n  const handleWishlistToggle = async () => {\r\n    // Check if user is authenticated\r\n    if (!isAuthenticated() || !user?.token) {\r\n      // Save current URL to redirect back after login\r\n      const currentUrl = window.location.href;\r\n      localStorage.setItem(\"returnUrl\", currentUrl);\r\n      router.push(\"/login\");\r\n      return;\r\n    }\r\n\r\n    if (!product?.id) {\r\n      toast.error(\"Property information not available\");\r\n      return;\r\n    }\r\n\r\n    setSavingProperty(true);\r\n    try {\r\n      const apiUrl = process.env.NEXT_PUBLIC_API_URL || \"\";\r\n      const token = user.token;\r\n      const propertyId = product.id || product._id;\r\n\r\n      if (isSaved) {\r\n        // Remove from saved properties\r\n        const response = await fetch(\r\n          `${apiUrl}/saved-properties/${propertyId}`,\r\n          {\r\n            method: \"DELETE\",\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          }\r\n        );\r\n\r\n        if (response.ok) {\r\n          setIsSaved(false);\r\n          toast.success(\"Property removed from saved list\");\r\n        } else {\r\n          const errorData = await response.json().catch(() => ({}));\r\n          toast.error(errorData.message || \"Failed to remove property\");\r\n        }\r\n      } else {\r\n        // Add to saved properties\r\n        const response = await fetch(`${apiUrl}/saved-properties`, {\r\n          method: \"POST\",\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({ propertyId }),\r\n        });\r\n\r\n        if (response.ok) {\r\n          setIsSaved(true);\r\n          toast.success(\"Property saved successfully\");\r\n        } else {\r\n          const errorData = await response.json().catch(() => ({}));\r\n          toast.error(errorData.message || \"Failed to save property\");\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error toggling wishlist:\", error);\r\n      toast.error(\"Network error. Please try again.\");\r\n    } finally {\r\n      setSavingProperty(false);\r\n    }\r\n  };\r\n\r\n  // Fetch similar properties from API\r\n  useEffect(() => {\r\n    const fetchSimilarProperties = async () => {\r\n      if (!product) {\r\n        console.log('ðŸ“ SimilarProperties: No product, skipping API call');\r\n        return;\r\n      }\r\n\r\n      console.log('ðŸ“ SimilarProperties: Starting fetch, product:', product?.id || product?._id);\r\n      setSimilarLoading(true);\r\n      try {\r\n        const token =\r\n          typeof window !== \"undefined\"\r\n            ? localStorage.getItem(\"token\") || localStorage.getItem(\"authToken\")\r\n            : null;\r\n        const apiUrl = process.env.NEXT_PUBLIC_API_URL || \"\";\r\n        const headers = {\r\n          \"Content-Type\": \"application/json\",\r\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n        };\r\n\r\n        // Get current broker ID to filter out own properties\r\n        let currentBrokerId = '';\r\n        let currentUserId = '';\r\n        if (token) {\r\n          try {\r\n            const payload = JSON.parse(atob(token.split('.')[1]));\r\n            currentUserId = payload.brokerId || payload.userId || payload.id || payload.sub || '';\r\n            \r\n            // Fetch broker details to get the actual broker _id\r\n            if (currentUserId) {\r\n              try {\r\n                const brokerRes = await fetch(`${apiUrl}/brokers/${currentUserId}`, {\r\n                  headers: { 'Content-Type': 'application/json', ...(token ? { Authorization: `Bearer ${token}` } : {}) }\r\n                });\r\n                if (brokerRes.ok) {\r\n                  const brokerData = await brokerRes.json();\r\n                  const broker = brokerData?.data?.broker || brokerData?.broker || brokerData?.data || brokerData;\r\n                  currentBrokerId = broker?._id || broker?.id || '';\r\n                }\r\n              } catch (err) {\r\n                console.error('Error fetching broker details:', err);\r\n              }\r\n            }\r\n          } catch (err) {\r\n            console.error('Error parsing token:', err);\r\n          }\r\n        }\r\n\r\n        // Get coordinates from the opened property\r\n        let latitude = null;\r\n        let longitude = null;\r\n        const propertyData = product._raw || product;\r\n        \r\n        console.log('ðŸ“ SimilarProperties: Property data:', propertyData);\r\n        \r\n        // First, check for direct latitude/longitude fields (most common in API response)\r\n        if (propertyData?.latitude !== undefined && propertyData?.longitude !== undefined) {\r\n          latitude = Number(propertyData.latitude);\r\n          longitude = Number(propertyData.longitude);\r\n          if (Number.isFinite(latitude) && Number.isFinite(longitude)) {\r\n            console.log('ðŸ“ SimilarProperties: Using direct latitude/longitude fields:', latitude, longitude);\r\n          } else {\r\n            latitude = null;\r\n            longitude = null;\r\n          }\r\n        }\r\n        \r\n        // If not found, check for location coordinates in property data\r\n        if (!latitude || !longitude) {\r\n          if (propertyData?.location?.coordinates && Array.isArray(propertyData.location.coordinates) && propertyData.location.coordinates.length >= 2) {\r\n            // GeoJSON Point format: [longitude, latitude] OR API format: [latitude, longitude]\r\n            // Try both formats\r\n            const coords = propertyData.location.coordinates;\r\n            // Check if it's likely [latitude, longitude] (latitude is usually -90 to 90)\r\n            if (Math.abs(coords[0]) <= 90 && Math.abs(coords[1]) <= 180) {\r\n              latitude = coords[0];\r\n              longitude = coords[1];\r\n            } else {\r\n              // GeoJSON format: [longitude, latitude]\r\n              longitude = coords[0];\r\n              latitude = coords[1];\r\n            }\r\n            console.log('ðŸ“ SimilarProperties: Using property location coordinates:', latitude, longitude);\r\n          } else if (propertyData?.region && Array.isArray(propertyData.region) && propertyData.region.length > 0) {\r\n            // Check if region has centerCoordinates\r\n            const firstRegion = propertyData.region[0];\r\n            if (firstRegion?.centerCoordinates && Array.isArray(firstRegion.centerCoordinates) && firstRegion.centerCoordinates.length >= 2) {\r\n              // API format: [latitude, longitude]\r\n              latitude = firstRegion.centerCoordinates[0];\r\n              longitude = firstRegion.centerCoordinates[1];\r\n              console.log('ðŸ“ SimilarProperties: Using region centerCoordinates:', latitude, longitude);\r\n            }\r\n          } else if (propertyData?.region && typeof propertyData.region === 'object' && !Array.isArray(propertyData.region)) {\r\n            // Check if region is a single object with centerCoordinates\r\n            if (propertyData.region?.centerCoordinates && Array.isArray(propertyData.region.centerCoordinates) && propertyData.region.centerCoordinates.length >= 2) {\r\n              latitude = propertyData.region.centerCoordinates[0];\r\n              longitude = propertyData.region.centerCoordinates[1];\r\n              console.log('ðŸ“ SimilarProperties: Using single region centerCoordinates:', latitude, longitude);\r\n            }\r\n          }\r\n        }\r\n        \r\n        if (!latitude || !longitude) {\r\n          console.log('ðŸ“ SimilarProperties: No coordinates found in property data');\r\n        }\r\n\r\n        // Build API URL with coordinates if available\r\n        const params = new URLSearchParams();\r\n        if (latitude && longitude) {\r\n          params.append(\"latitude\", latitude.toString());\r\n          params.append(\"longitude\", longitude.toString());\r\n          // Removed verificationStatus filter - fetch all properties\r\n          console.log('ðŸ“ SimilarProperties: Fetching similar properties with distance filter:', `${apiUrl}/properties?${params.toString()}`);\r\n        } else {\r\n          params.append(\"limit\", \"20\");\r\n          // Removed verificationStatus filter - fetch all properties\r\n          console.log('ðŸ“ SimilarProperties: No coordinates available, fetching all properties:', `${apiUrl}/properties?${params.toString()}`);\r\n        }\r\n\r\n        console.log('ðŸ“ SimilarProperties: Making API call...');\r\n        const res = await fetch(`${apiUrl}/properties?${params.toString()}`, {\r\n          headers,\r\n        });\r\n        console.log(\"ðŸ“ SimilarProperties: API Response status:\", res.status);\r\n\r\n        if (res.ok) {\r\n          const responseData = await res.json();\r\n          console.log(\"Full API Response:\", responseData);\r\n\r\n          // Try different possible response structures\r\n          let properties = [];\r\n          if (responseData?.data?.properties) {\r\n            properties = responseData.data.properties;\r\n          } else if (responseData?.data?.items) {\r\n            properties = responseData.data.items;\r\n          } else if (responseData?.properties) {\r\n            properties = responseData.properties;\r\n          } else if (responseData?.data && Array.isArray(responseData.data)) {\r\n            properties = responseData.data;\r\n          } else if (Array.isArray(responseData)) {\r\n            properties = responseData;\r\n          }\r\n\r\n          console.log(\"Properties found:\", properties.length);\r\n          const currentPropertyId = product.id || product._id;\r\n          console.log(\"Current property ID:\", currentPropertyId);\r\n\r\n          // Filter out current property and logged-in broker's own properties\r\n          const filteredProperties = properties.filter((p) => {\r\n            const propertyId = p._id || p.id;\r\n            \r\n            // Exclude the current property\r\n            if (propertyId === currentPropertyId) {\r\n              return false;\r\n            }\r\n\r\n            // Filter out properties belonging to the logged-in broker\r\n            if (currentBrokerId || currentUserId) {\r\n              let propertyBrokerId = '';\r\n              \r\n              // Check broker field first (most common in API response)\r\n              if (p.broker) {\r\n                if (typeof p.broker === 'string') {\r\n                  propertyBrokerId = p.broker;\r\n                } else if (typeof p.broker === 'object' && p.broker !== null) {\r\n                  propertyBrokerId = p.broker._id || p.broker.id || '';\r\n                }\r\n              }\r\n              \r\n              // If not found, check createdBy, postedBy\r\n              if (!propertyBrokerId) {\r\n                const createdBy = p.createdBy || p.postedBy;\r\n                \r\n                if (createdBy) {\r\n                  if (typeof createdBy === 'string') {\r\n                    propertyBrokerId = createdBy;\r\n                  } else if (typeof createdBy === 'object' && createdBy !== null) {\r\n                    const obj = createdBy;\r\n                    const userId = obj.userId;\r\n                    \r\n                    if (userId && typeof userId === 'object' && userId !== null) {\r\n                      propertyBrokerId = userId._id || userId.id || '';\r\n                    } else if (userId && typeof userId === 'string') {\r\n                      propertyBrokerId = userId;\r\n                    }\r\n                    \r\n                    if (!propertyBrokerId) {\r\n                      propertyBrokerId = obj._id || obj.id || obj.brokerId || '';\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n              \r\n              const brokerIdStr = String(currentBrokerId || '').trim();\r\n              const userIdStr = String(currentUserId || '').trim();\r\n              const propertyBrokerIdStr = String(propertyBrokerId).trim();\r\n              \r\n              const matchesBrokerId = brokerIdStr !== '' && propertyBrokerIdStr === brokerIdStr;\r\n              const matchesUserId = userIdStr !== '' && propertyBrokerIdStr === userIdStr;\r\n              \r\n              // Exclude if matches logged-in broker\r\n              if (matchesBrokerId || matchesUserId) {\r\n                console.log('ðŸ” SimilarProperties: Filtering out own property:', propertyId, 'Broker ID:', propertyBrokerIdStr);\r\n                return false;\r\n              }\r\n            }\r\n\r\n            return true;\r\n          });\r\n\r\n          // Helper function to extract distance (in km)\r\n          const getDistance = (p) => {\r\n            const distance = p.distanceKm ?? p.distance;\r\n            return Number.isFinite(Number(distance)) ? Number(distance) : Infinity;\r\n          };\r\n\r\n          // Sort by distance (closest first)\r\n          const sorted = filteredProperties.sort((a, b) => {\r\n            const distanceA = getDistance(a);\r\n            const distanceB = getDistance(b);\r\n            return distanceA - distanceB; // Ascending order (closest first)\r\n          });\r\n\r\n          // Limit to 4-5 properties\r\n          const limited = sorted.slice(0, 5);\r\n\r\n          // Map to expected format\r\n          const similar = limited.map((p) => ({\r\n            id: p._id || p.id,\r\n            name: p.title || p.name || \"Property\",\r\n            category: p.propertyType || p.type || p.category || \"Property\",\r\n            price: p.price || 0,\r\n            originalPrice: p.originalPrice || p.oldPrice || 0,\r\n            image:\r\n              p.images?.[0] ||\r\n              p.image ||\r\n              \"/images/pexels-binyaminmellish-106399.jpg\",\r\n            areaSqft: p.propertySize || p.areaSqft || p.area || 0,\r\n            bedrooms: p.bedrooms || 0,\r\n            bathrooms: p.bathrooms || 0,\r\n            city: p.city || \"\",\r\n            region: p.region || \"\",\r\n          }));\r\n\r\n          console.log('ðŸ“ SimilarProperties: Showing', similar.length, 'similar properties sorted by distance (excluding own properties)');\r\n          setSimilarProperties(similar);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching similar properties:\", error);\r\n        setSimilarProperties([]);\r\n      } finally {\r\n        setSimilarLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchSimilarProperties();\r\n  }, [product]);\r\n\r\n  // Update scroll button states when similar properties change\r\n  useEffect(() => {\r\n    const carousel = document.getElementById(\"related-properties-carousel\");\r\n    if (carousel) {\r\n      const updateScrollState = () => {\r\n        const { scrollLeft, scrollWidth, clientWidth } = carousel;\r\n        const maxScroll = scrollWidth - clientWidth;\r\n        setCanScrollLeft(scrollLeft > 10);\r\n        setCanScrollRight(scrollLeft < maxScroll - 10);\r\n      };\r\n\r\n      updateScrollState();\r\n      carousel.addEventListener(\"scroll\", updateScrollState);\r\n      return () => carousel.removeEventListener(\"scroll\", updateScrollState);\r\n    }\r\n  }, [similarProperties]);\r\n\r\n  const gallery = useMemo(() => {\r\n    if (!product) return [\"/images/pexels-binyaminmellish-106399.jpg\"];\r\n\r\n    const images = product.images || [product.image];\r\n    // Return at least 6 images (1 main + 5 thumbnails)\r\n    // If we have fewer images, repeat them to ensure we always have enough\r\n    const primary = images[0] || \"/images/pexels-binyaminmellish-106399.jpg\";\r\n    const secondary = images[1] || primary;\r\n    const tertiary = images[2] || primary;\r\n    const fourth = images[3] || primary;\r\n    const fifth = images[4] || primary;\r\n    const sixth = images[5] || primary;\r\n\r\n    return [primary, secondary, tertiary, fourth, fifth, sixth];\r\n  }, [product]);\r\n\r\n  const price = product?.price || 0;\r\n  const originalPrice = product?.originalPrice || 0;\r\n  const discount = product?.discount || \"\";\r\n\r\n  const headerData = {\r\n    title: \"Property Details\",\r\n    description: 'View property information, features, amenities, location details, and pricing.',\r\n    // breadcrumb: [\r\n    //   { label: \"Home\", href: \"/\" },\r\n    //   { label: \"Property Details\", href: \"/property-details\" },\r\n    // ],\r\n  };\r\n\r\n  // Loading state\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen\">\r\n        <HeaderFile data={headerData} />\r\n        <div className=\"py-10\">\r\n          <div className=\"w-full mx-auto\">\r\n            <div className=\"w-full grid grid-cols-1 md:grid-cols-12 gap-6\">\r\n              {/* Left Main Content Skeleton */}\r\n              <section className=\"md:col-span-8 space-y-12\">\r\n                {/* Gallery Skeleton */}\r\n                <div className=\"space-y-4\">\r\n                  {/* Main Large Image */}\r\n                  <div\r\n                    className=\"bg-gray-50 rounded-2xl overflow-hidden relative\"\r\n                    style={{ width: \"100%\", height: \"420px\" }}\r\n                  >\r\n                    <ContentLoader\r\n                      speed={2}\r\n                      width={800}\r\n                      height={420}\r\n                      viewBox=\"0 0 800 420\"\r\n                      backgroundColor=\"#f3f3f3\"\r\n                      foregroundColor=\"#ecebeb\"\r\n                      style={{ width: \"100%\", height: \"100%\" }}\r\n                    >\r\n                      {/* Main image */}\r\n                      <rect\r\n                        x=\"0\"\r\n                        y=\"0\"\r\n                        rx=\"16\"\r\n                        ry=\"16\"\r\n                        width=\"800\"\r\n                        height=\"420\"\r\n                      />\r\n                      {/* Featured badge top-left */}\r\n                      <rect\r\n                        x=\"16\"\r\n                        y=\"16\"\r\n                        rx=\"8\"\r\n                        ry=\"8\"\r\n                        width=\"80\"\r\n                        height=\"32\"\r\n                      />\r\n                      {/* Share button top-right */}\r\n                      <circle cx=\"768\" cy=\"40\" r=\"20\" />\r\n                      {/* Heart button top-right */}\r\n                      <circle cx=\"728\" cy=\"40\" r=\"20\" />\r\n                    </ContentLoader>\r\n                  </div>\r\n\r\n                  {/* Thumbnail Row */}\r\n                  <div className=\"flex gap-3\">\r\n                    {[1, 2, 3, 4, 5].map((i) => (\r\n                      <div\r\n                        key={i}\r\n                        className=\"flex-1\"\r\n                        style={{\r\n                          borderRadius: \"8px\",\r\n                          overflow: \"hidden\",\r\n                          height: \"120px\",\r\n                        }}\r\n                      >\r\n                        <ContentLoader\r\n                          speed={2}\r\n                          width={150}\r\n                          height={120}\r\n                          viewBox=\"0 0 150 120\"\r\n                          backgroundColor=\"#f3f3f3\"\r\n                          foregroundColor=\"#ecebeb\"\r\n                          style={{ width: \"100%\", height: \"100%\" }}\r\n                        >\r\n                          <rect\r\n                            x=\"0\"\r\n                            y=\"0\"\r\n                            rx=\"8\"\r\n                            ry=\"8\"\r\n                            width=\"150\"\r\n                            height=\"120\"\r\n                          />\r\n                        </ContentLoader>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Property Details Skeleton */}\r\n                <div className=\"w-full bg-white rounded-[16px] shadow-xs border border-gray-200 p-4 px-8\">\r\n                  <ContentLoader\r\n                    speed={2}\r\n                    width={600}\r\n                    height={200}\r\n                    viewBox=\"0 0 600 200\"\r\n                    backgroundColor=\"#f3f3f3\"\r\n                    foregroundColor=\"#ecebeb\"\r\n                    style={{ width: \"100%\", height: \"100%\" }}\r\n                  >\r\n                    {/* Title */}\r\n                    <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"150\" height=\"24\" />\r\n\r\n                    {/* 4 detail items in 2x2 grid */}\r\n                    {/* Bedrooms */}\r\n                    <circle cx=\"12\" cy=\"60\" r=\"10\" />\r\n                    <rect x=\"30\" y=\"52\" rx=\"4\" ry=\"4\" width=\"60\" height=\"12\" />\r\n                    <rect x=\"30\" y=\"68\" rx=\"4\" ry=\"4\" width=\"80\" height=\"16\" />\r\n\r\n                    {/* Property Size */}\r\n                    <circle cx=\"312\" cy=\"60\" r=\"10\" />\r\n                    <rect x=\"330\" y=\"52\" rx=\"4\" ry=\"4\" width=\"80\" height=\"12\" />\r\n                    <rect\r\n                      x=\"330\"\r\n                      y=\"68\"\r\n                      rx=\"4\"\r\n                      ry=\"4\"\r\n                      width=\"100\"\r\n                      height=\"16\"\r\n                    />\r\n\r\n                    {/* Listed */}\r\n                    <circle cx=\"12\" cy=\"120\" r=\"10\" />\r\n                    <rect x=\"30\" y=\"112\" rx=\"4\" ry=\"4\" width=\"50\" height=\"12\" />\r\n                    <rect x=\"30\" y=\"128\" rx=\"4\" ry=\"4\" width=\"90\" height=\"16\" />\r\n\r\n                    {/* Price */}\r\n                    <circle cx=\"312\" cy=\"120\" r=\"10\" />\r\n                    <rect\r\n                      x=\"330\"\r\n                      y=\"112\"\r\n                      rx=\"4\"\r\n                      ry=\"4\"\r\n                      width=\"50\"\r\n                      height=\"12\"\r\n                    />\r\n                    <rect\r\n                      x=\"330\"\r\n                      y=\"128\"\r\n                      rx=\"4\"\r\n                      ry=\"4\"\r\n                      width=\"120\"\r\n                      height=\"16\"\r\n                    />\r\n                  </ContentLoader>\r\n                </div>\r\n\r\n                {/* Nearby Amenities Skeleton */}\r\n                <div className=\"w-full bg-white rounded-2xl border border-gray-200 p-6 shadow-sm\">\r\n                  <ContentLoader\r\n                    speed={2}\r\n                    width={600}\r\n                    height={200}\r\n                    viewBox=\"0 0 600 200\"\r\n                    backgroundColor=\"#f3f3f3\"\r\n                    foregroundColor=\"#ecebeb\"\r\n                    style={{ width: \"100%\", height: \"100%\" }}\r\n                  >\r\n                    {/* Title */}\r\n                    <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"150\" height=\"24\" />\r\n\r\n                    {/* Amenity items in 2 columns */}\r\n                    {[0, 1, 2, 3, 4, 5].map((i) => {\r\n                      const row = Math.floor(i / 2);\r\n                      const col = i % 2;\r\n                      const x = col * 280;\r\n                      const y = 40 + row * 30;\r\n                      return (\r\n                        <React.Fragment key={i}>\r\n                          <circle cx={x} cy={y + 6} r=\"3\" />\r\n                          <rect\r\n                            x={x + 10}\r\n                            y={y}\r\n                            rx=\"4\"\r\n                            ry=\"4\"\r\n                            width={120}\r\n                            height=\"12\"\r\n                          />\r\n                        </React.Fragment>\r\n                      );\r\n                    })}\r\n                  </ContentLoader>\r\n                </div>\r\n\r\n                {/* Description Tab Section Skeleton */}\r\n                <div className=\"mt-8 w-full\">\r\n                  {/* Tabs */}\r\n                  <div className=\"inline-flex gap-2 mb-6 bg-gray-100 rounded-md border border-gray-200 p-1\">\r\n                    <ContentLoader\r\n                      speed={2}\r\n                      width={200}\r\n                      height={48}\r\n                      viewBox=\"0 0 200 48\"\r\n                      backgroundColor=\"#f3f3f3\"\r\n                      foregroundColor=\"#ecebeb\"\r\n                    >\r\n                      <rect\r\n                        x=\"24\"\r\n                        y=\"12\"\r\n                        rx=\"6\"\r\n                        ry=\"6\"\r\n                        width=\"80\"\r\n                        height=\"24\"\r\n                      />\r\n                      <rect\r\n                        x=\"112\"\r\n                        y=\"12\"\r\n                        rx=\"6\"\r\n                        ry=\"6\"\r\n                        width=\"60\"\r\n                        height=\"24\"\r\n                      />\r\n                    </ContentLoader>\r\n                  </div>\r\n\r\n                  {/* Tab Content */}\r\n                  <div className=\"rounded-2xl border border-gray-200 shadow-sm p-6\">\r\n                    <ContentLoader\r\n                      speed={2}\r\n                      width={600}\r\n                      height={150}\r\n                      viewBox=\"0 0 600 150\"\r\n                      backgroundColor=\"#f3f3f3\"\r\n                      foregroundColor=\"#ecebeb\"\r\n                      style={{ width: \"100%\", height: \"100%\" }}\r\n                    >\r\n                      <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"600\" height=\"12\" />\r\n                      <rect\r\n                        x=\"0\"\r\n                        y=\"20\"\r\n                        rx=\"4\"\r\n                        ry=\"4\"\r\n                        width=\"570\"\r\n                        height=\"12\"\r\n                      />\r\n                      <rect\r\n                        x=\"0\"\r\n                        y=\"40\"\r\n                        rx=\"4\"\r\n                        ry=\"4\"\r\n                        width=\"540\"\r\n                        height=\"12\"\r\n                      />\r\n                      <rect\r\n                        x=\"0\"\r\n                        y=\"60\"\r\n                        rx=\"4\"\r\n                        ry=\"4\"\r\n                        width=\"510\"\r\n                        height=\"12\"\r\n                      />\r\n                      <rect\r\n                        x=\"0\"\r\n                        y=\"80\"\r\n                        rx=\"4\"\r\n                        ry=\"4\"\r\n                        width=\"600\"\r\n                        height=\"12\"\r\n                      />\r\n                      <rect\r\n                        x=\"0\"\r\n                        y=\"100\"\r\n                        rx=\"4\"\r\n                        ry=\"4\"\r\n                        width=\"552\"\r\n                        height=\"12\"\r\n                      />\r\n                    </ContentLoader>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Key Features and Location Benefits Skeleton */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8 w-full\">\r\n                  <div className=\"bg-white rounded-2xl border border-gray-200 shadow-sm p-6\">\r\n                    <ContentLoader\r\n                      speed={2}\r\n                      width={300}\r\n                      height={180}\r\n                      viewBox=\"0 0 300 180\"\r\n                      backgroundColor=\"#f3f3f3\"\r\n                      foregroundColor=\"#ecebeb\"\r\n                      style={{ width: \"100%\", height: \"100%\" }}\r\n                    >\r\n                      <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"120\" height=\"20\" />\r\n                      {[0, 1, 2, 3].map((i) => (\r\n                        <React.Fragment key={i}>\r\n                          <circle cx=\"12\" cy={40 + i * 32} r=\"10\" />\r\n                          <rect\r\n                            x=\"30\"\r\n                            y={32 + i * 32}\r\n                            rx=\"4\"\r\n                            ry=\"4\"\r\n                            width=\"150\"\r\n                            height=\"12\"\r\n                          />\r\n                        </React.Fragment>\r\n                      ))}\r\n                    </ContentLoader>\r\n                  </div>\r\n\r\n                  <div className=\"bg-white rounded-2xl border border-gray-200 shadow-sm p-6\">\r\n                    <ContentLoader\r\n                      speed={2}\r\n                      width={300}\r\n                      height={180}\r\n                      viewBox=\"0 0 300 180\"\r\n                      backgroundColor=\"#f3f3f3\"\r\n                      foregroundColor=\"#ecebeb\"\r\n                      style={{ width: \"100%\", height: \"100%\" }}\r\n                    >\r\n                      <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"140\" height=\"20\" />\r\n                      {[0, 1, 2, 3].map((i) => (\r\n                        <React.Fragment key={i}>\r\n                          <circle cx=\"12\" cy={40 + i * 32} r=\"10\" />\r\n                          <rect\r\n                            x=\"30\"\r\n                            y={32 + i * 32}\r\n                            rx=\"4\"\r\n                            ry=\"4\"\r\n                            width=\"150\"\r\n                            height=\"12\"\r\n                          />\r\n                        </React.Fragment>\r\n                      ))}\r\n                    </ContentLoader>\r\n                  </div>\r\n                </div>\r\n              </section>\r\n\r\n              {/* Right Sidebar Skeleton */}\r\n              <aside className=\"md:col-span-4 space-y-8\">\r\n                {/* Property Header Skeleton */}\r\n                <div className=\"bg-white rounded-[16px] border border-gray-200 shadow-xs p-6\">\r\n                  <ContentLoader\r\n                    speed={2}\r\n                    width={400}\r\n                    height={250}\r\n                    viewBox=\"0 0 400 250\"\r\n                    backgroundColor=\"#f3f3f3\"\r\n                    foregroundColor=\"#ecebeb\"\r\n                    style={{ width: \"100%\", height: \"100%\" }}\r\n                  >\r\n                    {/* Header */}\r\n                    <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"150\" height=\"24\" />\r\n                    <rect\r\n                      x=\"320\"\r\n                      y=\"4\"\r\n                      rx=\"12\"\r\n                      ry=\"12\"\r\n                      width=\"60\"\r\n                      height=\"20\"\r\n                    />\r\n\r\n                    {/* Title */}\r\n                    <rect x=\"0\" y=\"40\" rx=\"4\" ry=\"4\" width=\"200\" height=\"20\" />\r\n\r\n                    {/* Location lines */}\r\n                    <rect x=\"0\" y=\"70\" rx=\"4\" ry=\"4\" width=\"180\" height=\"14\" />\r\n                    <rect x=\"0\" y=\"90\" rx=\"4\" ry=\"4\" width=\"150\" height=\"14\" />\r\n\r\n                    {/* Price */}\r\n                    <rect x=\"0\" y=\"115\" rx=\"4\" ry=\"4\" width=\"180\" height=\"28\" />\r\n\r\n                    {/* Buttons */}\r\n                    <rect\r\n                      x=\"0\"\r\n                      y=\"160\"\r\n                      rx=\"6\"\r\n                      ry=\"6\"\r\n                      width=\"100%\"\r\n                      height=\"40\"\r\n                    />\r\n                    <rect\r\n                      x=\"0\"\r\n                      y=\"210\"\r\n                      rx=\"6\"\r\n                      ry=\"6\"\r\n                      width=\"100%\"\r\n                      height=\"40\"\r\n                    />\r\n                  </ContentLoader>\r\n                </div>\r\n\r\n                {/* Agent Details Skeleton */}\r\n                <div className=\"border border-gray-200 p-6 w-full bg-white rounded-[16px] shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F]\">\r\n                  <ContentLoader\r\n                    speed={2}\r\n                    width={400}\r\n                    height={180}\r\n                    viewBox=\"0 0 400 180\"\r\n                    backgroundColor=\"#f3f3f3\"\r\n                    foregroundColor=\"#ecebeb\"\r\n                    style={{ width: \"100%\", height: \"100%\" }}\r\n                  >\r\n                    {/* Title */}\r\n                    <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"120\" height=\"24\" />\r\n\r\n                    {/* Avatar */}\r\n                    <circle cx=\"24\" cy=\"50\" r=\"24\" />\r\n\r\n                    {/* Name and details */}\r\n                    <rect x=\"60\" y=\"40\" rx=\"4\" ry=\"4\" width=\"140\" height=\"16\" />\r\n                    <rect x=\"60\" y=\"62\" rx=\"4\" ry=\"4\" width=\"100\" height=\"12\" />\r\n                    <rect x=\"60\" y=\"80\" rx=\"4\" ry=\"4\" width=\"180\" height=\"12\" />\r\n\r\n                    {/* Chat button */}\r\n                    <rect\r\n                      x=\"0\"\r\n                      y=\"110\"\r\n                      rx=\"10\"\r\n                      ry=\"10\"\r\n                      width=\"100%\"\r\n                      height=\"40\"\r\n                    />\r\n                  </ContentLoader>\r\n                </div>\r\n\r\n                {/* Property Rating Skeleton */}\r\n                <div className=\"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm\">\r\n                  <ContentLoader\r\n                    speed={2}\r\n                    width={400}\r\n                    height={150}\r\n                    viewBox=\"0 0 400 150\"\r\n                    backgroundColor=\"#f3f3f3\"\r\n                    foregroundColor=\"#ecebeb\"\r\n                    style={{ width: \"100%\", height: \"100%\" }}\r\n                  >\r\n                    {/* Title */}\r\n                    <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"140\" height=\"24\" />\r\n\r\n                    {/* Rating number and stars */}\r\n                    <rect x=\"150\" y=\"40\" rx=\"4\" ry=\"4\" width=\"60\" height=\"36\" />\r\n                    {[0, 1, 2, 3, 4].map((i) => (\r\n                      <circle key={i} cx={220 + i * 30} cy=\"58\" r=\"12\" />\r\n                    ))}\r\n\r\n                    {/* Review count */}\r\n                    <rect\r\n                      x=\"130\"\r\n                      y=\"90\"\r\n                      rx=\"4\"\r\n                      ry=\"4\"\r\n                      width=\"140\"\r\n                      height=\"14\"\r\n                    />\r\n                  </ContentLoader>\r\n                </div>\r\n\r\n\r\n                {/* Virtual Tour Skeleton */}\r\n                <div className=\"w-full h-[232px] bg-[#EDFDF4] rounded-[16px] shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F]\">\r\n                  <ContentLoader\r\n                    speed={2}\r\n                    width={400}\r\n                    height={232}\r\n                    viewBox=\"0 0 400 232\"\r\n                    backgroundColor=\"#e0f2e9\"\r\n                    foregroundColor=\"#c8e6d5\"\r\n                    style={{ width: \"100%\", height: \"100%\" }}\r\n                  >\r\n                    {/* Video icon */}\r\n                    <circle cx=\"200\" cy=\"90\" r=\"24\" />\r\n                    {/* Title */}\r\n                    <rect\r\n                      x=\"140\"\r\n                      y=\"130\"\r\n                      rx=\"4\"\r\n                      ry=\"4\"\r\n                      width=\"120\"\r\n                      height=\"20\"\r\n                    />\r\n                    {/* Subtitle */}\r\n                    <rect\r\n                      x=\"80\"\r\n                      y=\"158\"\r\n                      rx=\"4\"\r\n                      ry=\"4\"\r\n                      width=\"240\"\r\n                      height=\"14\"\r\n                    />\r\n                    {/* Button */}\r\n                    <rect\r\n                      x=\"150\"\r\n                      y=\"185\"\r\n                      rx=\"6\"\r\n                      ry=\"6\"\r\n                      width=\"100\"\r\n                      height=\"40\"\r\n                    />\r\n                  </ContentLoader>\r\n                </div>\r\n              </aside>\r\n            </div>\r\n\r\n            {/* Related Properties Skeleton */}\r\n            <div className=\"mt-12 w-full\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <ContentLoader\r\n                  speed={2}\r\n                  width={180}\r\n                  height={32}\r\n                  viewBox=\"0 0 180 32\"\r\n                  backgroundColor=\"#f3f3f3\"\r\n                  foregroundColor=\"#ecebeb\"\r\n                >\r\n                  <rect x=\"0\" y=\"4\" rx=\"4\" ry=\"4\" width=\"150\" height=\"24\" />\r\n                </ContentLoader>\r\n                <ContentLoader\r\n                  speed={2}\r\n                  width={80}\r\n                  height={32}\r\n                  viewBox=\"0 0 80 32\"\r\n                  backgroundColor=\"#f3f3f3\"\r\n                  foregroundColor=\"#ecebeb\"\r\n                >\r\n                  <rect x=\"0\" y=\"0\" rx=\"8\" ry=\"8\" width=\"80\" height=\"32\" />\r\n                </ContentLoader>\r\n              </div>\r\n\r\n              <div className=\"flex gap-6 min-w-0 pb-2\">\r\n                {[1, 2, 3, 4].map((i) => (\r\n                  <div\r\n                    key={i}\r\n                    className=\"flex-shrink-0 w-80 bg-white rounded-2xl border border-gray-200 shadow-sm p-6\"\r\n                  >\r\n                    <ContentLoader\r\n                      speed={2}\r\n                      width={320}\r\n                      height={280}\r\n                      viewBox=\"0 0 320 280\"\r\n                      backgroundColor=\"#f3f3f3\"\r\n                      foregroundColor=\"#ecebeb\"\r\n                    >\r\n                      {/* Image */}\r\n                      <rect\r\n                        x=\"0\"\r\n                        y=\"0\"\r\n                        rx=\"8\"\r\n                        ry=\"8\"\r\n                        width=\"320\"\r\n                        height=\"200\"\r\n                      />\r\n                      {/* Category */}\r\n                      <rect\r\n                        x=\"0\"\r\n                        y=\"220\"\r\n                        rx=\"4\"\r\n                        ry=\"4\"\r\n                        width=\"80\"\r\n                        height=\"12\"\r\n                      />\r\n                      {/* Name */}\r\n                      <rect\r\n                        x=\"0\"\r\n                        y=\"240\"\r\n                        rx=\"4\"\r\n                        ry=\"4\"\r\n                        width=\"200\"\r\n                        height=\"16\"\r\n                      />\r\n                      {/* Details */}\r\n                      <rect\r\n                        x=\"0\"\r\n                        y=\"262\"\r\n                        rx=\"4\"\r\n                        ry=\"4\"\r\n                        width=\"150\"\r\n                        height=\"12\"\r\n                      />\r\n                      {/* Price */}\r\n                      <rect\r\n                        x=\"0\"\r\n                        y=\"278\"\r\n                        rx=\"4\"\r\n                        ry=\"4\"\r\n                        width=\"120\"\r\n                        height=\"14\"\r\n                      />\r\n                    </ContentLoader>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Error state\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen\">\r\n        <HeaderFile data={headerData} />\r\n        <div className=\"py-10\">\r\n          <div className=\"w-full mx-auto\">\r\n            <div className=\"flex items-center justify-center min-h-[400px]\">\r\n              <div className=\"text-center\">\r\n                <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                  <svg\r\n                    className=\"w-8 h-8 text-red-600\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth=\"2\"\r\n                      d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"\r\n                    />\r\n                  </svg>\r\n                </div>\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\r\n                  Error Loading Property\r\n                </h3>\r\n                <p className=\"text-gray-600 mb-4\">{error}</p>\r\n                <button\r\n                  onClick={() => window.location.reload()}\r\n                  className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\r\n                >\r\n                  Try Again\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // No property found\r\n  if (!product) {\r\n    return (\r\n      <div className=\"min-h-screen\">\r\n        <HeaderFile data={headerData} />\r\n        <div className=\"py-10\">\r\n          <div className=\"w-full mx-auto\">\r\n            <div className=\"flex items-center justify-center min-h-[400px]\">\r\n              <div className=\"text-center\">\r\n                <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                  <svg\r\n                    className=\"w-8 h-8 text-gray-600\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth=\"2\"\r\n                      d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\"\r\n                    />\r\n                  </svg>\r\n                </div>\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\r\n                  Property Not Found\r\n                </h3>\r\n                <p className=\"text-gray-600 mb-4\">\r\n                  The property you're looking for doesn't exist or has been\r\n                  removed.\r\n                </p>\r\n                <Link\r\n                  href=\"/properties\"\r\n                  className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\r\n                >\r\n                  Browse Properties\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen\">\r\n      <Toaster\r\n        position=\"top-right\"\r\n        toastOptions={{\r\n          duration: 4000,\r\n          style: {\r\n            background: \"#363636\",\r\n            color: \"#fff\",\r\n          },\r\n          success: {\r\n            duration: 3000,\r\n            iconTheme: {\r\n              primary: \"#4ade80\",\r\n              secondary: \"#fff\",\r\n            },\r\n          },\r\n          error: {\r\n            duration: 4000,\r\n            iconTheme: {\r\n              primary: \"#ef4444\",\r\n              secondary: \"#fff\",\r\n            },\r\n          },\r\n        }}\r\n      />\r\n      <HeaderFile data={headerData} />\r\n      <div className=\"py-10\">\r\n        <div className=\"w-full mx-auto\">\r\n          <div className=\"w-full grid grid-cols-1 md:grid-cols-12 gap-6 items-start\">\r\n            {/* Left Main Content */}\r\n            <section className=\"md:col-span-8 space-y-12\">\r\n              {/* Property Overview Card */}\r\n              <div className=\" space-y-6\">\r\n                {/* <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"inline-block h-0.5 w-8 rounded bg-yellow-400\"></span>\r\n                   <h2 className=\"text-xl font-semibold text-gray-900\">Property Overview</h2>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                   <span className=\"px-2 py-1 rounded-full bg-blue-100 text-blue-800 text-sm font-medium\">Available</span>\r\n                   <span className=\"px-2 py-1 rounded-full bg-orange-100 text-orange-800 text-sm font-medium\">New Listing</span>\r\n            </div>\r\n          </div> */}\r\n\r\n                <div className=\"space-y-4\">\r\n                  {/* Main Large Image */}\r\n                  <div className=\"bg-gray-50 rounded-2xl overflow-hidden relative group\">\r\n                    <img\r\n                      src={gallery[selectedImageIndex]}\r\n                      alt=\"Property\"\r\n                      className=\"w-full h-[360px] md:h-[420px] object-cover group-hover:scale-105 transition-transform duration-500\"\r\n                    />\r\n                    <div className=\"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\"></div>\r\n                    <div className=\"absolute top-4 left-4 flex gap-2\">\r\n                      <span className=\"px-3 py-1.5  backdrop-blur-sm text-white text-sm font-medium rounded-lg \">\r\n                        Featured\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"absolute top-4 right-4 flex gap-2\">\r\n                      <button\r\n                        onClick={() => {\r\n                          // Get current page URL\r\n                          const currentUrl =\r\n                            typeof window !== \"undefined\"\r\n                              ? window.location.href\r\n                              : \"\";\r\n                          const propertyTitle = product?.name || \"Property\";\r\n                          const propertyDescription =\r\n                            product?.description ||\r\n                            product?.propertyDescription ||\r\n                            \"Check out this property\";\r\n\r\n                          // Facebook share URL\r\n                          const facebookShareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(\r\n                            currentUrl\r\n                          )}&quote=${encodeURIComponent(\r\n                            `${propertyTitle} - ${propertyDescription}`\r\n                          )}`;\r\n\r\n                          // Open Facebook share dialog in a new window\r\n                          window.open(\r\n                            facebookShareUrl,\r\n                            \"facebook-share-dialog\",\r\n                            \"width=626,height=436\"\r\n                          );\r\n                        }}\r\n                        className=\"w-[40px] h-[40px] px-[10px] flex items-center justify-center text-[#171A1F] bg-white/80 backdrop-blur-sm opacity-100 border-none rounded-full hover:text-[#171A1F] hover:bg-white/80 active:text-[#171A1F] active:bg-white/80 disabled:opacity-40 transition-colors\"\r\n                        title=\"Share on Facebook\"\r\n                      >\r\n                        <svg\r\n                          className=\"w-5 h-5\"\r\n                          fill=\"none\"\r\n                          stroke=\"currentColor\"\r\n                          viewBox=\"0 0 24 24\"\r\n                        >\r\n                          <path\r\n                            strokeLinecap=\"round\"\r\n                            strokeLinejoin=\"round\"\r\n                            strokeWidth=\"2\"\r\n                            d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z\"\r\n                          />\r\n                        </svg>\r\n                      </button>\r\n                      <button\r\n                        onClick={handleWishlistToggle}\r\n                        disabled={savingProperty}\r\n                        className={`w-[40px] h-[40px] px-[10px] flex items-center justify-center bg-white/80 backdrop-blur-sm opacity-100 border-none rounded-full hover:text-[#171A1F] hover:bg-white/80 active:text-[#171A1F] active:bg-white/80 disabled:opacity-40 transition-colors ${\r\n                          isSaved ? \"text-red-500\" : \"text-[#171A1F]\"\r\n                        }`}\r\n                        title={isSaved ? \"Remove from saved\" : \"Save property\"}\r\n                      >\r\n                        {isSaved ? (\r\n                          <svg\r\n                            className=\"w-5 h-5\"\r\n                            fill=\"currentColor\"\r\n                            viewBox=\"0 0 24 24\"\r\n                          >\r\n                            <path d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\" />\r\n                          </svg>\r\n                        ) : (\r\n                          <svg\r\n                            className=\"w-5 h-5\"\r\n                            fill=\"none\"\r\n                            stroke=\"currentColor\"\r\n                            viewBox=\"0 0 24 24\"\r\n                          >\r\n                            <path\r\n                              strokeLinecap=\"round\"\r\n                              strokeLinejoin=\"round\"\r\n                              strokeWidth=\"2\"\r\n                              d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\r\n                            />\r\n                          </svg>\r\n                        )}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Thumbnail Row */}\r\n                  <div className=\"flex gap-3\">\r\n                    {gallery.slice(1, 6).map((img, index) => {\r\n                      const thumbnailIndex = index + 1; // +1 because we're slicing from index 1\r\n                      const isSelected = selectedImageIndex === thumbnailIndex;\r\n                      return (\r\n                        <div\r\n                          key={index}\r\n                          onClick={() => setSelectedImageIndex(thumbnailIndex)}\r\n                          className={`flex-1 bg-gray-50 overflow-hidden relative group cursor-pointer transition-all duration-300 ${\r\n                            isSelected ? 'ring-2 ring-[#0D542B] ring-offset-2' : ''\r\n                          }`}\r\n                          style={{ borderRadius: \"8px\" }}\r\n                        >\r\n                          <img\r\n                            src={img}\r\n                            alt={`Thumbnail ${index + 1}`}\r\n                            className={`w-full h-[120px] object-cover group-hover:scale-105 transition-transform duration-300 ${\r\n                              isSelected ? 'opacity-100' : 'opacity-90'\r\n                            }`}\r\n                            style={{ borderRadius: \"8px\" }}\r\n                          />\r\n                          {isSelected && (\r\n                            <div className=\"absolute inset-0 bg-[#0D542B]/10 pointer-events-none\" style={{ borderRadius: \"8px\" }}></div>\r\n                          )}\r\n                        </div>\r\n                      );\r\n                    })}\r\n                    {/* If we have more than 5 images, show placeholder with count */}\r\n                    {gallery.length > 6 && (\r\n                      <div\r\n                        className=\"flex-1 bg-gray-50 overflow-hidden relative group cursor-pointer border-2 border-dashed border-gray-300 flex items-center justify-center\"\r\n                        style={{ borderRadius: \"8px\" }}\r\n                      >\r\n                        <span className=\"text-sm font-medium text-gray-500\">\r\n                          +{gallery.length - 6} More\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Property Details Grid */}\r\n                <div className=\"space-y-4 w-full bg-white rounded-[16px] shadow-xs border border-gray-200 p-4 px-8\">\r\n                  <div className=\"flex items-center gap-2 \">\r\n                    {/* <span className=\"inline-block h-0.5 w-6 rounded bg-yellow-400\"></span> */}\r\n                    <h3 className=\"text-[18px] leading-[28px] font-semibold text-[#171A1F]\">\r\n                      Property Details\r\n                    </h3>\r\n                  </div>\r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-5 text-sm\">\r\n                    <div className=\"flex items-start gap-3\">\r\n                      <span className=\"mt-3 justify-center\">\r\n                        <svg\r\n                          className=\"w-[20px] h-[20px]  text-[#565D6D]\"\r\n                          viewBox=\"0 0 24 24\"\r\n                          fill=\"none\"\r\n                          stroke=\"currentColor\"\r\n                          strokeWidth=\"2\"\r\n                        >\r\n                          <rect x=\"3\" y=\"10\" width=\"18\" height=\"7\" rx=\"1\" />\r\n                          <path d=\"M7 10V7a2 2 0 012-2h6a2 2 0 012 2v3\" />\r\n                        </svg>\r\n                      </span>\r\n                      <div>\r\n                        <div className=\"font-inter text-[12px] leading-[20px] font-normal text-[#565D6D]\">\r\n                          Bedrooms\r\n                        </div>\r\n                        <div className=\"font-inter text-[14px] leading-[24px] font-medium text-[#171A1F]\">\r\n                          {product.bedrooms} BHK\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex items-start gap-3\">\r\n                      <span className=\" justify-center mt-3\">\r\n                        <svg\r\n                          className=\"w-[20px] h-[20px]  text-[#565D6D]\"\r\n                          viewBox=\"0 0 24 24\"\r\n                          fill=\"none\"\r\n                          stroke=\"currentColor\"\r\n                          strokeWidth=\"2\"\r\n                        >\r\n                          <rect x=\"3\" y=\"6\" width=\"18\" height=\"12\" rx=\"2\" />\r\n                        </svg>\r\n                      </span>\r\n                      <div>\r\n                        <div className=\"font-inter text-[12px] leading-[20px] font-normal text-[#565D6D]\">\r\n                          Built-up Area\r\n                        </div>\r\n                        <div className=\"font-inter text-[14px] leading-[24px] font-medium text-[#171A1F]\">\r\n                          {product.areaSqft?.toLocaleString(\"en-IN\")} sq.ft\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    {/* <div className=\"flex items-start gap-3\">\r\n  <span className=\"mt-3 flex items-center justify-center\">\r\n   \r\n    <img\r\n      src=\"/images/lucide-SquareStack-Outlined.svg\"\r\n      alt=\"size icon\"\r\n      className=\"w-[20px] h-[20px]\"\r\n    />\r\n  </span>\r\n  <div>\r\n    <div className=\"font-inter text-[14px] leading-[20px] font-normal text-[#565D6D]\">Size</div>\r\n    <div className=\"font-inter text-[16px] leading-[24px] font-medium text-[#171A1F]\">\r\n      {product?.createdAt ? new Date(product.createdAt).toLocaleDateString() : '3 days ago'}\r\n    </div>\r\n  </div>\r\n</div> */}\r\n                    <div className=\"flex items-start gap-3\">\r\n                      <span className=\"mt-3 justify-center\">\r\n                        <svg\r\n                          className=\"w-[20px] h-[20px]  text-[#565D6D]\"\r\n                          viewBox=\"0 0 24 24\"\r\n                          fill=\"none\"\r\n                          stroke=\"currentColor\"\r\n                          strokeWidth=\"2\"\r\n                        >\r\n                          <circle cx=\"12\" cy=\"12\" r=\"9\" />\r\n                          <path d=\"M12 7v5l3 3\" />\r\n                        </svg>\r\n                      </span>\r\n                      <div>\r\n                        <div className=\"font-inter text-[12px] leading-[20px] font-normal text-[#565D6D]\">\r\n                          Listed\r\n                        </div>\r\n                        <div className=\"font-inter text-[14px] leading-[24px] font-medium text-[#171A1F]\">\r\n                          {product?.createdAt\r\n                            ? new Date(product.createdAt).toLocaleDateString()\r\n                            : \"3 days ago\"}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex items-start gap-3\">\r\n                      <span className=\"mt-3 justify-center\">\r\n                        <svg\r\n                          className=\"w-[20px] h-[20px]  text-[#565D6D]\"\r\n                          viewBox=\"0 0 24 24\"\r\n                          fill=\"none\"\r\n                          stroke=\"currentColor\"\r\n                          strokeWidth=\"2\"\r\n                        >\r\n                          <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"23\" />\r\n                          <path d=\"M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6\" />\r\n                        </svg>\r\n                      </span>\r\n                      <div>\r\n                        <div className=\"font-inter text-[12px] leading-[20px] font-normal text-[#565D6D]\">\r\n                          Price\r\n                        </div>\r\n                        <div className=\"font-inter text-[14px] leading-[24px] font-medium text-[#171A1F]\">\r\n                          â‚¹{formatPrice(price)}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Divider */}\r\n                {/* <div className=\"border-t border-gray-100\"></div> */}\r\n              </div>\r\n\r\n              {/* Neighborhood Section - Compact Design */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 w-full\">\r\n                {/* Nearby Amenities */}\r\n                <div className=\"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm\">\r\n                  {/* Header */}\r\n                  <h3 className=\"font-inter text-[18px] leading-[28px] font-semibold text-[#171A1F] mb-4\">\r\n                    Nearby Amenities\r\n                  </h3>\r\n\r\n                  {/* Amenities */}\r\n                  {product?.nearbyAmenities?.length ? (\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                      {product.nearbyAmenities.map((item, idx) => (\r\n                        <span\r\n                          key={idx}\r\n                          className=\"inline-flex items-center px-3 py-1.5 rounded-full bg-gray-100 text-gray-700 font-inter text-[12px] leading-[20px] font-medium border border-gray-300\"\r\n                        >\r\n                          {item}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"text-sm text-gray-500\">\r\n                      No nearby amenities listed.\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Amenities */}\r\n                <div className=\"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm\">\r\n                  {/* Header */}\r\n                  <h3 className=\"font-inter text-[18px] leading-[28px] font-semibold text-[#171A1F] mb-4\">\r\n                    Amenities\r\n                  </h3>\r\n\r\n                  {/* Amenities */}\r\n                  {product?.amenities?.length ? (\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                      {product.amenities.map((item, idx) => (\r\n                        <span\r\n                          key={idx}\r\n                          className=\"inline-flex items-center px-3 py-1.5 rounded-full bg-gray-100 text-gray-700 font-inter text-[12px] leading-[20px] font-medium border border-gray-300\"\r\n                        >\r\n                          {item}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"text-sm text-gray-500\">\r\n                      No amenities listed.\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Key Features and Location Benefits - Outside the tabs */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8 w-full\">\r\n                <div className=\"bg-white rounded-2xl border border-gray-200 shadow-sm p-6\">\r\n                  <h4 className=\"font-bold text-gray-900 mb-6 text-[18px]\">\r\n                    Key Features\r\n                  </h4>\r\n                  <div className=\"flex flex-wrap gap-2\">\r\n                    {(product?.features && product.features.length > 0\r\n                      ? product.features\r\n                      : [\"Corner Unit\", \"Park Facing\"]\r\n                    ).map((item) => (\r\n                      <span\r\n                        key={item}\r\n                        className=\"inline-flex items-center px-3 py-1.5 rounded-full bg-gray-100 text-gray-700 font-inter text-[12px] leading-[20px] font-medium border border-gray-300\"\r\n                      >\r\n                        {item}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"bg-white rounded-2xl border border-gray-200 shadow-sm p-6\">\r\n                  <h4 className=\"font-bold text-gray-900 mb-6 text-[18px]\">\r\n                    Location Benefits\r\n                  </h4>\r\n                  <div className=\"flex flex-wrap gap-2\">\r\n                    {(product?.locationBenefits &&\r\n                    product.locationBenefits.length > 0\r\n                      ? product.locationBenefits\r\n                      : [\"Near IT Park\", \"Easy Highway Access\"]\r\n                    ).map((item) => (\r\n                      <span\r\n                        key={item}\r\n                        className=\"inline-flex items-center px-3 py-1.5 rounded-full bg-gray-100 text-gray-700 font-inter text-[12px] leading-[20px] font-medium border border-gray-300\"\r\n                      >\r\n                        {item}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Property Details Tabs Section */}\r\n              <div className=\"mt-8 w-full\">\r\n                {/* Tabs */}\r\n                <div className=\"inline-flex gap-2 mb-6 bg-gray-100 rounded-md border border-gray-200 \">\r\n                  {TABS.map((tab, idx) => (\r\n                    <button\r\n                      key={tab.label}\r\n                      onClick={() => setActiveTab(idx)}\r\n                      className={`px-6 py-3 text-base font-medium focus:outline-none transition-all rounded-md ${\r\n                        activeTab === idx\r\n                          ? \"text-[#171A1F] bg-[#E6F7ED]\"\r\n                          : \"text-[#565D6D] hover:text-[#171A1F]\"\r\n                      }`}\r\n                    >\r\n                      {tab.label}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n\r\n                {/* Tab Content */}\r\n                <div className=\" rounded-2xl border border-gray-200 shadow-sm p-6\">\r\n                  <div className=\"pt-2\">\r\n                    {activeTab === 0 && (\r\n                      <div className=\"space-y-8\">\r\n                        <div>\r\n                          <div className=\"flex items-center gap-2 mb-6\">\r\n                            {/* <span className=\"inline-block h-0.5 w-8 rounded bg-yellow-400\"></span>\r\n                          <h3 className=\"text-xl font-bold text-gray-900\">Property Description</h3> */}\r\n                          </div>\r\n                          <div className=\"prose prose-gray max-w-none\">\r\n                            {(product?.propertyDescription ||\r\n                              product?.description) && (\r\n                              <p className=\"w-full font-inter text-[12px] leading-[24px] font-normal text-[#565D6D] mb-4\">\r\n                                {product.propertyDescription ||\r\n                                  product.description}\r\n                              </p>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {activeTab === 1 && <></>}\r\n\r\n                    {activeTab === 1 && (\r\n                      <div className=\"space-y-8\">\r\n                        <div>\r\n                          <div className=\"flex items-center gap-2 mb-6\">\r\n                            <span className=\"inline-block h-0.5 w-8 rounded bg-yellow-400\"></span>\r\n                            <h3 className=\"text-[18px] font-bold text-gray-900\">\r\n                              Reviews & Ratings\r\n                            </h3>\r\n                          </div>\r\n\r\n                          {/* Overall Rating */}\r\n                          <div className=\"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-8 mb-8\">\r\n                            <div className=\"flex flex-col md:flex-row gap-8 items-center\">\r\n                              <div className=\"text-center md:text-left\">\r\n                                <div className=\"text-6xl font-bold text-gray-900 mb-2\">\r\n                                  {ratingsStats?.averageRating\r\n                                    ? ratingsStats.averageRating.toFixed(1)\r\n                                    : (product?.rating || 0).toFixed(1)}\r\n                                </div>\r\n                                <div className=\"flex items-center justify-center md:justify-start gap-1 mb-2\">\r\n                                  {[...Array(5)].map((_, i) => {\r\n                                    const avgRating =\r\n                                      ratingsStats?.averageRating ||\r\n                                      product?.rating ||\r\n                                      0;\r\n                                    return (\r\n                                      <svg\r\n                                        key={i}\r\n                                        className={`w-6 h-6 ${\r\n                                          i < Math.round(avgRating)\r\n                                            ? \"text-yellow-400\"\r\n                                            : \"text-gray-300\"\r\n                                        }`}\r\n                                        fill=\"currentColor\"\r\n                                        viewBox=\"0 0 20 20\"\r\n                                      >\r\n                                        <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\r\n                                      </svg>\r\n                                    );\r\n                                  })}\r\n                                </div>\r\n                                <div className=\"text-[14px] text-gray-600 mb-1\">\r\n                                  {(() => {\r\n                                    const avg =\r\n                                      ratingsStats?.averageRating ||\r\n                                      product?.rating ||\r\n                                      0;\r\n                                    if (avg >= 4.5) return \"Excellent\";\r\n                                    if (avg >= 3.5) return \"Very Good\";\r\n                                    if (avg >= 2.5) return \"Good\";\r\n                                    if (avg >= 1.5) return \"Fair\";\r\n                                    return \"Poor\";\r\n                                  })()}\r\n                                </div>\r\n                                <div className=\"text-[12px] text-gray-500\">\r\n                                  Based on{\" \"}\r\n                                  {ratingsStats?.totalRatings ||\r\n                                    propertyRatings?.length ||\r\n                                    0}{\" \"}\r\n                                  {ratingsStats?.totalRatings === 1\r\n                                    ? \"review\"\r\n                                    : \"reviews\"}\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"flex-1 w-full\">\r\n                                {[5, 4, 3, 2, 1].map((star) => {\r\n                                  const distribution =\r\n                                    ratingsStats?.distribution || {};\r\n                                  const count = distribution[star] || 0;\r\n                                  const total =\r\n                                    ratingsStats?.totalRatings ||\r\n                                    propertyRatings?.length ||\r\n                                    1;\r\n                                  const percentage =\r\n                                    total > 0\r\n                                      ? Math.round((count / total) * 100)\r\n                                      : 0;\r\n                                  return (\r\n                                    <div\r\n                                      key={star}\r\n                                      className=\"flex items-center gap-3 mb-3\"\r\n                                    >\r\n                                      <span className=\"w-12 text-gray-700 text-[12px] font-medium\">\r\n                                        {star} Star\r\n                                      </span>\r\n                                      <div className=\"flex-1 h-3 bg-gray-200 rounded-full overflow-hidden\">\r\n                                        <div\r\n                                          className=\"h-3 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full transition-all duration-500\"\r\n                                          style={{ width: `${percentage}%` }}\r\n                                        ></div>\r\n                                      </div>\r\n                                      <span className=\"text-[12px] text-gray-600 w-8 text-right\">\r\n                                        {percentage}%\r\n                                      </span>\r\n                                    </div>\r\n                                  );\r\n                                })}\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          {/* Individual Reviews */}\r\n                          <div className=\"space-y-6\">\r\n                            <h4 className=\"text-[18px] font-bold text-gray-900 mb-4\">\r\n                              Recent Reviews\r\n                            </h4>\r\n                            {ratingsLoading ? (\r\n                              <div className=\"text-center py-8\">\r\n                                <div className=\"text-gray-400\">\r\n                                  Loading reviews...\r\n                                </div>\r\n                              </div>\r\n                            ) : propertyRatings &&\r\n                              propertyRatings.length > 0 ? (\r\n                              <>\r\n                                {propertyRatings.map((review) => {\r\n                                  const userName =\r\n                                    review.userId?.name || \"Anonymous\";\r\n                                  const userInitials = userName\r\n                                    .split(\" \")\r\n                                    .map((n) => n[0])\r\n                                    .join(\"\")\r\n                                    .toUpperCase()\r\n                                    .slice(0, 2);\r\n                                  const reviewDate = review.createdAt\r\n                                    ? new Date(review.createdAt)\r\n                                    : null;\r\n                                  const formatDate = (date) => {\r\n                                    if (!date) return \"Recently\";\r\n                                    const now = new Date();\r\n                                    const diffTime = Math.abs(now - date);\r\n                                    const diffDays = Math.floor(\r\n                                      diffTime / (1000 * 60 * 60 * 24)\r\n                                    );\r\n                                    if (diffDays === 0) return \"Today\";\r\n                                    if (diffDays === 1) return \"Yesterday\";\r\n                                    if (diffDays < 7)\r\n                                      return `${diffDays} days ago`;\r\n                                    if (diffDays < 30)\r\n                                      return `${Math.floor(\r\n                                        diffDays / 7\r\n                                      )} weeks ago`;\r\n                                    if (diffDays < 365)\r\n                                      return `${Math.floor(\r\n                                        diffDays / 30\r\n                                      )} months ago`;\r\n                                    return date.toLocaleDateString();\r\n                                  };\r\n\r\n                                  return (\r\n                                    <div\r\n                                      key={review._id}\r\n                                      className=\"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm\"\r\n                                    >\r\n                                      <div className=\"flex items-start justify-between mb-4\">\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                          <div className=\"w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-white font-bold text-[14px]\">\r\n                                            {userInitials}\r\n                                          </div>\r\n                                          <div>\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                              <h5 className=\"font-semibold text-[14px] text-gray-900\">\r\n                                                {userName}\r\n                                              </h5>\r\n                                            </div>\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                              <div className=\"flex items-center gap-1\">\r\n                                                {[...Array(5)].map((_, i) => (\r\n                                                  <svg\r\n                                                    key={i}\r\n                                                    className={`w-4 h-4 ${\r\n                                                      i < review.rating\r\n                                                        ? \"text-yellow-400\"\r\n                                                        : \"text-gray-300\"\r\n                                                    }`}\r\n                                                    fill=\"currentColor\"\r\n                                                    viewBox=\"0 0 20 20\"\r\n                                                  >\r\n                                                    <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\r\n                                                  </svg>\r\n                                                ))}\r\n                                              </div>\r\n                                              <span className=\"text-[12px] text-gray-500\">\r\n                                                {formatDate(reviewDate)}\r\n                                              </span>\r\n                                            </div>\r\n                                          </div>\r\n                                        </div>\r\n                                      </div>\r\n                                      {review.review && (\r\n                                        <p className=\"text-[12px] text-gray-700 leading-6\">\r\n                                          {review.review}\r\n                                        </p>\r\n                                      )}\r\n                                    </div>\r\n                                  );\r\n                                })}\r\n                              </>\r\n                            ) : (\r\n                              <div className=\"text-center py-8\">\r\n                                <div className=\"text-gray-400 mb-2\">\r\n                                  No reviews yet\r\n                                </div>\r\n                                <div className=\"text-[12px] text-gray-500\">\r\n                                  Be the first to review this property!\r\n                                </div>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </section>\r\n\r\n            {/* Right Sidebar - Enhanced Content */}\r\n            <aside className=\"md:col-span-4 space-y-8\">\r\n              {/* Property Header - Lead Detail Style */}\r\n              <div className=\"bg-white rounded-[16px] border border-gray-200 shadow-xs p-6 mb-8\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                  {/* Left side - label and line */}\r\n                  <div className=\"flex items-center gap-2\">\r\n                    {/* <span className=\"inline-block h-0.5 w-6 rounded bg-yellow-400\"></span> */}\r\n                    <h3 className=\" top-[19px] left-[16px] font-inter text-[18px] leading-[28px] font-semibold text-[#171A1F]\">\r\n                      Property Details\r\n                    </h3>\r\n                  </div>\r\n\r\n                  {/* Right side - status badge */}\r\n                  {/* <span className=\"font-inter text-[12px] leading-[20px] font-normal opacity-100\">\r\n    {product.status}\r\n  </span> */}\r\n                </div>\r\n\r\n                <div className=\"flex items-start gap-4 mb-6\">\r\n                  {/* <div className=\"relative\">\r\n                 <div className=\"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center\">\r\n                   <svg className=\"w-8 h-8 text-gray-600\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                     <path d=\"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z\"/>\r\n                     <polyline points=\"9,22 9,12 15,12 15,22\"/>\r\n                   </svg>\r\n                 </div>\r\n                 <div className=\"absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 rounded-full border-2 border-white flex items-center justify-center\">\r\n                   <svg className=\"w-3 h-3 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                     <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\"/>\r\n                   </svg>\r\n                 </div>\r\n               </div> */}\r\n\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center gap-2 mb-2\">\r\n                      <h1 className=\"text-[16px] font-semibold text-gray-900\">\r\n                        {product?.name || \"Property\"}\r\n                      </h1>\r\n                      {/* <span className=\"px-2 py-1 rounded-full bg-green-100 text-green-800 text-xs font-medium\">\r\n                       {product.status}\r\n                     </span> */}\r\n                    </div>\r\n                    <p className=\"top-[61px] left-[16px] font-inter text-[12px] leading-[20px] font-normal text-[#565D6D]\">\r\n                      {typeof product.region === \"object\"\r\n                        ? product.region?.name ||\r\n                          [product.region?.city, product.region?.state]\r\n                            .filter(Boolean)\r\n                            .join(\", \")\r\n                        : product.region}\r\n                    </p>\r\n                    <p className=\"top-[61px] left-[16px] font-inter text-[12px] leading-[20px] font-normal text-[#565D6D] mt-2\">\r\n                      â€¢ Listed{\" \"}\r\n                      {product?.createdAt\r\n                        ? new Date(product.createdAt).toLocaleDateString()\r\n                        : \"3 days ago\"}\r\n                    </p>\r\n                    <p className=\"  text-[18px] leading-[32px] font-bold text-[#0D542B] mt-2\">\r\n                      â‚¹{formatPrice(price)}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Actions - Below the content */}\r\n                <div className=\"flex flex-col gap-3\">\r\n                  <button\r\n                    onClick={() => setIsEnquiryModalOpen(true)}\r\n                    className=\"w-full h-[40px] px-[12px] flex items-center justify-center gap-[16px] font-inter text-[14px] leading-[22px] font-medium text-white bg-[#0D542B] rounded-[6px] border-0 hover:bg-[#0B4624] active:bg-[#08321A] disabled:opacity-40\"\r\n                  >\r\n                    Inquiry\r\n                    <svg\r\n                      className=\"w-4 h-4\"\r\n                      fill=\"none\"\r\n                      stroke=\"currentColor\"\r\n                      viewBox=\"0 0 24 24\"\r\n                    >\r\n                      <path\r\n                        strokeLinecap=\"round\"\r\n                        strokeLinejoin=\"round\"\r\n                        strokeWidth=\"2\"\r\n                        d=\"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\"\r\n                      />\r\n                    </svg>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Agent Details */}\r\n              <div className=\"border border-gray-200 p-6 w-full bg-white rounded-[16px] shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F]\">\r\n                {/* Header */}\r\n                <div className=\"mb-4\">\r\n                  <h3 className=\"font-inter text-[18px] leading-[28px] font-semibold text-[#171A1F]\">\r\n                    Agent Details\r\n                  </h3>\r\n                </div>\r\n\r\n                {agentLoading ? (\r\n                  /* Skeleton */\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-12 h-12 rounded-full bg-gray-200 animate-pulse\" />\r\n                    <div className=\"space-y-2\">\r\n                      <div className=\"h-4 w-40 bg-gray-200 rounded animate-pulse\" />\r\n                      <div className=\"h-3 w-28 bg-gray-200 rounded animate-pulse\" />\r\n                    </div>\r\n                  </div>\r\n                ) : agent ? (\r\n                  <>\r\n                    {/* Avatar + text */}\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <img\r\n                        src={agent.image}\r\n                        alt=\"Agent\"\r\n                        className=\"w-12 h-12 rounded-full object-cover\"\r\n                      />\r\n                      <div className=\"leading-[20px]\">\r\n                        <div className=\"font-inter font-semibold text-gray-900\">\r\n                          {agent.name}\r\n                        </div>\r\n                        {/* Optional phone */}\r\n                        {/* {agent.phone && (\r\n            <div className=\"text-sm text-gray-500\">{agent.phone}</div>\r\n          )} */}\r\n                        {agent.firm && (\r\n                          <div className=\"text-[12px] text-gray-500\">\r\n                            {agent.firm}\r\n                          </div>\r\n                        )}\r\n                        <div className=\"text-[12px] text-gray-400\">\r\n                          {`Expert Broker${\r\n                            agent?.region\r\n                              ? \" â€¢ \" +\r\n                                (typeof agent.region === \"object\"\r\n                                  ? agent.region?.name ||\r\n                                    [agent.region?.city, agent.region?.state]\r\n                                      .filter(Boolean)\r\n                                      .join(\", \")\r\n                                  : agent.region)\r\n                              : \"\"\r\n                          }`}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Chat button */}\r\n                    {broker && (\r\n                      <button\r\n                        onClick={() => {\r\n                          // Check if user is logged in\r\n                          const token =\r\n                            typeof window !== \"undefined\"\r\n                              ? localStorage.getItem(\"token\") ||\r\n                                localStorage.getItem(\"authToken\")\r\n                              : null;\r\n\r\n                          if (!token) {\r\n                            // User not logged in, redirect to login page\r\n                            router.push(`/login?redirect=${path}`);\r\n                            return;\r\n                          }\r\n\r\n                          // User is logged in, open chat\r\n                          if (window.openChatWithBroker) {\r\n                            window.openChatWithBroker({ broker });\r\n                          }\r\n                        }}\r\n                        type=\"button\"\r\n                        className=\"mt-4 w-full h-10 flex items-center justify-center font-inter text-[14px] leading-[22px] font-medium text-[#323742] bg-[#F3F4F6] rounded-[10px] hover:bg-[#E9EBEF] active:bg-[#D9DEE6] disabled:opacity-40\"\r\n                      >\r\n                        Chat Now\r\n                      </button>\r\n                    )}\r\n                  </>\r\n                ) : (\r\n                  <div className=\"text-sm text-gray-500\">\r\n                    Agent details not available.\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Property Rating */}\r\n              <div className=\"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm\">\r\n                <div className=\"flex items-center gap-2 mb-4\">\r\n                  {/* <span className=\"inline-block h-0.5 w-6 rounded bg-yellow-400\"></span> */}\r\n                  <h3 className=\"font-inter text-[18px] leading-[28px] font-semibold text-[#171A1F]\">\r\n                    Property Rating\r\n                  </h3>\r\n                </div>\r\n\r\n                {/* Only show rating display if rating exists */}\r\n                {ratingsStats?.averageRating ? (\r\n                  <>\r\n                    <div className=\"flex items-center justify-center\">\r\n                      {/* Stars with partial fill support - only show stars, no rating number */}\r\n                      <div className=\"flex items-center gap-1\">\r\n                        {[...Array(5)].map((_, i) => {\r\n                          const avgRating = ratingsStats.averageRating;\r\n                          const fillPercentage = Math.max(\r\n                            0,\r\n                            Math.min(100, (avgRating - i) * 100)\r\n                          );\r\n\r\n                          return (\r\n                            <div key={i} className=\"relative w-[24px] h-[24px]\">\r\n                              {/* Gray background star */}\r\n                              <svg\r\n                                className=\"w-[24px] h-[24px] text-gray-300 absolute inset-0\"\r\n                                viewBox=\"0 0 24 24\"\r\n                                fill=\"currentColor\"\r\n                              >\r\n                                <path d=\"M12 .587l3.668 7.431 8.2 1.192-5.934 5.786 1.4 8.164L12 18.896l-7.334 3.864 1.4-8.164L.132 9.21l8.2-1.192z\" />\r\n                              </svg>\r\n                              {/* Yellow filled star (with clip path for partial fill) */}\r\n                              {fillPercentage > 0 && (\r\n                                <div className=\"absolute inset-0 overflow-hidden\">\r\n                                  <svg\r\n                                    className=\"w-[24px] h-[24px] text-yellow-400\"\r\n                                    viewBox=\"0 0 24 24\"\r\n                                    fill=\"currentColor\"\r\n                                    style={{\r\n                                      clipPath: `inset(0 ${\r\n                                        100 - fillPercentage\r\n                                      }% 0 0)`,\r\n                                    }}\r\n                                  >\r\n                                    <path d=\"M12 .587l3.668 7.431 8.2 1.192-5.934 5.786 1.4 8.164L12 18.896l-7.334 3.864 1.4-8.164L.132 9.21l8.2-1.192z\" />\r\n                                  </svg>\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n                  </>\r\n                ) : null}\r\n\r\n                {/* Rating Button - Always show */}\r\n                <button\r\n                  onClick={() => {\r\n                    // Check if user is logged in\r\n                    const token =\r\n                      typeof window !== \"undefined\"\r\n                        ? localStorage.getItem(\"token\") ||\r\n                          localStorage.getItem(\"authToken\")\r\n                        : null;\r\n\r\n                    if (!token) {\r\n                      router.push(\"/login\");\r\n                      return;\r\n                    }\r\n                    setShowRatingModal(true);\r\n                  }}\r\n                  className={`w-full h-[40px] px-3 flex items-center justify-center gap-2 font-inter text-[12px] leading-[22px] font-medium text-[#0D542B] bg-white border border-[#0D542B] hover:bg-[#EDFDF4] hover:active:bg-[#D9F5E8] disabled:opacity-40 rounded-md transition-colors ${\r\n                    ratingsStats?.averageRating ? \"mt-4\" : \"mt-0\"\r\n                  }`}\r\n                >\r\n                  <svg\r\n                    className=\"w-4 h-4\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\"\r\n                    />\r\n                  </svg>\r\n                  Rate This Property\r\n                </button>\r\n              </div>\r\n\r\n              {/* Virtual Tour */}\r\n              {product?.videos && product.videos.length > 0 ? (\r\n                <div className=\"w-full bg-[#EDFDF4] rounded-[16px] shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] overflow-hidden\">\r\n                  {showVideo ? (\r\n                    <div className=\"relative w-full bg-black rounded-[16px] overflow-hidden\" style={{ minHeight: '232px' }}>\r\n                      {(() => {\r\n                        const videoUrl = product.videos[0];\r\n                        const embedUrl = getEmbedUrl(videoUrl);\r\n                        const isYouTube = embedUrl && embedUrl.includes('youtube.com/embed');\r\n                        \r\n                        return isYouTube ? (\r\n                          <iframe\r\n                            src={embedUrl}\r\n                            className=\"w-full h-auto max-h-[400px]\"\r\n                            style={{ minHeight: '232px', aspectRatio: '16/9' }}\r\n                            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                            allowFullScreen\r\n                            title=\"Property Video\"\r\n                          />\r\n                        ) : (\r\n                          <video\r\n                            src={videoUrl}\r\n                            controls\r\n                            className=\"w-full h-auto max-h-[400px]\"\r\n                            style={{ minHeight: '232px' }}\r\n                          >\r\n                            Your browser does not support the video tag.\r\n                          </video>\r\n                        );\r\n                      })()}\r\n                      <button\r\n                        onClick={() => setShowVideo(false)}\r\n                        className=\"absolute top-2 right-2 bg-black/70 text-white rounded-full p-2 hover:bg-black/90 transition z-10\"\r\n                        aria-label=\"Close video\"\r\n                      >\r\n                        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                        </svg>\r\n                      </button>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"h-[232px] flex flex-col items-center justify-center text-center p-4\">\r\n                      {/* Video Icon */}\r\n                      <svg\r\n                        className=\"w-[48px] h-[48px] text-[#0D542B] mb-4\"\r\n                        fill=\"none\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"2\"\r\n                        viewBox=\"0 0 24 24\"\r\n                      >\r\n                        <path\r\n                          strokeLinecap=\"round\"\r\n                          strokeLinejoin=\"round\"\r\n                          d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"\r\n                        />\r\n                      </svg>\r\n\r\n                      {/* Title */}\r\n                      <h3 className=\"text-[18px] leading-[28px] font-semibold text-[#19191F]\">\r\n                        Property Video\r\n                      </h3>\r\n\r\n                      {/* Subtitle */}\r\n                      <p className=\"mt-1 font-inter text-[12px] leading-[20px] font-normal text-[#19191F]\">\r\n                       Take a 360Â° tour of the property\r\n                      </p>\r\n\r\n                      {/* Button */}\r\n                      <button\r\n                        onClick={() => setShowVideo(true)}\r\n                        className=\"mt-4 w-[107.13px] h-[40px] px-[12px] flex items-center justify-center font-inter text-[14px] leading-[22px] font-medium text-[#0D542B] bg-white rounded-[6px] border border-[#0D542B] hover:bg-[#EDFDF4] active:bg-[#EDFDF4] disabled:opacity-40 transition-colors\"\r\n                      >\r\n                        View Video\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ) : (\r\n                <div className=\"w-full h-[232px] bg-[#EDFDF4] rounded-[16px] shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] flex flex-col items-center justify-center text-center\">\r\n                  {/* Video Icon */}\r\n                  <svg\r\n                    className=\"w-[48px] h-[48px] text-[#0D542B] mb-4\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"2\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"\r\n                    />\r\n                  </svg>\r\n\r\n                  {/* Title */}\r\n                  <h3 className=\"text-[18px] leading-[28px] font-semibold text-[#19191F]\">\r\n                    Property Video\r\n                  </h3>\r\n\r\n                  {/* Subtitle */}\r\n                  <p className=\"mt-1 font-inter text-[12px] leading-[20px] font-normal text-[#19191F]\">\r\n                    No video available\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </aside>\r\n          </div>\r\n\r\n          {/* Property Details Tabs Section */}\r\n          {/* <div className=\"mt-8\">\r\n      \r\n        <div className=\"inline-flex gap-2 mb-6 bg-white rounded-full border border-gray-200 p-1\">\r\n          {TABS.map((tab, idx) => (\r\n            <button\r\n              key={tab.label}\r\n              onClick={() => setActiveTab(idx)}\r\n              className={`px-6 py-3 text-base font-medium focus:outline-none transition-all rounded-full ${\r\n                activeTab === idx \r\n                  ? 'text-[#171A1F] bg-[#E6F7ED]' \r\n                  : 'text-[#565D6D] hover:text-[#171A1F]'\r\n              }`}\r\n            >\r\n              {tab.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n\r\n        <div className=\"bg-white rounded-2xl border border-gray-200 shadow-sm p-6\">\r\n          <div className=\"pt-2\">\r\n          {activeTab === 0 && (\r\n            <div className=\"space-y-8\">\r\n              <div>\r\n                <div className=\"flex items-center gap-2 mb-6\">\r\n                  <span className=\"inline-block h-0.5 w-8 rounded bg-yellow-400\"></span>\r\n                  <h3 className=\"text-xl font-bold text-gray-900\">Property Description</h3>\r\n                </div>\r\n                <div className=\"prose prose-gray max-w-none\">\r\n                  {(product?.propertyDescription || product?.description) && (\r\n                    <p className=\"text-sm text-gray-700 leading-6 mb-4\">{product.propertyDescription || product.description}</p>\r\n                  )}\r\n                </div>\r\n                \r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\r\n                  <div className=\"bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-6\">\r\n                    <h4 className=\"font-bold text-gray-900 mb-4 flex items-center gap-2\">\r\n                      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"/>\r\n                      </svg>\r\n                      Key Features\r\n                    </h4>\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                      {(product?.features && product.features.length > 0 ? product.features : ['Corner Unit','Park Facing']).map((item) => (\r\n                        <span \r\n                          key={item} \r\n                          className=\"inline-flex items-center px-3 py-1.5 rounded-full bg-gray-100 text-gray-700 font-inter text-[12px] leading-[20px] font-medium border border-gray-300\"\r\n                        >\r\n                          {item}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl p-6\">\r\n                    <h4 className=\"font-bold text-blue-900 mb-4 flex items-center gap-2\">\r\n                      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"/>\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"/>\r\n                      </svg>\r\n                      Location Benefits\r\n                    </h4>\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                      {(product?.locationBenefits && product.locationBenefits.length > 0 ? product.locationBenefits : ['Near IT Park','Easy Highway Access']).map((item) => (\r\n                        <span \r\n                          key={item} \r\n                          className=\"inline-flex items-center px-3 py-1.5 rounded-full bg-gray-100 text-gray-700 font-inter text-[12px] leading-[20px] font-medium border border-gray-300\"\r\n                        >\r\n                          {item}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {activeTab === 1 && (<></>)}\r\n\r\n          {activeTab === 1 && (\r\n            <div className=\"space-y-8\">\r\n              <div>\r\n                <div className=\"flex items-center gap-2 mb-6\">\r\n                  <span className=\"inline-block h-0.5 w-8 rounded bg-yellow-400\"></span>\r\n                  <h3 className=\"text-xl font-bold text-gray-900\">Reviews & Ratings</h3>\r\n                </div>\r\n                \r\n                <div className=\"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-8 mb-8\">\r\n                  <div className=\"flex flex-col md:flex-row gap-8 items-center\">\r\n                    <div className=\"text-center md:text-left\">\r\n                      <div className=\"text-6xl font-bold text-gray-900 mb-2\">{(product?.rating || 4.7).toFixed(1)}</div>\r\n                      <div className=\"flex items-center justify-center md:justify-start gap-1 mb-2\">\r\n                    {[...Array(5)].map((_, i) => (\r\n                          <svg key={i} className={`w-6 h-6 ${i < Math.round((product?.rating || 4.7)) ? 'text-yellow-400' : 'text-gray-300'}`} fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                            <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"/>\r\n                          </svg>\r\n                    ))}\r\n                  </div>\r\n                      <div className=\"text-lg text-gray-600 mb-1\">Excellent</div>\r\n                      <div className=\"text-sm text-gray-500\">Based on {product?.reviewCount || 245} reviews</div>\r\n                </div>\r\n                <div className=\"flex-1 w-full\">\r\n                  {[5, 4, 3, 2, 1].map((star, idx) => {\r\n                    const barPercents = [90, 60, 25, 10, 5];\r\n                    return (\r\n                          <div key={star} className=\"flex items-center gap-3 mb-3\">\r\n                            <span className=\"w-12 text-gray-700 text-sm font-medium\">{star} Star</span>\r\n                            <div className=\"flex-1 h-3 bg-gray-200 rounded-full overflow-hidden\">\r\n                              <div className=\"h-3 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full transition-all duration-500\" style={{ width: `${barPercents[idx]}%` }}></div>\r\n                        </div>\r\n                            <span className=\"text-sm text-gray-600 w-8 text-right\">{barPercents[idx]}%</span>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n              \r\n                <div className=\"space-y-6\">\r\n                  <h4 className=\"text-lg font-bold text-gray-900 mb-4\">Recent Reviews</h4>\r\n                  {[\r\n                    {\r\n                      name: 'Rajesh Kumar',\r\n                      rating: 5,\r\n                      date: '2 days ago',\r\n                      comment: 'Excellent property with great amenities. The location is perfect with metro connectivity. Highly recommended!',\r\n                      verified: true\r\n                    },\r\n                    {\r\n                      name: 'Priya Sharma',\r\n                      rating: 4,\r\n                      date: '1 week ago',\r\n                      comment: 'Good property overall. The maintenance is well taken care of. Only minor issue is the parking space.',\r\n                      verified: true\r\n                    },\r\n                    {\r\n                      name: 'Amit Singh',\r\n                      rating: 5,\r\n                      date: '2 weeks ago',\r\n                      comment: 'Amazing property! The view from the balcony is breathtaking. The builder has maintained high quality standards.',\r\n                      verified: false\r\n                    }\r\n                  ].map((review, index) => (\r\n                    <div key={index} className=\"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm\">\r\n                      <div className=\"flex items-start justify-between mb-4\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                          <div className=\"w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-white font-bold\">\r\n                            {review.name.split(' ').map(n => n[0]).join('')}\r\n                          </div>\r\n                          <div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <h5 className=\"font-semibold text-gray-900\">{review.name}</h5>\r\n                              {review.verified && (\r\n                                <span className=\"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\">Verified</span>\r\n                              )}\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <div className=\"flex items-center gap-1\">\r\n                                {[...Array(5)].map((_, i) => (\r\n                                  <svg key={i} className={`w-4 h-4 ${i < review.rating ? 'text-yellow-400' : 'text-gray-300'}`} fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                                    <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"/>\r\n                                  </svg>\r\n                                ))}\r\n                              </div>\r\n                              <span className=\"text-sm text-gray-500\">{review.date}</span>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <p className=\"text-gray-700 leading-6\">{review.comment}</p>\r\n                    </div>\r\n                  ))}\r\n                  \r\n                  <button className=\"w-full py-3 px-6 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-medium transition-colors\">\r\n                    Load More Reviews\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      </div> */}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Related Properties - Carousel */}\r\n      <div className=\"mt-12 w-full\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <div className=\"flex items-center gap-2\">\r\n            {/* <span className=\"inline-block h-0.5 w-6 rounded bg-yellow-400\"></span> */}\r\n            <h3 className=\"text-[18px] leading-[32px] font-semibold text-[#171A1F]\">\r\n              Related Properties\r\n            </h3>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <Link\r\n              href=\"/search?tab=properties\"\r\n              className=\"px-4 py-2 text-gray-900 rounded-lg text-sm font-medium transition-colors\"\r\n            >\r\n              View All\r\n            </Link>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Carousel with scrollable cards */}\r\n        <div\r\n          id=\"related-properties-carousel\"\r\n          className=\"overflow-x-auto scroll-smooth\"\r\n          style={{ scrollbarWidth: \"none\", msOverflowStyle: \"none\" }}\r\n          onScroll={(e) => {\r\n            const carousel = e.currentTarget;\r\n            const { scrollLeft, scrollWidth, clientWidth } = carousel;\r\n            const maxScroll = scrollWidth - clientWidth;\r\n            setCanScrollLeft(scrollLeft > 10);\r\n            setCanScrollRight(scrollLeft < maxScroll - 10);\r\n          }}\r\n        >\r\n          <div className=\"flex gap-6 min-w-0 pb-2\">\r\n            {similarLoading ? (\r\n              // Loading state\r\n              Array.from({ length: 6 }).map((_, index) => (\r\n                <div\r\n                  key={index}\r\n                  className=\"flex-shrink-0 w-80 bg-white rounded-2xl border border-gray-200 shadow-sm p-6\"\r\n                >\r\n                  <ContentLoader\r\n                    speed={2}\r\n                    width={320}\r\n                    height={280}\r\n                    viewBox=\"0 0 320 280\"\r\n                    backgroundColor=\"#f3f3f3\"\r\n                    foregroundColor=\"#ecebeb\"\r\n                  >\r\n                    {/* Image */}\r\n                    <rect x=\"0\" y=\"0\" rx=\"8\" ry=\"8\" width=\"320\" height=\"200\" />\r\n                    {/* Category */}\r\n                    <rect x=\"0\" y=\"220\" rx=\"4\" ry=\"4\" width=\"80\" height=\"12\" />\r\n                    {/* Name */}\r\n                    <rect x=\"0\" y=\"240\" rx=\"4\" ry=\"4\" width=\"200\" height=\"16\" />\r\n                    {/* Details */}\r\n                    <rect x=\"0\" y=\"262\" rx=\"4\" ry=\"4\" width=\"150\" height=\"12\" />\r\n                    {/* Price */}\r\n                    <rect x=\"0\" y=\"278\" rx=\"4\" ry=\"4\" width=\"120\" height=\"14\" />\r\n                  </ContentLoader>\r\n                </div>\r\n              ))\r\n            ) : similarProperties.length > 0 ? (\r\n              // Property cards\r\n              similarProperties.map((p) => (\r\n                <div\r\n                  key={p.id}\r\n                  className=\"flex-shrink-0 w-80 bg-white rounded-2xl border border-gray-200 shadow-sm hover:shadow-lg transition-shadow\"\r\n                >\r\n                  <Link\r\n                    href={`/property-details/${p.id}`}\r\n                    className=\"block group\"\r\n                  >\r\n                    <div className=\"aspect-[4/3] bg-gray-100 rounded-t-2xl overflow-hidden\">\r\n                      <img\r\n                        src={p.image}\r\n                        alt={p.name}\r\n                        className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"px-4 pt-4 pb-4 space-y-3\">\r\n                      {/* Name with green upward arrow */}\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <h3 className=\"font-semibold text-gray-900 text-base line-clamp-1\">\r\n                          {p.name}\r\n                        </h3>\r\n                        <svg\r\n                          className=\"w-5 h-5 text-green-900 mt-2 flex-shrink-0 rotate-60\"\r\n                          fill=\"none\"\r\n                          stroke=\"currentColor\"\r\n                          viewBox=\"0 0 24 24\"\r\n                          strokeWidth=\"2\"\r\n                        >\r\n                          <path\r\n                            strokeLinecap=\"round\"\r\n                            strokeLinejoin=\"round\"\r\n                            d=\"M5 10l7-7 7 7M12 3v18\"\r\n                          />\r\n                        </svg>\r\n                      </div>\r\n\r\n                      {/* Category */}\r\n                      <div className=\"text-sm text-gray-600 font-medium\">\r\n                        {p.category}\r\n                      </div>\r\n\r\n                      {/* Location with pin icon */}\r\n                      <div className=\"flex items-center gap-2 text-sm text-gray-600\">\r\n                        <svg\r\n                          className=\"w-4 h-4 text-gray-500 flex-shrink-0\"\r\n                          fill=\"none\"\r\n                          stroke=\"currentColor\"\r\n                          viewBox=\"0 0 24 24\"\r\n                          strokeWidth=\"2\"\r\n                        >\r\n                          <path\r\n                            strokeLinecap=\"round\"\r\n                            strokeLinejoin=\"round\"\r\n                            d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"\r\n                          />\r\n                          <path\r\n                            strokeLinecap=\"round\"\r\n                            strokeLinejoin=\"round\"\r\n                            d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"\r\n                          />\r\n                        </svg>\r\n                        <span className=\"line-clamp-1\">\r\n                          {p.city || \"\"}{\" \"}\r\n                          {typeof p.region === \"object\"\r\n                            ? p.region?.name ||\r\n                              [p.region?.city, p.region?.state]\r\n                                .filter(Boolean)\r\n                                .join(\", \")\r\n                            : p.region\r\n                            ? `â€¢ ${p.region}`\r\n                            : \"\"}\r\n                        </span>\r\n                      </div>\r\n\r\n                      {/* Property details with person icon */}\r\n                      <div className=\"flex items-center gap-2 text-sm text-gray-600\">\r\n                        <svg\r\n                          className=\"w-4 h-4 text-gray-500 flex-shrink-0\"\r\n                          fill=\"none\"\r\n                          stroke=\"currentColor\"\r\n                          viewBox=\"0 0 24 24\"\r\n                          strokeWidth=\"2\"\r\n                        >\r\n                          <path\r\n                            strokeLinecap=\"round\"\r\n                            strokeLinejoin=\"round\"\r\n                            d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\r\n                          />\r\n                        </svg>\r\n                        <span>\r\n                          {p.bedrooms || 0} BHK â€¢{\" \"}\r\n                          {p.areaSqft?.toLocaleString(\"en-IN\") || \"0\"} sq.ft\r\n                        </span>\r\n                      </div>\r\n\r\n                      {/* Price */}\r\n                      <div className=\"flex items-center gap-2 pt-1\">\r\n                        <span className=\"text-gray-900 font-semibold text-base\">\r\n                          â‚¹{formatPrice(p.price)}\r\n                        </span>\r\n                        {/* {p.originalPrice && p.originalPrice > (p.price || 0) && (\r\n                          <span className=\"text-xs text-gray-500 line-through\">â‚¹{formatPrice(p.originalPrice)}</span>\r\n                        )} */}\r\n                      </div>\r\n                    </div>\r\n                  </Link>\r\n                </div>\r\n              ))\r\n            ) : (\r\n              // No properties found\r\n              <div className=\"w-full flex items-center justify-center py-16\">\r\n                <div className=\"text-center\">\r\n                  <svg\r\n                    className=\"w-16 h-16 mx-auto mb-6 text-gray-300\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\"\r\n                    />\r\n                  </svg>\r\n                  <p className=\"text-xl font-semibold text-gray-900 mb-3\">\r\n                    No related properties found\r\n                  </p>\r\n                  <p className=\"text-base text-gray-500\">\r\n                    We couldn't find any properties with similar features.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Carousel navigation buttons */}\r\n        <div className=\"flex gap-2 mt-7 justify-center\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => {\r\n              const carousel = document.getElementById(\r\n                \"related-properties-carousel\"\r\n              );\r\n              if (carousel && canScrollLeft) {\r\n                carousel.scrollBy({ left: -320, behavior: \"smooth\" });\r\n              }\r\n            }}\r\n            disabled={!canScrollLeft}\r\n            className={`w-8 h-8 rounded-full flex items-center justify-center transition-colors shadow-md ${\r\n              canScrollLeft\r\n                ? \"bg-yellow-500 text-white hover:bg-yellow-600\"\r\n                : \"bg-gray-200 text-gray-400 cursor-not-allowed\"\r\n            }`}\r\n            title=\"Previous\"\r\n          >\r\n            <svg\r\n              className=\"w-4 h-4\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M15 19l-7-7 7-7\"\r\n              />\r\n            </svg>\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => {\r\n              const carousel = document.getElementById(\r\n                \"related-properties-carousel\"\r\n              );\r\n              if (carousel && canScrollRight) {\r\n                carousel.scrollBy({ left: 320, behavior: \"smooth\" });\r\n              }\r\n            }}\r\n            disabled={!canScrollRight}\r\n            className={`w-8 h-8 rounded-full flex items-center justify-center transition-colors shadow-md ${\r\n              canScrollRight\r\n                ? \"bg-yellow-500 text-white hover:bg-yellow-600\"\r\n                : \"bg-gray-200 text-gray-400 cursor-not-allowed\"\r\n            }`}\r\n            title=\"Next\"\r\n          >\r\n            <svg\r\n              className=\"w-4 h-4\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M9 5l7 7-7 7\"\r\n              />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* CTA Section */}\r\n      <div className=\"w-full max-w-full bg-[#FFF9E6] rounded-2xl shadow-xs mt-4\">\r\n        <div className=\"px-6 py-8 text-center relative overflow-hidden\">\r\n          {/* Decorative elements */}\r\n          <div className=\"absolute top-0 left-0 w-full h-1 \"></div>\r\n          <div className=\"absolute top-3 right-3 w-12 h-12 bg-yellow-100 rounded-full opacity-20\"></div>\r\n          <div className=\"absolute bottom-3 left-3 w-10 h-10 bg-yellow-200 rounded-full opacity-30\"></div>\r\n\r\n          <div className=\"max-w-2xl mx-auto relative z-10\">\r\n            <div className=\"inline-flex items-center mt-4\">\r\n              <img\r\n                src=\"/images/lucide-Sparkles-Outlined.svg\"\r\n                className=\"w-[32px] h-[32px]\"\r\n                style={{\r\n                  filter:\r\n                    \"brightness(0) saturate(100%) invert(99%) sepia(89%) saturate(5066%) hue-rotate(315deg) brightness(99%) contrast(97%)\",\r\n                }}\r\n              />\r\n              {/* Trusted by 1000+ Customers */}\r\n            </div>\r\n\r\n            <h2 className=\"text-[18px] leading-[36px] font-bold text-[#19191F] mt-4\">\r\n             Ready to Find Your Perfect Home?\r\n\r\n            </h2>\r\n            <p className=\"w-full max-w-2xl mx-auto font-inter text-[12px] leading-[28px] font-normal text-[#19191F] mt-4\">\r\n              Join thousands of satisfied customers who found their dream homes\r\n              through our platform. Get started today and let our expert brokers\r\n              help you every step of the way.\r\n            </p>\r\n\r\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center mt-4\">\r\n              <a\r\n                href=\"/search?tab=properties\"\r\n                className=\"w-[176px] h-[40px] px-3 flex items-center justify-center font-inter text-[14px] leading-[22px] font-medium text-white bg-[#0D542B] rounded-md border-0 transition-colors duration-200 \r\n         hover:bg-[#0B4624] active:bg-[#08321A] disabled:opacity-40\"\r\n              >\r\n                Browse All Properties\r\n              </a>\r\n              <a\r\n                href=\"/search?tab=brokers\"\r\n                className=\"w-[118.078125px] h-[40px] px-3 flex items-center justify-center font-inter text-[14px] leading-[22px] font-medium text-[#0D542B] bg-white rounded-md border border-[#0D542B] transition-colors duration-200 hover:bg-white active:bg-white disabled:opacity-40\"\r\n              >\r\n                Find Brokers\r\n              </a>\r\n            </div>\r\n\r\n            {/* <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-center\">\r\n              <div className=\"flex flex-col items-center gap-2 p-3 rounded-lg bg-gray-50 hover:bg-yellow-50 transition-colors\">\r\n                <div className=\"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center\">\r\n                  <svg className=\"w-4 h-4 text-yellow-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                    <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\"/>\r\n                  </svg>\r\n                </div>\r\n                <span className=\"font-semibold text-gray-900 text-sm\">Verified Properties</span>\r\n                <span className=\"text-xs text-gray-600\">Quality Assured</span>\r\n              </div>\r\n              \r\n              <div className=\"flex flex-col items-center gap-2 p-3 rounded-lg bg-gray-50 hover:bg-yellow-50 transition-colors\">\r\n                <div className=\"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center\">\r\n                  <svg className=\"w-4 h-4 text-yellow-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                    <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\"/>\r\n                  </svg>\r\n                </div>\r\n                <span className=\"font-semibold text-gray-900 text-sm\">Expert Brokers</span>\r\n                <span className=\"text-xs text-gray-600\">Professional Service</span>\r\n              </div>\r\n              \r\n              <div className=\"flex flex-col items-center gap-2 p-3 rounded-lg bg-gray-50 hover:bg-yellow-50 transition-colors\">\r\n                <div className=\"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center\">\r\n                  <svg className=\"w-4 h-4 text-yellow-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                    <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\"/>\r\n                  </svg>\r\n                </div>\r\n                <span className=\"font-semibold text-gray-900 text-sm\">Free Consultation</span>\r\n                <span className=\"text-xs text-gray-600\">No Obligation</span>\r\n              </div>\r\n            </div> */}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <PropertyEnquiryModal\r\n        isOpen={isEnquiryModalOpen}\r\n        onClose={() => setIsEnquiryModalOpen(false)}\r\n        propertyId={product?.id || product?._id || null}\r\n        propertyBrokerId={\r\n          broker?._id ||\r\n          broker?.id ||\r\n          (product?._raw &&\r\n            typeof product._raw.createdBy === \"object\" &&\r\n            product._raw.createdBy?._id) ||\r\n          (product?._raw && typeof product._raw.createdBy === \"string\"\r\n            ? product._raw.createdBy\r\n            : null) ||\r\n          product?._raw?.brokerId ||\r\n          null\r\n        }\r\n      />\r\n\r\n      {/* Rating Modal */}\r\n      {showRatingModal && (\r\n        <div\r\n          className=\"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4\"\r\n          onClick={() => setShowRatingModal(false)}\r\n        >\r\n          <div\r\n            className=\"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 relative border border-gray-100\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"p-6\">\r\n              {/* Header */}\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <h3 className=\"text-[18px] font-bold text-gray-900\">\r\n                  Rate This Property\r\n                </h3>\r\n                <button\r\n                  onClick={() => {\r\n                    setShowRatingModal(false);\r\n                    setUserRating(0);\r\n                    setRatingReview(\"\");\r\n                  }}\r\n                  className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n                >\r\n                  <svg\r\n                    className=\"w-6 h-6\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M6 18L18 6M6 6l12 12\"\r\n                    />\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n\r\n              {/* Property Info */}\r\n              {product && (\r\n                <div className=\"flex items-center gap-3 mb-6 pb-4 border-b border-gray-200\">\r\n                  <div className=\"w-16 h-16 rounded-lg bg-gray-100 overflow-hidden flex-shrink-0\">\r\n                    <img\r\n                      src={\r\n                        product.images?.[0] ||\r\n                        product.image ||\r\n                        \"/images/pexels-binyaminmellish-106399.jpg\"\r\n                      }\r\n                      alt={product.name}\r\n                      className=\"w-full h-full object-cover\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <h4 className=\"text-[14px] font-semibold text-gray-900 truncate\">\r\n                      {product.name}\r\n                    </h4>\r\n                    <p className=\"text-[12px] text-gray-500 truncate\">\r\n                      {typeof product.region === \"object\"\r\n                        ? product.region?.name ||\r\n                          [product.region?.city, product.region?.state]\r\n                            .filter(Boolean)\r\n                            .join(\", \")\r\n                        : product.region}\r\n                    </p>\r\n                    <p className=\"text-[12px] font-medium text-[#0D542B] mt-1\">\r\n                      â‚¹{formatPrice(product.price || 0)}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Star Rating */}\r\n              <div className=\"mb-6\">\r\n                <label className=\"block text-[14px] font-medium text-gray-700 mb-3\">\r\n                  Your Rating\r\n                </label>\r\n                <div className=\"flex items-center gap-2\">\r\n                  {[1, 2, 3, 4, 5].map((star) => (\r\n                    <button\r\n                      key={star}\r\n                      type=\"button\"\r\n                      onClick={() => setUserRating(star)}\r\n                      className=\"focus:outline-none transition-transform hover:scale-110\"\r\n                    >\r\n                      <svg\r\n                        className={`w-8 h-8 ${\r\n                          star <= userRating\r\n                            ? \"text-yellow-400 fill-yellow-400\"\r\n                            : \"text-gray-300 fill-gray-300\"\r\n                        }`}\r\n                        viewBox=\"0 0 24 24\"\r\n                      >\r\n                        <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\" />\r\n                      </svg>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n                {userRating > 0 && (\r\n                  <p className=\"text-[12px] text-gray-600 mt-2\">\r\n                    {userRating === 1 && \"Poor\"}\r\n                    {userRating === 2 && \"Fair\"}\r\n                    {userRating === 3 && \"Good\"}\r\n                    {userRating === 4 && \"Very Good\"}\r\n                    {userRating === 5 && \"Excellent\"}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Comment */}\r\n              <div className=\"mb-6\">\r\n                <label className=\"block text-[14px] font-medium text-gray-700 mb-2\">\r\n                  Your Review (Optional)\r\n                </label>\r\n                <textarea\r\n                  value={ratingReview}\r\n                  onChange={(e) => setRatingReview(e.target.value)}\r\n                  placeholder=\"Share your experience with this property...\"\r\n                  rows={4}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg text-[13px] focus:outline-none focus:ring-2 focus:ring-[#0D542B] focus:border-[#0D542B] resize-none\"\r\n                />\r\n              </div>\r\n\r\n              {/* Submit Button */}\r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  onClick={() => {\r\n                    setShowRatingModal(false);\r\n                    setUserRating(0);\r\n                    setRatingReview(\"\");\r\n                  }}\r\n                  className=\"flex-1 h-[40px] px-4 flex items-center justify-center font-inter text-[13px] leading-[22px] font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={async () => {\r\n                    if (userRating === 0) {\r\n                      toast.error(\"Please select a rating\");\r\n                      return;\r\n                    }\r\n\r\n                    setRatingLoading(true);\r\n                    try {\r\n                      const token =\r\n                        typeof window !== \"undefined\"\r\n                          ? localStorage.getItem(\"token\") ||\r\n                            localStorage.getItem(\"authToken\")\r\n                          : null;\r\n\r\n                      if (!token) {\r\n                        toast.error(\"Please login to submit a rating\");\r\n                        setShowRatingModal(false);\r\n                        router.push(\"/login\");\r\n                        return;\r\n                      }\r\n\r\n                      const base =\r\n                        process.env.NEXT_PUBLIC_API_URL ||\r\n                        \"https://broker-adda-be.algofolks.com/api\";\r\n                      const headers = {\r\n                        \"Content-Type\": \"application/json\",\r\n                        Authorization: `Bearer ${token}`,\r\n                      };\r\n\r\n                      const propertyId = product?.id || product?._id;\r\n\r\n                      // API expects: propertyId, rating, and review (optional)\r\n                      const ratingData = {\r\n                        propertyId: propertyId,\r\n                        rating: userRating,\r\n                        review: ratingReview || \"\",\r\n                      };\r\n\r\n                      console.log(\r\n                        \"Submitting rating to:\",\r\n                        `${base}/property-ratings`\r\n                      );\r\n                      console.log(\"Rating data:\", ratingData);\r\n\r\n                      const res = await fetch(`${base}/property-ratings`, {\r\n                        method: \"POST\",\r\n                        headers,\r\n                        body: JSON.stringify(ratingData),\r\n                      });\r\n\r\n                      const responseData = await res.json().catch(() => ({}));\r\n\r\n                      if (!res.ok) {\r\n                        throw new Error(\r\n                          responseData.message || \"Failed to submit rating\"\r\n                        );\r\n                      }\r\n\r\n                      // Handle success response\r\n                      if (responseData.success && responseData.data) {\r\n                        toast.success(\r\n                          responseData.message || \"Thank you for your rating!\"\r\n                        );\r\n                        console.log(\r\n                          \"Rating submitted successfully:\",\r\n                          responseData.data\r\n                        );\r\n                      } else {\r\n                        toast.success(\"Thank you for your rating!\");\r\n                      }\r\n\r\n                      setShowRatingModal(false);\r\n                      setUserRating(0);\r\n                      setRatingReview(\"\");\r\n\r\n                      // Refresh ratings after submitting\r\n                      const refreshRatings = async () => {\r\n                        try {\r\n                          const refreshToken =\r\n                            typeof window !== \"undefined\"\r\n                              ? localStorage.getItem(\"token\") ||\r\n                                localStorage.getItem(\"authToken\")\r\n                              : null;\r\n                          const refreshBase =\r\n                            process.env.NEXT_PUBLIC_API_URL ||\r\n                            \"https://broker-adda-be.algofolks.com/api\";\r\n                          const refreshHeaders = {\r\n                            \"Content-Type\": \"application/json\",\r\n                            ...(refreshToken\r\n                              ? { Authorization: `Bearer ${refreshToken}` }\r\n                              : {}),\r\n                          };\r\n\r\n                          const propertyId = product?.id || product?._id;\r\n                          const ratingsEndpoint = `/property-ratings/property/${encodeURIComponent(\r\n                            String(propertyId)\r\n                          )}`;\r\n\r\n                          const refreshRes = await fetch(\r\n                            `${refreshBase}${ratingsEndpoint}`,\r\n                            { headers: refreshHeaders }\r\n                          );\r\n                          if (refreshRes.ok) {\r\n                            const refreshData = await refreshRes.json();\r\n                            if (refreshData.success && refreshData.data) {\r\n                              const ratings = Array.isArray(\r\n                                refreshData.data.ratings\r\n                              )\r\n                                ? refreshData.data.ratings\r\n                                : [];\r\n                              setPropertyRatings(ratings);\r\n                              if (refreshData.data.stats) {\r\n                                setRatingsStats(refreshData.data.stats);\r\n                              }\r\n                            }\r\n                          }\r\n                        } catch (e) {\r\n                          console.error(\"Error refreshing ratings:\", e);\r\n                        }\r\n                      };\r\n\r\n                      refreshRatings();\r\n                    } catch (error) {\r\n                      console.error(\"Error submitting rating:\", error);\r\n                      toast.error(\r\n                        error.message ||\r\n                          \"Failed to submit rating. Please try again.\"\r\n                      );\r\n                    } finally {\r\n                      setRatingLoading(false);\r\n                    }\r\n                  }}\r\n                  disabled={userRating === 0 || ratingLoading}\r\n                  className=\"flex-1 h-[40px] px-4 flex items-center justify-center font-inter text-[13px] leading-[22px] font-medium text-white bg-[#0D542B] hover:bg-[#0B4624] disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors\"\r\n                >\r\n                  {ratingLoading ? \"Submitting...\" : \"Submit Rating\"}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function PropertyDetailsPage() {\r\n  return (\r\n    <Suspense fallback={<div />}>\r\n      <PropertyDetailsPageInner />\r\n    </Suspense>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}