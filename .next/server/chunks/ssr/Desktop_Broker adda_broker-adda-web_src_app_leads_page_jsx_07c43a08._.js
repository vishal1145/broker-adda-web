module.exports=[63557,a=>{"use strict";a.s(["default",()=>n],63557);var b=a.i(64144),c=a.i(24379),d=a.i(75055),e=a.i(51722),f=a.i(39603),g=a.i(62768),h=a.i(40268),i=a.i(86341),j=a.i(60677),j=j,k=a.i(30092),l=a.i(76076);function m(){let a=(0,f.useSearchParams)(),[m,n]=(0,d.useState)(!1),[o,p]=(0,d.useState)("my-leads"),[q,r]=(0,d.useState)({query:"",status:{value:"all",label:"All Status"},broker:{value:"all",label:"All Brokers"},region:{value:"all",label:"All Regions"},propertyType:{value:"all",label:"All Property Types"},requirement:{value:"all",label:"All Requirements"},startDate:"",endDate:"",budgetMin:0,budgetMax:5e5}),[s,t]=(0,d.useState)([]),[u,v]=(0,d.useState)(!1),[w,x]=(0,d.useState)(""),[y,z]=(0,d.useState)([]),[A,B]=(0,d.useState)(!1),[C,D]=(0,d.useState)(""),[E,F]=(0,d.useState)(!1),G=(0,d.useMemo)(()=>q.status?.value&&"all"!==q.status.value||q.broker?.value&&"all"!==q.broker.value||q.region?.value&&"all"!==q.region.value||q.propertyType?.value&&"all"!==q.propertyType.value||q.requirement?.value&&"all"!==q.requirement.value||!!q.startDate||!!q.endDate||"number"==typeof q.budgetMax&&5e5!==q.budgetMax,[q]),H=()=>{},I="https://broker-adda-be.fly.dev/api",J=(0,d.useMemo)(()=>(a=>{try{return""}catch{return""}})(0),[null]),[K,L]=(0,d.useState)(""),[M,N]=(0,d.useState)(!1),O=(0,d.useCallback)(async()=>{},[J,null,I]);(0,d.useEffect)(()=>{J&&O()},[J,O]);let[P,Q]=(0,d.useState)({totalLeads:0,newLeadsToday:0,convertedLeads:0,avgDealSize:0,transferredToMe:0,transferredByMe:0}),[R,S]=(0,d.useState)(!1),[T,U]=(0,d.useState)(""),V=(0,d.useCallback)(async()=>{if(K)try{S(!0),U("");let a=`${I}/leads/metrics?createdBy=${K}`,b=await fetch(a,{headers:{"Content-Type":"application/json"}});if(!b.ok){try{let a=await b.json();U(a?.message||a?.error||"Failed to load metrics")}catch{U("Failed to load metrics")}return}let c=await b.json(),d=c?.data||c||{};Q({totalLeads:Number(d.totalLeads||d.total||0),newLeadsToday:Number(d.newLeadsToday||d.today||0),convertedLeads:Number(d.convertedLeads||d.converted||0),avgDealSize:Number(d.avgDealSize||d.averageDealSize||0),transferredToMe:Number(d.transferredToMe||d.transfersToMe||0),transferredByMe:Number(d.transferredByMe||d.transfersByMe||0)})}catch{U("Error loading metrics")}finally{S(!1)}},[I,null,K]);(0,d.useEffect)(()=>{K&&V()},[K,V]);let[W,X]=(0,d.useState)([]),[Y,Z]=(0,d.useState)(!1),[$,_]=(0,d.useState)(""),aa=(0,d.useCallback)(async()=>{},[I,null]);(0,d.useEffect)(()=>{},[null,aa]);let[ab,ac]=(0,d.useState)([]),[ad,ae]=(0,d.useState)(!0),[af,ag]=(0,d.useState)(""),[ah,ai]=(0,d.useState)(1),[aj,ak]=(0,d.useState)(10),[al,am]=(0,d.useState)(0),an=Math.max(1,Math.ceil(al/(aj||10))),[ao,ap]=(0,d.useState)(""),[aq,ar]=(0,d.useState)(!1),[as,at]=(0,d.useState)("overview"),[au,av]=(0,d.useState)("");(0,d.useEffect)(()=>{let a=setTimeout(()=>{q.query!==ao&&ar(!0)},100),b=setTimeout(()=>{ap(q.query||""),ar(!1)},500);return()=>{clearTimeout(a),clearTimeout(b)}},[q.query,ao]);let aw=(0,d.useCallback)((a,b=ah,c=aj,d=ao,e=o)=>{let f=new URLSearchParams;return(f.set("page",String(b)),f.set("limit",String(c)),"transferred"===e)?(K&&f.set("toBroker",K),d&&f.set("search",d),a.status?.value&&"all"!==a.status.value&&f.set("status",a.status.value),a.region?.value&&"all"!==a.region.value&&f.set("region",a.region.value),a.propertyType?.value&&"all"!==a.propertyType.value&&f.set("propertyType",a.propertyType.value),a.requirement?.value&&"all"!==a.requirement.value&&f.set("requirement",a.requirement.value),a.startDate&&f.set("startDate",a.startDate),a.endDate&&f.set("endDate",a.endDate),"number"==typeof a.budgetMax&&5e5!==a.budgetMax&&f.set("budgetMax",String(a.budgetMax)),`${I}/leads/transferred?${f.toString()}`):(K&&f.set("createdBy",K),d&&f.set("search",d),a.status?.value&&"all"!==a.status.value&&f.set("status",a.status.value),a.broker?.value&&"all"!==a.broker.value&&f.set("broker",a.broker.value),a.region?.value&&"all"!==a.region.value&&f.set("regionId",a.region.value),a.propertyType?.value&&"all"!==a.propertyType.value&&f.set("propertyType",a.propertyType.value),a.requirement?.value&&"all"!==a.requirement.value&&f.set("requirement",a.requirement.value),a.startDate&&f.set("startDate",a.startDate),a.endDate&&f.set("endDate",a.endDate),"number"==typeof a.budgetMax&&5e5!==a.budgetMax&&f.set("budgetMax",String(a.budgetMax)),`${I}/leads?${f.toString()}`)},[I,ah,aj,ao,K,o]),ax=(0,d.useCallback)(async(a=null,b=null,c=null,d=null,e=null)=>{if(K||M)try{ae(!0),ag("");let f=a??q,g=b??ah,h=c??aj,i=d??ao,j=e??o,k=await fetch(aw(f,g,h,i,j),{headers:{"Content-Type":"application/json"}});if(k.ok){let a=await k.json(),b=[],c=0;Array.isArray(a?.data?.items)?(b=a.data.items,c=a.data.total??a.total??b.length):Array.isArray(a?.data?.leads)?(b=a.data.leads,c=a.data.total??a.total??b.length):Array.isArray(a?.data)?(b=a.data,c=a.total??b.length):Array.isArray(a?.leads)?(b=a.leads,c=a.total??b.length):Array.isArray(a)&&(c=(b=a).length),"transferred"===j&&(c=(b=b.filter(a=>{let b=(a?.createdBy?._id||a?.createdBy?.id||a?.createdBy)?.toString();return(!K||b!==K.toString())&&(Array.isArray(a?.transfers)?a.transfers:[]).length>0})).length),ac(b),am(c)}else ag("Failed to load leads"),ac([]),am(0)}catch{ag("Error loading leads"),ac([]),am(0)}finally{ae(!1)}},[q,ah,aj,ao,null,aw,K,M,o]);H=()=>{let a={...q,status:{value:"all",label:"All Status"},broker:{value:"all",label:"All Brokers"},region:{value:"all",label:"All Regions"},propertyType:{value:"all",label:"All Property Types"},requirement:{value:"all",label:"All Requirements"},startDate:"",endDate:"",budgetMax:5e5};r(a),ai(1),ax(a,1,aj,ao)},(0,d.useEffect)(()=>{let b=a?.get("status");if(b&&aB.length>0){let a=aB.find(a=>a.value===b);if(a&&q.status?.value!==a.value){let b={...q,status:a};r(b),ai(1),setTimeout(()=>{ax(b,1,aj,ao)},100)}}},[a]),(0,d.useEffect)(()=>{ax()},[ah,aj]),(0,d.useEffect)(()=>{1!==ah?ai(1):ax()},[ao]),(0,d.useEffect)(()=>{K&&ax()},[K]),(0,d.useEffect)(()=>{ax()},[o]);let ay=a=>{let b=(a||"").toString().toLowerCase();return"new"===b?"bg-green-50 text-green-900":"contacted"===b||"in progress"===b?"bg-amber-100 text-amber-700":"qualified"===b||"closed"===b?"bg-emerald-100 text-emerald-700":"rejected"===b?"bg-rose-100 text-rose-700":"bg-gray-100 text-gray-700"},az=async()=>{try{v(!0),x("");let a=await fetch(`${I}/regions`,{headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("bad");let b=await a.json(),c=[];b?.success&&Array.isArray(b?.data?.regions)?c=b.data.regions:Array.isArray(b)?c=b:Array.isArray(b?.data)?c=b.data:Array.isArray(b?.regions)?c=b.regions:b?._id&&b?.name&&(c=[b]),t(c)}catch{x("Error loading regions"),t([])}finally{v(!1)}};(0,d.useEffect)(()=>{az()},[]);let aA=(0,d.useCallback)(async()=>{if(K)try{B(!0),D("");let a=`${I}/regions/nearest?brokerId=${encodeURIComponent(K)}&limit=5`,b=await fetch(a,{headers:{"Content-Type":"application/json"}});if(!b.ok)throw Error("bad");let c=await b.json(),d=[];c?.success&&Array.isArray(c?.data?.regions)?d=c.data.regions:Array.isArray(c)?d=c:Array.isArray(c?.data)?d=c.data:Array.isArray(c?.regions)?d=c.regions:c?._id&&c?.name&&(d=[c]),z(d)}catch{D("Error loading nearest regions"),z([])}finally{B(!1)}},[I,null,K]),aB=[{value:"all",label:"All Status",isAll:!0},{value:"New",label:"New"},{value:"Assigned",label:"Assigned"},{value:"In Progress",label:"In Progress"},{value:"Closed",label:"Closed"},{value:"Rejected",label:"Rejected"}],aC=[{value:"all",label:"All Property Types"},{value:"Residential",label:"Residential"},{value:"Commercial",label:"Commercial"},{value:"Plot",label:"Plot"},{value:"Other",label:"Other"}],aD=[{value:"all",label:"All Requirements"},{value:"buy",label:"Buy"},{value:"rent",label:"Rent"},{value:"sell",label:"Sell"}],aE=(0,d.useMemo)(()=>[{value:"all",label:"All Regions"},...Array.isArray(s)?s.map(a=>({value:a._id||a.id||a,label:a.name||a.region||a})):[]],[s]);(0,d.useMemo)(()=>Array.isArray(y)?y.map(a=>({value:a._id||a.id||a,label:a.name||a.region||a})):[],[y]);let aF={control:(a,b)=>({...a,minHeight:"40px",borderRadius:10,border:"1px solid #e5e7eb",fontFamily:"var(--font-body, inherit)",fontSize:12,boxShadow:b.isFocused?"0 0 0 4px rgba(13,84,43,0.12)":"0 0 1px #171a1f12, 0 0 2px #171a1f1F",borderColor:b.isFocused?"#0D542B":"#e5e7eb",background:"white",":hover":{borderColor:(b.isFocused,"#0D542B")}}),valueContainer:a=>({...a,padding:"2px 10px",fontFamily:"var(--font-body, inherit)",fontSize:12}),indicatorSeparator:()=>({display:"none"}),menuPortal:a=>({...a,zIndex:99999}),option:(a,b)=>({...a,backgroundColor:b.isSelected?"#0D542B":b.isFocused?"#E8F8F0":"transparent",color:b.isSelected?"#ffffff":b.isFocused?"#0D542B":"#4b5563",fontSize:12,fontFamily:"var(--font-body, inherit)",borderRadius:6,margin:"2px 6px",padding:"8px 12px",whiteSpace:"normal",wordBreak:"break-word",overflowWrap:"break-word",maxWidth:"100%",":active":{backgroundColor:b.isSelected?"#0D542B":"#C8F1DC",color:b.isSelected?"#ffffff":"#0D542B"}}),singleValue:a=>({...a,color:"#6b7280",fontWeight:400,fontFamily:"var(--font-body, inherit)",fontSize:12}),input:a=>({...a,color:"#6b7280",fontWeight:400,fontFamily:"var(--font-body, inherit)",fontSize:12}),placeholder:a=>({...a,color:"#6b7280",fontWeight:400,fontFamily:"var(--font-body, inherit)",fontSize:12}),multiValueLabel:a=>({...a,color:"#6b7280",fontWeight:400,fontFamily:"var(--font-body, inherit)",fontSize:12}),menu:a=>({...a,zIndex:9999,overflowX:"hidden",overflowY:"visible",border:"1px solid #e5e7eb",borderRadius:10,fontFamily:"var(--font-body, inherit)",fontSize:12,minWidth:"100%",maxWidth:"100%"}),menuList:a=>({...a,maxHeight:180,overflowY:"auto",overflowX:"hidden",paddingRight:8,fontFamily:"var(--font-body, inherit)",fontSize:12})},aG=(0,d.useMemo)(()=>{let a=new Map;return(Array.isArray(s)?s:[]).forEach(b=>{let c=b?._id||b?.id,d=b?.name||b?.region||b?.city||"";c&&d&&a.set(String(c),String(d))}),a},[s]),aH=a=>a?"string"==typeof a?aG.get(a)||a:"object"==typeof a&&(a.name||a.region||a.city)||"":"",aI=a=>{if(!a&&0!==a)return"—";let b="number"==typeof a?a:Number(String(a).replace(/[^0-9.]/g,""));if(isNaN(b)||0===b)return"—";if(b>=1e7){let a=b/1e7;return`₹${a%1==0?a.toFixed(0):a.toFixed(2)} Cr`}if(b>=1e5){let a=b/1e5;return`₹${a%1==0?a.toFixed(0):a.toFixed(2)} Lakh`}if(!(b>=1e3))return`₹${b.toLocaleString("en-IN")}`;{let a=b/1e3;return`₹${a%1==0?a.toFixed(0):a.toFixed(2)}K`}},[aJ,aK]=(0,d.useState)(!1),[aL,aM]=(0,d.useState)(!1),[aN,aO]=(0,d.useState)({customerName:"",customerPhone:"",customerEmail:"",requirement:{value:"all",label:"All Requirements"},propertyType:{value:"all",label:"All propertyType"},budget:"",primaryRegion:null,secondaryRegion:null,notes:"",files:null}),[aP,aQ]=(0,d.useState)({});(0,d.useEffect)(()=>{aJ&&K&&aA()},[aJ,K,aA]);let aR=a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),aS=a=>{let{name:b,value:c,files:d}=a.target;if("customerPhone"===b){let a=c.replace(/\D/g,"").slice(0,10);aO(c=>({...c,[b]:a}));let d={...aP};a.length>0&&a.length<10?d.customerPhone="Phone number must be 10 digits":delete d.customerPhone,aQ(d);return}if("customerEmail"===b){aO(a=>({...a,[b]:c}));let a={...aP};c.length>0&&!aR(c)?a.customerEmail="Please enter a valid email address":delete a.customerEmail,aQ(a);return}aO(a=>({...a,[b]:d||c})),aP[b]&&aQ(a=>({...a,[b]:""}))},aT={...aF,menuPortal:a=>({...a,zIndex:999999}),menuList:a=>({...a,maxHeight:150,overflowY:"auto",overflowX:"hidden",paddingRight:8,fontFamily:"var(--font-body, inherit)",fontSize:12})},aU={...aF,menu:a=>({...a,zIndex:99999,overflowX:"hidden",overflowY:"visible",border:"1px solid #e5e7eb",borderRadius:10,fontFamily:"var(--font-body, inherit)",fontSize:12,minWidth:"100%",maxWidth:"100%"}),menuList:a=>({...a,overflowX:"hidden",overflowY:"auto",maxHeight:120,paddingRight:8,fontFamily:"var(--font-body, inherit)",fontSize:12}),menuPortal:a=>({...a,zIndex:99999})},aV=async()=>{if(!(()=>{let a={};if(aN.customerName.trim()||(a.customerName="Customer name is required"),aN.customerPhone.trim()){var b;b=aN.customerPhone,/^\d{10}$/.test(b.replace(/\D/g,""))||(a.customerPhone="Phone number must be exactly 10 digits")}else a.customerPhone="Phone number is required";return aN.customerEmail.trim()?aR(aN.customerEmail)||(a.customerEmail="Please enter a valid email address"):a.customerEmail="Email is required",aQ(a),0===Object.keys(a).length})())return void g.default.error("Please fix the validation errors before submitting");try{aM(!0);let a="object"==typeof aN.requirement?aN.requirement.label||aN.requirement.value:aN.requirement,b="object"==typeof aN.propertyType?aN.propertyType.label||aN.propertyType.value:aN.propertyType,c=aN.primaryRegion&&"object"==typeof aN.primaryRegion?aN.primaryRegion.value||aN.primaryRegion._id:aN.primaryRegion,d=aN.secondaryRegion&&"object"==typeof aN.secondaryRegion?aN.secondaryRegion.value||aN.secondaryRegion._id:aN.secondaryRegion,e={customerName:aN.customerName||"",customerPhone:aN.customerPhone||"",customerEmail:aN.customerEmail||"",requirement:a||"",propertyType:b||"",budget:""!==aN.budget&&null!==aN.budget?parseFloat(aN.budget):0,primaryRegionId:c&&"select region"!==c?c:"",createdBy:K};d&&"select region"!==d&&(e.secondaryRegionId=d);let f=await fetch(`${I}/leads`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!f.ok){try{let a=await f.json(),b=a?.message||a?.error||"Failed to create lead";g.default.error(b)}catch{g.default.error("Failed to create lead")}return}let h=null;try{h=await f.json()}catch{}let i=h&&(h.lead||h.data||h.newLead)||h||null;g.default.success("Lead created successfully"),await ax();let j=i&&(i._id||i.id)?i:await bc();j&&bk(j),aX(!0),aZ({brokerIds:[],notes:"",selectAllFiltered:!1}),a6&&0!==a6.length||bd(),aK(!1),aO({customerName:"",customerPhone:"",customerEmail:"",requirement:"select requirement",propertyType:"select propertyType",budget:"",region:"select region",notes:"",files:null}),aQ({})}catch{g.default.error("Error creating lead")}finally{aM(!1)}},[aW,aX]=(0,d.useState)(!1),[aY,aZ]=(0,d.useState)({brokerIds:[],notes:"",selectAllFiltered:!1}),[a$,a_]=(0,d.useState)("");(0,d.useRef)(null);let[a0,a1]=(0,d.useState)("all"),[a2,a3]=(0,d.useState)(null),[a4,a5]=(0,d.useState)(!1),[a6,a7]=(0,d.useState)([]),[a8,a9]=(0,d.useState)(!1),[ba,bb]=(0,d.useState)(""),bc=(0,d.useCallback)(async()=>{try{let a=new URLSearchParams;K&&a.set("createdBy",K),a.set("limit","5");let b=`${I}/leads?${a.toString()}`,c=await fetch(b,{headers:{"Content-Type":"application/json"}});if(!c.ok)return null;let d=await c.json(),e=Array.isArray(d?.data?.items)?d.data.items:Array.isArray(d?.data?.leads)?d.data.leads:Array.isArray(d?.data)?d.data:Array.isArray(d?.leads)?d.leads:Array.isArray(d)?d:[];if(!e||0===e.length)return null;let f=e.map(a=>({item:a,ts:a?.createdAt?Date.parse(a.createdAt):a?._id?Date.parse(a._id?.toString().substring(0,8)):0})).sort((a,b)=>(b.ts||0)-(a.ts||0));return f[0]?.item||e[0]||null}catch{return null}},[I,null,K]),bd=async()=>{try{a9(!0),bb("");let a=await fetch(`${I}/brokers`,{headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("bad");let b=await a.json(),c=[];Array.isArray(b?.data?.brokers)?c=b.data.brokers:Array.isArray(b?.data)?c=b.data:Array.isArray(b?.brokers)?c=b.brokers:Array.isArray(b)&&(c=b),a7(c)}catch{bb("Failed to load brokers"),a7([])}finally{a9(!1)}},be=async a=>{let b=a?.transferredTo||a?.transferredBrokers||a?.transfers||[];if(Array.isArray(b)&&b.length>0)return void g.default.error("Cannot delete lead that has been transferred to other brokers");try{let b=a?._id||a?.id;if(!b)return void g.default.error("Invalid lead id");let c=await fetch(`${I}/leads/${b}`,{method:"DELETE",headers:{}});if(!c.ok){try{let a=await c.json(),b=a?.message||a?.error||"Failed to delete lead";g.default.error(b)}catch{g.default.error("Failed to delete lead")}return}g.default.success("Lead deleted"),await ax()}catch(a){g.default.error("Error deleting lead")}},bf=a=>{bk(a),aZ({brokerIds:[],notes:""}),a1("all"),a3(null),aX(!0),a6&&0!==a6.length||bd()},bg=async()=>{if(!bj)return void g.default.error("No lead selected");let a=bj._id||bj.id;if(!a){let b=await bc();b&&(b._id||b.id)&&(a=b._id||b.id,bk(a=>({...b||a})))}if(!a)return void g.default.error("Invalid lead id");if(!K)return void g.default.error("Broker ID not found");let b=[];if("all"===a0)b.push({shareType:"all"});else if("region"===a0){if(!(a2&&a2.value))return void g.default.error("Select a region to share with");let a=String(a2.value);b.push({shareType:"region",region:a})}else{if("select"!==a0)return void g.default.error("Invalid share mode");let a=(aY.brokerIds||[]).filter(a=>"all"!==a);if(!a.length)return void g.default.error("Select at least one broker");a.forEach(a=>{b.push({shareType:"individual",toBroker:String(a)})})}let c={transfers:b,fromBroker:String(K)};aY.notes&&aY.notes.trim()&&(c.notes=aY.notes.trim());try{a5(!0);let b=await fetch(`${I}/leads/${a}/transfer-and-notes`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(c)});if(!b.ok){let a="Failed to share lead";try{let c=await b.json();console.error("Transfer API error response:",c),a=c.message||c.error||a}catch(d){let c=await b.text().catch(()=>"");console.error("Transfer API error (text):",c),a=c||a}g.default.error(a);return}g.default.success("Share request sent"),aX(!1),aZ({brokerIds:[],notes:""}),a3(null),a1("all")}catch(a){g.default.error("Error sending transfer request")}finally{a5(!1)}},[bh,bi]=(0,d.useState)(!1),[bj,bk]=(0,d.useState)(null),[bl,bm]=(0,d.useState)(!1),[bn,bo]=(0,d.useState)(!1),[bp,bq]=(0,d.useState)(!1),[br,bs]=(0,d.useState)(!1),[bt,bu]=(0,d.useState)({name:"",contact:"",email:"",budget:"",requirement:"",propertyType:"",primaryRegion:null,secondaryRegion:null,status:""}),[bv,bw]=(0,d.useState)(!1),[bx,by]=(0,d.useState)(null),[bz,bA]=(0,d.useState)(null);(0,d.useEffect)(()=>{bh&&K&&aA()},[bh,K,aA]);let bB=async a=>{try{if(!bj||!a)return;let b=bj._id||bj.id,c=await fetch(`${I}/leads/${encodeURIComponent(b)}/transfers/${encodeURIComponent(a)}`,{method:"DELETE",headers:{Accept:"application/json"}});if(!c.ok){try{let a=await c.json();g.default.error(a?.message||a?.error||"Failed to delete transfer")}catch{g.default.error("Failed to delete transfer")}return}g.default.success("Transfer removed"),await ax(),bk(b=>{if(!b)return b;let c=Array.isArray(b.transfers)?b.transfers.filter(b=>{let c=b&&"object"==typeof b.toBroker?b.toBroker?._id||b.toBroker?.id:b?.toBroker;return String(c)!==String(a)}):[];return{...b,transfers:c}}),by(null)}catch{g.default.error("Error deleting transfer")}},bC=async a=>{try{if(!bj||!a)return;let b=bj._id||bj.id;bA(a);let c=await fetch(`${I}/leads/${encodeURIComponent(b)}/region-transfers/${encodeURIComponent(a)}`,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!c.ok){try{let a=await c.json();g.default.error(a?.message||a?.error||"Failed to delete region transfer")}catch{g.default.error("Failed to delete region transfer")}bA(null);return}g.default.success("Region transfer removed"),await ax(),bk(b=>{if(!b)return b;let c=Array.isArray(b.transfers)?b.transfers.filter(b=>{let c=b?.region;return String(c)!==String(a)}):[];return{...b,transfers:c}}),bA(null)}catch{g.default.error("Error deleting region transfer"),bA(null)}},bD=async()=>{if(bj)try{bw(!0);let a=bj._id||bj.id,b={customerName:void 0!==bt.name?bt.name:bj.customerName||bj.name||"",customerPhone:void 0!==bt.contact?bt.contact:bj.customerPhone||"",customerEmail:void 0!==bt.email?bt.email:bj.customerEmail||"",requirement:void 0!==bt.requirement?bt.requirement:bj.requirement||"",propertyType:void 0!==bt.propertyType?bt.propertyType:bj.propertyType||"",budget:""!==bt.budget&&null!==bt.budget?Number(bt.budget):"number"==typeof bj.budget?bj.budget:0,status:bt.status?bt.status:bj.status||"New"};bt.primaryRegion&&bt.primaryRegion.value&&"all"!==bt.primaryRegion.value&&(b.primaryRegionId=bt.primaryRegion.value),bt.secondaryRegion&&bt.secondaryRegion.value&&"all"!==bt.secondaryRegion.value&&(b.secondaryRegionId=bt.secondaryRegion.value);let c=await fetch(`${I}/leads/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok){try{let a=await c.json(),b=a?.message||a?.error||"Failed to update lead";g.default.error(b)}catch{g.default.error("Failed to update lead")}return}let d=await c.json(),e=d?.data||d;bk(a=>({...a,...e,name:e.name||e.customerName||bt.name||a?.name,customerName:e.customerName||bt.name||a?.customerName,contact:e.contact||e.customerPhone||bt.contact||a?.contact,customerPhone:e.customerPhone||bt.contact||a?.customerPhone,customerEmail:e.customerEmail||bt.email||a?.customerEmail,requirement:e.requirement||bt.requirement||a?.requirement,propertyType:e.propertyType||bt.propertyType||a?.propertyType,budget:"number"==typeof e.budget?e.budget:""!==bt.budget?Number(bt.budget):a?.budget,primaryRegion:e.primaryRegion||(bt.primaryRegion?{name:bt.primaryRegion.label,_id:bt.primaryRegion.value}:a?.primaryRegion||a?.region),secondaryRegion:e.secondaryRegion||(bt.secondaryRegion?{name:bt.secondaryRegion.label,_id:bt.secondaryRegion.value}:a?.secondaryRegion)})),g.default.success("Lead updated"),bm(!1),await ax()}catch(a){g.default.error("Error updating lead")}finally{bw(!1)}},bE=a=>bu(b=>({...b,[a.target.name]:a.target.value}));return(0,b.jsxs)(k.default,{requiredRole:"broker",children:[(0,b.jsx)(h.default,{data:{title:"My Enquiries",description:"Manage your property requirements, track status, and collaborate with brokers — all in one place."}}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 min-h-screen bg-white py-16",children:[(0,b.jsx)(g.Toaster,{position:"top-right",toastOptions:{duration:3e3}}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 w-full mx-auto px-4 md:px-0",children:(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 grid grid-cols-1 md:grid-cols-12 gap-6",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 md:col-span-9",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 mb-6",children:(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,b.jsx)("h1",{className:"jsx-5f133ba9f9a414f4  font-archivo text-[18px] leading-[36px] font-bold text-[#171A1FFF]",children:"Enquiry Management"}),(0,b.jsx)("p",{className:"jsx-5f133ba9f9a414f4 text-[12px] leading-[20px] font-normal text-[#565D6DFF]",children:"Capture enquiries, share with brokers, and track progress — all in one place."})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-3",children:[(0,b.jsx)("button",{type:"button",role:"switch","aria-checked":"transferred"===o,onClick:()=>{let a="my-leads"===o?"transferred":"my-leads";p(a),ai(1),ax(q,1,aj,ao,a)},className:`jsx-5f133ba9f9a414f4 relative inline-flex h-5 w-10 items-center rounded-full transition-colors duration-200 border ${"transferred"===o?"bg-green-900 border-green-900":"bg-gray-200 border-gray-300"}`,children:(0,b.jsx)("span",{className:`jsx-5f133ba9f9a414f4 inline-block h-5 w-5 transform rounded-full bg-white shadow transition-transform duration-200 ${"transferred"===o?"translate-x-5":"translate-x-0"}`})}),(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-[12px] leading-5 font-normal text-[#565D6D]",children:"transferred"===o?"Transferred to Me":" My Enquiries"})]})]})}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 border border-gray-200 shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] bg-white rounded-lg p-4",children:[(0,b.jsx)("p",{className:"jsx-5f133ba9f9a414f4 text-[12px] text-[#565D6DFF] font-medium",children:"Total Enquiries"}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2",children:(0,b.jsx)("p",{className:"jsx-5f133ba9f9a414f4 text-[18px] font-semibold text-gray-900",children:R?"—":P.totalLeads.toLocaleString()})})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 border border-gray-200 shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] bg-white rounded-lg p-4",children:[(0,b.jsx)("p",{className:"jsx-5f133ba9f9a414f4 text-[12px] text-[#565D6DFF] font-medium",children:"Shared With Me"}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2",children:(0,b.jsx)("p",{className:"jsx-5f133ba9f9a414f4 text-[18px] font-semibold text-gray-900",children:R?"—":Number(P.transferredToMe||P.transfersToMe||0).toLocaleString()})})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 border shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] border-gray-200 bg-white rounded-lg p-4",children:[(0,b.jsx)("p",{className:"jsx-5f133ba9f9a414f4 text-[12px] text-[#565D6DFF] font-medium",children:"Shared By Me"}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2",children:(0,b.jsx)("p",{className:"jsx-5f133ba9f9a414f4 text-[18px] font-semibold text-gray-900",children:R?"—":Number(P.transferredByMe||P.transfersByMe||0).toLocaleString()})})]})]}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 pt-4",children:(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 h-px bg-gray-100"})}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 mt-6 flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 w-full sm:w-80 relative",children:[(0,b.jsx)("input",{type:"text",placeholder:"Search by name, budget, region, or property type…",value:q.query,onChange:a=>r({...q,query:a.target.value}),style:{minHeight:"40px",fontSize:"12px"},className:"jsx-5f133ba9f9a414f4 w-full pl-11 pr-4 py-2 border border-gray-200 rounded-xl shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] bg-white text-[12px] font-body placeholder-gray-500 focus:outline-none focus:ring-4 focus:ring-green-100 focus:border-green-600"}),(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-5 h-5 text-gray-500 absolute left-3 top-1/2 -translate-y-1/2",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-4.35-4.35M10 18a8 8 0 100-16 8 8 0 000 16z",className:"jsx-5f133ba9f9a414f4"})}),aq&&(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 absolute right-3 top-1/2 -translate-y-1/2",children:(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 w-4 h-4 border-2 border-green-600 border-t-transparent rounded-full animate-spin"})})]}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 w-full sm:w-52",children:(0,b.jsx)(i.default,{value:q.status,onChange:a=>{let b={...q,status:a};r(b),ai(1),ax(b,1,aj,ao)},options:aB,styles:aF,isSearchable:!0,menuPlacement:"bottom"})}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 w-full sm:w-auto",children:(0,b.jsxs)("button",{type:"button",onClick:()=>n(!0),style:{minHeight:"40px",fontSize:"12px"},className:"jsx-5f133ba9f9a414f4 w-full sm:w-auto px-3 py-2.5 rounded-xl text-[12px] font-body border border-gray-200 bg-white text-gray-500 hover:text-gray-600 hover:bg-white hover:border-gray-300 shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] cursor-pointer whitespace-nowrap flex items-center justify-center gap-2",children:[(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z",className:"jsx-5f133ba9f9a414f4"})}),"Advanced Filters"]})}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 w-full sm:w-auto",children:(0,b.jsxs)("button",{type:"button",onClick:()=>aK(!0),style:{minHeight:"40px",fontSize:"12px"},className:"jsx-5f133ba9f9a414f4 w-full sm:w-auto px-3 py-2.5 rounded-xl text-[12px] border border-green-600 text-white bg-[#0D542B]  hover:bg-[#0B4624]  hover:border-green-700 shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] cursor-pointer whitespace-nowrap flex items-center justify-center gap-2",children:[(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6",className:"jsx-5f133ba9f9a414f4"})}),"Add New Enquiry"]})}),G&&(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 w-full sm:w-auto",children:(0,b.jsx)("button",{type:"button",onClick:H,title:"Clear advanced filters",className:"jsx-5f133ba9f9a414f4 w-full sm:w-auto px-3 py-2.5 rounded-xl text-[12px] font-semibold border border-gray-200 text-gray-700 hover:bg-gray-50 shadow-sm cursor-pointer whitespace-nowrap",children:"Clear Filters"})})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 mt-6",children:[ad&&(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(6)].map((a,c)=>(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 rounded-2xl border border-gray-200 bg-white shadow-sm p-4 animate-pulse",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 h-5 w-2/3 bg-gray-200 rounded mb-3"}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 h-4 w-1/2 bg-gray-200 rounded mb-4"}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 h-28 w-full bg-gray-100 rounded mb-4"}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 h-7 w-28 bg-gray-200 rounded"}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex gap-2",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 h-7 w-7 bg-gray-200 rounded-lg"}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 h-7 w-7 bg-gray-200 rounded-lg"}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 h-7 w-7 bg-gray-200 rounded-lg"})]})]})]},c))}),!ad&&Array.isArray(ab)&&0===ab.length&&(0,b.jsx)(()=>(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-6",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:(0,b.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No enquiries found"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 text-center max-w-sm",children:q.query||q.status?.value!=="all"||q.region?.value!=="all"||q.propertyType?.value!=="all"||q.requirement?.value!=="all"||5e5!==q.budgetMax?"No enquiries match your current filters. Try adjusting your search criteria.":"You don't have any leads yet. Click 'Add New Enquiry' to get started."}),!q.query&&q.status?.value==="all"&&q.region?.value==="all"&&q.propertyType?.value==="all"&&q.requirement?.value==="all"&&5e5===q.budgetMax&&(0,b.jsx)("button",{onClick:()=>aK(!0),className:"mt-4 px-4 py-2 bg-green-900 text-white text-sm font-semibold rounded-lg hover:bg-green-950 transition-colors",children:"Add Your First Enquiry"})]}),{className:"jsx-5f133ba9f9a414f4"}),!ad&&Array.isArray(ab)&&ab.length>0&&(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 md:grid-cols-2 xl:grid-cols-2 gap-6",children:ab.map((a,c)=>{let d=Array.from(new Map((Array.isArray(a?.transfers)?a.transfers:[]).map(a=>"object"==typeof a?.toBroker?a.toBroker:{_id:a?.toBroker}).filter(a=>a&&(a._id||a.name||a.email)).map(a=>[a._id||a.email||a.name,a])).values()),e=new Map((a6||[]).map(a=>[a._id||a.id,a]));d.map(a=>{let b=a._id?{...e.get(a._id)||{},...a}:a;return{id:b._id||b.id||b.email||b.name,name:b.name||b.fullName||b.email||"Broker",image:b.brokerImage||b.avatarUrl||b.imageUrl||""}});let f=(()=>{let b=a?.transferredTo||a?.transferredBrokers||a?.transfers||[];return Array.isArray(b)&&b.length>0})();return(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 group relative border shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] border-gray-200 bg-white rounded-lg",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 absolute top-0 right-0 z-10",children:(0,b.jsx)("div",{style:{background:a.status?.toLowerCase()==="new"?"#FDC700":a.status?.toLowerCase()==="assigned"?"linear-gradient(90deg, #3b82f6 0%, #1e40af 100%)":a.status?.toLowerCase()==="in progress"?"linear-gradient(90deg, #f59e0b 0%, #dc2626 100%)":a.status?.toLowerCase()==="completed"?"linear-gradient(90deg, #10b981 0%, #047857 100%)":a.status?.toLowerCase()==="shared"?"linear-gradient(90deg, #8b5cf6 0%, #6d28d9 100%)":a.status?.toLowerCase()==="closed"?"linear-gradient(90deg, #10b981 0%, #047857 100%)":a.status?.toLowerCase()==="rejected"?"linear-gradient(90deg, #ef4444 0%, #dc2626 100%)":a.status?.toLowerCase()==="transferred"?"linear-gradient(90deg, #f97316 0%, #ea580c 100%)":a.status?.toLowerCase()==="active"?"linear-gradient(90deg, #10b981 0%, #047857 100%)":"#FDC700",minWidth:"50px"},className:"jsx-5f133ba9f9a414f4 text-black text-[10px] leading-[20px] font-semibold px-[10px] py-[2px] text-center rounded-bl-lg rounded-tr-lg",children:a.status?a.status.toUpperCase():"NEW"})}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 p-6 pt-8",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-start justify-between mb-4",children:(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-start gap-4",children:[(()=>{let c=(a=>{let b=[{bg:"bg-sky-100",text:"text-sky-800"},{bg:"bg-emerald-100",text:"text-emerald-800"},{bg:"bg-violet-100",text:"text-violet-800"}],c=String(a||""),d=0;for(let a=0;a<c.length;a++)d=31*d+c.charCodeAt(a)>>>0;return b[d%b.length]})(a.customerName||a.name);return(0,b.jsx)("div",{className:`jsx-5f133ba9f9a414f4 w-12 h-12 rounded-full flex items-center justify-center text-[12px] font-semibold ${c.bg} ${c.text}`,children:(a.customerName||a.name||"-").split(" ").map(a=>a[0]).filter(Boolean).join("").slice(0,2).toUpperCase()})})(),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1 pr-4",children:[(0,b.jsx)("h3",{className:"jsx-5f133ba9f9a414f4 break-words text-[14px] leading-[24px] font-semibold text-[#171A1F]",children:a.customerName||a.name||"-"}),(0,b.jsx)("p",{className:"jsx-5f133ba9f9a414f4 text-[12px] font-normal text-[#565D6D] break-words leading-tight",children:a.customerEmail||a.customerPhone||a.contact||"-"})]})]})}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 space-y-3",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex justify-between items-center gap-2",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-[12px] font-normal text-[#565D6D] break-words uppercase tracking-wide mb-1.5",children:"Requirement"}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4",children:a.requirement||a.req?(0,b.jsx)("span",{className:`jsx-5f133ba9f9a414f4 inline-flex items-center px-2.5 py-1 rounded-full text-[11px] font-semibold ${"sell"===(a.requirement||a.req||"").toLowerCase()?"bg-green-100 text-green-800":"buy"===(a.requirement||a.req||"").toLowerCase()?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:a.requirement||a.req}):(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-[12px] text-gray-400",children:"—"})})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1 pl-4",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-[12px] font-normal text-[#565D6D] break-words uppercase tracking-wide mb-1.5",children:"Property Type"}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4",children:a.propertyType?(0,b.jsx)("span",{className:`jsx-5f133ba9f9a414f4 inline-flex items-center px-2.5 py-1 rounded-full text-[11px] font-semibold ${"commercial"===(a.propertyType||"").toLowerCase()?"bg-yellow-100 text-yellow-800":"residential"===(a.propertyType||"").toLowerCase()?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:a.propertyType}):(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-[12px] text-gray-400",children:"—"})})]})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex justify-between items-top gap-2",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-[12px] font-normal text-[#565D6D] break-words uppercase tracking-wide mb-1.5",children:"Budget"}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 break-words text-[12px] leading-[18px] font-bold text-green-700  py-1 rounded",children:aI(a.budget)})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1 pl-4",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-[12px] font-normal text-[#565D6D] break-words uppercase tracking-wide mb-1.5",children:"Location"}),(()=>{var c;let{primary:d,secondary:e}=(c=a,{primary:aH(c?.primaryRegion||c?.region),secondary:aH(c?.secondaryRegion)});return(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 break-words text-[12px] leading-[16px] flex flex-col gap-1 font-medium text-[#171A1F]",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4",children:d||"—"}),e&&(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 break-words text-[12px] leading-[16px]  font-medium text-[#171A1F]",children:e})]})})()]})]})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-end justify-between  pt-4 ",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 uppercase tracking-wide mb-2 text-[12px] leading-[12px] font-normal text-[#565D6D]",children:"SHARED WITH"}),(()=>{let c=Array.isArray(a?.transfers)?a.transfers:[];if(0===c.length)return(0,b.jsxs)("span",{className:"jsx-5f133ba9f9a414f4 text-[11px] font-normal text-[#565D6D] italic",children:["Not yet shared — ",(0,b.jsx)("span",{onClick:b=>{b.stopPropagation(),bf(a)},className:"jsx-5f133ba9f9a414f4 text-green-700 font-semibold cursor-pointer hover:underline",children:"Share now"})]});let d=c.filter(a=>"all"===a.shareType||!a.shareType&&!a.toBroker&&!a.region),e=c.filter(a=>"region"===a.shareType||!a.shareType&&a.region&&!a.toBroker),f=c.filter(a=>"individual"===a.shareType||!a.shareType&&a.toBroker&&!a.region);if(d.length>0)return(0,b.jsxs)("span",{className:"jsx-5f133ba9f9a414f4 text-[10px] font-normal text-[#565D6D] flex items-center gap-1",children:[(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-medium bg-blue-100 text-blue-800",children:"All"}),(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4",children:"All brokers"})]});if(e.length>0&&0===f.length){let a=e.map(a=>{let b=a?.region;return aH(b)||b||"Unknown Region"}).filter((a,b,c)=>c.indexOf(a)===b);return(0,b.jsxs)("span",{className:"jsx-5f133ba9f9a414f4 text-[10px] font-normal text-[#565D6D] flex items-center gap-1 flex-wrap",children:[(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-medium bg-green-100 text-green-800",children:"Region"}),(0,b.jsxs)("span",{className:"jsx-5f133ba9f9a414f4",children:[a.slice(0,2).join(", "),a.length>2?` +${a.length-2}`:""]})]})}let g=Array.from(new Map(f.map(a=>"object"==typeof a?.toBroker?a.toBroker:{_id:a?.toBroker}).filter(a=>a&&(a._id||a.name||a.email)).map(a=>[a._id||a.email||a.name,a])).values()),h=new Map((a6||[]).map(a=>[a._id||a.id,a])),i=g.map(a=>{let b=a._id?{...h.get(a._id)||{},...a}:a;return{id:b._id||b.id||b.email||b.name,name:b.name||b.fullName||b.email||"Broker",image:b.brokerImage||b.avatarUrl||b.imageUrl||""}});if(e.length>0&&f.length>0){let a=e.map(a=>{let b=a?.region;return aH(b)||b||"Unknown"}).filter((a,b,c)=>c.indexOf(a)===b),c=i.slice(0,2),d=Math.max(0,i.length-c.length);return(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex flex-col gap-1",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-1",children:[(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-medium bg-green-100 text-green-800",children:"Region"}),(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-[10px] text-[#565D6D]",children:a.slice(0,1).join(", ")})]}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center",children:(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex -space-x-2",children:[c.map((a,c)=>(0,b.jsx)("div",{title:a.name,className:"jsx-5f133ba9f9a414f4 w-7 h-7 rounded-full ring-2 ring-white bg-gray-200 overflow-hidden flex items-center justify-center text-[10px] text-gray-600",children:(0,b.jsx)("img",{src:a.image||"https://www.w3schools.com/howto/img_avatar.png",alt:a.name,className:"jsx-5f133ba9f9a414f4 w-full h-full object-cover"})},`${a.id||"broker"}-${c}`)),d>0&&(0,b.jsxs)("div",{title:`+${d} more`,className:"jsx-5f133ba9f9a414f4 w-7 h-7 rounded-full ring-2 ring-white bg-yellow-400 text-black flex items-center justify-center text-[11px] font-semibold",children:["+",d]})]})})]})}if(0===i.length)return(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-[10px] font-normal text-[#565D6D]",children:"Not shared"});let j=i.slice(0,2),k=Math.max(0,i.length-j.length);return(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center",children:(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex -space-x-2",children:[j.map((a,c)=>(0,b.jsx)("div",{title:a.name,className:"jsx-5f133ba9f9a414f4 w-7 h-7 rounded-full ring-2 ring-white bg-gray-200 overflow-hidden flex items-center justify-center text-[10px] text-gray-600",children:(0,b.jsx)("img",{src:a.image||"https://www.w3schools.com/howto/img_avatar.png",alt:a.name,className:"jsx-5f133ba9f9a414f4 w-full h-full object-cover"})},`${a.id||"broker"}-${c}`)),k>0&&(0,b.jsxs)("div",{title:`+${k} more`,className:"jsx-5f133ba9f9a414f4 w-7 h-7 rounded-full ring-2 ring-white bg-yellow-400 text-black flex items-center justify-center text-[11px] font-semibold",children:["+",k]})]})})})()]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-4",children:[(0,b.jsxs)("button",{title:"View Details",onClick:()=>{bk(a),bm(!1),bo(!1),bu({name:a.customerName||a.name||"",contact:a.customerPhone||a.contact||"",email:a.customerEmail||"",budget:String(a.budget??""),requirement:a.requirement||a.req||"",propertyType:a.propertyType||"",primaryRegion:a.primaryRegion?{value:a.primaryRegion._id||a.primaryRegion.id||a.primaryRegion,label:a.primaryRegion.name||a.primaryRegion}:a.region?"object"==typeof a.region?{value:a.region._id||a.region.id||a.region,label:a.region.name||a.region}:{value:a.region,label:aH(a.region)||a.region}:null,secondaryRegion:a.secondaryRegion?{value:a.secondaryRegion._id||a.secondaryRegion.id||a.secondaryRegion,label:a.secondaryRegion.name||a.secondaryRegion}:null,status:a.status||"active"}),bi(!0)},className:"jsx-5f133ba9f9a414f4 flex items-center gap-1 text-[12px] font-medium text-[#565D6D] hover:text-green-900 transition-colors cursor-pointer",children:[(0,b.jsxs)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-5 h-5",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z",className:"jsx-5f133ba9f9a414f4"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z",className:"jsx-5f133ba9f9a414f4"})]}),(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-[12px] font-medium text-[#565D6D]",children:"View"})]}),(0,b.jsxs)("button",{title:"Transfer Lead",onClick:()=>bf(a),className:"jsx-5f133ba9f9a414f4 flex items-center gap-1 text-[12px] font-medium text-[#565D6D] hover:text-blue-800 transition-colors cursor-pointer",children:[(0,b.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-5f133ba9f9a414f4 w-4 h-4",children:[(0,b.jsx)("line",{x1:"22",y1:"2",x2:"11",y2:"13",className:"jsx-5f133ba9f9a414f4"}),(0,b.jsx)("polygon",{points:"22 2 15 22 11 13 2 9 22 2",className:"jsx-5f133ba9f9a414f4"})]}),(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-[12px] font-medium text-[#565D6D]",children:"Share"})]}),(0,b.jsxs)("button",{title:"Delete Lead",onClick:()=>!f&&be(a),disabled:f,className:`jsx-5f133ba9f9a414f4 flex items-center gap-1 text-[12px] font-medium transition-colors ${f?"text-gray-300 cursor-not-allowed pointer-events-none":"text-[#565D6D] hover:text-[#565D6D] cursor-pointer"}`,children:[(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:`jsx-5f133ba9f9a414f4 w-4 h-4 ${f?"text-gray-300":""}`,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",className:"jsx-5f133ba9f9a414f4"})}),(0,b.jsx)("span",{className:`jsx-5f133ba9f9a414f4 text-[12px] font-medium ${f?"text-gray-300":"text-[#565D6D]"}`,children:"Delete"})]})]})]})]})]},a._id||a.id||c)})})]}),!ad&&Array.isArray(ab)&&ab.length>0&&(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between mt-4",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 text-sm text-gray-600",children:["Page ",ah," of ",an]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>ai(a=>Math.max(1,a-1)),disabled:ah<=1||an<=1,style:ah<=1||an<=1?{cursor:"not-allowed"}:{cursor:"pointer"},className:`jsx-5f133ba9f9a414f4 px-3 py-1.5 rounded-lg border border-gray-200 text-sm bg-white ${ah<=1||an<=1?"opacity-50 cursor-not-allowed pointer-events-none":"cursor-pointer hover:bg-gray-50"}`,children:"Prev"}),(0,b.jsx)("button",{onClick:()=>ai(a=>Math.min(an,a+1)),disabled:ah>=an||an<=1,style:ah>=an||an<=1?{cursor:"not-allowed"}:{cursor:"pointer"},className:`jsx-5f133ba9f9a414f4 px-3 py-1.5 rounded-lg border border-gray-200 text-sm bg-white ${ah>=an||an<=1?"opacity-50 cursor-not-allowed pointer-events-none":"cursor-pointer hover:bg-gray-50"}`,children:"Next"})]})]})]}),(0,b.jsxs)("aside",{className:"jsx-5f133ba9f9a414f4 md:col-span-3 space-y-6 md:sticky md:top-6 self-start",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 bg-white  p-4 rounded-[10px] border border-[#DEE1E6] shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F]",children:[(0,b.jsxs)("h4",{className:"jsx-5f133ba9f9a414f4  mb-3 flex items-center gap-2 text-[14px] leading-6 font-semibold text-[#171A1F]",children:[(0,b.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-gray-600 shrink-0 overflow-visible",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"10",className:"jsx-5f133ba9f9a414f4"}),(0,b.jsx)("path",{d:"M12 7v5l4 2",className:"jsx-5f133ba9f9a414f4"})]}),"Recent Activity"]}),(0,b.jsx)("ul",{className:"jsx-5f133ba9f9a414f4 text-sm text-slate-900 space-y-3",children:Y?(0,b.jsx)("li",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-center py-4",children:(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2 text-[12px] text-gray-500",children:[(0,b.jsxs)("svg",{fill:"none",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4 animate-spin",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"jsx-5f133ba9f9a414f4 opacity-25"}),(0,b.jsx)("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"jsx-5f133ba9f9a414f4 opacity-75"})]}),"Loading..."]})}):$?(0,b.jsx)("li",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-center py-4",children:(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-[12px] text-red-600",children:$})}):0===W.length?(0,b.jsx)("li",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-center py-4",children:(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-[12px] text-gray-500",children:"No recent activity"})}):W.map((a,c)=>{let d=a?.title||a?.message||a?.text||"Notification",e=a?.createdAt||a?.date||a?.timestamp;return(0,b.jsxs)("li",{className:"jsx-5f133ba9f9a414f4 flex items-start gap-3",children:[(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 mt-0.5 inline-flex items-center justify-center w-7 h-7 rounded-full bg-gray-100 text-gray-600 ring-1 ring-gray-200",children:(a=>{let c=(a?.type||a?.notificationType||"").toLowerCase(),d=(a?.title||a?.message||"").toLowerCase();return c.includes("lead")||d.includes("lead created")||d.includes("new lead")?(0,b.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,b.jsx)("circle",{cx:"10",cy:"7",r:"4"}),(0,b.jsx)("path",{d:"M19 8v6M22 11h-6"})]}):c.includes("email")||d.includes("email")||d.includes("follow-up")?(0,b.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2"}),(0,b.jsx)("path",{d:"M22 7 12 13 2 7"})]}):c.includes("status")||d.includes("status changed")||d.includes("qualified")||d.includes("closed")?(0,b.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,b.jsx)("path",{d:"M20 6 9 17l-5-5"})}):(0,b.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,b.jsx)("path",{d:"M12 7v5l4 2"})]})})(a)}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-[12px] leading-5 font-normal text-[#171A1F]",children:d}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-[10px] leading-5 font-normal text-[#565D6D]",children:(a=>{if(!a)return"";try{let b=new Date(a),c=new Date,d=c-b,e=Math.floor(d/6e4),f=Math.floor(d/36e5),g=Math.floor(d/864e5);if(e<1)return"Just now";if(e<60)return`${e} minute${e>1?"s":""} ago`;if(f<24)return`${f} hour${f>1?"s":""} ago`;if(1===g)return"Yesterday";if(g<7)return`${g} days ago`;return b.toLocaleDateString("en-US",{month:"short",day:"numeric",year:b.getFullYear()!==c.getFullYear()?"numeric":void 0})}catch{return""}})(e)})]})]},a?._id||a?.id||c)})})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 bg-white  p-4 rounded-[10px] border border-[#DEE1E6] shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F]",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between mb-2",children:[(0,b.jsxs)("h4",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2 text-[14px] leading-6 font-semibold text-[#171A1F]",children:[(0,b.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-gray-600 shrink-0 overflow-visible",children:[(0,b.jsx)("rect",{x:"3",y:"4",width:"18",height:"14",rx:"3",className:"jsx-5f133ba9f9a414f4"}),(0,b.jsx)("path",{d:"M8 18v3l3-3",className:"jsx-5f133ba9f9a414f4"})]}),"FAQ"]}),(0,b.jsx)("a",{href:"/faq",target:"_blank",rel:"noopener noreferrer",className:"jsx-5f133ba9f9a414f4  text-green-950 hover:underline hover:text-green-950 transition-colors text-[12px] leading-5 font-medium ",children:"View all"})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 space-y-2 text-[12px",children:[(0,b.jsxs)("details",{open:!0,className:"jsx-5f133ba9f9a414f4 group relative rounded-xl border border-slate-100 p-4 pr-5 transition-colors",children:[(0,b.jsxs)("summary",{className:"jsx-5f133ba9f9a414f4 list-none cursor-pointer flex items-center justify-between",children:[(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-[12px] leading-5 font-normal text-[#171A1F]",children:"What's the fastest way to add a new enquiry?"}),(0,b.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-slate-400 transition-transform group-open:rotate-180 group-open:text-gray-600 shrink-0 overflow-visible",children:(0,b.jsx)("path",{d:"m6 9 6 6 6-6",className:"jsx-5f133ba9f9a414f4"})})]}),(0,b.jsx)("p",{className:"jsx-5f133ba9f9a414f4 mt-2 pl-3 md:pl-4 text-[10px] leading-4 text-gray-600 border-l-2 border-gray-300",children:"Use the Add Enquiry button, fill name, phone, requirement and region. You can edit details later in Enquiry Details."})]}),(0,b.jsxs)("details",{className:"jsx-5f133ba9f9a414f4 group relative rounded-xl border border-slate-100 p-4 pr-5 transition-colors",children:[(0,b.jsxs)("summary",{className:"jsx-5f133ba9f9a414f4 list-none cursor-pointer flex items-center justify-between",children:[(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-[12px] leading-5 font-normal text-[#171A1F]",children:"How do I update my enquiry status?"}),(0,b.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-slate-400 transition-transform group-open:rotate-180 group-open:text-gray-600 shrink-0 overflow-visible",children:(0,b.jsx)("path",{d:"m6 9 6 6 6-6",className:"jsx-5f133ba9f9a414f4"})})]}),(0,b.jsx)("p",{className:"jsx-5f133ba9f9a414f4 mt-2 pl-3 md:pl-4 text-[10px] leading-4 text-slate-600 border-l-2 border-gray-300",children:"Open an enquiry, click Edit Status in the drawer header, pick the status and save."})]}),(0,b.jsxs)("details",{className:"jsx-5f133ba9f9a414f4 group relative rounded-xl border border-slate-100 p-4 pr-5 transition-colors",children:[(0,b.jsxs)("summary",{className:"jsx-5f133ba9f9a414f4 list-none cursor-pointer flex items-center justify-between",children:[(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-[12px] leading-5 font-normal text-[#171A1F]",children:"How do I share my enquiry securely?"}),(0,b.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-slate-400 transition-transform group-open:rotate-180 group-open:text-gray-600 shrink-0 overflow-visible",children:(0,b.jsx)("path",{d:"m6 9 6 6 6-6",className:"jsx-5f133ba9f9a414f4"})})]}),(0,b.jsx)("p",{className:"jsx-5f133ba9f9a414f4 mt-2 pl-3 md:pl-4 text-[10px] leading-4 text-slate-600 border-l-2 border-gray-300",children:"Use Share/Transfer, choose brokers, add notes and confirm. The transfer history appears in Enquiry Details."})]})]})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 bg-white rounded-[10px] border border-[#DEE1E6] shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] p-4",children:[(0,b.jsx)("h4",{className:"jsx-5f133ba9f9a414f4 mb-3 text-[12px] leading-6 font-semibold text-[#171A1F]",children:"Help & Support"}),(0,b.jsx)("p",{className:"jsx-5f133ba9f9a414f4 text-[10px] font-normal text-[#565D6D] mb-6 leading-relaxed",children:"Need help or looking for more details? Our comprehensive resources and support team are here for you."}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 space-y-3",children:[(0,b.jsxs)(e.default,{href:"/contact",className:"flex items-start gap-3 cursor-pointer hover:opacity-80 transition-opacity",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 mt-0.5 inline-flex items-center justify-center w-7 h-7  text-[#0D542B] shrink-0",children:(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",className:"jsx-5f133ba9f9a414f4"})})}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1",children:[(0,b.jsx)("h5",{className:"jsx-5f133ba9f9a414f4 text-[12px] leading-5 font-medium text-[#171A1F] hover:text-[#0D542B] transition-colors",children:"Visit Support Center"}),(0,b.jsx)("p",{className:"jsx-5f133ba9f9a414f4 text-[10px] leading-4 font-normal text-[#565D6D] hover:text-[#0D542B] transition-colors",children:"Get answers to frequently asked questions."})]})]}),(0,b.jsxs)(e.default,{href:"/help/documentation",className:"flex items-start gap-3 hover:opacity-80 transition-opacity cursor-pointer",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 mt-0.5 inline-flex items-center justify-center w-7 h-7 text-[#0D542B] shrink-0",children:(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253",className:"jsx-5f133ba9f9a414f4"})})}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1",children:[(0,b.jsx)("h5",{className:"jsx-5f133ba9f9a414f4 text-[12px] leading-5 font-medium text-[#171A1F]",children:"Read Documentation"}),(0,b.jsx)("p",{className:"jsx-5f133ba9f9a414f4 text-[10px] leading-4 font-normal text-[#565D6D]",children:"Explore our guides and platform tutorials."})]})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-start gap-3",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 mt-0.5 inline-flex items-center justify-center w-7 h-7  text-[#0D542B] shrink-0",children:(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",className:"jsx-5f133ba9f9a414f4"})})}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1",children:[(0,b.jsx)("h5",{className:"jsx-5f133ba9f9a414f4 text-[12px] leading-5 font-medium text-[#171A1F]",children:"Email Support"}),(0,b.jsx)("a",{href:`mailto:${l.SUPPORT_EMAIL}`,className:"jsx-5f133ba9f9a414f4 text-[10px] leading-4 font-normal text-[#565D6D] hover:text-green-900 transition-colors",children:l.SUPPORT_EMAIL})]})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-start gap-3",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 mt-0.5 inline-flex items-center justify-center w-7 h-7  text-[#0D542B] shrink-0",children:(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z",className:"jsx-5f133ba9f9a414f4"})})}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1",children:[(0,b.jsx)("h5",{className:"jsx-5f133ba9f9a414f4 text-[12px] leading-5 font-medium text-[#171A1F]",children:"Phone Support"}),(0,b.jsx)("a",{href:`tel:${l.SUPPORT_PHONE.replace(/\s+/g,"")}`,className:"jsx-5f133ba9f9a414f4 text-[10px] leading-4 font-normal text-[#565D6D] hover:text-green-900 transition-colors",children:l.SUPPORT_PHONE})]})]})]})]})]})]})}),m&&(0,b.jsxs)("div",{role:"dialog","aria-modal":"true",className:"jsx-5f133ba9f9a414f4 fixed inset-0 z-[100] flex items-center justify-center",children:[(0,b.jsx)("div",{onClick:()=>n(!1),className:"jsx-5f133ba9f9a414f4 absolute inset-0 bg-black/60"}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 relative w-full max-w-xl mx-4 bg-white rounded-2xl shadow-xl",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,b.jsx)("h4",{className:"jsx-5f133ba9f9a414f4 text-lg font-semibold text-slate-900",children:"Advanced Filters"}),(0,b.jsx)("p",{className:"jsx-5f133ba9f9a414f4 text-sm text-gray-600 mt-1",children:"Refine your enquiry list using region, requirement, property type, and budget filters."})]}),(0,b.jsx)("button",{onClick:()=>n(!1),"aria-label":"Close",className:"jsx-5f133ba9f9a414f4 p-2 rounded-lg hover:bg-gray-100",children:(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-5 h-5 text-gray-500",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12",className:"jsx-5f133ba9f9a414f4"})})})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 px-6 py-5 space-y-6 max-h-[70vh] overflow-auto",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,b.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-2",children:"Preferred Regions"}),u?(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-center py-3 border border-gray-200 rounded-lg bg-gray-50",children:(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2",children:[(0,b.jsxs)("svg",{fill:"none",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4 animate-spin text-gray-500",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"jsx-5f133ba9f9a414f4 opacity-25"}),(0,b.jsx)("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"jsx-5f133ba9f9a414f4 opacity-75"})]}),(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-sm text-gray-500",children:"Loading regions..."})]})}):w?(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 bg-rose-50 border border-rose-200 rounded-lg p-3 text-sm text-rose-700",children:w}):(0,b.jsx)(i.default,{value:q.region,onChange:a=>r({...q,region:a}),options:aE,placeholder:"Select Region (optional)",styles:{...aF,menuPortal:a=>({...a,zIndex:99999}),menu:a=>({...a,zIndex:99999})},menuPortalTarget:null,menuPosition:"fixed",menuPlacement:"auto",isSearchable:!0})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,b.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-2",children:"Requirement Type"}),(0,b.jsx)(i.default,{value:q.requirement,onChange:a=>r({...q,requirement:a}),options:aD,placeholder:"Buy / Sell / Rent",styles:{...aF,menuPortal:a=>({...a,zIndex:99999}),menu:a=>({...a,zIndex:99999})},menuPortalTarget:null,menuPosition:"fixed",menuPlacement:"auto",isSearchable:!0})," "]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,b.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-2",children:"Property Category"}),(0,b.jsx)(i.default,{value:q.propertyType,onChange:a=>r({...q,propertyType:a}),options:aC,placeholder:"Commercial / Residential / Plot",styles:{...aF,menuPortal:a=>({...a,zIndex:99999}),menu:a=>({...a,zIndex:99999})},menuPortalTarget:null,menuPosition:"fixed",menuPlacement:"auto",isSearchable:!0})," "]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,b.jsxs)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-4",children:["Max Budget:"," ",(0,b.jsxs)("span",{className:"jsx-5f133ba9f9a414f4 text-green-900 font-semibold",children:["$",q.budgetMax.toLocaleString()]})]}),(0,b.jsx)("input",{type:"range",min:"0",max:"1000000",step:"10000",value:q.budgetMax,onChange:a=>r({...q,budgetMax:Number(a.target.value)}),className:"jsx-5f133ba9f9a414f4 w-full accent-green-900"})]})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 px-6 py-4 border-t border-gray-100 flex items-center justify-end gap-3",children:[G&&(0,b.jsx)("button",{onClick:H,disabled:E,className:"jsx-5f133ba9f9a414f4 px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-slate-700 bg-white hover:bg-slate-50 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear Filters"}),(0,b.jsxs)("button",{onClick:async()=>{F(!0),ai(1),await ax(q,1,aj,ao),F(!1),n(!1)},disabled:E,className:"jsx-5f133ba9f9a414f4 px-3 py-2.5 rounded-xl text-sm font-semibold text-white bg-green-900 hover:bg-green-950 shadow-sm cursor-pointer disabled:opacity-60 disabled:cursor-not-allowed flex items-center gap-2",children:[E&&(0,b.jsxs)("svg",{fill:"none",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4 animate-spin",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"jsx-5f133ba9f9a414f4 opacity-25"}),(0,b.jsx)("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"jsx-5f133ba9f9a414f4 opacity-75"})]}),E?"Applying...":"Apply Filters"]})]})]})]}),aJ&&(0,b.jsxs)("div",{role:"dialog","aria-modal":"true",className:"jsx-5f133ba9f9a414f4 fixed inset-0 z-[100] flex items-center justify-center",children:[(0,b.jsx)("div",{onClick:()=>{aK(!1),aQ({})},className:"jsx-5f133ba9f9a414f4 absolute inset-0 bg-black/60"}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 relative w-full max-w-xl mx-4 bg-white rounded-2xl shadow-xl",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[(0,b.jsx)("h4",{className:"jsx-5f133ba9f9a414f4 text-lg font-semibold text-slate-900",children:"Add New Enquiry"}),(0,b.jsx)("button",{onClick:()=>{aK(!1),aQ({})},"aria-label":"Close",className:"jsx-5f133ba9f9a414f4 p-2 rounded-lg hover:bg-gray-100",children:(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-5 h-5 text-gray-500",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12",className:"jsx-5f133ba9f9a414f4"})})})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 px-6 py-5 space-y-5 max-h-[70vh] overflow-auto",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,b.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Customer Name"}),(0,b.jsx)("input",{name:"customerName",value:aN.customerName,onChange:aS,type:"text",placeholder:"Enter customer's full name",className:`jsx-5f133ba9f9a414f4 w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-4 focus:bg-green-50 selection:bg-green-100 selection:text-green-900 caret-green-900 text-sm bg-white ${aP.customerName?"border-red-300 focus:ring-red-100 focus:border-red-500":"border-gray-200 focus:ring-green-100 focus:border-green-600"}`}),aP.customerName&&(0,b.jsx)("p",{className:"jsx-5f133ba9f9a414f4 mt-1 text-xs text-red-600",children:aP.customerName})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,b.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Contact Phone"}),(0,b.jsx)("input",{name:"customerPhone",value:aN.customerPhone,onChange:aS,type:"tel",placeholder:"Enter 10-digit phone number",maxLength:"10",className:`jsx-5f133ba9f9a414f4 w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-4 focus:bg-green-50 selection:bg-green-100 selection:text-green-900 caret-green-900 text-sm bg-white ${aP.customerPhone?"border-red-300 focus:ring-red-100 focus:border-red-500":"border-gray-200 focus:ring-green-100 focus:border-green-600"}`}),aP.customerPhone&&(0,b.jsx)("p",{className:"jsx-5f133ba9f9a414f4 mt-1 text-xs text-red-600",children:aP.customerPhone})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,b.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Contact Email"}),(0,b.jsx)("input",{name:"customerEmail",value:aN.customerEmail,onChange:aS,type:"email",placeholder:"e.g., john.doe@example.com",className:`jsx-5f133ba9f9a414f4 w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-4 focus:bg-green-50 selection:bg-green-100 selection:text-green-900 caret-green-900 text-sm bg-white ${aP.customerEmail?"border-red-300 focus:ring-red-100 focus:border-red-500":"border-gray-200 focus:ring-green-100 focus:border-green-600"}`}),aP.customerEmail&&(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 mt-1",children:[(0,b.jsx)("p",{className:"jsx-5f133ba9f9a414f4 text-xs text-red-600",children:aP.customerEmail}),(0,b.jsx)("p",{className:"jsx-5f133ba9f9a414f4 text-xs text-gray-500",children:"eg. john@example.com"})]})]})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,b.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Requirement"}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex flex-wrap gap-2",children:aD.filter(a=>"all"!==a.value).map(a=>{let c=(aN.requirement&&(aN.requirement.value||aN.requirement))===a.value;return(0,b.jsx)("button",{type:"button","aria-pressed":c,onClick:()=>aO({...aN,requirement:a}),className:`jsx-5f133ba9f9a414f4 px-3.5 py-1.5 rounded-full text-[12px] font-semibold border transition-colors transition-shadow duration-150 ${c?"bg-green-50 text-green-900 border-green-200 ring-1 ring-green-100 shadow-sm":"bg-white text-slate-700 border-gray-200 hover:border-gray-300 hover:bg-slate-50"}`,children:a.label},a.value)})})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,b.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Property Type"}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex flex-wrap gap-2",children:aC.filter(a=>"all"!==a.value).map(a=>{let c=(aN.propertyType&&(aN.propertyType.value||aN.propertyType))===a.value;return(0,b.jsx)("button",{type:"button","aria-pressed":c,onClick:()=>aO({...aN,propertyType:a}),className:`jsx-5f133ba9f9a414f4 px-3.5 py-1.5 rounded-full text-[12px] font-semibold border transition-colors transition-shadow duration-150 ${c?"bg-green-50 text-green-900 border-green-200 ring-1 ring-green-100 shadow-sm":"bg-white text-slate-700 border-gray-200 hover:border-gray-300 hover:bg-slate-50"}`,children:a.label},a.value)})})]})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,b.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Budget"}),(()=>{let a={residential:{min:5e3,max:1e8,step:5e3},commercial:{min:1e4,max:5e8,step:1e4},plot:{min:5e4,max:25e7,step:5e4},other:{min:1e3,max:5e7,step:1e3}}[String("object"==typeof aN.propertyType?aN.propertyType.value||aN.propertyType.label||"":aN.propertyType||"").toLowerCase()]||{min:0,max:1e7,step:5e3},c=a.min,d=a.max,e=a.step,f=Number(aN.budget||0),g=isNaN(f)?c:Math.min(d,Math.max(c,f)),h=(g-c)/(d-c)*100,i=g>c?Math.max(2,h):0;return(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 space-y-2",children:(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 relative",children:[(0,b.jsx)("input",{type:"range",min:c,max:d,step:e,value:g,onChange:a=>aO({...aN,budget:Number(a.target.value)}),style:{background:`linear-gradient(to right, #14532d 0%, #14532d ${i}%, #e5e7eb ${i}%, #e5e7eb 100%)`},className:"jsx-5f133ba9f9a414f4 w-full h-2 rounded-full appearance-none focus:outline-none accent-green-900"}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 absolute -top-6 right-0 flex items-center border border-green-200 rounded-full bg-green-50 px-2 py-0.5",children:[(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-[11px] font-semibold text-green-900 mr-1",children:"₹"}),(0,b.jsx)("input",{type:"text",inputMode:"numeric",value:String(g),onChange:a=>{let b=Number((a.target.value||"").replace(/[^0-9]/g,"")),e=isNaN(b)?0:Math.min(d,Math.max(c,b));aO({...aN,budget:e})},style:{width:`calc(${Math.max(3,String(g).length)}ch + 0.15rem)`},className:"jsx-5f133ba9f9a414f4 w-[2ch] text-[11px] font-semibold text-green-900 bg-transparent text-right focus:outline-none font-mono tabular-nums"})]})]})})})()]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,b.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Primary Region *"}),(0,b.jsx)(i.default,{value:aN.primaryRegion,onChange:a=>aO({...aN,primaryRegion:a}),options:aE,styles:aT,isSearchable:!0,isLoading:A,menuPortalTarget:null,menuPosition:"fixed",menuPlacement:"auto"})," "]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,b.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Optional Region"}),(0,b.jsx)(i.default,{value:aN.secondaryRegion,onChange:a=>aO({...aN,secondaryRegion:a}),options:aE,styles:aT,isSearchable:!0,isLoading:A,menuPortalTarget:null,menuPosition:"fixed",menuPlacement:"auto"})," "]})]})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 px-6 py-4 border-t border-gray-100 flex items-center justify-end gap-3",children:[(0,b.jsx)("button",{onClick:()=>{aK(!1),aQ({})},disabled:aL,className:"jsx-5f133ba9f9a414f4 px-4 py-2 rounded-lg border border-gray-200 text-sm font-medium text-slate-700 bg-white hover:bg-slate-50 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,b.jsxs)("button",{onClick:aV,disabled:aL,className:"jsx-5f133ba9f9a414f4 px-4 py-2 rounded-lg text-sm font-semibold text-white bg-green-900 hover:bg-green-950 cursor-pointer disabled:opacity-60 disabled:cursor-not-allowed flex items-center gap-2",children:[aL&&(0,b.jsxs)("svg",{fill:"none",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4 animate-spin",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"jsx-5f133ba9f9a414f4 opacity-25"}),(0,b.jsx)("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"jsx-5f133ba9f9a414f4 opacity-75"})]}),aL?"Adding Lead...":"Add Lead"]})]})]})]}),aW&&(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 fixed inset-0 z-50 flex items-center justify-center",children:[(0,b.jsx)("div",{onClick:()=>aX(!1),className:"jsx-5f133ba9f9a414f4 absolute inset-0 bg-black/60"}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 relative w-full max-w-md mx-4 bg-white rounded-2xl shadow-xl",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[(0,b.jsx)("h4",{className:"jsx-5f133ba9f9a414f4 text-lg font-semibold text-slate-900",children:"Share Lead"}),(0,b.jsx)("button",{onClick:()=>aX(!1),className:"jsx-5f133ba9f9a414f4 p-2 rounded-lg hover:bg-gray-100",children:(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-5 h-5 text-gray-500 cursor-pointer",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12",className:"jsx-5f133ba9f9a414f4"})})})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 px-6 py-5 space-y-5",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 space-y-3",children:[(0,b.jsxs)("label",{className:"jsx-5f133ba9f9a414f4 inline-flex items-center gap-2 cursor-pointer select-none",children:[(0,b.jsx)("input",{type:"radio",name:"transferMode",checked:"all"===a0,onChange:()=>a1("all"),className:"jsx-5f133ba9f9a414f4 h-4 w-4 accent-green-900 cursor-pointer"}),(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-sm  text-slate-800",children:"Share with all brokers"})]}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-3",children:(0,b.jsxs)("label",{className:"jsx-5f133ba9f9a414f4 inline-flex items-center gap-2 cursor-pointer select-none",children:[(0,b.jsx)("input",{type:"radio",name:"transferMode",checked:"region"===a0,onChange:()=>a1("region"),className:"jsx-5f133ba9f9a414f4 h-4 w-4 accent-green-900 cursor-pointer"}),(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-sm  text-slate-800",children:"Share with brokers of a region"})]})}),(0,b.jsxs)("label",{className:"jsx-5f133ba9f9a414f4 inline-flex items-center gap-2 cursor-pointer select-none",children:[(0,b.jsx)("input",{type:"radio",name:"transferMode",checked:"select"===a0,onChange:()=>a1("select"),className:"jsx-5f133ba9f9a414f4 h-4 w-4 accent-green-900 cursor-pointer"}),(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-sm  text-slate-800",children:"Share with selected brokers"})]})]}),"region"===a0&&(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,b.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Select Region"}),(0,b.jsx)(i.default,{value:a2,onChange:a=>a3(a),options:aE.filter(a=>"all"!==a.value),styles:aF,isSearchable:!0,placeholder:"Select region",menuPortalTarget:null,menuPosition:"fixed",menuPlacement:"auto"})]}),"select"===a0&&(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,b.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Select Broker(s)"}),(0,b.jsx)(i.default,{value:aY.brokerIds.filter(a=>(a6||[]).some(b=>(b._id||b.id)===a&&(b._id||b.id)!==J)).map(a=>{let b=(a6||[]).find(b=>(b._id||b.id)===a),c="";return b?.region&&Array.isArray(b.region)&&b.region.length>0?c=b.region[0].name||"Unknown":b?.region&&"object"==typeof b.region&&!Array.isArray(b.region)?c=b.region.name||b.region.region||"Unknown":"string"==typeof b?.region&&(c=b.region),{value:a,label:`${b?.name||b?.fullName||b?.email||a}${c?` (${c})`:""}`}}),onChange:(a,b)=>{let c=(a||[]).map(a=>a.value);aZ(a=>({...a,brokerIds:c}))},options:(a6||[]).filter(a=>(a._id||a.id)&&(a._id||a.id)!==J).map(a=>{let b="";return a.region&&Array.isArray(a.region)&&a.region.length>0?b=a.region[0].name||"Unknown":a.region&&"object"==typeof a.region&&!Array.isArray(a.region)?b=a.region.name||a.region.region||"Unknown":"string"==typeof a.region&&(b=a.region),{value:a._id||a.id,label:`${a.name||a.fullName||a.email||"Unnamed"}${b?` (${b})`:""}`}}),styles:{...aF,menuList:a=>({...aF.menuList(a),maxHeight:150})},components:{MenuList:a=>{let{children:c}=a,d=!!aY.selectAllFiltered,e=a?.children,f=a=>Array.isArray(a)?a:a?[a]:[],g=f(e).flatMap(a=>{let b=a?.props?.data?.value;return b?[b]:f(a?.props?.children).map(a=>a?.props?.data?.value).filter(Boolean)}).filter(Boolean);return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-100 bg-gray-50",children:[(0,b.jsx)("span",{className:"text-xs text-slate-600",children:"Filtered brokers"}),(0,b.jsxs)("label",{className:"flex items-center gap-2 text-xs text-slate-600 cursor-pointer select-none",children:[(0,b.jsx)("input",{type:"checkbox",className:"rounded border-gray-300 text-emerald-600 focus:ring-emerald-500 cursor-pointer",checked:d,onChange:a=>{let b=a.target.checked;aZ(a=>({...a,selectAllFiltered:b,brokerIds:b?Array.from(new Set([...a.brokerIds||[],...g])):(a.brokerIds||[]).filter(a=>!g.includes(a))}));try{let a=document.querySelector('[id^="react-select"][id$="-input"]');a?.focus()}catch{}b&&setTimeout(()=>aZ(a=>({...a,selectAllFiltered:!1})),0)}}),"Select all"]})]}),(0,b.jsx)(j.c.MenuList,{...a,children:c})]})}},onInputChange:(a,{action:b})=>("input-change"===b&&aY.selectAllFiltered,a_(a||""),a),isMulti:!0,isSearchable:!0,closeMenuOnSelect:!1,hideSelectedOptions:!0,placeholder:a8?"Loading brokers...":ba||"Choose brokers...",isLoading:a8,menuPortalTarget:null,menuPosition:"fixed",menuPlacement:"auto"})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,b.jsx)("label",{className:"jsx-5f133ba9f9a414f4 block text-xs font-label text-gray-700 mb-1",children:"Share Notes (Optional)"}),(0,b.jsx)("textarea",{rows:3,value:aY.notes,onChange:a=>aZ({...aY,notes:a.target.value}),placeholder:"Add any specific instructions or context...",className:"jsx-5f133ba9f9a414f4 w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-green-100 focus:border-green-600 text-sm bg-white"})]})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 px-6 py-4 border-t border-gray-100 flex items-center justify-end gap-3",children:[(0,b.jsx)("button",{onClick:()=>aX(!1),disabled:a4,className:"jsx-5f133ba9f9a414f4 px-4 py-2 rounded-lg border border-gray-200 text-sm font-medium text-slate-700 bg-white hover:bg-slate-50 cursor-pointer",children:"Cancel"}),(0,b.jsxs)("button",{onClick:bg,disabled:a4,className:"jsx-5f133ba9f9a414f4 px-4 py-2 rounded-lg text-sm font-semibold text-white bg-green-900 hover:bg-green-950 cursor-pointer disabled:opacity-60 flex items-center gap-2",children:[a4&&(0,b.jsxs)("svg",{fill:"none",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4 animate-spin",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"jsx-5f133ba9f9a414f4 opacity-25"}),(0,b.jsx)("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"jsx-5f133ba9f9a414f4 opacity-75"})]}),a4?"Sending...":"Share with broker"]})]})]})]}),bh&&bj&&(0,b.jsxs)("div",{className:`jsx-5f133ba9f9a414f4 fixed inset-0 z-[110] ${bn?"pointer-events-none":""}`,children:[(0,b.jsx)("div",{onClick:()=>{bo(!0),setTimeout(()=>bi(!1),200)},className:"jsx-5f133ba9f9a414f4 absolute inset-0 bg-black/50"}),(0,b.jsxs)("div",{className:`jsx-5f133ba9f9a414f4 absolute right-0 top-0 h-full w-full max-w-md bg-slate-50 shadow-2xl ${bn?"animate-slide-out":"animate-slide-in"}`,children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between px-5 py-4 border-b border-gray-200 bg-white",children:[(0,b.jsxs)("h4",{className:"jsx-5f133ba9f9a414f4 text-[18px] font-semibold text-slate-900 flex items-center gap-2",children:[(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-5 h-5 text-green-900",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",className:"jsx-5f133ba9f9a414f4"})}),"Enquiry Details"]}),(0,b.jsx)("button",{onClick:()=>{bo(!0),setTimeout(()=>bi(!1),200)},"aria-label":"Close",className:"jsx-5f133ba9f9a414f4 p-2 rounded hover:bg-gray-100",children:(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-5 h-5 text-gray-500",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12",className:"jsx-5f133ba9f9a414f4"})})})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 h-[calc(100%-56px)] overflow-y-auto no-scrollbar p-5",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 bg-white rounded-2xl border border-gray-200 shadow-sm p-4",children:(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 w-12 h-12 rounded-full overflow-hidden ring-2 ring-white bg-green-50 text-green-900 flex items-center justify-center text-sm font-semibold",children:(a=>{if(!a||"string"!=typeof a)return"?";let[b="",c=""]=a.trim().split(/\s+/);return(b[0]||""+c[0]||"").toUpperCase()})(bj.name||bj.customerName||"?")}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 min-w-0",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-[16px] font-semibold text-slate-900 truncate",children:bj.name||bj.customerName||"—"}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-[12px] text-slate-500 mt-0.5",children:bj.contact||bj.customerPhone||"—"})]}),(0,b.jsx)("span",{className:`jsx-5f133ba9f9a414f4 ml-auto inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-semibold ${ay(bj.status||"Closed")}`,children:bj.status||"Closed"})]})}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 mt-4 bg-white rounded-2xl border border-gray-200 shadow-sm",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-1 px-3 pt-3",children:(()=>{let a=({active:a,children:c,onClick:d})=>(0,b.jsx)("button",{onClick:d,className:`jsx-5f133ba9f9a414f4 px-3 py-1.5 rounded-lg text-sm font-semibold ${a?"bg-slate-900 text-white":"text-slate-600 hover:bg-slate-100"}`,children:c});return(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex gap-2",children:[(0,b.jsx)(a,{active:"overview"===as,onClick:()=>at("overview"),className:"jsx-5f133ba9f9a414f4",children:"Overview"}),(0,b.jsx)(a,{active:"share"===as,onClick:()=>at("share"),className:"jsx-5f133ba9f9a414f4",children:"Share"})]})})()}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 p-4",children:[(!as||"overview"===as)&&(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 space-y-4",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 rounded-xl border border-gray-200 bg-white p-4",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between mb-3",children:(0,b.jsxs)("h5",{className:"jsx-5f133ba9f9a414f4 text-[14px] font-semibold text-slate-900 flex items-center gap-2",children:[(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-green-900",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z",className:"jsx-5f133ba9f9a414f4"})}),"Contact Details"]})}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 space-y-3 text-[12px]",children:[(bj?.createdBy&&(bj.createdBy._id||bj.createdBy.id)===J||bj?.brokerId&&(String(bj.brokerId),String(J)),null),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2 text-slate-700",children:[(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 w-5 h-5 inline-flex items-center justify-center rounded bg-sky-50",children:(0,b.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"jsx-5f133ba9f9a414f4 w-3.5 h-3.5 text-gray-500",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5h6l2 5-2 1a10 10 0 005 5l1-2 5 2v6a2 2 0 01-2 2A16 16 0 013 7z",className:"jsx-5f133ba9f9a414f4"})})}),bl&&(bj?.createdBy&&(bj.createdBy._id||bj.createdBy.id)===K||bj?.brokerId&&String(bj.brokerId)===String(K))?(0,b.jsx)("input",{type:"tel",name:"contact",value:bt.contact??(bj.contact||bj.customerPhone||""),onChange:bE,placeholder:"Phone number",className:"jsx-5f133ba9f9a414f4 w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-600 text-[12px]"}):bj.contact||bj.customerPhone||"—"]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2 text-slate-700",children:[(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 w-5 h-5 inline-flex items-center justify-center rounded bg-green-50",children:(0,b.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"jsx-5f133ba9f9a414f4 w-3.5 h-3.5 text-gray-500",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",className:"jsx-5f133ba9f9a414f4"})})}),bl&&(bj?.createdBy&&(bj.createdBy._id||bj.createdBy.id)===K||bj?.brokerId&&String(bj.brokerId)===String(K))?(0,b.jsx)("input",{type:"email",name:"email",value:bt.email??(bj.customerEmail||""),onChange:bE,placeholder:"Email address",className:"jsx-5f133ba9f9a414f4 w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-600 text-[12px]"}):bj.customerEmail||"—"]})]})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 rounded-xl border border-gray-200 bg-white p-4",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between mb-3",children:(0,b.jsxs)("h5",{className:"jsx-5f133ba9f9a414f4 text-[14px] font-semibold text-slate-900 flex items-center gap-2",children:[(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-green-900",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 8h10M7 12h7M5 20l2.5-2.5M19 20l-2.5-2.5",className:"jsx-5f133ba9f9a414f4"})}),"Property Preferences"]})}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 space-y-3 text-[12px]",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2 text-slate-700",children:[(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 w-5 h-5 inline-flex items-center justify-center rounded bg-green-50",children:(0,b.jsxs)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-3 h-3 text-slate-400",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z",className:"jsx-5f133ba9f9a414f4"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z",className:"jsx-5f133ba9f9a414f4"})]})}),(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-500 mr-1",children:"Property Type:"}),bl&&(bj?.createdBy&&(bj.createdBy._id||bj.createdBy.id)===K||bj?.brokerId&&String(bj.brokerId)===String(K))?(0,b.jsx)(i.default,{name:"propertyType",options:(()=>{let a=aC.filter(a=>"all"!==a.value),b=bt.propertyType??bj.propertyType??"";return a.some(a=>a.value===b)?a:[...a,{value:b,label:b}]})(),value:(()=>{let a=bt.propertyType??bj.propertyType??"";return(()=>{let b=aC.filter(a=>"all"!==a.value);return b.some(b=>b.value===a)?b:[...b,{value:a,label:a}]})().find(b=>b.value===a)||null})(),onChange:a=>bu(b=>({...b,propertyType:a?.value||""})),classNamePrefix:"react-select",styles:aU,menuPortalTarget:null,menuPosition:"fixed",menuPlacement:"auto"}):(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-900",children:bj.propertyType||"—"})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2 text-slate-700",children:[(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 w-5 h-5 inline-flex items-center justify-center rounded bg-green-50",children:(0,b.jsx)("svg",{fill:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-3 h-3 text-slate-400",children:(0,b.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16z",className:"jsx-5f133ba9f9a414f4"})})}),(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-500 mr-1",children:"Budget:"}),bl&&(bj?.createdBy&&(bj.createdBy._id||bj.createdBy.id)===K||bj?.brokerId&&String(bj.brokerId)===String(K))?(0,b.jsx)("input",{type:"number",name:"budget",value:bt.budget??bj.budget??"",onChange:bE,placeholder:"Budget",className:"jsx-5f133ba9f9a414f4 flex-1 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-100 focus:border-green-600 text-[12px]"}):(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-900",children:aI(bj.budget)})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2 text-slate-700",children:[(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 w-5 h-5 inline-flex items-center justify-center rounded bg-green-50",children:(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-3 h-3 text-slate-400",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2",className:"jsx-5f133ba9f9a414f4"})})}),(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-500 mr-1",children:"Requirement:"}),bl&&(bj?.createdBy&&(bj.createdBy._id||bj.createdBy.id)===K||bj?.brokerId&&String(bj.brokerId)===String(K))?(0,b.jsx)(i.default,{name:"requirement",options:(()=>{let a=aD.filter(a=>"all"!==a.value),b=bt.requirement??bj.requirement??bj.req??"";return a.some(a=>a.value===b)?a:[...a,{value:b,label:b}]})(),value:(()=>{let a=bt.requirement??bj.requirement??bj.req??"";return(()=>{let b=aD.filter(a=>"all"!==a.value);return b.some(b=>b.value===a)?b:[...b,{value:a,label:a}]})().find(b=>b.value===a)||null})(),onChange:a=>bu(b=>({...b,requirement:a?.value||""})),classNamePrefix:"react-select",styles:aU,menuPortalTarget:null,menuPosition:"fixed",menuPlacement:"auto"}):(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-900",children:bj.requirement||bj.req||"—"})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2 text-slate-700",children:[(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 w-5 h-5 inline-flex items-center justify-center rounded bg-green-50",children:(0,b.jsxs)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-3 h-3 text-slate-400",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z",className:"jsx-5f133ba9f9a414f4"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z",className:"jsx-5f133ba9f9a414f4"})]})}),(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-500 mr-1",children:"Primary Region:"}),bl&&(bj?.createdBy&&(bj.createdBy._id||bj.createdBy.id)===K||bj?.brokerId&&String(bj.brokerId)===String(K))?(0,b.jsx)(i.default,{name:"primaryRegion",options:aE,value:bt.primaryRegion||null,onChange:a=>bu(b=>({...b,primaryRegion:a})),classNamePrefix:"react-select",styles:aU,menuPlacement:"auto",menuPortalTarget:null,menuPosition:"fixed"}):(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-900",children:aH(bj?.primaryRegion||bj?.region)||"—"})]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2 text-slate-700",children:[(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 w-5 h-5 inline-flex items-center justify-center rounded bg-green-50",children:(0,b.jsxs)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-3 h-3 text-slate-400",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z",className:"jsx-5f133ba9f9a414f4"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z",className:"jsx-5f133ba9f9a414f4"})]})}),(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-500 mr-1",children:"Secondary Region:"}),bl&&(bj?.createdBy&&(bj.createdBy._id||bj.createdBy.id)===K||bj?.brokerId&&String(bj.brokerId)===String(K))?(0,b.jsx)(i.default,{name:"secondaryRegion",options:aE,value:bt.secondaryRegion||null,onChange:a=>bu(b=>({...b,secondaryRegion:a})),classNamePrefix:"react-select",styles:aU,menuPlacement:"auto",menuPortalTarget:null,menuPosition:"fixed"}):(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 text-slate-900",children:aH(bj?.secondaryRegion)||"—"})]})]})]}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 rounded-xl border border-gray-200 bg-white p-4",children:(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-[13px] text-slate-500",children:"Status"}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 mt-0.5",children:bl?(0,b.jsx)(i.default,{name:"status",options:aB.filter(a=>"all"!==a.value),value:(()=>{let a=bt.status??bj.status??"New";return aB.find(b=>b.value===a)||null})(),onChange:a=>bu(b=>({...b,status:a?.value||"New"})),classNamePrefix:"react-select",styles:aU,menuPlacement:"auto",menuPortalTarget:null,menuPosition:"fixed"}):(0,b.jsx)("span",{className:`jsx-5f133ba9f9a414f4 inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-semibold ${ay(bj.status||"Closed")}`,children:bj.status||"Closed"})})]}),(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2",children:bl?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:bD,className:"jsx-5f133ba9f9a414f4 px-3 py-1.5 rounded-lg text-[12px] font-semibold text-white bg-green-900 hover:bg-green-950",children:"Save"}),(0,b.jsx)("button",{onClick:()=>bm(!1),className:"jsx-5f133ba9f9a414f4 px-3 py-1.5 rounded-lg text-[12px] font-semibold text-slate-700 bg-gray-100 hover:bg-gray-200 border border-gray-200",children:"Cancel"})]}):(0,b.jsx)("button",{onClick:()=>{let a=bj?.primaryRegion&&(bj.primaryRegion._id||bj.primaryRegion.id||bj.primaryRegion.value)||bj?.region||null,b=bj?.primaryRegion&&(bj.primaryRegion.name||bj.primaryRegion.label)||aH(bj?.primaryRegion||bj?.region)||"",c=bj?.secondaryRegion&&(bj.secondaryRegion._id||bj.secondaryRegion.id||bj.secondaryRegion.value),d=bj?.secondaryRegion&&(bj.secondaryRegion.name||bj.secondaryRegion.label);bu({name:bj.name||bj.customerName||"",contact:bj.contact||bj.customerPhone||"",email:bj.customerEmail||"",requirement:bj.requirement||bj.req||"",propertyType:bj.propertyType||"",budget:"number"==typeof bj.budget?bj.budget:bj.budget||"",status:bj.status||"Closed",primaryRegion:a?{value:a,label:b}:null,secondaryRegion:c?{value:c,label:d||""}:null}),bm(!0)},className:"jsx-5f133ba9f9a414f4 px-3 py-1.5 rounded-lg text-[12px] font-semibold text-white bg-green-900 hover:bg-green-950",children:bj?.createdBy&&(bj.createdBy._id||bj.createdBy.id)===K||bj?.brokerId&&String(bj.brokerId)===String(K)?"Edit":"Edit Status"})})]})})]}),"share"===as&&(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 space-y-3 text-[14px]",children:(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 border border-gray-200 rounded-xl p-4 shadow-sm bg-white",children:[(0,b.jsxs)("h5",{className:"jsx-5f133ba9f9a414f4 text-[16px] font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-5f133ba9f9a414f4 w-4 h-4 text-green-900",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 8h10M7 12h7M5 20l2.5-2.5M19 20l-2.5-2.5",className:"jsx-5f133ba9f9a414f4"})}),"Share History"]}),(()=>{let a=Array.isArray(bj?.transfers)?bj.transfers:[];if(!a.length)return(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 text-[14px] text-slate-500",children:"Not shared yet."});let c=new Map((a6||[]).map(a=>[a._id||a.id,a])),d=a.filter(a=>"all"===a.shareType||!a.shareType&&!a.toBroker&&!a.region),e=a.filter(a=>"region"===a.shareType||!a.shareType&&a.region&&!a.toBroker),f=a.filter(a=>"individual"===a.shareType||!a.shareType&&a.toBroker&&!a.region);return(0,b.jsxs)("ul",{className:"jsx-5f133ba9f9a414f4 text-[14px] text-slate-700 space-y-3",children:[d.map((a,d)=>{let e=a&&"object"==typeof a.fromBroker&&null!==a.fromBroker?a.fromBroker:c.get(a?.fromBroker)||{},f=e&&e.name||e&&e.fullName||e&&e.email||e&&e._id||a?.fromBroker||"Unknown broker";e&&e.brokerImage||e&&e.avatarUrl||e&&e.imageUrl;let g=a?.createdAt?new Date(a.createdAt).toLocaleString():"",h=("object"==typeof a?.fromBroker?a?.fromBroker?._id:a?.fromBroker)||`all-from-${d}`;return(0,b.jsxs)("li",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2",children:(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 w-7 h-7 rounded-full bg-blue-100 overflow-hidden ring-2 ring-white flex items-center justify-center text-[10px] text-blue-800 font-semibold",children:"All"})}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 font-medium text-slate-900 truncate",children:[f," → All Brokers"]}),g&&(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 text-[11px] text-slate-400",children:["Shared on ",g]})]})]},`all-${h}-${a?._id||d}`)}),e.map((a,d)=>{let e=a&&"object"==typeof a.fromBroker&&null!==a.fromBroker?a.fromBroker:c.get(a?.fromBroker)||{},f=e&&e.name||e&&e.fullName||e&&e.email||e&&e._id||a?.fromBroker||"Unknown broker";e&&e.brokerImage||e&&e.avatarUrl||e&&e.imageUrl;let g=a?.region,h=aH(g)||g||"Unknown Region",i=a?.createdAt?new Date(a.createdAt).toLocaleString():"",j=("object"==typeof a?.fromBroker?a?.fromBroker?._id:a?.fromBroker)||`region-from-${d}`,k=a&&"object"==typeof a.fromBroker?a.fromBroker?._id||a.fromBroker?.id:a?.fromBroker,l=bz===g,m=K&&k&&String(k)===String(K);return(0,b.jsxs)("li",{className:"jsx-5f133ba9f9a414f4 flex items-start gap-3",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2 pt-0.5",children:(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 w-7 h-7 rounded-full bg-green-100 overflow-hidden ring-2 ring-white flex items-center justify-center text-[10px] text-green-800 font-semibold",children:"R"})}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 font-medium text-slate-900 truncate",children:[f," → ",h]}),i&&(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 text-[11px] text-slate-400",children:["Shared on ",i]}),m&&(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2 mt-2",children:(0,b.jsx)("button",{type:"button",disabled:l,onClick:async()=>{g&&await bC(g)},title:"Delete transfer",className:`jsx-5f133ba9f9a414f4 inline-flex items-center px-2 py-1 text-[12px] rounded border ${l?"border-gray-200 text-gray-400":"border-rose-200 text-rose-700 hover:bg-rose-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:l?"Removing…":"Delete"})})]})]},`region-${j}-${g||d}`)}),f.map((a,d)=>{let e=a&&"object"==typeof a.toBroker&&null!==a.toBroker?a.toBroker:c.get(a?.toBroker)||{},f=a&&"object"==typeof a.fromBroker&&null!==a.fromBroker?a.fromBroker:c.get(a?.fromBroker)||{},g=e&&e.name||e&&e.fullName||e&&e.email||e&&e._id||a?.toBroker||"Unknown broker",h=f&&f.name||f&&f.fullName||f&&f.email||f&&f._id||a?.fromBroker||"Unknown broker",i=e&&e.brokerImage||e&&e.avatarUrl||e&&e.imageUrl||"";f&&f.brokerImage||f&&f.avatarUrl||f&&f.imageUrl;let j=a?.createdAt?new Date(a.createdAt).toLocaleString():"",k=("object"==typeof a?.fromBroker?a?.fromBroker?._id:a?.fromBroker)||"from",l=("object"==typeof a?.toBroker?a?.toBroker?._id:a?.toBroker)||"to",m=aH(f?.region)||aH(f?.primaryRegion)||"",n=aH(e?.region)||aH(e?.primaryRegion)||"",o=a&&"object"==typeof a.toBroker?a.toBroker?._id||a.toBroker?.id:a?.toBroker,p=a&&"object"==typeof a.fromBroker?a.fromBroker?._id||a.fromBroker?.id:a?.fromBroker,q=bx===String(o),r=K&&p&&String(p)===String(K);return(0,b.jsxs)("li",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"jsx-5f133ba9f9a414f4 flex items-center gap-2",children:(0,b.jsx)("div",{title:"string"==typeof g?g:String(g),className:"jsx-5f133ba9f9a414f4 w-7 h-7 rounded-full bg-gray-200 overflow-hidden ring-2 ring-white flex items-center justify-center text-[12px] text-gray-700",children:(0,b.jsx)("img",{src:i||"https://www.w3schools.com/howto/img_avatar.png",alt:"string"==typeof g?g:"Broker",className:"jsx-5f133ba9f9a414f4 w-full h-full object-cover"})})}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 font-medium text-slate-900 truncate",children:["string"==typeof h?h:String(h),(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 mx-1 text-slate-400",children:"→"}),"string"==typeof g?g:String(g)]}),(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 text-[12px] text-slate-500 truncate",children:[m||"—"," ",(0,b.jsx)("span",{className:"jsx-5f133ba9f9a414f4 mx-1 text-slate-400",children:"→"})," ",n||"—"]}),j&&(0,b.jsxs)("div",{className:"jsx-5f133ba9f9a414f4 text-[11px] text-slate-400",children:["Shared on ",j]})]}),r&&(0,b.jsx)("button",{type:"button",disabled:q,onClick:async()=>{o&&(by(String(o)),await bB(o))},title:"Delete transfer",className:`jsx-5f133ba9f9a414f4 ml-2 inline-flex items-center px-2 py-1 text-[12px] rounded border ${q?"border-gray-200 text-gray-400":"border-rose-200 text-rose-700 hover:bg-rose-50"}`,children:q?"Removing…":"Delete"})]},`${k}-${l}-${a?._id||d}`)})]})})()]})})]})]})]})]})]})]}),(0,b.jsx)(c.default,{id:"5f133ba9f9a414f4",children:".no-scrollbar::-webkit-scrollbar{display:none}.no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}@keyframes slideInFromRight{0%{opacity:.6;transform:translate(100%)}to{opacity:1;transform:translate(0)}}.animate-slide-in{animation:.25s ease-out both slideInFromRight}@keyframes slideOutToRight{0%{opacity:1;transform:translate(0)}to{opacity:.4;transform:translate(100%)}}.animate-slide-out{animation:.2s ease-in both slideOutToRight}"})]})}function n(){return(0,b.jsx)(d.Suspense,{fallback:(0,b.jsx)(k.default,{children:(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})})}),children:(0,b.jsx)(m,{})})}}];

//# sourceMappingURL=Desktop_Broker%20adda_broker-adda-web_src_app_leads_page_jsx_07c43a08._.js.map