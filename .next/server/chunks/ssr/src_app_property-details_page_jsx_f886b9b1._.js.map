{"version":3,"sources":["turbopack:///[project]/src/app/property-details/page.jsx"],"sourcesContent":["\"use client\";\nimport React, { Suspense, useMemo, useState, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport { useSearchParams, useRouter } from \"next/navigation\";\nimport ContentLoader from \"react-content-loader\";\nimport data from \"../data/furnitureData.json\";\nimport HeaderFile from \"../components/Header\";\nimport PropertyEnquiryModal from \"../components/PropertyEnquiryModal\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport toast, { Toaster } from \"react-hot-toast\";\n\nconst TABS = [{ label: \"Description\" }, { label: \"Review\" }];\n\n// Helper function to convert YouTube URL to embed URL\nconst getEmbedUrl = (url) => {\n  if (!url || typeof url !== 'string') return null;\n  \n  const trimmedUrl = url.trim();\n  if (!trimmedUrl) return null;\n  \n  // If already an embed URL, return as is\n  if (trimmedUrl.includes('youtube.com/embed') || trimmedUrl.includes('youtu.be/embed')) {\n    return trimmedUrl;\n  }\n  \n  // Extract video ID from various YouTube URL formats\n  let videoId = null;\n  \n  // youtube.com/watch?v=VIDEO_ID\n  const watchMatch = trimmedUrl.match(/(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([^&\\n?#]+)/);\n  if (watchMatch) {\n    videoId = watchMatch[1];\n  }\n  \n  // youtube.com/embed/VIDEO_ID\n  const embedMatch = trimmedUrl.match(/youtube\\.com\\/embed\\/([^&\\n?#]+)/);\n  if (embedMatch) {\n    videoId = embedMatch[1];\n  }\n  \n  if (videoId) {\n    return `https://www.youtube.com/embed/${videoId}?rel=0`;\n  }\n  \n  // If not a YouTube URL, return as is (for other video platforms)\n  return trimmedUrl;\n};\n\nfunction PropertyDetailsPageInner() {\n  const searchParams = useSearchParams();\n  const router = useRouter();\n  const { user, isAuthenticated } = useAuth();\n\n  // Helper function to format price based on value (thousands, lakhs, crores)\n  const formatPrice = (price) => {\n    if (!price || price === 0) return \"0\";\n    // Convert to number\n    const numPrice = typeof price === \"string\" ? parseFloat(price.replace(/[â‚¹,]/g, '')) : price;\n    if (isNaN(numPrice) || numPrice === 0) return \"0\";\n    \n    // If price is >= 1 crore (1,00,00,000)\n    if (numPrice >= 10000000) {\n      const crores = numPrice / 10000000;\n      return `${crores.toFixed(2)} Cr`;\n    }\n    // If price is >= 1 lakh (1,00,000)\n    else if (numPrice >= 100000) {\n      const lakhs = numPrice / 100000;\n      return `${lakhs.toFixed(2)} Lakhs`;\n    }\n    // If price is >= 1 thousand (1,000)\n    else if (numPrice >= 1000) {\n      const thousands = numPrice / 1000;\n      return `${thousands.toFixed(2)} K`;\n    }\n    // If price is < 1 thousand, show as is\n    else {\n      return Math.round(numPrice).toLocaleString(\"en-IN\");\n    }\n  };\n\n  // Also support dynamic route /property-details/[id] by reading path when query is missing\n  const [routeId, setRouteId] = useState(null);\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n    try {\n      const path = window.location.pathname || \"\";\n      const m = path.match(/\\/property-details\\/(.+)$/);\n      if (m && m[1]) setRouteId(m[1]);\n    } catch {}\n  }, []);\n  const [product, setProduct] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [activeTab, setActiveTab] = useState(0);\n  const [agent, setAgent] = useState(null);\n  const [agentLoading, setAgentLoading] = useState(false);\n  const [agentError, setAgentError] = useState(\"\");\n  const [similarProperties, setSimilarProperties] = useState([]);\n  const [similarLoading, setSimilarLoading] = useState(false);\n  const [canScrollLeft, setCanScrollLeft] = useState(false);\n  const [canScrollRight, setCanScrollRight] = useState(true);\n  const [isEnquiryModalOpen, setIsEnquiryModalOpen] = useState(false);\n  const [broker, setBroker] = useState(null);\n  const [isSaved, setIsSaved] = useState(false);\n  const [savingProperty, setSavingProperty] = useState(false);\n  const [showRatingModal, setShowRatingModal] = useState(false);\n  const [userRating, setUserRating] = useState(0);\n  const [ratingReview, setRatingReview] = useState(\"\");\n  const [ratingLoading, setRatingLoading] = useState(false);\n  const [propertyRatings, setPropertyRatings] = useState([]);\n  const [ratingsStats, setRatingsStats] = useState(null);\n  const [ratingsLoading, setRatingsLoading] = useState(false);\n  const [showVideo, setShowVideo] = useState(false);\n  const [selectedImageIndex, setSelectedImageIndex] = useState(0);\n  const [path, setPath] = useState('');\n\n  // Fetch property details from API\n  useEffect(() => {\n    setPath(window.location.pathname);\n    const fetchPropertyDetails = async () => {\n      setLoading(true);\n      setError(\"\");\n\n      const idParam = searchParams?.get(\"id\") || routeId;\n      if (!idParam) {\n        // Wait until an id is available (from dynamic route or query)\n        return;\n      }\n\n      try {\n        const token =\n          typeof window !== \"undefined\"\n            ? localStorage.getItem(\"token\") || localStorage.getItem(\"authToken\")\n            : null;\n        const apiUrl = process.env.NEXT_PUBLIC_API_URL || \"\";\n        const headers = {\n          \"Content-Type\": \"application/json\",\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        };\n\n        const res = await fetch(\n          `${apiUrl}/properties/${encodeURIComponent(String(idParam))}`,\n          { headers }\n        );\n        if (!res.ok) throw new Error(\"Failed to fetch property details\");\n\n        const responseData = await res.json();\n        const propertyData =\n          responseData?.data?.property ||\n          responseData?.property ||\n          responseData?.data ||\n          responseData;\n\n        if (propertyData) {\n          // Map API response to expected format\n          const mappedProperty = {\n            id: propertyData._id || propertyData.id || idParam,\n            name: propertyData.title || propertyData.name || \"Property\",\n            category:\n              propertyData.propertyType ||\n              propertyData.type ||\n              propertyData.category ||\n              \"Property\",\n            price: propertyData.price || 0,\n            originalPrice:\n              propertyData.originalPrice || propertyData.oldPrice || 0,\n            discount: propertyData.discount || \"\",\n            rating: propertyData.rating || 4.7,\n            reviewCount: propertyData.reviewCount || 245,\n            image:\n              propertyData.images?.[0] ||\n              propertyData.image ||\n              \"/images/pexels-binyaminmellish-106399.jpg\",\n            images: propertyData.images || [\n              propertyData.image || \"/images/pexels-binyaminmellish-106399.jpg\",\n            ],\n            propertyDescription:\n              propertyData.propertyDescription ||\n              propertyData.description ||\n              \"\",\n            description:\n              propertyData.description ||\n              propertyData.propertyDescription ||\n              \"Modern property with excellent connectivity and amenities.\",\n            bedrooms: propertyData.bedrooms || 3,\n            bathrooms: propertyData.bathrooms || 2,\n            areaSqft:\n              propertyData.propertySize ||\n              propertyData.areaSqft ||\n              propertyData.area ||\n              1450,\n            city: propertyData.city || \"Delhi NCR\",\n            region: propertyData.region || \"Prime Location\",\n            amenities: propertyData.amenities || [],\n            nearbyAmenities: propertyData.nearbyAmenities || [],\n            features: propertyData.features || [],\n            locationBenefits: propertyData.locationBenefits || [],\n            status: propertyData.status || \"Available\",\n            address: propertyData.address || \"\",\n            propertyType:\n              propertyData.propertyType || propertyData.type || \"Apartment\",\n            subType: propertyData.subType || \"\",\n            facing: propertyData.facing || \"East\",\n            floor: propertyData.floor || \"5th of 12 floors\",\n            maintenance: propertyData.maintenance || \"â‚¹3,000/month\",\n            propertyTax: propertyData.propertyTax || \"â‚¹1,200/month\",\n            registrationCost:\n              propertyData.registrationCost || \"â‚¹50,000 (approx)\",\n            loanAvailable: propertyData.loanAvailable !== false,\n            pricePerSqft:\n              propertyData.pricePerSqft ||\n              (propertyData.price && propertyData.areaSqft\n                ? Math.round(propertyData.price / propertyData.areaSqft)\n                : 0),\n            videos: Array.isArray(propertyData.videos) ? propertyData.videos : [],\n            // capture possible agent identifiers for downstream fetch\n            _raw: propertyData,\n          };\n          setProduct(mappedProperty);\n          setShowVideo(false); // Reset video state when product changes\n          setSelectedImageIndex(0); // Reset selected image index when product changes\n\n          // If broker object is embedded on the property, use it directly\n          if (propertyData?.broker && typeof propertyData.broker === \"object\") {\n            const b = propertyData.broker;\n            const mappedAgent = {\n              id: b._id || b.id || \"\",\n              name: b.name || b.fullName || b.firmName || \"Agent\",\n              phone: b.phone || b.mobile || \"\",\n              email: b.email || \"\",\n              firm: b.firmName || b.company || \"\",\n              image:\n                b.brokerImage ||\n                b.profileImage ||\n                b.avatar ||\n                \"/images/user-1.webp\",\n              region:\n                b.region || propertyData.city || propertyData.region || \"\",\n              experience: b.experience || b.experienceYears || \"\",\n            };\n            setAgent(mappedAgent);\n            setBroker(b);\n          }\n\n          // Try to resolve an agent/broker id from the property payload\n          const candidateId =\n            (typeof propertyData?.createdBy === \"object\" &&\n            propertyData.createdBy?._id\n              ? propertyData.createdBy._id\n              : typeof propertyData?.createdBy === \"string\"\n              ? propertyData.createdBy\n              : null) ||\n            propertyData?.brokerId ||\n            propertyData?.agentId ||\n            propertyData?.ownerId ||\n            propertyData?.userId;\n\n          if (candidateId) {\n            setAgentLoading(true);\n            setAgentError(\"\");\n            try {\n              const brokerRes = await fetch(\n                `${apiUrl}/brokers/${encodeURIComponent(String(candidateId))}`,\n                { headers }\n              );\n              if (brokerRes.ok) {\n                const brokerJson = await brokerRes.json().catch(() => ({}));\n                const brokerData =\n                  brokerJson?.data?.broker ||\n                  brokerJson?.broker ||\n                  brokerJson?.data ||\n                  brokerJson;\n                if (brokerData) {\n                  const mappedAgent = {\n                    id: brokerData._id || brokerData.id || candidateId,\n                    name:\n                      brokerData.name ||\n                      brokerData.fullName ||\n                      brokerData.firmName ||\n                      \"Agent\",\n                    phone:\n                      brokerData.phone ||\n                      brokerData.mobile ||\n                      brokerData.contact ||\n                      \"\",\n                    email: brokerData.email || \"\",\n                    firm: brokerData.firmName || brokerData.company || \"\",\n                    image:\n                      brokerData.brokerImage ||\n                      brokerData.profileImage ||\n                      brokerData.avatar ||\n                      \"/images/user-1.webp\",\n                    region: (() => {\n                      const r = brokerData.region;\n                      if (Array.isArray(r) && r.length > 0) {\n                        const first = r[0];\n                        return typeof first === \"string\"\n                          ? first\n                          : first?.name || first?.city || first?.state || \"\";\n                      }\n                      if (typeof r === \"string\") return r;\n                      if (r && typeof r === \"object\")\n                        return r.name || r.city || r.state || \"\";\n                      return brokerData.city || brokerData.state || \"\";\n                    })(),\n                    experience:\n                      brokerData.experience || brokerData.experienceYears || \"\",\n                  };\n                  setAgent(mappedAgent);\n                  setBroker(brokerData);\n                }\n              } else {\n                setAgentError(\"Failed to fetch agent details\");\n              }\n            } catch (e) {\n              setAgentError(\"Failed to fetch agent details\");\n            } finally {\n              setAgentLoading(false);\n            }\n          }\n        } else {\n          setError(\"Property not found\");\n        }\n      } catch (err) {\n        console.error(\"Error fetching property details:\", err);\n        setError(\"Failed to load property details\");\n        // Fallback to static data if API fails\n        const items = data?.products?.items || [];\n        const idNum = Number(idParam);\n        const found = items.find((p) => p.id === idNum);\n        if (found) {\n          setProduct(found);\n          setError(\"\");\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchPropertyDetails();\n  }, [searchParams, routeId]);\n\n  // Fetch property ratings\n  useEffect(() => {\n    const fetchPropertyRatings = async () => {\n      if (!product?.id && !product?._id) return;\n\n      setRatingsLoading(true);\n      try {\n        const token =\n          typeof window !== \"undefined\"\n            ? localStorage.getItem(\"token\") || localStorage.getItem(\"authToken\")\n            : null;\n        const base =\n          process.env.NEXT_PUBLIC_API_URL ;\n        const headers = {\n          \"Content-Type\": \"application/json\",\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        };\n\n        const propertyId = product?.id || product?._id;\n        const ratingsEndpoint = `/property-ratings/property/${encodeURIComponent(\n          String(propertyId)\n        )}`;\n\n        const res = await fetch(`${base}${ratingsEndpoint}`, { headers });\n        if (!res.ok) {\n          throw new Error(`Failed to fetch ratings: ${res.status}`);\n        }\n\n        const data = await res.json();\n\n        if (data.success && data.data) {\n          // Set ratings array\n          const ratings = Array.isArray(data.data.ratings)\n            ? data.data.ratings\n            : [];\n          setPropertyRatings(ratings);\n\n          // Set stats (averageRating, totalRatings, distribution)\n          if (data.data.stats) {\n            setRatingsStats(data.data.stats);\n            console.log(\"Property ratings stats:\", data.data.stats);\n            console.log(\n              \"Total ratings/comments:\",\n              data.data.stats.totalRatings\n            );\n          }\n        } else {\n          // If no ratings found, set empty state\n          setPropertyRatings([]);\n          setRatingsStats(null);\n        }\n      } catch (e) {\n        console.error(\"Error fetching property ratings:\", e);\n        setPropertyRatings([]);\n        setRatingsStats(null);\n      } finally {\n        setRatingsLoading(false);\n      }\n    };\n\n    fetchPropertyRatings();\n  }, [product?.id, product?._id]);\n\n  // Check if property is saved when product loads and user is authenticated\n  useEffect(() => {\n    const checkSavedStatus = async () => {\n      if (!product?.id || !isAuthenticated() || !user?.token) {\n        setIsSaved(false);\n        return;\n      }\n\n      try {\n        const apiUrl = process.env.NEXT_PUBLIC_API_URL || \"\";\n        const token = user.token;\n        const response = await fetch(`${apiUrl}/saved-properties`, {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\",\n          },\n        });\n\n        if (response.ok) {\n          const data = await response.json();\n          const savedProperties =\n            data?.data?.savedProperties || data?.savedProperties || [];\n          const propertyId = product.id || product._id;\n          const isPropertySaved = savedProperties.some(\n            (sp) =>\n              (sp.propertyId?._id || sp.propertyId?.id || sp.propertyId) ===\n                propertyId ||\n              (sp.property?._id || sp.property?.id || sp.property) ===\n                propertyId ||\n              sp._id === propertyId\n          );\n          setIsSaved(isPropertySaved);\n        }\n      } catch (error) {\n        console.error(\"Error checking saved status:\", error);\n      }\n    };\n\n    checkSavedStatus();\n  }, [product?.id, isAuthenticated, user?.token]);\n\n  // Handle wishlist toggle\n  const handleWishlistToggle = async () => {\n    // Check if user is authenticated\n    if (!isAuthenticated() || !user?.token) {\n      // Save current URL to redirect back after login\n      const currentUrl = window.location.href;\n      localStorage.setItem(\"returnUrl\", currentUrl);\n      router.push(\"/login\");\n      return;\n    }\n\n    if (!product?.id) {\n      toast.error(\"Property information not available\");\n      return;\n    }\n\n    setSavingProperty(true);\n    try {\n      const apiUrl = process.env.NEXT_PUBLIC_API_URL || \"\";\n      const token = user.token;\n      const propertyId = product.id || product._id;\n\n      if (isSaved) {\n        // Remove from saved properties\n        const response = await fetch(\n          `${apiUrl}/saved-properties/${propertyId}`,\n          {\n            method: \"DELETE\",\n            headers: {\n              Authorization: `Bearer ${token}`,\n              \"Content-Type\": \"application/json\",\n            },\n          }\n        );\n\n        if (response.ok) {\n          setIsSaved(false);\n          toast.success(\"Property removed from saved list\");\n        } else {\n          const errorData = await response.json().catch(() => ({}));\n          toast.error(errorData.message || \"Failed to remove property\");\n        }\n      } else {\n        // Add to saved properties\n        const response = await fetch(`${apiUrl}/saved-properties`, {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({ propertyId }),\n        });\n\n        if (response.ok) {\n          setIsSaved(true);\n          toast.success(\"Property saved successfully\");\n        } else {\n          const errorData = await response.json().catch(() => ({}));\n          toast.error(errorData.message || \"Failed to save property\");\n        }\n      }\n    } catch (error) {\n      console.error(\"Error toggling wishlist:\", error);\n      toast.error(\"Network error. Please try again.\");\n    } finally {\n      setSavingProperty(false);\n    }\n  };\n\n  // Fetch similar properties from API\n  useEffect(() => {\n    const fetchSimilarProperties = async () => {\n      if (!product) {\n        console.log('ðŸ“ SimilarProperties: No product, skipping API call');\n        return;\n      }\n\n      console.log('ðŸ“ SimilarProperties: Starting fetch, product:', product?.id || product?._id);\n      setSimilarLoading(true);\n      try {\n        const token =\n          typeof window !== \"undefined\"\n            ? localStorage.getItem(\"token\") || localStorage.getItem(\"authToken\")\n            : null;\n        const apiUrl = process.env.NEXT_PUBLIC_API_URL || \"\";\n        const headers = {\n          \"Content-Type\": \"application/json\",\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        };\n\n        // Get current broker ID to filter out own properties\n        let currentBrokerId = '';\n        let currentUserId = '';\n        if (token) {\n          try {\n            const payload = JSON.parse(atob(token.split('.')[1]));\n            currentUserId = payload.brokerId || payload.userId || payload.id || payload.sub || '';\n            \n            // Fetch broker details to get the actual broker _id\n            if (currentUserId) {\n              try {\n                const brokerRes = await fetch(`${apiUrl}/brokers/${currentUserId}`, {\n                  headers: { 'Content-Type': 'application/json', ...(token ? { Authorization: `Bearer ${token}` } : {}) }\n                });\n                if (brokerRes.ok) {\n                  const brokerData = await brokerRes.json();\n                  const broker = brokerData?.data?.broker || brokerData?.broker || brokerData?.data || brokerData;\n                  currentBrokerId = broker?._id || broker?.id || '';\n                }\n              } catch (err) {\n                console.error('Error fetching broker details:', err);\n              }\n            }\n          } catch (err) {\n            console.error('Error parsing token:', err);\n          }\n        }\n\n        // Get coordinates from the opened property\n        let latitude = null;\n        let longitude = null;\n        const propertyData = product._raw || product;\n        \n        console.log('ðŸ“ SimilarProperties: Property data:', propertyData);\n        \n        // First, check for direct latitude/longitude fields (most common in API response)\n        if (propertyData?.latitude !== undefined && propertyData?.longitude !== undefined) {\n          latitude = Number(propertyData.latitude);\n          longitude = Number(propertyData.longitude);\n          if (Number.isFinite(latitude) && Number.isFinite(longitude)) {\n            console.log('ðŸ“ SimilarProperties: Using direct latitude/longitude fields:', latitude, longitude);\n          } else {\n            latitude = null;\n            longitude = null;\n          }\n        }\n        \n        // If not found, check for location coordinates in property data\n        if (!latitude || !longitude) {\n          if (propertyData?.location?.coordinates && Array.isArray(propertyData.location.coordinates) && propertyData.location.coordinates.length >= 2) {\n            // GeoJSON Point format: [longitude, latitude] OR API format: [latitude, longitude]\n            // Try both formats\n            const coords = propertyData.location.coordinates;\n            // Check if it's likely [latitude, longitude] (latitude is usually -90 to 90)\n            if (Math.abs(coords[0]) <= 90 && Math.abs(coords[1]) <= 180) {\n              latitude = coords[0];\n              longitude = coords[1];\n            } else {\n              // GeoJSON format: [longitude, latitude]\n              longitude = coords[0];\n              latitude = coords[1];\n            }\n            console.log('ðŸ“ SimilarProperties: Using property location coordinates:', latitude, longitude);\n          } else if (propertyData?.region && Array.isArray(propertyData.region) && propertyData.region.length > 0) {\n            // Check if region has centerCoordinates\n            const firstRegion = propertyData.region[0];\n            if (firstRegion?.centerCoordinates && Array.isArray(firstRegion.centerCoordinates) && firstRegion.centerCoordinates.length >= 2) {\n              // API format: [latitude, longitude]\n              latitude = firstRegion.centerCoordinates[0];\n              longitude = firstRegion.centerCoordinates[1];\n              console.log('ðŸ“ SimilarProperties: Using region centerCoordinates:', latitude, longitude);\n            }\n          } else if (propertyData?.region && typeof propertyData.region === 'object' && !Array.isArray(propertyData.region)) {\n            // Check if region is a single object with centerCoordinates\n            if (propertyData.region?.centerCoordinates && Array.isArray(propertyData.region.centerCoordinates) && propertyData.region.centerCoordinates.length >= 2) {\n              latitude = propertyData.region.centerCoordinates[0];\n              longitude = propertyData.region.centerCoordinates[1];\n              console.log('ðŸ“ SimilarProperties: Using single region centerCoordinates:', latitude, longitude);\n            }\n          }\n        }\n        \n        if (!latitude || !longitude) {\n          console.log('ðŸ“ SimilarProperties: No coordinates found in property data');\n        }\n\n        // Build API URL with coordinates if available\n        const params = new URLSearchParams();\n        if (latitude && longitude) {\n          params.append(\"latitude\", latitude.toString());\n          params.append(\"longitude\", longitude.toString());\n          // Removed verificationStatus filter - fetch all properties\n          console.log('ðŸ“ SimilarProperties: Fetching similar properties with distance filter:', `${apiUrl}/properties?${params.toString()}`);\n        } else {\n          params.append(\"limit\", \"20\");\n          // Removed verificationStatus filter - fetch all properties\n          console.log('ðŸ“ SimilarProperties: No coordinates available, fetching all properties:', `${apiUrl}/properties?${params.toString()}`);\n        }\n\n        console.log('ðŸ“ SimilarProperties: Making API call...');\n        const res = await fetch(`${apiUrl}/properties?${params.toString()}`, {\n          headers,\n        });\n        console.log(\"ðŸ“ SimilarProperties: API Response status:\", res.status);\n\n        if (res.ok) {\n          const responseData = await res.json();\n          console.log(\"Full API Response:\", responseData);\n\n          // Try different possible response structures\n          let properties = [];\n          if (responseData?.data?.properties) {\n            properties = responseData.data.properties;\n          } else if (responseData?.data?.items) {\n            properties = responseData.data.items;\n          } else if (responseData?.properties) {\n            properties = responseData.properties;\n          } else if (responseData?.data && Array.isArray(responseData.data)) {\n            properties = responseData.data;\n          } else if (Array.isArray(responseData)) {\n            properties = responseData;\n          }\n\n          console.log(\"Properties found:\", properties.length);\n          const currentPropertyId = product.id || product._id;\n          console.log(\"Current property ID:\", currentPropertyId);\n\n          // Filter out current property and logged-in broker's own properties\n          const filteredProperties = properties.filter((p) => {\n            const propertyId = p._id || p.id;\n            \n            // Exclude the current property\n            if (propertyId === currentPropertyId) {\n              return false;\n            }\n\n            // Filter out properties belonging to the logged-in broker\n            if (currentBrokerId || currentUserId) {\n              let propertyBrokerId = '';\n              \n              // Check broker field first (most common in API response)\n              if (p.broker) {\n                if (typeof p.broker === 'string') {\n                  propertyBrokerId = p.broker;\n                } else if (typeof p.broker === 'object' && p.broker !== null) {\n                  propertyBrokerId = p.broker._id || p.broker.id || '';\n                }\n              }\n              \n              // If not found, check createdBy, postedBy\n              if (!propertyBrokerId) {\n                const createdBy = p.createdBy || p.postedBy;\n                \n                if (createdBy) {\n                  if (typeof createdBy === 'string') {\n                    propertyBrokerId = createdBy;\n                  } else if (typeof createdBy === 'object' && createdBy !== null) {\n                    const obj = createdBy;\n                    const userId = obj.userId;\n                    \n                    if (userId && typeof userId === 'object' && userId !== null) {\n                      propertyBrokerId = userId._id || userId.id || '';\n                    } else if (userId && typeof userId === 'string') {\n                      propertyBrokerId = userId;\n                    }\n                    \n                    if (!propertyBrokerId) {\n                      propertyBrokerId = obj._id || obj.id || obj.brokerId || '';\n                    }\n                  }\n                }\n              }\n              \n              const brokerIdStr = String(currentBrokerId || '').trim();\n              const userIdStr = String(currentUserId || '').trim();\n              const propertyBrokerIdStr = String(propertyBrokerId).trim();\n              \n              const matchesBrokerId = brokerIdStr !== '' && propertyBrokerIdStr === brokerIdStr;\n              const matchesUserId = userIdStr !== '' && propertyBrokerIdStr === userIdStr;\n              \n              // Exclude if matches logged-in broker\n              if (matchesBrokerId || matchesUserId) {\n                console.log('ðŸ” SimilarProperties: Filtering out own property:', propertyId, 'Broker ID:', propertyBrokerIdStr);\n                return false;\n              }\n            }\n\n            return true;\n          });\n\n          // Helper function to extract distance (in km)\n          const getDistance = (p) => {\n            const distance = p.distanceKm ?? p.distance;\n            return Number.isFinite(Number(distance)) ? Number(distance) : Infinity;\n          };\n\n          // Sort by distance (closest first)\n          const sorted = filteredProperties.sort((a, b) => {\n            const distanceA = getDistance(a);\n            const distanceB = getDistance(b);\n            return distanceA - distanceB; // Ascending order (closest first)\n          });\n\n          // Limit to 4-5 properties\n          const limited = sorted.slice(0, 5);\n\n          // Map to expected format\n          const similar = limited.map((p) => ({\n            id: p._id || p.id,\n            name: p.title || p.name || \"Property\",\n            category: p.propertyType || p.type || p.category || \"Property\",\n            price: p.price || 0,\n            originalPrice: p.originalPrice || p.oldPrice || 0,\n            image:\n              p.images?.[0] ||\n              p.image ||\n              \"/images/pexels-binyaminmellish-106399.jpg\",\n            areaSqft: p.propertySize || p.areaSqft || p.area || 0,\n            bedrooms: p.bedrooms || 0,\n            bathrooms: p.bathrooms || 0,\n            city: p.city || \"\",\n            region: p.region || \"\",\n          }));\n\n          console.log('ðŸ“ SimilarProperties: Showing', similar.length, 'similar properties sorted by distance (excluding own properties)');\n          setSimilarProperties(similar);\n        }\n      } catch (error) {\n        console.error(\"Error fetching similar properties:\", error);\n        setSimilarProperties([]);\n      } finally {\n        setSimilarLoading(false);\n      }\n    };\n\n    fetchSimilarProperties();\n  }, [product]);\n\n  // Update scroll button states when similar properties change\n  useEffect(() => {\n    const carousel = document.getElementById(\"related-properties-carousel\");\n    if (carousel) {\n      const updateScrollState = () => {\n        const { scrollLeft, scrollWidth, clientWidth } = carousel;\n        const maxScroll = scrollWidth - clientWidth;\n        setCanScrollLeft(scrollLeft > 10);\n        setCanScrollRight(scrollLeft < maxScroll - 10);\n      };\n\n      updateScrollState();\n      carousel.addEventListener(\"scroll\", updateScrollState);\n      return () => carousel.removeEventListener(\"scroll\", updateScrollState);\n    }\n  }, [similarProperties]);\n\n  const gallery = useMemo(() => {\n    if (!product) return [\"/images/pexels-binyaminmellish-106399.jpg\"];\n\n    const images = product.images || [product.image];\n    // Return at least 6 images (1 main + 5 thumbnails)\n    // If we have fewer images, repeat them to ensure we always have enough\n    const primary = images[0] || \"/images/pexels-binyaminmellish-106399.jpg\";\n    const secondary = images[1] || primary;\n    const tertiary = images[2] || primary;\n    const fourth = images[3] || primary;\n    const fifth = images[4] || primary;\n    const sixth = images[5] || primary;\n\n    return [primary, secondary, tertiary, fourth, fifth, sixth];\n  }, [product]);\n\n  const price = product?.price || 0;\n  const originalPrice = product?.originalPrice || 0;\n  const discount = product?.discount || \"\";\n\n  const headerData = {\n    title: \"Property Details\",\n    description: 'View property information, features, amenities, location details, and pricing.',\n    // breadcrumb: [\n    //   { label: \"Home\", href: \"/\" },\n    //   { label: \"Property Details\", href: \"/property-details\" },\n    // ],\n  };\n\n  // Loading state\n  if (loading) {\n    return (\n      <div className=\"min-h-screen\">\n        <HeaderFile data={headerData} />\n        <div className=\"py-10\">\n          <div className=\"w-full mx-auto\">\n            <div className=\"w-full grid grid-cols-1 md:grid-cols-12 gap-6\">\n              {/* Left Main Content Skeleton */}\n              <section className=\"md:col-span-8 space-y-12\">\n                {/* Gallery Skeleton */}\n                <div className=\"space-y-4\">\n                  {/* Main Large Image */}\n                  <div\n                    className=\"bg-gray-50 rounded-2xl overflow-hidden relative\"\n                    style={{ width: \"100%\", height: \"420px\" }}\n                  >\n                    <ContentLoader\n                      speed={2}\n                      width={800}\n                      height={420}\n                      viewBox=\"0 0 800 420\"\n                      backgroundColor=\"#f3f3f3\"\n                      foregroundColor=\"#ecebeb\"\n                      style={{ width: \"100%\", height: \"100%\" }}\n                    >\n                      {/* Main image */}\n                      <rect\n                        x=\"0\"\n                        y=\"0\"\n                        rx=\"16\"\n                        ry=\"16\"\n                        width=\"800\"\n                        height=\"420\"\n                      />\n                      {/* Featured badge top-left */}\n                      <rect\n                        x=\"16\"\n                        y=\"16\"\n                        rx=\"8\"\n                        ry=\"8\"\n                        width=\"80\"\n                        height=\"32\"\n                      />\n                      {/* Share button top-right */}\n                      <circle cx=\"768\" cy=\"40\" r=\"20\" />\n                      {/* Heart button top-right */}\n                      <circle cx=\"728\" cy=\"40\" r=\"20\" />\n                    </ContentLoader>\n                  </div>\n\n                  {/* Thumbnail Row */}\n                  <div className=\"flex gap-3\">\n                    {[1, 2, 3, 4, 5].map((i) => (\n                      <div\n                        key={i}\n                        className=\"flex-1\"\n                        style={{\n                          borderRadius: \"8px\",\n                          overflow: \"hidden\",\n                          height: \"120px\",\n                        }}\n                      >\n                        <ContentLoader\n                          speed={2}\n                          width={150}\n                          height={120}\n                          viewBox=\"0 0 150 120\"\n                          backgroundColor=\"#f3f3f3\"\n                          foregroundColor=\"#ecebeb\"\n                          style={{ width: \"100%\", height: \"100%\" }}\n                        >\n                          <rect\n                            x=\"0\"\n                            y=\"0\"\n                            rx=\"8\"\n                            ry=\"8\"\n                            width=\"150\"\n                            height=\"120\"\n                          />\n                        </ContentLoader>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Property Details Skeleton */}\n                <div className=\"w-full bg-white rounded-[16px] shadow-xs border border-gray-200 p-4 px-8\">\n                  <ContentLoader\n                    speed={2}\n                    width={600}\n                    height={200}\n                    viewBox=\"0 0 600 200\"\n                    backgroundColor=\"#f3f3f3\"\n                    foregroundColor=\"#ecebeb\"\n                    style={{ width: \"100%\", height: \"100%\" }}\n                  >\n                    {/* Title */}\n                    <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"150\" height=\"24\" />\n\n                    {/* 4 detail items in 2x2 grid */}\n                    {/* Bedrooms */}\n                    <circle cx=\"12\" cy=\"60\" r=\"10\" />\n                    <rect x=\"30\" y=\"52\" rx=\"4\" ry=\"4\" width=\"60\" height=\"12\" />\n                    <rect x=\"30\" y=\"68\" rx=\"4\" ry=\"4\" width=\"80\" height=\"16\" />\n\n                    {/* Property Size */}\n                    <circle cx=\"312\" cy=\"60\" r=\"10\" />\n                    <rect x=\"330\" y=\"52\" rx=\"4\" ry=\"4\" width=\"80\" height=\"12\" />\n                    <rect\n                      x=\"330\"\n                      y=\"68\"\n                      rx=\"4\"\n                      ry=\"4\"\n                      width=\"100\"\n                      height=\"16\"\n                    />\n\n                    {/* Listed */}\n                    <circle cx=\"12\" cy=\"120\" r=\"10\" />\n                    <rect x=\"30\" y=\"112\" rx=\"4\" ry=\"4\" width=\"50\" height=\"12\" />\n                    <rect x=\"30\" y=\"128\" rx=\"4\" ry=\"4\" width=\"90\" height=\"16\" />\n\n                    {/* Price */}\n                    <circle cx=\"312\" cy=\"120\" r=\"10\" />\n                    <rect\n                      x=\"330\"\n                      y=\"112\"\n                      rx=\"4\"\n                      ry=\"4\"\n                      width=\"50\"\n                      height=\"12\"\n                    />\n                    <rect\n                      x=\"330\"\n                      y=\"128\"\n                      rx=\"4\"\n                      ry=\"4\"\n                      width=\"120\"\n                      height=\"16\"\n                    />\n                  </ContentLoader>\n                </div>\n\n                {/* Nearby Amenities Skeleton */}\n                <div className=\"w-full bg-white rounded-2xl border border-gray-200 p-6 shadow-sm\">\n                  <ContentLoader\n                    speed={2}\n                    width={600}\n                    height={200}\n                    viewBox=\"0 0 600 200\"\n                    backgroundColor=\"#f3f3f3\"\n                    foregroundColor=\"#ecebeb\"\n                    style={{ width: \"100%\", height: \"100%\" }}\n                  >\n                    {/* Title */}\n                    <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"150\" height=\"24\" />\n\n                    {/* Amenity items in 2 columns */}\n                    {[0, 1, 2, 3, 4, 5].map((i) => {\n                      const row = Math.floor(i / 2);\n                      const col = i % 2;\n                      const x = col * 280;\n                      const y = 40 + row * 30;\n                      return (\n                        <React.Fragment key={i}>\n                          <circle cx={x} cy={y + 6} r=\"3\" />\n                          <rect\n                            x={x + 10}\n                            y={y}\n                            rx=\"4\"\n                            ry=\"4\"\n                            width={120}\n                            height=\"12\"\n                          />\n                        </React.Fragment>\n                      );\n                    })}\n                  </ContentLoader>\n                </div>\n\n                {/* Description Tab Section Skeleton */}\n                <div className=\"mt-8 w-full\">\n                  {/* Tabs */}\n                  <div className=\"inline-flex gap-2 mb-6 bg-gray-100 rounded-md border border-gray-200 p-1\">\n                    <ContentLoader\n                      speed={2}\n                      width={200}\n                      height={48}\n                      viewBox=\"0 0 200 48\"\n                      backgroundColor=\"#f3f3f3\"\n                      foregroundColor=\"#ecebeb\"\n                    >\n                      <rect\n                        x=\"24\"\n                        y=\"12\"\n                        rx=\"6\"\n                        ry=\"6\"\n                        width=\"80\"\n                        height=\"24\"\n                      />\n                      <rect\n                        x=\"112\"\n                        y=\"12\"\n                        rx=\"6\"\n                        ry=\"6\"\n                        width=\"60\"\n                        height=\"24\"\n                      />\n                    </ContentLoader>\n                  </div>\n\n                  {/* Tab Content */}\n                  <div className=\"rounded-2xl border border-gray-200 shadow-sm p-6\">\n                    <ContentLoader\n                      speed={2}\n                      width={600}\n                      height={150}\n                      viewBox=\"0 0 600 150\"\n                      backgroundColor=\"#f3f3f3\"\n                      foregroundColor=\"#ecebeb\"\n                      style={{ width: \"100%\", height: \"100%\" }}\n                    >\n                      <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"600\" height=\"12\" />\n                      <rect\n                        x=\"0\"\n                        y=\"20\"\n                        rx=\"4\"\n                        ry=\"4\"\n                        width=\"570\"\n                        height=\"12\"\n                      />\n                      <rect\n                        x=\"0\"\n                        y=\"40\"\n                        rx=\"4\"\n                        ry=\"4\"\n                        width=\"540\"\n                        height=\"12\"\n                      />\n                      <rect\n                        x=\"0\"\n                        y=\"60\"\n                        rx=\"4\"\n                        ry=\"4\"\n                        width=\"510\"\n                        height=\"12\"\n                      />\n                      <rect\n                        x=\"0\"\n                        y=\"80\"\n                        rx=\"4\"\n                        ry=\"4\"\n                        width=\"600\"\n                        height=\"12\"\n                      />\n                      <rect\n                        x=\"0\"\n                        y=\"100\"\n                        rx=\"4\"\n                        ry=\"4\"\n                        width=\"552\"\n                        height=\"12\"\n                      />\n                    </ContentLoader>\n                  </div>\n                </div>\n\n                {/* Key Features and Location Benefits Skeleton */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8 w-full\">\n                  <div className=\"bg-white rounded-2xl border border-gray-200 shadow-sm p-6\">\n                    <ContentLoader\n                      speed={2}\n                      width={300}\n                      height={180}\n                      viewBox=\"0 0 300 180\"\n                      backgroundColor=\"#f3f3f3\"\n                      foregroundColor=\"#ecebeb\"\n                      style={{ width: \"100%\", height: \"100%\" }}\n                    >\n                      <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"120\" height=\"20\" />\n                      {[0, 1, 2, 3].map((i) => (\n                        <React.Fragment key={i}>\n                          <circle cx=\"12\" cy={40 + i * 32} r=\"10\" />\n                          <rect\n                            x=\"30\"\n                            y={32 + i * 32}\n                            rx=\"4\"\n                            ry=\"4\"\n                            width=\"150\"\n                            height=\"12\"\n                          />\n                        </React.Fragment>\n                      ))}\n                    </ContentLoader>\n                  </div>\n\n                  <div className=\"bg-white rounded-2xl border border-gray-200 shadow-sm p-6\">\n                    <ContentLoader\n                      speed={2}\n                      width={300}\n                      height={180}\n                      viewBox=\"0 0 300 180\"\n                      backgroundColor=\"#f3f3f3\"\n                      foregroundColor=\"#ecebeb\"\n                      style={{ width: \"100%\", height: \"100%\" }}\n                    >\n                      <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"140\" height=\"20\" />\n                      {[0, 1, 2, 3].map((i) => (\n                        <React.Fragment key={i}>\n                          <circle cx=\"12\" cy={40 + i * 32} r=\"10\" />\n                          <rect\n                            x=\"30\"\n                            y={32 + i * 32}\n                            rx=\"4\"\n                            ry=\"4\"\n                            width=\"150\"\n                            height=\"12\"\n                          />\n                        </React.Fragment>\n                      ))}\n                    </ContentLoader>\n                  </div>\n                </div>\n              </section>\n\n              {/* Right Sidebar Skeleton */}\n              <aside className=\"md:col-span-4 space-y-8\">\n                {/* Property Header Skeleton */}\n                <div className=\"bg-white rounded-[16px] border border-gray-200 shadow-xs p-6\">\n                  <ContentLoader\n                    speed={2}\n                    width={400}\n                    height={250}\n                    viewBox=\"0 0 400 250\"\n                    backgroundColor=\"#f3f3f3\"\n                    foregroundColor=\"#ecebeb\"\n                    style={{ width: \"100%\", height: \"100%\" }}\n                  >\n                    {/* Header */}\n                    <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"150\" height=\"24\" />\n                    <rect\n                      x=\"320\"\n                      y=\"4\"\n                      rx=\"12\"\n                      ry=\"12\"\n                      width=\"60\"\n                      height=\"20\"\n                    />\n\n                    {/* Title */}\n                    <rect x=\"0\" y=\"40\" rx=\"4\" ry=\"4\" width=\"200\" height=\"20\" />\n\n                    {/* Location lines */}\n                    <rect x=\"0\" y=\"70\" rx=\"4\" ry=\"4\" width=\"180\" height=\"14\" />\n                    <rect x=\"0\" y=\"90\" rx=\"4\" ry=\"4\" width=\"150\" height=\"14\" />\n\n                    {/* Price */}\n                    <rect x=\"0\" y=\"115\" rx=\"4\" ry=\"4\" width=\"180\" height=\"28\" />\n\n                    {/* Buttons */}\n                    <rect\n                      x=\"0\"\n                      y=\"160\"\n                      rx=\"6\"\n                      ry=\"6\"\n                      width=\"100%\"\n                      height=\"40\"\n                    />\n                    <rect\n                      x=\"0\"\n                      y=\"210\"\n                      rx=\"6\"\n                      ry=\"6\"\n                      width=\"100%\"\n                      height=\"40\"\n                    />\n                  </ContentLoader>\n                </div>\n\n                {/* Agent Details Skeleton */}\n                <div className=\"border border-gray-200 p-6 w-full bg-white rounded-[16px] shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F]\">\n                  <ContentLoader\n                    speed={2}\n                    width={400}\n                    height={180}\n                    viewBox=\"0 0 400 180\"\n                    backgroundColor=\"#f3f3f3\"\n                    foregroundColor=\"#ecebeb\"\n                    style={{ width: \"100%\", height: \"100%\" }}\n                  >\n                    {/* Title */}\n                    <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"120\" height=\"24\" />\n\n                    {/* Avatar */}\n                    <circle cx=\"24\" cy=\"50\" r=\"24\" />\n\n                    {/* Name and details */}\n                    <rect x=\"60\" y=\"40\" rx=\"4\" ry=\"4\" width=\"140\" height=\"16\" />\n                    <rect x=\"60\" y=\"62\" rx=\"4\" ry=\"4\" width=\"100\" height=\"12\" />\n                    <rect x=\"60\" y=\"80\" rx=\"4\" ry=\"4\" width=\"180\" height=\"12\" />\n\n                    {/* Chat button */}\n                    <rect\n                      x=\"0\"\n                      y=\"110\"\n                      rx=\"10\"\n                      ry=\"10\"\n                      width=\"100%\"\n                      height=\"40\"\n                    />\n                  </ContentLoader>\n                </div>\n\n                {/* Property Rating Skeleton */}\n                <div className=\"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm\">\n                  <ContentLoader\n                    speed={2}\n                    width={400}\n                    height={150}\n                    viewBox=\"0 0 400 150\"\n                    backgroundColor=\"#f3f3f3\"\n                    foregroundColor=\"#ecebeb\"\n                    style={{ width: \"100%\", height: \"100%\" }}\n                  >\n                    {/* Title */}\n                    <rect x=\"0\" y=\"0\" rx=\"4\" ry=\"4\" width=\"140\" height=\"24\" />\n\n                    {/* Rating number and stars */}\n                    <rect x=\"150\" y=\"40\" rx=\"4\" ry=\"4\" width=\"60\" height=\"36\" />\n                    {[0, 1, 2, 3, 4].map((i) => (\n                      <circle key={i} cx={220 + i * 30} cy=\"58\" r=\"12\" />\n                    ))}\n\n                    {/* Review count */}\n                    <rect\n                      x=\"130\"\n                      y=\"90\"\n                      rx=\"4\"\n                      ry=\"4\"\n                      width=\"140\"\n                      height=\"14\"\n                    />\n                  </ContentLoader>\n                </div>\n\n\n                {/* Virtual Tour Skeleton */}\n                <div className=\"w-full h-[232px] bg-[#EDFDF4] rounded-[16px] shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F]\">\n                  <ContentLoader\n                    speed={2}\n                    width={400}\n                    height={232}\n                    viewBox=\"0 0 400 232\"\n                    backgroundColor=\"#e0f2e9\"\n                    foregroundColor=\"#c8e6d5\"\n                    style={{ width: \"100%\", height: \"100%\" }}\n                  >\n                    {/* Video icon */}\n                    <circle cx=\"200\" cy=\"90\" r=\"24\" />\n                    {/* Title */}\n                    <rect\n                      x=\"140\"\n                      y=\"130\"\n                      rx=\"4\"\n                      ry=\"4\"\n                      width=\"120\"\n                      height=\"20\"\n                    />\n                    {/* Subtitle */}\n                    <rect\n                      x=\"80\"\n                      y=\"158\"\n                      rx=\"4\"\n                      ry=\"4\"\n                      width=\"240\"\n                      height=\"14\"\n                    />\n                    {/* Button */}\n                    <rect\n                      x=\"150\"\n                      y=\"185\"\n                      rx=\"6\"\n                      ry=\"6\"\n                      width=\"100\"\n                      height=\"40\"\n                    />\n                  </ContentLoader>\n                </div>\n              </aside>\n            </div>\n\n            {/* Related Properties Skeleton */}\n            <div className=\"mt-12 w-full\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <ContentLoader\n                  speed={2}\n                  width={180}\n                  height={32}\n                  viewBox=\"0 0 180 32\"\n                  backgroundColor=\"#f3f3f3\"\n                  foregroundColor=\"#ecebeb\"\n                >\n                  <rect x=\"0\" y=\"4\" rx=\"4\" ry=\"4\" width=\"150\" height=\"24\" />\n                </ContentLoader>\n                <ContentLoader\n                  speed={2}\n                  width={80}\n                  height={32}\n                  viewBox=\"0 0 80 32\"\n                  backgroundColor=\"#f3f3f3\"\n                  foregroundColor=\"#ecebeb\"\n                >\n                  <rect x=\"0\" y=\"0\" rx=\"8\" ry=\"8\" width=\"80\" height=\"32\" />\n                </ContentLoader>\n              </div>\n\n              <div className=\"flex gap-6 min-w-0 pb-2\">\n                {[1, 2, 3, 4].map((i) => (\n                  <div\n                    key={i}\n                    className=\"flex-shrink-0 w-80 bg-white rounded-2xl border border-gray-200 shadow-sm p-6\"\n                  >\n                    <ContentLoader\n                      speed={2}\n                      width={320}\n                      height={280}\n                      viewBox=\"0 0 320 280\"\n                      backgroundColor=\"#f3f3f3\"\n                      foregroundColor=\"#ecebeb\"\n                    >\n                      {/* Image */}\n                      <rect\n                        x=\"0\"\n                        y=\"0\"\n                        rx=\"8\"\n                        ry=\"8\"\n                        width=\"320\"\n                        height=\"200\"\n                      />\n                      {/* Category */}\n                      <rect\n                        x=\"0\"\n                        y=\"220\"\n                        rx=\"4\"\n                        ry=\"4\"\n                        width=\"80\"\n                        height=\"12\"\n                      />\n                      {/* Name */}\n                      <rect\n                        x=\"0\"\n                        y=\"240\"\n                        rx=\"4\"\n                        ry=\"4\"\n                        width=\"200\"\n                        height=\"16\"\n                      />\n                      {/* Details */}\n                      <rect\n                        x=\"0\"\n                        y=\"262\"\n                        rx=\"4\"\n                        ry=\"4\"\n                        width=\"150\"\n                        height=\"12\"\n                      />\n                      {/* Price */}\n                      <rect\n                        x=\"0\"\n                        y=\"278\"\n                        rx=\"4\"\n                        ry=\"4\"\n                        width=\"120\"\n                        height=\"14\"\n                      />\n                    </ContentLoader>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Error state\n  if (error) {\n    return (\n      <div className=\"min-h-screen\">\n        <HeaderFile data={headerData} />\n        <div className=\"py-10\">\n          <div className=\"w-full mx-auto\">\n            <div className=\"flex items-center justify-center min-h-[400px]\">\n              <div className=\"text-center\">\n                <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <svg\n                    className=\"w-8 h-8 text-red-600\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth=\"2\"\n                      d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"\n                    />\n                  </svg>\n                </div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                  Error Loading Property\n                </h3>\n                <p className=\"text-gray-600 mb-4\">{error}</p>\n                <button\n                  onClick={() => window.location.reload()}\n                  className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n                >\n                  Try Again\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // No property found\n  if (!product) {\n    return (\n      <div className=\"min-h-screen\">\n        <HeaderFile data={headerData} />\n        <div className=\"py-10\">\n          <div className=\"w-full mx-auto\">\n            <div className=\"flex items-center justify-center min-h-[400px]\">\n              <div className=\"text-center\">\n                <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <svg\n                    className=\"w-8 h-8 text-gray-600\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth=\"2\"\n                      d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\"\n                    />\n                  </svg>\n                </div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                  Property Not Found\n                </h3>\n                <p className=\"text-gray-600 mb-4\">\n                  The property you're looking for doesn't exist or has been\n                  removed.\n                </p>\n                <Link\n                  href=\"/properties\"\n                  className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n                >\n                  Browse Properties\n                </Link>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen\">\n      <Toaster\n        position=\"top-right\"\n        toastOptions={{\n          duration: 4000,\n          style: {\n            background: \"#363636\",\n            color: \"#fff\",\n          },\n          success: {\n            duration: 3000,\n            iconTheme: {\n              primary: \"#4ade80\",\n              secondary: \"#fff\",\n            },\n          },\n          error: {\n            duration: 4000,\n            iconTheme: {\n              primary: \"#ef4444\",\n              secondary: \"#fff\",\n            },\n          },\n        }}\n      />\n      <HeaderFile data={headerData} />\n      <div className=\"py-10\">\n        <div className=\"w-full mx-auto\">\n          <div className=\"w-full grid grid-cols-1 md:grid-cols-12 gap-6 items-start\">\n            {/* Left Main Content */}\n            <section className=\"md:col-span-8 space-y-12\">\n              {/* Property Overview Card */}\n              <div className=\" space-y-6\">\n                {/* <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"inline-block h-0.5 w-8 rounded bg-yellow-400\"></span>\n                   <h2 className=\"text-xl font-semibold text-gray-900\">Property Overview</h2>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                   <span className=\"px-2 py-1 rounded-full bg-blue-100 text-blue-800 text-sm font-medium\">Available</span>\n                   <span className=\"px-2 py-1 rounded-full bg-orange-100 text-orange-800 text-sm font-medium\">New Listing</span>\n            </div>\n          </div> */}\n\n                <div className=\"space-y-4\">\n                  {/* Main Large Image */}\n                  <div className=\"bg-gray-50 rounded-2xl overflow-hidden relative group\">\n                    <img\n                      src={gallery[selectedImageIndex]}\n                      alt=\"Property\"\n                      className=\"w-full h-[360px] md:h-[420px] object-cover group-hover:scale-105 transition-transform duration-500\"\n                    />\n                    <div className=\"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\"></div>\n                    <div className=\"absolute top-4 left-4 flex gap-2\">\n                      <span className=\"px-3 py-1.5  backdrop-blur-sm text-white text-sm font-medium rounded-lg \">\n                        Featured\n                      </span>\n                    </div>\n                    <div className=\"absolute top-4 right-4 flex gap-2\">\n                      <button\n                        onClick={() => {\n                          // Get current page URL\n                          const currentUrl =\n                            typeof window !== \"undefined\"\n                              ? window.location.href\n                              : \"\";\n                          const propertyTitle = product?.name || \"Property\";\n                          const propertyDescription =\n                            product?.description ||\n                            product?.propertyDescription ||\n                            \"Check out this property\";\n\n                          // Facebook share URL\n                          const facebookShareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(\n                            currentUrl\n                          )}&quote=${encodeURIComponent(\n                            `${propertyTitle} - ${propertyDescription}`\n                          )}`;\n\n                          // Open Facebook share dialog in a new window\n                          window.open(\n                            facebookShareUrl,\n                            \"facebook-share-dialog\",\n                            \"width=626,height=436\"\n                          );\n                        }}\n                        className=\"w-[40px] h-[40px] px-[10px] flex items-center justify-center text-[#171A1F] bg-white/80 backdrop-blur-sm opacity-100 border-none rounded-full hover:text-[#171A1F] hover:bg-white/80 active:text-[#171A1F] active:bg-white/80 disabled:opacity-40 transition-colors\"\n                        title=\"Share on Facebook\"\n                      >\n                        <svg\n                          className=\"w-5 h-5\"\n                          fill=\"none\"\n                          stroke=\"currentColor\"\n                          viewBox=\"0 0 24 24\"\n                        >\n                          <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            strokeWidth=\"2\"\n                            d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z\"\n                          />\n                        </svg>\n                      </button>\n                      <button\n                        onClick={handleWishlistToggle}\n                        disabled={savingProperty}\n                        className={`w-[40px] h-[40px] px-[10px] flex items-center justify-center bg-white/80 backdrop-blur-sm opacity-100 border-none rounded-full hover:text-[#171A1F] hover:bg-white/80 active:text-[#171A1F] active:bg-white/80 disabled:opacity-40 transition-colors ${\n                          isSaved ? \"text-red-500\" : \"text-[#171A1F]\"\n                        }`}\n                        title={isSaved ? \"Remove from saved\" : \"Save property\"}\n                      >\n                        {isSaved ? (\n                          <svg\n                            className=\"w-5 h-5\"\n                            fill=\"currentColor\"\n                            viewBox=\"0 0 24 24\"\n                          >\n                            <path d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\" />\n                          </svg>\n                        ) : (\n                          <svg\n                            className=\"w-5 h-5\"\n                            fill=\"none\"\n                            stroke=\"currentColor\"\n                            viewBox=\"0 0 24 24\"\n                          >\n                            <path\n                              strokeLinecap=\"round\"\n                              strokeLinejoin=\"round\"\n                              strokeWidth=\"2\"\n                              d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\n                            />\n                          </svg>\n                        )}\n                      </button>\n                    </div>\n                  </div>\n\n                  {/* Thumbnail Row */}\n                  <div className=\"flex gap-3\">\n                    {gallery.slice(1, 6).map((img, index) => {\n                      const thumbnailIndex = index + 1; // +1 because we're slicing from index 1\n                      const isSelected = selectedImageIndex === thumbnailIndex;\n                      return (\n                        <div\n                          key={index}\n                          onClick={() => setSelectedImageIndex(thumbnailIndex)}\n                          className={`flex-1 bg-gray-50 overflow-hidden relative group cursor-pointer transition-all duration-300 ${\n                            isSelected ? 'ring-2 ring-[#0D542B] ring-offset-2' : ''\n                          }`}\n                          style={{ borderRadius: \"8px\" }}\n                        >\n                          <img\n                            src={img}\n                            alt={`Thumbnail ${index + 1}`}\n                            className={`w-full h-[120px] object-cover group-hover:scale-105 transition-transform duration-300 ${\n                              isSelected ? 'opacity-100' : 'opacity-90'\n                            }`}\n                            style={{ borderRadius: \"8px\" }}\n                          />\n                          {isSelected && (\n                            <div className=\"absolute inset-0 bg-[#0D542B]/10 pointer-events-none\" style={{ borderRadius: \"8px\" }}></div>\n                          )}\n                        </div>\n                      );\n                    })}\n                    {/* If we have more than 5 images, show placeholder with count */}\n                    {gallery.length > 6 && (\n                      <div\n                        className=\"flex-1 bg-gray-50 overflow-hidden relative group cursor-pointer border-2 border-dashed border-gray-300 flex items-center justify-center\"\n                        style={{ borderRadius: \"8px\" }}\n                      >\n                        <span className=\"text-sm font-medium text-gray-500\">\n                          +{gallery.length - 6} More\n                        </span>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* Property Details Grid */}\n                <div className=\"space-y-4 w-full bg-white rounded-[16px] shadow-xs border border-gray-200 p-4 px-8\">\n                  <div className=\"flex items-center gap-2 \">\n                    {/* <span className=\"inline-block h-0.5 w-6 rounded bg-yellow-400\"></span> */}\n                    <h3 className=\"text-[18px] leading-[28px] font-semibold text-[#171A1F]\">\n                      Property Details\n                    </h3>\n                  </div>\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-5 text-sm\">\n                    <div className=\"flex items-start gap-3\">\n                      <span className=\"mt-3 justify-center\">\n                        <svg\n                          className=\"w-[20px] h-[20px]  text-[#565D6D]\"\n                          viewBox=\"0 0 24 24\"\n                          fill=\"none\"\n                          stroke=\"currentColor\"\n                          strokeWidth=\"2\"\n                        >\n                          <rect x=\"3\" y=\"10\" width=\"18\" height=\"7\" rx=\"1\" />\n                          <path d=\"M7 10V7a2 2 0 012-2h6a2 2 0 012 2v3\" />\n                        </svg>\n                      </span>\n                      <div>\n                        <div className=\"font-inter text-[12px] leading-[20px] font-normal text-[#565D6D]\">\n                          Bedrooms\n                        </div>\n                        <div className=\"font-inter text-[14px] leading-[24px] font-medium text-[#171A1F]\">\n                          {product.bedrooms} BHK\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"flex items-start gap-3\">\n                      <span className=\" justify-center mt-3\">\n                        <svg\n                          className=\"w-[20px] h-[20px]  text-[#565D6D]\"\n                          viewBox=\"0 0 24 24\"\n                          fill=\"none\"\n                          stroke=\"currentColor\"\n                          strokeWidth=\"2\"\n                        >\n                          <rect x=\"3\" y=\"6\" width=\"18\" height=\"12\" rx=\"2\" />\n                        </svg>\n                      </span>\n                      <div>\n                        <div className=\"font-inter text-[12px] leading-[20px] font-normal text-[#565D6D]\">\n                          Built-up Area\n                        </div>\n                        <div className=\"font-inter text-[14px] leading-[24px] font-medium text-[#171A1F]\">\n                          {product.areaSqft?.toLocaleString(\"en-IN\")} sq.ft\n                        </div>\n                      </div>\n                    </div>\n                    {/* <div className=\"flex items-start gap-3\">\n  <span className=\"mt-3 flex items-center justify-center\">\n   \n    <img\n      src=\"/images/lucide-SquareStack-Outlined.svg\"\n      alt=\"size icon\"\n      className=\"w-[20px] h-[20px]\"\n    />\n  </span>\n  <div>\n    <div className=\"font-inter text-[14px] leading-[20px] font-normal text-[#565D6D]\">Size</div>\n    <div className=\"font-inter text-[16px] leading-[24px] font-medium text-[#171A1F]\">\n      {product?.createdAt ? new Date(product.createdAt).toLocaleDateString() : '3 days ago'}\n    </div>\n  </div>\n</div> */}\n                    <div className=\"flex items-start gap-3\">\n                      <span className=\"mt-3 justify-center\">\n                        <svg\n                          className=\"w-[20px] h-[20px]  text-[#565D6D]\"\n                          viewBox=\"0 0 24 24\"\n                          fill=\"none\"\n                          stroke=\"currentColor\"\n                          strokeWidth=\"2\"\n                        >\n                          <circle cx=\"12\" cy=\"12\" r=\"9\" />\n                          <path d=\"M12 7v5l3 3\" />\n                        </svg>\n                      </span>\n                      <div>\n                        <div className=\"font-inter text-[12px] leading-[20px] font-normal text-[#565D6D]\">\n                          Listed\n                        </div>\n                        <div className=\"font-inter text-[14px] leading-[24px] font-medium text-[#171A1F]\">\n                          {product?.createdAt\n                            ? new Date(product.createdAt).toLocaleDateString()\n                            : \"3 days ago\"}\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"flex items-start gap-3\">\n                      <span className=\"mt-3 justify-center\">\n                        <svg\n                          className=\"w-[20px] h-[20px]  text-[#565D6D]\"\n                          viewBox=\"0 0 24 24\"\n                          fill=\"none\"\n                          stroke=\"currentColor\"\n                          strokeWidth=\"2\"\n                        >\n                          <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"23\" />\n                          <path d=\"M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6\" />\n                        </svg>\n                      </span>\n                      <div>\n                        <div className=\"font-inter text-[12px] leading-[20px] font-normal text-[#565D6D]\">\n                          Price\n                        </div>\n                        <div className=\"font-inter text-[14px] leading-[24px] font-medium text-[#171A1F]\">\n                          â‚¹{formatPrice(price)}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Divider */}\n                {/* <div className=\"border-t border-gray-100\"></div> */}\n              </div>\n\n              {/* Neighborhood Section - Compact Design */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 w-full\">\n                {/* Nearby Amenities */}\n                <div className=\"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm\">\n                  {/* Header */}\n                  <h3 className=\"font-inter text-[18px] leading-[28px] font-semibold text-[#171A1F] mb-4\">\n                    Nearby Amenities\n                  </h3>\n\n                  {/* Amenities */}\n                  {product?.nearbyAmenities?.length ? (\n                    <div className=\"flex flex-wrap gap-2\">\n                      {product.nearbyAmenities.map((item, idx) => (\n                        <span\n                          key={idx}\n                          className=\"inline-flex items-center px-3 py-1.5 rounded-full bg-gray-100 text-gray-700 font-inter text-[12px] leading-[20px] font-medium border border-gray-300\"\n                        >\n                          {item}\n                        </span>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"text-sm text-gray-500\">\n                      No nearby amenities listed.\n                    </div>\n                  )}\n                </div>\n\n                {/* Amenities */}\n                <div className=\"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm\">\n                  {/* Header */}\n                  <h3 className=\"font-inter text-[18px] leading-[28px] font-semibold text-[#171A1F] mb-4\">\n                    Amenities\n                  </h3>\n\n                  {/* Amenities */}\n                  {product?.amenities?.length ? (\n                    <div className=\"flex flex-wrap gap-2\">\n                      {product.amenities.map((item, idx) => (\n                        <span\n                          key={idx}\n                          className=\"inline-flex items-center px-3 py-1.5 rounded-full bg-gray-100 text-gray-700 font-inter text-[12px] leading-[20px] font-medium border border-gray-300\"\n                        >\n                          {item}\n                        </span>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"text-sm text-gray-500\">\n                      No amenities listed.\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Key Features and Location Benefits - Outside the tabs */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8 w-full\">\n                <div className=\"bg-white rounded-2xl border border-gray-200 shadow-sm p-6\">\n                  <h4 className=\"font-bold text-gray-900 mb-6 text-[18px]\">\n                    Key Features\n                  </h4>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {(product?.features && product.features.length > 0\n                      ? product.features\n                      : [\"Corner Unit\", \"Park Facing\"]\n                    ).map((item) => (\n                      <span\n                        key={item}\n                        className=\"inline-flex items-center px-3 py-1.5 rounded-full bg-gray-100 text-gray-700 font-inter text-[12px] leading-[20px] font-medium border border-gray-300\"\n                      >\n                        {item}\n                      </span>\n                    ))}\n                  </div>\n                </div>\n\n                <div className=\"bg-white rounded-2xl border border-gray-200 shadow-sm p-6\">\n                  <h4 className=\"font-bold text-gray-900 mb-6 text-[18px]\">\n                    Location Benefits\n                  </h4>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {(product?.locationBenefits &&\n                    product.locationBenefits.length > 0\n                      ? product.locationBenefits\n                      : [\"Near IT Park\", \"Easy Highway Access\"]\n                    ).map((item) => (\n                      <span\n                        key={item}\n                        className=\"inline-flex items-center px-3 py-1.5 rounded-full bg-gray-100 text-gray-700 font-inter text-[12px] leading-[20px] font-medium border border-gray-300\"\n                      >\n                        {item}\n                      </span>\n                    ))}\n                  </div>\n                </div>\n              </div>\n\n              {/* Property Details Tabs Section */}\n              <div className=\"mt-8 w-full\">\n                {/* Tabs */}\n                <div className=\"inline-flex gap-2 mb-6 bg-gray-100 rounded-md border border-gray-200 \">\n                  {TABS.map((tab, idx) => (\n                    <button\n                      key={tab.label}\n                      onClick={() => setActiveTab(idx)}\n                      className={`px-6 py-3 text-base font-medium focus:outline-none transition-all rounded-md ${\n                        activeTab === idx\n                          ? \"text-[#171A1F] bg-[#E6F7ED]\"\n                          : \"text-[#565D6D] hover:text-[#171A1F]\"\n                      }`}\n                    >\n                      {tab.label}\n                    </button>\n                  ))}\n                </div>\n\n                {/* Tab Content */}\n                <div className=\" rounded-2xl border border-gray-200 shadow-sm p-6\">\n                  <div className=\"pt-2\">\n                    {activeTab === 0 && (\n                      <div className=\"space-y-8\">\n                        <div>\n                          <div className=\"flex items-center gap-2 mb-6\">\n                            {/* <span className=\"inline-block h-0.5 w-8 rounded bg-yellow-400\"></span>\n                          <h3 className=\"text-xl font-bold text-gray-900\">Property Description</h3> */}\n                          </div>\n                          <div className=\"prose prose-gray max-w-none\">\n                            {(product?.propertyDescription ||\n                              product?.description) && (\n                              <p className=\"w-full font-inter text-[12px] leading-[24px] font-normal text-[#565D6D] mb-4\">\n                                {product.propertyDescription ||\n                                  product.description}\n                              </p>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    )}\n\n                    {activeTab === 1 && <></>}\n\n                    {activeTab === 1 && (\n                      <div className=\"space-y-8\">\n                        <div>\n                          <div className=\"flex items-center gap-2 mb-6\">\n                            <span className=\"inline-block h-0.5 w-8 rounded bg-yellow-400\"></span>\n                            <h3 className=\"text-[18px] font-bold text-gray-900\">\n                              Reviews & Ratings\n                            </h3>\n                          </div>\n\n                          {/* Overall Rating */}\n                          <div className=\"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-8 mb-8\">\n                            <div className=\"flex flex-col md:flex-row gap-8 items-center\">\n                              <div className=\"text-center md:text-left\">\n                                <div className=\"text-6xl font-bold text-gray-900 mb-2\">\n                                  {ratingsStats?.averageRating\n                                    ? ratingsStats.averageRating.toFixed(1)\n                                    : (product?.rating || 0).toFixed(1)}\n                                </div>\n                                <div className=\"flex items-center justify-center md:justify-start gap-1 mb-2\">\n                                  {[...Array(5)].map((_, i) => {\n                                    const avgRating =\n                                      ratingsStats?.averageRating ||\n                                      product?.rating ||\n                                      0;\n                                    return (\n                                      <svg\n                                        key={i}\n                                        className={`w-6 h-6 ${\n                                          i < Math.round(avgRating)\n                                            ? \"text-yellow-400\"\n                                            : \"text-gray-300\"\n                                        }`}\n                                        fill=\"currentColor\"\n                                        viewBox=\"0 0 20 20\"\n                                      >\n                                        <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n                                      </svg>\n                                    );\n                                  })}\n                                </div>\n                                <div className=\"text-[14px] text-gray-600 mb-1\">\n                                  {(() => {\n                                    const avg =\n                                      ratingsStats?.averageRating ||\n                                      product?.rating ||\n                                      0;\n                                    if (avg >= 4.5) return \"Excellent\";\n                                    if (avg >= 3.5) return \"Very Good\";\n                                    if (avg >= 2.5) return \"Good\";\n                                    if (avg >= 1.5) return \"Fair\";\n                                    return \"Poor\";\n                                  })()}\n                                </div>\n                                <div className=\"text-[12px] text-gray-500\">\n                                  Based on{\" \"}\n                                  {ratingsStats?.totalRatings ||\n                                    propertyRatings?.length ||\n                                    0}{\" \"}\n                                  {ratingsStats?.totalRatings === 1\n                                    ? \"review\"\n                                    : \"reviews\"}\n                                </div>\n                              </div>\n                              <div className=\"flex-1 w-full\">\n                                {[5, 4, 3, 2, 1].map((star) => {\n                                  const distribution =\n                                    ratingsStats?.distribution || {};\n                                  const count = distribution[star] || 0;\n                                  const total =\n                                    ratingsStats?.totalRatings ||\n                                    propertyRatings?.length ||\n                                    1;\n                                  const percentage =\n                                    total > 0\n                                      ? Math.round((count / total) * 100)\n                                      : 0;\n                                  return (\n                                    <div\n                                      key={star}\n                                      className=\"flex items-center gap-3 mb-3\"\n                                    >\n                                      <span className=\"w-12 text-gray-700 text-[12px] font-medium\">\n                                        {star} Star\n                                      </span>\n                                      <div className=\"flex-1 h-3 bg-gray-200 rounded-full overflow-hidden\">\n                                        <div\n                                          className=\"h-3 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full transition-all duration-500\"\n                                          style={{ width: `${percentage}%` }}\n                                        ></div>\n                                      </div>\n                                      <span className=\"text-[12px] text-gray-600 w-8 text-right\">\n                                        {percentage}%\n                                      </span>\n                                    </div>\n                                  );\n                                })}\n                              </div>\n                            </div>\n                          </div>\n\n                          {/* Individual Reviews */}\n                          <div className=\"space-y-6\">\n                            <h4 className=\"text-[18px] font-bold text-gray-900 mb-4\">\n                              Recent Reviews\n                            </h4>\n                            {ratingsLoading ? (\n                              <div className=\"text-center py-8\">\n                                <div className=\"text-gray-400\">\n                                  Loading reviews...\n                                </div>\n                              </div>\n                            ) : propertyRatings &&\n                              propertyRatings.length > 0 ? (\n                              <>\n                                {propertyRatings.map((review) => {\n                                  const userName =\n                                    review.userId?.name || \"Anonymous\";\n                                  const userInitials = userName\n                                    .split(\" \")\n                                    .map((n) => n[0])\n                                    .join(\"\")\n                                    .toUpperCase()\n                                    .slice(0, 2);\n                                  const reviewDate = review.createdAt\n                                    ? new Date(review.createdAt)\n                                    : null;\n                                  const formatDate = (date) => {\n                                    if (!date) return \"Recently\";\n                                    const now = new Date();\n                                    const diffTime = Math.abs(now - date);\n                                    const diffDays = Math.floor(\n                                      diffTime / (1000 * 60 * 60 * 24)\n                                    );\n                                    if (diffDays === 0) return \"Today\";\n                                    if (diffDays === 1) return \"Yesterday\";\n                                    if (diffDays < 7)\n                                      return `${diffDays} days ago`;\n                                    if (diffDays < 30)\n                                      return `${Math.floor(\n                                        diffDays / 7\n                                      )} weeks ago`;\n                                    if (diffDays < 365)\n                                      return `${Math.floor(\n                                        diffDays / 30\n                                      )} months ago`;\n                                    return date.toLocaleDateString();\n                                  };\n\n                                  return (\n                                    <div\n                                      key={review._id}\n                                      className=\"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm\"\n                                    >\n                                      <div className=\"flex items-start justify-between mb-4\">\n                                        <div className=\"flex items-center gap-3\">\n                                          <div className=\"w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-white font-bold text-[14px]\">\n                                            {userInitials}\n                                          </div>\n                                          <div>\n                                            <div className=\"flex items-center gap-2\">\n                                              <h5 className=\"font-semibold text-[14px] text-gray-900\">\n                                                {userName}\n                                              </h5>\n                                            </div>\n                                            <div className=\"flex items-center gap-2\">\n                                              <div className=\"flex items-center gap-1\">\n                                                {[...Array(5)].map((_, i) => (\n                                                  <svg\n                                                    key={i}\n                                                    className={`w-4 h-4 ${\n                                                      i < review.rating\n                                                        ? \"text-yellow-400\"\n                                                        : \"text-gray-300\"\n                                                    }`}\n                                                    fill=\"currentColor\"\n                                                    viewBox=\"0 0 20 20\"\n                                                  >\n                                                    <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n                                                  </svg>\n                                                ))}\n                                              </div>\n                                              <span className=\"text-[12px] text-gray-500\">\n                                                {formatDate(reviewDate)}\n                                              </span>\n                                            </div>\n                                          </div>\n                                        </div>\n                                      </div>\n                                      {review.review && (\n                                        <p className=\"text-[12px] text-gray-700 leading-6\">\n                                          {review.review}\n                                        </p>\n                                      )}\n                                    </div>\n                                  );\n                                })}\n                              </>\n                            ) : (\n                              <div className=\"text-center py-8\">\n                                <div className=\"text-gray-400 mb-2\">\n                                  No reviews yet\n                                </div>\n                                <div className=\"text-[12px] text-gray-500\">\n                                  Be the first to review this property!\n                                </div>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </section>\n\n            {/* Right Sidebar - Enhanced Content */}\n            <aside className=\"md:col-span-4 space-y-8\">\n              {/* Property Header - Lead Detail Style */}\n              <div className=\"bg-white rounded-[16px] border border-gray-200 shadow-xs p-6 mb-8\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  {/* Left side - label and line */}\n                  <div className=\"flex items-center gap-2\">\n                    {/* <span className=\"inline-block h-0.5 w-6 rounded bg-yellow-400\"></span> */}\n                    <h3 className=\" top-[19px] left-[16px] font-inter text-[18px] leading-[28px] font-semibold text-[#171A1F]\">\n                      Property Details\n                    </h3>\n                  </div>\n\n                  {/* Right side - status badge */}\n                  {/* <span className=\"font-inter text-[12px] leading-[20px] font-normal opacity-100\">\n    {product.status}\n  </span> */}\n                </div>\n\n                <div className=\"flex items-start gap-4 mb-6\">\n                  {/* <div className=\"relative\">\n                 <div className=\"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center\">\n                   <svg className=\"w-8 h-8 text-gray-600\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                     <path d=\"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z\"/>\n                     <polyline points=\"9,22 9,12 15,12 15,22\"/>\n                   </svg>\n                 </div>\n                 <div className=\"absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 rounded-full border-2 border-white flex items-center justify-center\">\n                   <svg className=\"w-3 h-3 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                     <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\"/>\n                   </svg>\n                 </div>\n               </div> */}\n\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <h1 className=\"text-[16px] font-semibold text-gray-900\">\n                        {product?.name || \"Property\"}\n                      </h1>\n                      {/* <span className=\"px-2 py-1 rounded-full bg-green-100 text-green-800 text-xs font-medium\">\n                       {product.status}\n                     </span> */}\n                    </div>\n                    <p className=\"top-[61px] left-[16px] font-inter text-[12px] leading-[20px] font-normal text-[#565D6D]\">\n                      {typeof product.region === \"object\"\n                        ? product.region?.name ||\n                          [product.region?.city, product.region?.state]\n                            .filter(Boolean)\n                            .join(\", \")\n                        : product.region}\n                    </p>\n                    <p className=\"top-[61px] left-[16px] font-inter text-[12px] leading-[20px] font-normal text-[#565D6D] mt-2\">\n                      â€¢ Listed{\" \"}\n                      {product?.createdAt\n                        ? new Date(product.createdAt).toLocaleDateString()\n                        : \"3 days ago\"}\n                    </p>\n                    <p className=\"  text-[18px] leading-[32px] font-bold text-[#0D542B] mt-2\">\n                      â‚¹{formatPrice(price)}\n                    </p>\n                  </div>\n                </div>\n\n                {/* Actions - Below the content */}\n                <div className=\"flex flex-col gap-3\">\n                  <button\n                    onClick={() => setIsEnquiryModalOpen(true)}\n                    className=\"w-full h-[40px] px-[12px] flex items-center justify-center gap-[16px] font-inter text-[14px] leading-[22px] font-medium text-white bg-[#0D542B] rounded-[6px] border-0 hover:bg-[#0B4624] active:bg-[#08321A] disabled:opacity-40\"\n                  >\n                    Inquiry\n                    <svg\n                      className=\"w-4 h-4\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                        strokeWidth=\"2\"\n                        d=\"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\"\n                      />\n                    </svg>\n                  </button>\n                </div>\n              </div>\n\n              {/* Agent Details */}\n              <div className=\"border border-gray-200 p-6 w-full bg-white rounded-[16px] shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F]\">\n                {/* Header */}\n                <div className=\"mb-4\">\n                  <h3 className=\"font-inter text-[18px] leading-[28px] font-semibold text-[#171A1F]\">\n                    Agent Details\n                  </h3>\n                </div>\n\n                {agentLoading ? (\n                  /* Skeleton */\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"w-12 h-12 rounded-full bg-gray-200 animate-pulse\" />\n                    <div className=\"space-y-2\">\n                      <div className=\"h-4 w-40 bg-gray-200 rounded animate-pulse\" />\n                      <div className=\"h-3 w-28 bg-gray-200 rounded animate-pulse\" />\n                    </div>\n                  </div>\n                ) : agent ? (\n                  <>\n                    {/* Avatar + text */}\n                    <div className=\"flex items-center gap-3\">\n                      <img\n                        src={agent.image}\n                        alt=\"Agent\"\n                        className=\"w-12 h-12 rounded-full object-cover\"\n                      />\n                      <div className=\"leading-[20px]\">\n                        <div className=\"font-inter font-semibold text-gray-900\">\n                          {agent.name}\n                        </div>\n                        {/* Optional phone */}\n                        {/* {agent.phone && (\n            <div className=\"text-sm text-gray-500\">{agent.phone}</div>\n          )} */}\n                        {agent.firm && (\n                          <div className=\"text-[12px] text-gray-500\">\n                            {agent.firm}\n                          </div>\n                        )}\n                        <div className=\"text-[12px] text-gray-400\">\n                          {`Expert Broker${\n                            agent?.region\n                              ? \" â€¢ \" +\n                                (typeof agent.region === \"object\"\n                                  ? agent.region?.name ||\n                                    [agent.region?.city, agent.region?.state]\n                                      .filter(Boolean)\n                                      .join(\", \")\n                                  : agent.region)\n                              : \"\"\n                          }`}\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Chat button */}\n                    {broker && (\n                      <button\n                        onClick={() => {\n                          // Check if user is logged in\n                          const token =\n                            typeof window !== \"undefined\"\n                              ? localStorage.getItem(\"token\") ||\n                                localStorage.getItem(\"authToken\")\n                              : null;\n\n                          if (!token) {\n                            // User not logged in, redirect to login page\n                            router.push(`/login?redirect=${path}`);\n                            return;\n                          }\n\n                          // User is logged in, open chat\n                          if (window.openChatWithBroker) {\n                            window.openChatWithBroker({ broker });\n                          }\n                        }}\n                        type=\"button\"\n                        className=\"mt-4 w-full h-10 flex items-center justify-center font-inter text-[14px] leading-[22px] font-medium text-[#323742] bg-[#F3F4F6] rounded-[10px] hover:bg-[#E9EBEF] active:bg-[#D9DEE6] disabled:opacity-40\"\n                      >\n                        Chat Now\n                      </button>\n                    )}\n                  </>\n                ) : (\n                  <div className=\"text-sm text-gray-500\">\n                    Agent details not available.\n                  </div>\n                )}\n              </div>\n\n              {/* Property Rating */}\n              <div className=\"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm\">\n                <div className=\"flex items-center gap-2 mb-4\">\n                  {/* <span className=\"inline-block h-0.5 w-6 rounded bg-yellow-400\"></span> */}\n                  <h3 className=\"font-inter text-[18px] leading-[28px] font-semibold text-[#171A1F]\">\n                    Property Rating\n                  </h3>\n                </div>\n\n                {/* Only show rating display if rating exists */}\n                {ratingsStats?.averageRating ? (\n                  <>\n                    <div className=\"flex items-center justify-center\">\n                      {/* Stars with partial fill support - only show stars, no rating number */}\n                      <div className=\"flex items-center gap-1\">\n                        {[...Array(5)].map((_, i) => {\n                          const avgRating = ratingsStats.averageRating;\n                          const fillPercentage = Math.max(\n                            0,\n                            Math.min(100, (avgRating - i) * 100)\n                          );\n\n                          return (\n                            <div key={i} className=\"relative w-[24px] h-[24px]\">\n                              {/* Gray background star */}\n                              <svg\n                                className=\"w-[24px] h-[24px] text-gray-300 absolute inset-0\"\n                                viewBox=\"0 0 24 24\"\n                                fill=\"currentColor\"\n                              >\n                                <path d=\"M12 .587l3.668 7.431 8.2 1.192-5.934 5.786 1.4 8.164L12 18.896l-7.334 3.864 1.4-8.164L.132 9.21l8.2-1.192z\" />\n                              </svg>\n                              {/* Yellow filled star (with clip path for partial fill) */}\n                              {fillPercentage > 0 && (\n                                <div className=\"absolute inset-0 overflow-hidden\">\n                                  <svg\n                                    className=\"w-[24px] h-[24px] text-yellow-400\"\n                                    viewBox=\"0 0 24 24\"\n                                    fill=\"currentColor\"\n                                    style={{\n                                      clipPath: `inset(0 ${\n                                        100 - fillPercentage\n                                      }% 0 0)`,\n                                    }}\n                                  >\n                                    <path d=\"M12 .587l3.668 7.431 8.2 1.192-5.934 5.786 1.4 8.164L12 18.896l-7.334 3.864 1.4-8.164L.132 9.21l8.2-1.192z\" />\n                                  </svg>\n                                </div>\n                              )}\n                            </div>\n                          );\n                        })}\n                      </div>\n                    </div>\n                  </>\n                ) : null}\n\n                {/* Rating Button - Always show */}\n                <button\n                  onClick={() => {\n                    // Check if user is logged in\n                    const token =\n                      typeof window !== \"undefined\"\n                        ? localStorage.getItem(\"token\") ||\n                          localStorage.getItem(\"authToken\")\n                        : null;\n\n                    if (!token) {\n                      router.push(\"/login\");\n                      return;\n                    }\n                    setShowRatingModal(true);\n                  }}\n                  className={`w-full h-[40px] px-3 flex items-center justify-center gap-2 font-inter text-[12px] leading-[22px] font-medium text-[#0D542B] bg-white border border-[#0D542B] hover:bg-[#EDFDF4] hover:active:bg-[#D9F5E8] disabled:opacity-40 rounded-md transition-colors ${\n                    ratingsStats?.averageRating ? \"mt-4\" : \"mt-0\"\n                  }`}\n                >\n                  <svg\n                    className=\"w-4 h-4\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\"\n                    />\n                  </svg>\n                  Rate This Property\n                </button>\n              </div>\n\n              {/* Virtual Tour */}\n              {product?.videos && product.videos.length > 0 ? (\n                <div className=\"w-full bg-[#EDFDF4] rounded-[16px] shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] overflow-hidden\">\n                  {showVideo ? (\n                    <div className=\"relative w-full bg-black rounded-[16px] overflow-hidden\" style={{ minHeight: '232px' }}>\n                      {(() => {\n                        const videoUrl = product.videos[0];\n                        const embedUrl = getEmbedUrl(videoUrl);\n                        const isYouTube = embedUrl && embedUrl.includes('youtube.com/embed');\n                        \n                        return isYouTube ? (\n                          <iframe\n                            src={embedUrl}\n                            className=\"w-full h-auto max-h-[400px]\"\n                            style={{ minHeight: '232px', aspectRatio: '16/9' }}\n                            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                            allowFullScreen\n                            title=\"Property Video\"\n                          />\n                        ) : (\n                          <video\n                            src={videoUrl}\n                            controls\n                            className=\"w-full h-auto max-h-[400px]\"\n                            style={{ minHeight: '232px' }}\n                          >\n                            Your browser does not support the video tag.\n                          </video>\n                        );\n                      })()}\n                      <button\n                        onClick={() => setShowVideo(false)}\n                        className=\"absolute top-2 right-2 bg-black/70 text-white rounded-full p-2 hover:bg-black/90 transition z-10\"\n                        aria-label=\"Close video\"\n                      >\n                        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                        </svg>\n                      </button>\n                    </div>\n                  ) : (\n                    <div className=\"h-[232px] flex flex-col items-center justify-center text-center p-4\">\n                      {/* Video Icon */}\n                      <svg\n                        className=\"w-[48px] h-[48px] text-[#0D542B] mb-4\"\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        strokeWidth=\"2\"\n                        viewBox=\"0 0 24 24\"\n                      >\n                        <path\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"\n                        />\n                      </svg>\n\n                      {/* Title */}\n                      <h3 className=\"text-[18px] leading-[28px] font-semibold text-[#19191F]\">\n                        Property Video\n                      </h3>\n\n                      {/* Subtitle */}\n                      <p className=\"mt-1 font-inter text-[12px] leading-[20px] font-normal text-[#19191F]\">\n                       Take a 360Â° tour of the property\n                      </p>\n\n                      {/* Button */}\n                      <button\n                        onClick={() => setShowVideo(true)}\n                        className=\"mt-4 w-[107.13px] h-[40px] px-[12px] flex items-center justify-center font-inter text-[14px] leading-[22px] font-medium text-[#0D542B] bg-white rounded-[6px] border border-[#0D542B] hover:bg-[#EDFDF4] active:bg-[#EDFDF4] disabled:opacity-40 transition-colors\"\n                      >\n                        View Video\n                      </button>\n                    </div>\n                  )}\n                </div>\n              ) : (\n                <div className=\"w-full h-[232px] bg-[#EDFDF4] rounded-[16px] shadow-[0_0_1px_#171a1f12,0_0_2px_#171a1f1F] flex flex-col items-center justify-center text-center\">\n                  {/* Video Icon */}\n                  <svg\n                    className=\"w-[48px] h-[48px] text-[#0D542B] mb-4\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"2\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"\n                    />\n                  </svg>\n\n                  {/* Title */}\n                  <h3 className=\"text-[18px] leading-[28px] font-semibold text-[#19191F]\">\n                    Property Video\n                  </h3>\n\n                  {/* Subtitle */}\n                  <p className=\"mt-1 font-inter text-[12px] leading-[20px] font-normal text-[#19191F]\">\n                    No video available\n                  </p>\n                </div>\n              )}\n            </aside>\n          </div>\n\n          {/* Property Details Tabs Section */}\n          {/* <div className=\"mt-8\">\n      \n        <div className=\"inline-flex gap-2 mb-6 bg-white rounded-full border border-gray-200 p-1\">\n          {TABS.map((tab, idx) => (\n            <button\n              key={tab.label}\n              onClick={() => setActiveTab(idx)}\n              className={`px-6 py-3 text-base font-medium focus:outline-none transition-all rounded-full ${\n                activeTab === idx \n                  ? 'text-[#171A1F] bg-[#E6F7ED]' \n                  : 'text-[#565D6D] hover:text-[#171A1F]'\n              }`}\n            >\n              {tab.label}\n            </button>\n          ))}\n        </div>\n\n\n        <div className=\"bg-white rounded-2xl border border-gray-200 shadow-sm p-6\">\n          <div className=\"pt-2\">\n          {activeTab === 0 && (\n            <div className=\"space-y-8\">\n              <div>\n                <div className=\"flex items-center gap-2 mb-6\">\n                  <span className=\"inline-block h-0.5 w-8 rounded bg-yellow-400\"></span>\n                  <h3 className=\"text-xl font-bold text-gray-900\">Property Description</h3>\n                </div>\n                <div className=\"prose prose-gray max-w-none\">\n                  {(product?.propertyDescription || product?.description) && (\n                    <p className=\"text-sm text-gray-700 leading-6 mb-4\">{product.propertyDescription || product.description}</p>\n                  )}\n                </div>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\n                  <div className=\"bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-6\">\n                    <h4 className=\"font-bold text-gray-900 mb-4 flex items-center gap-2\">\n                      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"/>\n                      </svg>\n                      Key Features\n                    </h4>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {(product?.features && product.features.length > 0 ? product.features : ['Corner Unit','Park Facing']).map((item) => (\n                        <span \n                          key={item} \n                          className=\"inline-flex items-center px-3 py-1.5 rounded-full bg-gray-100 text-gray-700 font-inter text-[12px] leading-[20px] font-medium border border-gray-300\"\n                        >\n                          {item}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                  \n                  <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl p-6\">\n                    <h4 className=\"font-bold text-blue-900 mb-4 flex items-center gap-2\">\n                      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"/>\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"/>\n                      </svg>\n                      Location Benefits\n                    </h4>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {(product?.locationBenefits && product.locationBenefits.length > 0 ? product.locationBenefits : ['Near IT Park','Easy Highway Access']).map((item) => (\n                        <span \n                          key={item} \n                          className=\"inline-flex items-center px-3 py-1.5 rounded-full bg-gray-100 text-gray-700 font-inter text-[12px] leading-[20px] font-medium border border-gray-300\"\n                        >\n                          {item}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {activeTab === 1 && (<></>)}\n\n          {activeTab === 1 && (\n            <div className=\"space-y-8\">\n              <div>\n                <div className=\"flex items-center gap-2 mb-6\">\n                  <span className=\"inline-block h-0.5 w-8 rounded bg-yellow-400\"></span>\n                  <h3 className=\"text-xl font-bold text-gray-900\">Reviews & Ratings</h3>\n                </div>\n                \n                <div className=\"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-8 mb-8\">\n                  <div className=\"flex flex-col md:flex-row gap-8 items-center\">\n                    <div className=\"text-center md:text-left\">\n                      <div className=\"text-6xl font-bold text-gray-900 mb-2\">{(product?.rating || 4.7).toFixed(1)}</div>\n                      <div className=\"flex items-center justify-center md:justify-start gap-1 mb-2\">\n                    {[...Array(5)].map((_, i) => (\n                          <svg key={i} className={`w-6 h-6 ${i < Math.round((product?.rating || 4.7)) ? 'text-yellow-400' : 'text-gray-300'}`} fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"/>\n                          </svg>\n                    ))}\n                  </div>\n                      <div className=\"text-lg text-gray-600 mb-1\">Excellent</div>\n                      <div className=\"text-sm text-gray-500\">Based on {product?.reviewCount || 245} reviews</div>\n                </div>\n                <div className=\"flex-1 w-full\">\n                  {[5, 4, 3, 2, 1].map((star, idx) => {\n                    const barPercents = [90, 60, 25, 10, 5];\n                    return (\n                          <div key={star} className=\"flex items-center gap-3 mb-3\">\n                            <span className=\"w-12 text-gray-700 text-sm font-medium\">{star} Star</span>\n                            <div className=\"flex-1 h-3 bg-gray-200 rounded-full overflow-hidden\">\n                              <div className=\"h-3 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full transition-all duration-500\" style={{ width: `${barPercents[idx]}%` }}></div>\n                        </div>\n                            <span className=\"text-sm text-gray-600 w-8 text-right\">{barPercents[idx]}%</span>\n                      </div>\n                    );\n                  })}\n                    </div>\n                  </div>\n                </div>\n                \n              \n                <div className=\"space-y-6\">\n                  <h4 className=\"text-lg font-bold text-gray-900 mb-4\">Recent Reviews</h4>\n                  {[\n                    {\n                      name: 'Rajesh Kumar',\n                      rating: 5,\n                      date: '2 days ago',\n                      comment: 'Excellent property with great amenities. The location is perfect with metro connectivity. Highly recommended!',\n                      verified: true\n                    },\n                    {\n                      name: 'Priya Sharma',\n                      rating: 4,\n                      date: '1 week ago',\n                      comment: 'Good property overall. The maintenance is well taken care of. Only minor issue is the parking space.',\n                      verified: true\n                    },\n                    {\n                      name: 'Amit Singh',\n                      rating: 5,\n                      date: '2 weeks ago',\n                      comment: 'Amazing property! The view from the balcony is breathtaking. The builder has maintained high quality standards.',\n                      verified: false\n                    }\n                  ].map((review, index) => (\n                    <div key={index} className=\"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm\">\n                      <div className=\"flex items-start justify-between mb-4\">\n                        <div className=\"flex items-center gap-3\">\n                          <div className=\"w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-white font-bold\">\n                            {review.name.split(' ').map(n => n[0]).join('')}\n                          </div>\n                          <div>\n                            <div className=\"flex items-center gap-2\">\n                              <h5 className=\"font-semibold text-gray-900\">{review.name}</h5>\n                              {review.verified && (\n                                <span className=\"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\">Verified</span>\n                              )}\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                              <div className=\"flex items-center gap-1\">\n                                {[...Array(5)].map((_, i) => (\n                                  <svg key={i} className={`w-4 h-4 ${i < review.rating ? 'text-yellow-400' : 'text-gray-300'}`} fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                    <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"/>\n                                  </svg>\n                                ))}\n                              </div>\n                              <span className=\"text-sm text-gray-500\">{review.date}</span>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      <p className=\"text-gray-700 leading-6\">{review.comment}</p>\n                    </div>\n                  ))}\n                  \n                  <button className=\"w-full py-3 px-6 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-medium transition-colors\">\n                    Load More Reviews\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n      </div> */}\n        </div>\n      </div>\n\n      {/* Related Properties - Carousel */}\n      <div className=\"mt-12 w-full\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center gap-2\">\n            {/* <span className=\"inline-block h-0.5 w-6 rounded bg-yellow-400\"></span> */}\n            <h3 className=\"text-[18px] leading-[32px] font-semibold text-[#171A1F]\">\n              Related Properties\n            </h3>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Link\n              href=\"/search?tab=properties\"\n              className=\"px-4 py-2 text-gray-900 rounded-lg text-sm font-medium transition-colors\"\n            >\n              View All\n            </Link>\n          </div>\n        </div>\n\n        {/* Carousel with scrollable cards */}\n        <div\n          id=\"related-properties-carousel\"\n          className=\"overflow-x-auto scroll-smooth\"\n          style={{ scrollbarWidth: \"none\", msOverflowStyle: \"none\" }}\n          onScroll={(e) => {\n            const carousel = e.currentTarget;\n            const { scrollLeft, scrollWidth, clientWidth } = carousel;\n            const maxScroll = scrollWidth - clientWidth;\n            setCanScrollLeft(scrollLeft > 10);\n            setCanScrollRight(scrollLeft < maxScroll - 10);\n          }}\n        >\n          <div className=\"flex gap-6 min-w-0 pb-2\">\n            {similarLoading ? (\n              // Loading state\n              Array.from({ length: 6 }).map((_, index) => (\n                <div\n                  key={index}\n                  className=\"flex-shrink-0 w-80 bg-white rounded-2xl border border-gray-200 shadow-sm p-6\"\n                >\n                  <ContentLoader\n                    speed={2}\n                    width={320}\n                    height={280}\n                    viewBox=\"0 0 320 280\"\n                    backgroundColor=\"#f3f3f3\"\n                    foregroundColor=\"#ecebeb\"\n                  >\n                    {/* Image */}\n                    <rect x=\"0\" y=\"0\" rx=\"8\" ry=\"8\" width=\"320\" height=\"200\" />\n                    {/* Category */}\n                    <rect x=\"0\" y=\"220\" rx=\"4\" ry=\"4\" width=\"80\" height=\"12\" />\n                    {/* Name */}\n                    <rect x=\"0\" y=\"240\" rx=\"4\" ry=\"4\" width=\"200\" height=\"16\" />\n                    {/* Details */}\n                    <rect x=\"0\" y=\"262\" rx=\"4\" ry=\"4\" width=\"150\" height=\"12\" />\n                    {/* Price */}\n                    <rect x=\"0\" y=\"278\" rx=\"4\" ry=\"4\" width=\"120\" height=\"14\" />\n                  </ContentLoader>\n                </div>\n              ))\n            ) : similarProperties.length > 0 ? (\n              // Property cards\n              similarProperties.map((p) => (\n                <div\n                  key={p.id}\n                  className=\"flex-shrink-0 w-80 bg-white rounded-2xl border border-gray-200 shadow-sm hover:shadow-lg transition-shadow\"\n                >\n                  <Link\n                    href={`/property-details/${p.id}`}\n                    className=\"block group\"\n                  >\n                    <div className=\"aspect-[4/3] bg-gray-100 rounded-t-2xl overflow-hidden\">\n                      <img\n                        src={p.image}\n                        alt={p.name}\n                        className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\n                      />\n                    </div>\n                    <div className=\"px-4 pt-4 pb-4 space-y-3\">\n                      {/* Name with green upward arrow */}\n                      <div className=\"flex items-center gap-2\">\n                        <h3 className=\"font-semibold text-gray-900 text-base line-clamp-1\">\n                          {p.name}\n                        </h3>\n                        <svg\n                          className=\"w-5 h-5 text-green-900 mt-2 flex-shrink-0 rotate-60\"\n                          fill=\"none\"\n                          stroke=\"currentColor\"\n                          viewBox=\"0 0 24 24\"\n                          strokeWidth=\"2\"\n                        >\n                          <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            d=\"M5 10l7-7 7 7M12 3v18\"\n                          />\n                        </svg>\n                      </div>\n\n                      {/* Category */}\n                      <div className=\"text-sm text-gray-600 font-medium\">\n                        {p.category}\n                      </div>\n\n                      {/* Location with pin icon */}\n                      <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                        <svg\n                          className=\"w-4 h-4 text-gray-500 flex-shrink-0\"\n                          fill=\"none\"\n                          stroke=\"currentColor\"\n                          viewBox=\"0 0 24 24\"\n                          strokeWidth=\"2\"\n                        >\n                          <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"\n                          />\n                          <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"\n                          />\n                        </svg>\n                        <span className=\"line-clamp-1\">\n                          {p.city || \"\"}{\" \"}\n                          {typeof p.region === \"object\"\n                            ? p.region?.name ||\n                              [p.region?.city, p.region?.state]\n                                .filter(Boolean)\n                                .join(\", \")\n                            : p.region\n                            ? `â€¢ ${p.region}`\n                            : \"\"}\n                        </span>\n                      </div>\n\n                      {/* Property details with person icon */}\n                      <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                        <svg\n                          className=\"w-4 h-4 text-gray-500 flex-shrink-0\"\n                          fill=\"none\"\n                          stroke=\"currentColor\"\n                          viewBox=\"0 0 24 24\"\n                          strokeWidth=\"2\"\n                        >\n                          <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\n                          />\n                        </svg>\n                        <span>\n                          {p.bedrooms || 0} BHK â€¢{\" \"}\n                          {p.areaSqft?.toLocaleString(\"en-IN\") || \"0\"} sq.ft\n                        </span>\n                      </div>\n\n                      {/* Price */}\n                      <div className=\"flex items-center gap-2 pt-1\">\n                        <span className=\"text-gray-900 font-semibold text-base\">\n                          â‚¹{formatPrice(p.price)}\n                        </span>\n                        {/* {p.originalPrice && p.originalPrice > (p.price || 0) && (\n                          <span className=\"text-xs text-gray-500 line-through\">â‚¹{formatPrice(p.originalPrice)}</span>\n                        )} */}\n                      </div>\n                    </div>\n                  </Link>\n                </div>\n              ))\n            ) : (\n              // No properties found\n              <div className=\"w-full flex items-center justify-center py-16\">\n                <div className=\"text-center\">\n                  <svg\n                    className=\"w-16 h-16 mx-auto mb-6 text-gray-300\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\"\n                    />\n                  </svg>\n                  <p className=\"text-xl font-semibold text-gray-900 mb-3\">\n                    No related properties found\n                  </p>\n                  <p className=\"text-base text-gray-500\">\n                    We couldn't find any properties with similar features.\n                  </p>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Carousel navigation buttons */}\n        <div className=\"flex gap-2 mt-7 justify-center\">\n          <button\n            type=\"button\"\n            onClick={() => {\n              const carousel = document.getElementById(\n                \"related-properties-carousel\"\n              );\n              if (carousel && canScrollLeft) {\n                carousel.scrollBy({ left: -320, behavior: \"smooth\" });\n              }\n            }}\n            disabled={!canScrollLeft}\n            className={`w-8 h-8 rounded-full flex items-center justify-center transition-colors shadow-md ${\n              canScrollLeft\n                ? \"bg-yellow-500 text-white hover:bg-yellow-600\"\n                : \"bg-gray-200 text-gray-400 cursor-not-allowed\"\n            }`}\n            title=\"Previous\"\n          >\n            <svg\n              className=\"w-4 h-4\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M15 19l-7-7 7-7\"\n              />\n            </svg>\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => {\n              const carousel = document.getElementById(\n                \"related-properties-carousel\"\n              );\n              if (carousel && canScrollRight) {\n                carousel.scrollBy({ left: 320, behavior: \"smooth\" });\n              }\n            }}\n            disabled={!canScrollRight}\n            className={`w-8 h-8 rounded-full flex items-center justify-center transition-colors shadow-md ${\n              canScrollRight\n                ? \"bg-yellow-500 text-white hover:bg-yellow-600\"\n                : \"bg-gray-200 text-gray-400 cursor-not-allowed\"\n            }`}\n            title=\"Next\"\n          >\n            <svg\n              className=\"w-4 h-4\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M9 5l7 7-7 7\"\n              />\n            </svg>\n          </button>\n        </div>\n      </div>\n\n      {/* CTA Section */}\n      <div className=\"w-full max-w-full bg-[#FFF9E6] rounded-2xl shadow-xs mt-4\">\n        <div className=\"px-6 py-8 text-center relative overflow-hidden\">\n          {/* Decorative elements */}\n          <div className=\"absolute top-0 left-0 w-full h-1 \"></div>\n          <div className=\"absolute top-3 right-3 w-12 h-12 bg-yellow-100 rounded-full opacity-20\"></div>\n          <div className=\"absolute bottom-3 left-3 w-10 h-10 bg-yellow-200 rounded-full opacity-30\"></div>\n\n          <div className=\"max-w-2xl mx-auto relative z-10\">\n            <div className=\"inline-flex items-center mt-4\">\n              <img\n                src=\"/images/lucide-Sparkles-Outlined.svg\"\n                className=\"w-[32px] h-[32px]\"\n                style={{\n                  filter:\n                    \"brightness(0) saturate(100%) invert(99%) sepia(89%) saturate(5066%) hue-rotate(315deg) brightness(99%) contrast(97%)\",\n                }}\n              />\n              {/* Trusted by 1000+ Customers */}\n            </div>\n\n            <h2 className=\"text-[18px] leading-[36px] font-bold text-[#19191F] mt-4\">\n             Ready to Find Your Perfect Home?\n\n            </h2>\n            <p className=\"w-full max-w-2xl mx-auto font-inter text-[12px] leading-[28px] font-normal text-[#19191F] mt-4\">\n              Join thousands of satisfied customers who found their dream homes\n              through our platform. Get started today and let our expert brokers\n              help you every step of the way.\n            </p>\n\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center mt-4\">\n              <a\n                href=\"/search?tab=properties\"\n                className=\"w-[176px] h-[40px] px-3 flex items-center justify-center font-inter text-[14px] leading-[22px] font-medium text-white bg-[#0D542B] rounded-md border-0 transition-colors duration-200 \n         hover:bg-[#0B4624] active:bg-[#08321A] disabled:opacity-40\"\n              >\n                Browse All Properties\n              </a>\n              <a\n                href=\"/search?tab=brokers\"\n                className=\"w-[118.078125px] h-[40px] px-3 flex items-center justify-center font-inter text-[14px] leading-[22px] font-medium text-[#0D542B] bg-white rounded-md border border-[#0D542B] transition-colors duration-200 hover:bg-white active:bg-white disabled:opacity-40\"\n              >\n                Find Brokers\n              </a>\n            </div>\n\n            {/* <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-center\">\n              <div className=\"flex flex-col items-center gap-2 p-3 rounded-lg bg-gray-50 hover:bg-yellow-50 transition-colors\">\n                <div className=\"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center\">\n                  <svg className=\"w-4 h-4 text-yellow-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\"/>\n                  </svg>\n                </div>\n                <span className=\"font-semibold text-gray-900 text-sm\">Verified Properties</span>\n                <span className=\"text-xs text-gray-600\">Quality Assured</span>\n              </div>\n              \n              <div className=\"flex flex-col items-center gap-2 p-3 rounded-lg bg-gray-50 hover:bg-yellow-50 transition-colors\">\n                <div className=\"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center\">\n                  <svg className=\"w-4 h-4 text-yellow-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\"/>\n                  </svg>\n                </div>\n                <span className=\"font-semibold text-gray-900 text-sm\">Expert Brokers</span>\n                <span className=\"text-xs text-gray-600\">Professional Service</span>\n              </div>\n              \n              <div className=\"flex flex-col items-center gap-2 p-3 rounded-lg bg-gray-50 hover:bg-yellow-50 transition-colors\">\n                <div className=\"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center\">\n                  <svg className=\"w-4 h-4 text-yellow-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\"/>\n                  </svg>\n                </div>\n                <span className=\"font-semibold text-gray-900 text-sm\">Free Consultation</span>\n                <span className=\"text-xs text-gray-600\">No Obligation</span>\n              </div>\n            </div> */}\n          </div>\n        </div>\n      </div>\n      <PropertyEnquiryModal\n        isOpen={isEnquiryModalOpen}\n        onClose={() => setIsEnquiryModalOpen(false)}\n        propertyId={product?.id || product?._id || null}\n        propertyBrokerId={\n          broker?._id ||\n          broker?.id ||\n          (product?._raw &&\n            typeof product._raw.createdBy === \"object\" &&\n            product._raw.createdBy?._id) ||\n          (product?._raw && typeof product._raw.createdBy === \"string\"\n            ? product._raw.createdBy\n            : null) ||\n          product?._raw?.brokerId ||\n          null\n        }\n      />\n\n      {/* Rating Modal */}\n      {showRatingModal && (\n        <div\n          className=\"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4\"\n          onClick={() => setShowRatingModal(false)}\n        >\n          <div\n            className=\"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 relative border border-gray-100\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            <div className=\"p-6\">\n              {/* Header */}\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-[18px] font-bold text-gray-900\">\n                  Rate This Property\n                </h3>\n                <button\n                  onClick={() => {\n                    setShowRatingModal(false);\n                    setUserRating(0);\n                    setRatingReview(\"\");\n                  }}\n                  className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n                >\n                  <svg\n                    className=\"w-6 h-6\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M6 18L18 6M6 6l12 12\"\n                    />\n                  </svg>\n                </button>\n              </div>\n\n              {/* Property Info */}\n              {product && (\n                <div className=\"flex items-center gap-3 mb-6 pb-4 border-b border-gray-200\">\n                  <div className=\"w-16 h-16 rounded-lg bg-gray-100 overflow-hidden flex-shrink-0\">\n                    <img\n                      src={\n                        product.images?.[0] ||\n                        product.image ||\n                        \"/images/pexels-binyaminmellish-106399.jpg\"\n                      }\n                      alt={product.name}\n                      className=\"w-full h-full object-cover\"\n                    />\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <h4 className=\"text-[14px] font-semibold text-gray-900 truncate\">\n                      {product.name}\n                    </h4>\n                    <p className=\"text-[12px] text-gray-500 truncate\">\n                      {typeof product.region === \"object\"\n                        ? product.region?.name ||\n                          [product.region?.city, product.region?.state]\n                            .filter(Boolean)\n                            .join(\", \")\n                        : product.region}\n                    </p>\n                    <p className=\"text-[12px] font-medium text-[#0D542B] mt-1\">\n                      â‚¹{formatPrice(product.price || 0)}\n                    </p>\n                  </div>\n                </div>\n              )}\n\n              {/* Star Rating */}\n              <div className=\"mb-6\">\n                <label className=\"block text-[14px] font-medium text-gray-700 mb-3\">\n                  Your Rating\n                </label>\n                <div className=\"flex items-center gap-2\">\n                  {[1, 2, 3, 4, 5].map((star) => (\n                    <button\n                      key={star}\n                      type=\"button\"\n                      onClick={() => setUserRating(star)}\n                      className=\"focus:outline-none transition-transform hover:scale-110\"\n                    >\n                      <svg\n                        className={`w-8 h-8 ${\n                          star <= userRating\n                            ? \"text-yellow-400 fill-yellow-400\"\n                            : \"text-gray-300 fill-gray-300\"\n                        }`}\n                        viewBox=\"0 0 24 24\"\n                      >\n                        <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\" />\n                      </svg>\n                    </button>\n                  ))}\n                </div>\n                {userRating > 0 && (\n                  <p className=\"text-[12px] text-gray-600 mt-2\">\n                    {userRating === 1 && \"Poor\"}\n                    {userRating === 2 && \"Fair\"}\n                    {userRating === 3 && \"Good\"}\n                    {userRating === 4 && \"Very Good\"}\n                    {userRating === 5 && \"Excellent\"}\n                  </p>\n                )}\n              </div>\n\n              {/* Comment */}\n              <div className=\"mb-6\">\n                <label className=\"block text-[14px] font-medium text-gray-700 mb-2\">\n                  Your Review (Optional)\n                </label>\n                <textarea\n                  value={ratingReview}\n                  onChange={(e) => setRatingReview(e.target.value)}\n                  placeholder=\"Share your experience with this property...\"\n                  rows={4}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg text-[13px] focus:outline-none focus:ring-2 focus:ring-[#0D542B] focus:border-[#0D542B] resize-none\"\n                />\n              </div>\n\n              {/* Submit Button */}\n              <div className=\"flex gap-3\">\n                <button\n                  onClick={() => {\n                    setShowRatingModal(false);\n                    setUserRating(0);\n                    setRatingReview(\"\");\n                  }}\n                  className=\"flex-1 h-[40px] px-4 flex items-center justify-center font-inter text-[13px] leading-[22px] font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={async () => {\n                    if (userRating === 0) {\n                      toast.error(\"Please select a rating\");\n                      return;\n                    }\n\n                    setRatingLoading(true);\n                    try {\n                      const token =\n                        typeof window !== \"undefined\"\n                          ? localStorage.getItem(\"token\") ||\n                            localStorage.getItem(\"authToken\")\n                          : null;\n\n                      if (!token) {\n                        toast.error(\"Please login to submit a rating\");\n                        setShowRatingModal(false);\n                        router.push(\"/login\");\n                        return;\n                      }\n\n                      const base =\n                        process.env.NEXT_PUBLIC_API_URL ||\n                        \"https://broker-adda-be.fly.dev/api\";\n                      const headers = {\n                        \"Content-Type\": \"application/json\",\n                        Authorization: `Bearer ${token}`,\n                      };\n\n                      const propertyId = product?.id || product?._id;\n\n                      // API expects: propertyId, rating, and review (optional)\n                      const ratingData = {\n                        propertyId: propertyId,\n                        rating: userRating,\n                        review: ratingReview || \"\",\n                      };\n\n                      console.log(\n                        \"Submitting rating to:\",\n                        `${base}/property-ratings`\n                      );\n                      console.log(\"Rating data:\", ratingData);\n\n                      const res = await fetch(`${base}/property-ratings`, {\n                        method: \"POST\",\n                        headers,\n                        body: JSON.stringify(ratingData),\n                      });\n\n                      const responseData = await res.json().catch(() => ({}));\n\n                      if (!res.ok) {\n                        throw new Error(\n                          responseData.message || \"Failed to submit rating\"\n                        );\n                      }\n\n                      // Handle success response\n                      if (responseData.success && responseData.data) {\n                        toast.success(\n                          responseData.message || \"Thank you for your rating!\"\n                        );\n                        console.log(\n                          \"Rating submitted successfully:\",\n                          responseData.data\n                        );\n                      } else {\n                        toast.success(\"Thank you for your rating!\");\n                      }\n\n                      setShowRatingModal(false);\n                      setUserRating(0);\n                      setRatingReview(\"\");\n\n                      // Refresh ratings after submitting\n                      const refreshRatings = async () => {\n                        try {\n                          const refreshToken =\n                            typeof window !== \"undefined\"\n                              ? localStorage.getItem(\"token\") ||\n                                localStorage.getItem(\"authToken\")\n                              : null;\n                          const refreshBase =\n                            process.env.NEXT_PUBLIC_API_URL ||\n                            \"https://broker-adda-be.fly.dev/api\";\n                          const refreshHeaders = {\n                            \"Content-Type\": \"application/json\",\n                            ...(refreshToken\n                              ? { Authorization: `Bearer ${refreshToken}` }\n                              : {}),\n                          };\n\n                          const propertyId = product?.id || product?._id;\n                          const ratingsEndpoint = `/property-ratings/property/${encodeURIComponent(\n                            String(propertyId)\n                          )}`;\n\n                          const refreshRes = await fetch(\n                            `${refreshBase}${ratingsEndpoint}`,\n                            { headers: refreshHeaders }\n                          );\n                          if (refreshRes.ok) {\n                            const refreshData = await refreshRes.json();\n                            if (refreshData.success && refreshData.data) {\n                              const ratings = Array.isArray(\n                                refreshData.data.ratings\n                              )\n                                ? refreshData.data.ratings\n                                : [];\n                              setPropertyRatings(ratings);\n                              if (refreshData.data.stats) {\n                                setRatingsStats(refreshData.data.stats);\n                              }\n                            }\n                          }\n                        } catch (e) {\n                          console.error(\"Error refreshing ratings:\", e);\n                        }\n                      };\n\n                      refreshRatings();\n                    } catch (error) {\n                      console.error(\"Error submitting rating:\", error);\n                      toast.error(\n                        error.message ||\n                          \"Failed to submit rating. Please try again.\"\n                      );\n                    } finally {\n                      setRatingLoading(false);\n                    }\n                  }}\n                  disabled={userRating === 0 || ratingLoading}\n                  className=\"flex-1 h-[40px] px-4 flex items-center justify-center font-inter text-[13px] leading-[22px] font-medium text-white bg-[#0D542B] hover:bg-[#0B4624] disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors\"\n                >\n                  {ratingLoading ? \"Submitting...\" : \"Submit Rating\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default function PropertyDetailsPage() {\n  return (\n    <Suspense fallback={<div />}>\n      <PropertyDetailsPageInner />\n    </Suspense>\n  );\n}\n"],"names":[],"mappings":"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"}