module.exports=[74163,a=>{"use strict";a.s(["default",()=>q],74163);var b=a.i(87924),c=a.i(72131),d=a.i(73125),e=a.i(6704),f=a.i(50944),g=a.i(83468),h=a.i(38099),i=a.i(29130);function j(){let{user:a}=(0,i.useAuth)(),d=(0,f.useRouter)(),[e,g]=(0,c.useState)(null),[h,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)({open:!1,src:"",type:""}),o=a=>{if(!a||"string"!=typeof a)return a;if(a.startsWith("/opt/lampp/htdocs/")){let b=a.split("/").pop();return`https://broker-adda-be.algofolks.com/uploads/${b}`}return a.startsWith("/uploads/")?`https://broker-adda-be.algofolks.com${a}`:a};(0,c.useEffect)(()=>{(async()=>{try{j(!0),l("");let b=a?.userId,c=a?.token||null;if(!b)return void j(!1);let d=await fetch(`https://broker-adda-be.algofolks.com/api/brokers/${encodeURIComponent(String(b))}`,{headers:{"Content-Type":"application/json",...c?{Authorization:`Bearer ${c}`}:{}}});if(!d.ok)throw Error("Failed to load broker");let e=await d.json(),f=e?.data?.broker||e?.broker||e?.data||e;g(f||null)}catch(a){l("Failed to load profile")}finally{j(!1)}})()},[a?.userId,a?.token]);let p=(0,c.useMemo)(()=>{let a=a=>"string"==typeof a&&a.trim().length>0&&"null"!==a&&"undefined"!==a,b=(...b)=>b.find(a)||"",c=Array.isArray(e?.region)?e.region:[],d=b(e?.createdAt,e?.joinedAt),f=d?new Date(d):null;return{name:b(e?.name,e?.fullName,"Unknown"),firm:b(e?.firmName),status:b(e?.status,"Active"),joinedDateFormatted:f?f.toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"}):"",license:b(e?.licenseNumber),regions:c.map(a=>"string"==typeof a?a:a?.name||""),gender:b(e?.gender),image:b(e?.brokerImage,e?.profileImage,e?.image,"/images/user-1.webp"),phone:b(e?.phone,e?.userId?.phone,e?.mobile),whatsapp:b(e?.whatsappNumber,e?.whatsapp),email:b(e?.email,e?.userId?.email),address:b(e?.address,e?.officeAddress),website:b(e?.website),socials:{linkedin:b(e?.socialMedia?.linkedin,e?.linkedin),twitter:b(e?.socialMedia?.twitter,e?.twitter,e?.x),instagram:b(e?.socialMedia?.instagram,e?.instagram),facebook:b(e?.socialMedia?.facebook,e?.facebook)},docs:{aadhar:o(b(e?.kycDocs?.aadhar,e?.documents?.aadhar,e?.aadharCard)),pan:o(b(e?.kycDocs?.pan,e?.documents?.pan,e?.panCard)),gst:o(b(e?.kycDocs?.gst,e?.documents?.gst,e?.gstCertificate)),license:o(b(e?.kycDocs?.brokerLicense,e?.documents?.brokerLicense,e?.brokerLicense)),companyId:o(b(e?.kycDocs?.companyId,e?.documents?.companyId,e?.companyId))}}},[e]);return(0,b.jsxs)("div",{className:"w-full mx-auto",children:[(0,b.jsx)("div",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm mb-6 p-6",children:h?(0,b.jsxs)("div",{className:"animate-pulse flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-200"}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded w-64"})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex items-center justify-end mb-4",children:(0,b.jsxs)("button",{type:"button",onClick:()=>d.push("/profile?mode=edit"),className:"inline-flex items-center gap-2 px-3.5 py-1.5 rounded-lg text-white bg-green-600 hover:bg-green-700 text-xs font-medium",children:[(0,b.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,b.jsx)("img",{src:p.image,alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-base font-semibold text-gray-900",children:p.name}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:p.firm||"-"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-6 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Firm"}),(0,b.jsx)("div",{className:"text-gray-900",children:p.firm||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Gender"}),(0,b.jsx)("div",{className:"text-gray-900",children:p.gender||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Status"}),(0,b.jsx)("div",{className:"inline-flex items-center gap-2 text-green-700 bg-green-50 border border-green-200 px-2.5 py-0.5 rounded-full",children:p.status||"Active"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Joined Date"}),(0,b.jsx)("div",{className:"text-gray-900",children:p.joinedDateFormatted||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-gray-500",children:"License"}),(0,b.jsx)("div",{className:"text-gray-900",children:p.license||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Regions"}),(0,b.jsx)("div",{className:"text-gray-900",children:p.regions?.length?p.regions.join(", "):"-"})]}),(0,b.jsxs)("div",{className:"md:col-span-3 lg:col-span-6",children:[(0,b.jsx)("div",{className:"text-gray-500 mb-1",children:"Specializations"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:Array.isArray(e?.specializations)&&e.specializations.length>0?e.specializations.map(a=>(0,b.jsx)("span",{className:"px-2.5 py-1 rounded-full bg-gray-50 border border-gray-200 text-xs text-gray-800",children:a},a)):(0,b.jsx)("span",{className:"px-2.5 py-1 rounded-full bg-gray-50 border border-gray-200 text-xs text-gray-800",children:"-"})})]})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-7 bg-white rounded-2xl border border-gray-200 shadow-sm p-6",children:[(0,b.jsx)("div",{className:"text-base font-semibold text-gray-900 mb-4",children:"Contact Details"}),(0,b.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("span",{className:"w-6 h-6 rounded bg-gray-100 border border-gray-200 flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-3.5 h-3.5 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,b.jsx)("path",{d:"M22 16.92V21a2 2 0 01-2.18 2A19.86 19.86 0 013 5.18 2 2 0 015 3h4.09a1 1 0 01.95.68l1.1 3a1 1 0 01-.27 1.11L9.91 9.91a16 16 0 006.18 6.18l2.12-2.12a1 1 0 011.11-.27l3 1.1a1 1 0 01.68.95z"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Mobile"}),(0,b.jsx)("div",{className:"text-gray-900",children:p.phone||"-"})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("span",{className:"w-6 h-6 rounded bg-gray-100 border border-gray-200 flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-3.5 h-3.5 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,b.jsx)("path",{d:"M21.5 13.5a4.5 4.5 0 01-6 4.24L9 20l2.26-6.5A4.5 4.5 0 1115 8.5"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-gray-500",children:"WhatsApp"}),(0,b.jsx)("div",{className:"text-gray-900",children:p.whatsapp||"-"})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("span",{className:"w-6 h-6 rounded bg-gray-100 border border-gray-200 flex items-center justify-center",children:(0,b.jsxs)("svg",{className:"w-3.5 h-3.5 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,b.jsx)("path",{d:"M4 4h16v16H4z"}),(0,b.jsx)("path",{d:"M22 6l-10 7L2 6"})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Email"}),(0,b.jsx)("div",{className:"text-gray-900 break-all",children:p.email||"-"})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("span",{className:"w-6 h-6 rounded bg-gray-100 border border-gray-200 flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-3.5 h-3.5 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,b.jsx)("path",{d:"M3 10l9-7 9 7v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Office Address"}),(0,b.jsx)("div",{className:"text-gray-900",children:p.address||"-"})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("span",{className:"w-6 h-6 rounded bg-gray-100 border border-gray-200 flex items-center justify-center",children:(0,b.jsxs)("svg",{className:"w-3.5 h-3.5 text-gray-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,b.jsx)("path",{d:"M12 2a10 10 0 100 20 10 10 0 000-20z"}),(0,b.jsx)("path",{d:"M2 12h20M12 2a15.3 15.3 0 010 20"})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-gray-500",children:"Website"}),(0,b.jsx)("div",{className:"text-green-700",children:p.website?(0,b.jsx)("a",{href:p.website,target:"_blank",rel:"noreferrer",className:"underline",children:p.website}):"-"})]})]})]}),(p.socials.linkedin||p.socials.twitter||p.socials.instagram||p.socials.facebook)&&(0,b.jsxs)("div",{className:"mt-4 flex items-center gap-3 text-gray-600",children:[p.socials.linkedin&&(0,b.jsx)("a",{href:p.socials.linkedin,target:"_blank",rel:"noreferrer","aria-label":"LinkedIn",className:"hover:text-gray-900",children:(0,b.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,b.jsx)("path",{d:"M4.98 3.5C4.98 4.88 3.86 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1 4.98 2.12 4.98 3.5zM.5 8h4V24h-4zM8.5 8h3.8v2.2h.05c.53-1 1.83-2.2 3.77-2.2 4.03 0 4.78 2.65 4.78 6.1V24h-4v-6.9c0-1.65-.03-3.77-2.3-3.77-2.3 0-2.65 1.79-2.65 3.65V24h-4z"})})}),p.socials.twitter&&(0,b.jsx)("a",{href:p.socials.twitter,target:"_blank",rel:"noreferrer","aria-label":"Twitter",className:"hover:text-gray-900",children:(0,b.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,b.jsx)("path",{d:"M23 3a10.9 10.9 0 01-3.14 1.53A4.48 4.48 0 0012 7v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"})})}),p.socials.instagram&&(0,b.jsx)("a",{href:p.socials.instagram,target:"_blank",rel:"noreferrer","aria-label":"Instagram",className:"hover:text-gray-900",children:(0,b.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,b.jsx)("path",{d:"M7 2C4.24 2 2 4.24 2 7v10c0 2.76 2.24 5 5 5h10c2.76 0 5-2.24 5-5V7c0-1.66-1.34-3-3-3h10zm-5 3a5 5 0 100 10 5 5 0 000-10zm0 2a3 3 0 110 6 3 3 0 010-6zm5.5-.75a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0z"})})}),p.socials.facebook&&(0,b.jsx)("a",{href:p.socials.facebook,target:"_blank",rel:"noreferrer","aria-label":"Facebook",className:"hover:text-gray-900",children:(0,b.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,b.jsx)("path",{d:"M22 12a10 10 0 10-11.5 9.95v-7.04H7.9V12h2.6V9.8c0-2.57 1.53-3.99 3.87-3.99 1.12 0 2.29.2 2.29.2v2.52h-1.29c-1.27 0-1.66.79-1.66 1.6V12h2.83l-.45 2.91h-2.38v7.04C19.55 21.47 22 17.1 22 12z"})})})]})]}),(0,b.jsxs)("div",{className:"lg:col-span-5 bg-white rounded-2xl border border-gray-200 shadow-sm p-6",children:[(0,b.jsx)("div",{className:"text-base font-semibold text-gray-900 mb-4",children:"Documents"}),(0,b.jsx)("div",{className:"divide-y divide-gray-100",children:[{label:"Aadhar Card",value:p.docs.aadhar},{label:"PAN Card",value:p.docs.pan},{label:"GST Certificate",value:p.docs.gst},{label:"Broker License",value:p.docs.license},{label:"Company ID",value:p.docs.companyId}].map(({label:a,value:c})=>{let d=(a=>{if(!a||"string"!=typeof a)return"-";let b=a.match(/\.([a-zA-Z0-9]+)$/);return(b?b[1]:"-").toUpperCase()})(c),e=!c,f=(()=>{if(!c)return a.replace(/\s+/g,"_");try{let a=new URL(c,"https://example.com").pathname.split("/").pop();if(a&&a.includes("."))return a}catch{}return`${a.replace(/\s+/g,"_")}${"-"!==d?`.${d.toLowerCase()}`:""}`})();return(0,b.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"flex h-7 w-7 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-500",children:(0,b.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,b.jsx)("path",{d:"M7 3h8l4 4v14a2 2 0 01-2 2H7a2 2 0 01-2-2V5a2 2 0 012-2z"})})}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900",children:a}),(0,b.jsx)("span",{className:"ml-2 text-xs px-2 py-0.5 border border-gray-200 rounded bg-gray-50 text-gray-700",children:d})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[e?(0,b.jsxs)("span",{className:"text-sm text-gray-400 flex items-center gap-1.5",children:[(0,b.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,b.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,b.jsx)("circle",{cx:"12",cy:"12",r:"3"})]}),"Preview"]}):(0,b.jsxs)("a",{href:c,target:"_blank",rel:"noreferrer",className:"text-sm text-emerald-600 hover:text-emerald-700 flex items-center gap-1.5",children:[(0,b.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,b.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,b.jsx)("circle",{cx:"12",cy:"12",r:"3"})]}),"Preview"]}),e?(0,b.jsxs)("span",{className:"text-sm border border-gray-200 px-2.5 py-1.5 rounded-md text-gray-400 flex items-center gap-1.5",children:[(0,b.jsx)("span",{className:"inline-flex items-center justify-center w-4 h-4 rounded border border-gray-300 text-[10px]",children:"D"}),"Download"]}):(0,b.jsxs)("button",{onClick:async()=>{try{let a=await fetch(c),b=await a.blob(),d=window.URL.createObjectURL(b),e=document.createElement("a");e.href=d,e.download=f,document.body.appendChild(e),e.click(),document.body.removeChild(e),window.URL.revokeObjectURL(d)}catch(b){console.error("Download failed:",b);let a=document.createElement("a");a.href=c,a.download=f,document.body.appendChild(a),a.click(),document.body.removeChild(a)}},className:"text-sm border border-gray-200 px-2.5 py-1.5 rounded-md text-gray-700 hover:bg-gray-50 flex items-center gap-1.5 cursor-pointer",children:[(0,b.jsx)("span",{className:"inline-flex items-center justify-center w-4 h-4 rounded border border-gray-300 text-[10px]",children:"D"}),"Download"]})]})]},a)})})]})]}),k&&(0,b.jsx)("div",{className:"text-xs text-red-600 mt-6",children:k}),m.open&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",onClick:()=>n({open:!1,src:"",type:""}),children:(0,b.jsxs)("div",{className:"bg-white rounded-xl max-w-4xl w-full overflow-hidden",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"Preview"}),(0,b.jsx)("button",{className:"text-gray-600 hover:text-gray-900",onClick:()=>n({open:!1,src:"",type:""}),children:"âœ•"})]}),(0,b.jsx)("div",{className:"p-4 max-h-[80vh] overflow-auto",children:"pdf"===m.type?(0,b.jsx)("iframe",{src:m.src,className:"w-full h-[70vh]",title:"Document Preview"}):(0,b.jsx)("img",{src:m.src,alt:"Document",className:"max-h-[70vh] w-auto mx-auto"})})]})})]})}let k=a=>{if(!a||"string"!=typeof a)return a;if(a.startsWith("/opt/lampp/htdocs/")){let b=a.split("/").pop();return`https://broker-adda-be.algofolks.com/uploads/${b}`}return a.startsWith("/uploads/")?`https://broker-adda-be.algofolks.com${a}`:a},l=a=>{if(!a)return!1;if("string"==typeof a)return/\.(png|jpe?g|webp)$/i.test(a);if(a.type)return a.type.startsWith("image/");let b=a.name||"";return/\.(png|jpe?g|webp)$/i.test(b)},m=a=>{if(!a)return!1;if("string"==typeof a)return/\.pdf$/i.test(a);if(a.type)return"application/pdf"===a.type;let b=a.name||"";return/\.pdf$/i.test(b)},n=a=>{if(!a)return null;if("string"==typeof a)return k(a);try{return URL.createObjectURL(a)}catch{return null}},o=a=>{if(!a)return null;if("string"==typeof a)return k(a);try{return URL.createObjectURL(a)}catch{return null}},p=()=>{let{user:a}=(0,i.useAuth)(),p=(0,f.useRouter)(),q=a?.role||"broker",r=(0,f.useSearchParams)(),[s,t]=(0,c.useState)("create");(0,c.useEffect)(()=>{t(r?.get("mode")||"create")},[r]);let u="view"===s,[v,w]=(0,c.useState)(1),x="broker"===q?4:2,[y,z]=(0,c.useState)({name:"",email:"",phone:"",firmName:"",regions:[],aadharFile:null,panFile:null,gstFile:null,brokerLicenseFile:null,companyIdFile:null,brokerImage:null,licenseNumber:"",officeAddress:"",experience:"",about:"",address:"",city:"",state:"",linkedin:"",twitter:"",instagram:"",facebook:"",whatsapp:"",website:"",specializations:[],gender:"",dateOfBirth:"",location:null}),[A,B]=(0,c.useState)({name:"",email:"",phone:"",budgetMin:"",budgetMax:"",propertyType:[],inquiryCount:0,customerImage:null,gender:"",dateOfBirth:""}),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(!0),[M,N]=(0,c.useState)({latitude:null,longitude:null}),[O,P]=(0,c.useState)([]),[Q,R]=(0,c.useState)(!1),[S,T]=(0,c.useState)(""),[U,V]=(0,c.useState)([{value:"uttar-pradesh",label:"Uttar Pradesh"}]),[W,X]=(0,c.useState)([]),[Y,Z]=(0,c.useState)(null),[$,_]=(0,c.useState)(null),[aa,ab]=(0,c.useState)(!0),[ac,ad]=(0,c.useState)(!1),[ae,af]=(0,c.useState)(null),[ag,ah]=(0,c.useState)([]),[ai,aj]=(0,c.useState)(!1),ak=(0,c.useRef)(null),[al,am]=(0,c.useState)(""),[an,ao]=(0,c.useState)(""),[ap,aq]=(0,c.useState)(!1),[ar]=(0,c.useState)(["apartment","commercial","plot","villa","house"]),[as]=(0,c.useState)(["Residential Sales","Commercial Leasing","Luxury Homes","Investment Properties","Rental Properties","Land Development","Property Management","Real Estate Consulting"]);(0,c.useEffect)(()=>{(()=>{if(window.google&&window.google.maps&&window.google.maps.places)return ad(!0);let a=document.querySelector('script[src*="maps.googleapis.com"]');if(a){a.onload=()=>ad(!0);return}let b=document.createElement("script");b.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA5Lb-4aPQwchmojJe4IpblpreNOjxHFMc&libraries=places",b.async=!0,b.defer=!0,b.onload=()=>{ad(!0)},b.onerror=a=>{e.default.error("Failed to load address autocomplete. Please check your API key.")},document.head.appendChild(b)})()},[]),(0,c.useEffect)(()=>()=>{ak.current&&clearTimeout(ak.current)},[]),(0,c.useEffect)(()=>{"customer"===q&&A.budgetMin&&A.budgetMax?parseFloat(A.budgetMin)>parseFloat(A.budgetMax)?am("Minimum budget cannot be greater than maximum budget"):am(""):"customer"===q&&am("")},[A.budgetMin,A.budgetMax,q]),(0,c.useEffect)(()=>{(async()=>{if(!K)return;let{latitude:a,longitude:b}=M||{};a&&b&&await at(a,b,5)})()},[K]),(0,c.useEffect)(()=>{K&&M?.latitude&&M?.longitude&&at(M.latitude,M.longitude,5)},[M?.latitude,M?.longitude]),(0,c.useEffect)(()=>{(async()=>{if(2!==v||"broker"!==q||!K)return;let{latitude:a,longitude:b}=M||{};try{if((!a||!b)&&ae&&ae.placeId&&window.google&&window.google.maps){let c=new window.google.maps.places.PlacesService(document.createElement("div"));await new Promise(d=>{c.getDetails({placeId:ae.placeId},(c,e)=>{e===window.google.maps.places.PlacesServiceStatus.OK&&c&&c.geometry&&c.geometry.location&&(a=c.geometry.location.lat(),b=c.geometry.location.lng(),N({latitude:a,longitude:b})),d()})})}if((!a||!b)&&window.google&&window.google.maps){let c=Y?Y.label||Y.value:"",d=[$?$.label||$.value:"",c].filter(Boolean).join(", ");if(d){let c=new window.google.maps.Geocoder;await new Promise(e=>{c.geocode({address:d},(c,d)=>{"OK"===d&&c&&c[0]&&c[0].geometry&&c[0].geometry.location&&(a=c[0].geometry.location.lat(),b=c[0].geometry.location.lng(),N({latitude:a,longitude:b})),e()})})}}a&&b&&await at(a,b,5)}catch{}})()},[v,K]),(0,c.useEffect)(()=>{let a=async()=>{if(K&&(!M.latitude||!M.longitude)&&y&&y.location&&y.location.coordinates&&Array.isArray(y.location.coordinates)&&y.location.coordinates.length>=2){let[a,b]=y.location.coordinates;a&&b&&(N({latitude:a,longitude:b}),await at(a,b,5))}};M.latitude||M.longitude||!K||a()},[K,M.latitude,M.longitude,y]);let at=async(b,c,d=5)=>{if(b&&c)try{R(!0),T("");let e=`https://broker-adda-be.algofolks.com/api/regions/nearest?latitude=${encodeURIComponent(b)}&longitude=${encodeURIComponent(c)}&limit=${encodeURIComponent(d)}`,f=await fetch(e,{headers:{"Content-Type":"application/json",...a?.token?{Authorization:`Bearer ${a.token}`}:{}}});if(!f.ok)throw Error("Failed");let g=await f.json(),h=[];g?.success&&Array.isArray(g?.data?.regions)?h=g.data.regions:Array.isArray(g)?h=g:Array.isArray(g?.data)?h=g.data:Array.isArray(g?.regions)?h=g.regions:g?._id&&g?.name&&(h=[g]),P(Array.isArray(h)?h:[])}catch{T("Error loading nearest regions"),P([])}finally{R(!1)}};(0,c.useEffect)(()=>{a?.phone&&("customer"===a.role?B(b=>({...b,phone:a.phone})):z(b=>({...b,phone:a.phone})))},[a]),(0,c.useEffect)(()=>{let b=async()=>{try{let b;if(!a?.token)return void ab(!1);let c=a.role||"broker";if("customer"===c){let c=a.userId;if(c)b=await fetch(`https://broker-adda-be.algofolks.com/api/customers/${c}`,{headers:{Authorization:`Bearer ${a.token}`,Accept:"application/json"}});else{e.default.error("Customer ID not found in token"),ab(!1);return}}else{let c=a.userId;if(c){let d=`https://broker-adda-be.algofolks.com/api/brokers/${c}`;b=await fetch(d,{headers:{Authorization:`Bearer ${a.token}`,"Content-Type":"application/json",Accept:"application/json"}})}else{e.default.error("Broker ID not found in token"),ab(!1);return}}if(b.ok){let a=await b.json();if("customer"===c){let b=a.data?.customer||a.data||a,c=k(b.images?.customerImage||b.files?.customerImage||b.customerImage||null),d=b.preferences||{},e=d.budgetMin||"",f=d.budgetMax||"",g=d.propertyType||[],h=d.region||[],i=b.gender||A.gender||"";B(a=>({...a,name:b.name||a.name,email:b.email||a.email,phone:b.phone||a.phone,budgetMin:e,budgetMax:f,propertyType:g,regions:h,inquiryCount:b.inquiryCount||a.inquiryCount,customerImage:c,gender:i}))}else{let b;b=a.data?a.data.broker||a.data:a;let c=[];b.region&&Array.isArray(b.region)?c=b.region:b.regions&&Array.isArray(b.regions)&&(c=b.regions);let d=b.name||b.userId?.name||y.name,e=b.email||b.userId?.email||y.email,f=b.phone||b.userId?.phone||y.phone,g=b.firmName||y.firmName,h=b.address||y.address||"",i=b.gender||y.gender||"",j=b.city||y.city||"",l=b.licenseNumber||y.licenseNumber||"",m=("object"==typeof b.experience&&null!==b.experience?b.experience.years??"":b.experience??"")||y.experience||"",n=b.content||b.about||y.about||"",o=b.address||b.officeAddress||y.officeAddress||"",p=b.specializations||y.specializations||[],q=b.state||y.state||"",r=b.socialMedia||{},s=r.linkedin||y.linkedin||"",t=r.twitter||y.twitter||"",u=r.instagram||y.instagram||"",v=r.facebook||y.facebook||"",w=b.whatsappNumber||y.whatsapp||"",x=b.website||y.website||"",A=b.kycDocs||{},B=A.aadhar||null,C=A.pan||null,D=A.gst||null,E=A.brokerLicense||null,F=A.companyId||null,G=k(b.brokerImage||b.userId?.profileImage||b.personalInfo?.profileImage||null),H=b.location||null;if(z(a=>({...a,name:d,email:e,phone:f,firmName:g,address:h,gender:i,city:j,licenseNumber:l,experience:m,about:n,officeAddress:o,specializations:p,state:q,linkedin:s,twitter:t,instagram:u,facebook:v,whatsapp:w,website:x,regions:c,aadharFile:B,panFile:C,gstFile:D,brokerLicenseFile:E,companyIdFile:F,brokerImage:G,location:H})),o){let a={value:o,label:o};ah(b=>b.some(a=>a.value===o)?b:[...b,a]),af(a)}else af(null);if(q){let a=U.find(a=>a.value===q.toLowerCase().replace(/\s+/g,"-"));a&&(Z(a),ay(a.value))}j&&setTimeout(()=>{let a=W.find(a=>a.value===j.toLowerCase().replace(/\s+/g,"-"));if(a)_(a),az(a.value);else{let a={value:j.toLowerCase().replace(/\s+/g,"-"),label:j};_(a),az(a.value)}},100)}}else{let a=await b.json().catch(()=>({message:"Unknown error"}));401===b.status?e.default.error("Authentication failed. Please login again."):404===b.status?e.default.error(`${"customer"===c?"Customer":"Broker"} profile not found.`):b.status>=500?e.default.error("Server error. Please try again later."):e.default.error(a.message||`Failed to load ${c} profile data`)}}catch(a){"TypeError"===a.name&&a.message.includes("fetch")?e.default.error("Network error. Please check your connection and try again."):e.default.error(`Error loading ${currentUserRole} profile data: ${a.message}`)}finally{ab(!1)}};q&&a?.token&&b()},[q,a]);let au=a=>{let{name:b,value:c}=a.target;"email"===b&&ao(""),"customer"===q?B(a=>({...a,[b]:c})):z(a=>({...a,[b]:c}))},av=a=>{let{name:b,files:c}=a.target;"customer"===q?B(a=>({...a,[b]:c[0]||null})):z(a=>({...a,[b]:c[0]||null}))},[aw,ax]=(0,c.useState)(!1);(0,c.useEffect)(()=>{Array.isArray(y?.regions)&&y.regions.length>0&&ax(!0)},[y?.regions]);let ay=a=>{let b=[];"uttar-pradesh"===a&&(b=[{value:"noida",label:"Noida"},{value:"agra",label:"Agra"}]),X(b)},az=async(b=null)=>{try{H(!0),J("");let c="https://broker-adda-be.algofolks.com/api/regions";b&&(c+=`?city=${b}`);let d=await fetch(c,{headers:{Authorization:`Bearer ${a?.token}`}});if(d.ok){let a=await d.json(),b=[];a.success&&a.data&&Array.isArray(a.data.regions)?b=a.data.regions:Array.isArray(a)?b=a:a.data&&Array.isArray(a.data)?b=a.data:a.regions&&Array.isArray(a.regions)?b=a.regions:a._id&&a.name&&(b=[a]),F(b)}else J("Failed to load regions"),F([])}catch(a){J("Error loading regions"),F([])}finally{H(!1)}},aA=async b=>{try{let c=a?.userId||a?._id||"",d=await fetch(`https://broker-adda-be.algofolks.com/api/auth/check-email?email=${encodeURIComponent(b)}&userId=${encodeURIComponent(c)}`,{method:"GET",headers:{"Content-Type":"application/json"}}),e=await d.json();if(e.success&&e.data&&!0===e.data.exists)return{exists:!0,message:e.data.message||"Email is already in use"};return{exists:!1,message:""}}catch(a){return{exists:!1,message:"Error checking email. Please try again."}}},aB=async()=>{if(1===v){let a="customer"===q?A:y;if(a.email){aq(!0),ao("");try{let b=await aA(a.email);if(b.exists){ao(b.message),aq(!1);return}}catch(a){ao("Error checking email. Please try again."),aq(!1);return}aq(!1)}}v<x&&("broker"===q&&3===v&&Array.isArray(y?.regions)&&y.regions.length>0&&ax(!0),w(v+1))},aC=a=>{let b="customer"===q?A:y;switch(a){case 1:return b.name&&b.email&&b.phone&&b.gender&&("broker"!==q||!!b.firmName)&&!an;case 2:if("broker"===q)return!!b.licenseNumber&&!!b.officeAddress;if(b.budgetMin&&b.budgetMax)return parseFloat(b.budgetMin)<=parseFloat(b.budgetMax);return!0;case 3:if("broker"===q){let a=Array.isArray(b.regions)&&b.regions.length>0;if(K)return a;return!!b.state&&!!b.city&&a}return!0;default:return!0}};return u?(0,b.jsxs)(g.default,{children:[(0,b.jsx)("link",{rel:"stylesheet",href:"/google-places.css"}),(0,b.jsx)(e.Toaster,{position:"top-right"}),(0,b.jsx)(h.default,{data:{title:"customer"===q?"Customer Profile":"Broker Profile",breadcrumb:[{label:"Home",href:"/"},{label:"Profile",href:"/profile"}]}}),(0,b.jsx)("div",{className:"min-h-screen bg-white py-12",children:(0,b.jsx)(j,{})})]}):(0,b.jsxs)(g.default,{children:[(0,b.jsx)("link",{rel:"stylesheet",href:"/google-places.css"}),(0,b.jsx)(e.Toaster,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#4ade80",secondary:"#fff"}},error:{duration:4e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}}),(0,b.jsx)(h.default,{data:{title:"customer"===q?"Customer Profile":"Broker Profile",breadcrumb:[{label:"Home",href:"/"},{label:"Profile",href:"/profile"}]}}),(0,b.jsx)("div",{className:"min-h-screen bg-white py-12",children:(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsx)("div",{className:"text-left mb-12 ",children:(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h1",{className:"text-4xl font-display text-gray-900 mb-2",children:u?"customer"===q?"Customer Profile":"Broker Profile":"create"===s?"customer"===q?"Create Customer Profile":"Create Broker Profile":"customer"===q?"Edit Customer Profile":"Edit Broker Profile"}),(0,b.jsx)("p",{className:"text-sm font-body text-gray-600 text-left",children:u?"View your profile information":"create"===s?`Complete your profile to get started with ${"customer"===q?"finding your dream property":"connecting with potential clients"}`:"Update your profile information and preferences"})]}),u&&(0,b.jsx)("div",{className:"flex-shrink-0 ml-4",children:(0,b.jsxs)("button",{onClick:()=>{let a=new URL(window.location.href);a.searchParams.set("mode","edit"),window.history.pushState({},"",a.toString()),t("edit")},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2 shadow-md hover:shadow-lg",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 items-start",children:[(0,b.jsx)("div",{className:"lg:col-span-9 bg-white rounded-2xl shadow border border-gray-100 overflow-hidden",children:aa?(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-6"}),(0,b.jsx)("p",{className:"text-lg text-gray-600 font-medium",children:"Loading profile data..."})]})}):(0,b.jsxs)("div",{className:"p-8",children:[1===v&&(0,b.jsxs)("div",{className:"w-full mx-auto",children:[(0,b.jsx)("div",{className:"flex justify-left mb-8",children:(0,b.jsxs)("div",{className:"relative inline-block",children:[(0,b.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center overflow-hidden shadow-lg",children:("customer"===q?A.customerImage:y.brokerImage)?(0,b.jsx)("img",{src:"string"==typeof("customer"===q?A.customerImage:y.brokerImage)?"customer"===q?A.customerImage:y.brokerImage:URL.createObjectURL("customer"===q?A.customerImage:y.brokerImage),alt:`${q} Profile`,className:"w-full h-full object-cover",onError:a=>{a.currentTarget.src="/images/user-1.webp"}}):(0,b.jsx)("svg",{className:"w-8 h-8 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,b.jsx)("input",{type:"file",name:"customer"===q?"customerImage":"brokerImage",onChange:av,accept:".jpg,.jpeg,.png",className:"hidden",id:"profile-image-upload"}),!u&&(0,b.jsx)("button",{type:"button",className:"absolute -bottom-1 -right-1 bg-blue-600 w-8 h-8 rounded-full flex items-center justify-center hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl",onClick:()=>document.getElementById("profile-image-upload").click(),children:(0,b.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-xs font-label text-gray-700 mb-2",children:["Full Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"name",value:"customer"===q?A.name:y.name,onChange:au,placeholder:"Enter your full name",disabled:u,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 text-sm font-body ${u?"bg-gray-100 border-gray-200 text-gray-600 cursor-not-allowed":"bg-gray-50 border-gray-200 focus:ring-blue-100 focus:border-blue-500"}`})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-xs font-label text-gray-700 mb-2",children:["Email Address"," ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"email",name:"email",value:"customer"===q?A.email:y.email,onChange:au,placeholder:"Enter your email address",disabled:u,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 text-sm font-body ${u?"bg-gray-100 border-gray-200 text-gray-600 cursor-not-allowed":an?"bg-gray-50 border-red-300 focus:ring-red-100 focus:border-red-500":"bg-gray-50 border-gray-200 focus:ring-blue-100 focus:border-blue-500"}`}),an&&(0,b.jsxs)("p",{className:"mt-1 text-xs text-red-600 flex items-center gap-1",children:[(0,b.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),an]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-xs font-label text-gray-700 mb-2",children:["Phone Number ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"tel",name:"phone",value:"customer"===q?A.phone:y.phone,onChange:au,placeholder:"Enter your phone number",disabled:!0,className:"w-full px-3 py-2 bg-gray-100 border border-gray-200 rounded-lg text-gray-500 cursor-not-allowed text-sm font-body"})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-xs font-label text-gray-700 mb-2",children:["Gender ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(()=>{let a=("customer"===q?A.gender:y.gender)||"",c="male"===a,d="female"===a,e=a=>{"customer"===q?B(b=>({...b,gender:a})):z(b=>({...b,gender:a}))},f="w-10 h-10 rounded-full flex items-center justify-center transition-all",g="text-xs mt-1 text-center";return(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>e("male"),className:"flex flex-col items-center focus:outline-none",children:[(0,b.jsx)("div",{className:`${f} ${c?"bg-blue-600 text-white shadow":"bg-gray-200 text-gray-500"}`,children:(0,b.jsxs)("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("circle",{cx:"12",cy:"5",r:"2"}),(0,b.jsx)("path",{d:"M9 9h6"}),(0,b.jsx)("path",{d:"M7 22V12a3 3 0 0 1 3-3h4a3 3 0 0 1 3 3v10"}),(0,b.jsx)("path",{d:"M10 22v-7M14 22v-7"})]})}),(0,b.jsx)("span",{className:`${g} ${c?"text-blue-600":"text-gray-600"}`,children:"Male"})]}),(0,b.jsxs)("button",{type:"button",onClick:()=>e("female"),className:"flex flex-col items-center focus:outline-none",children:[(0,b.jsx)("div",{className:`${f} ${d?"bg-blue-600 text-white shadow":"bg-gray-200 text-gray-500"}`,children:(0,b.jsxs)("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("circle",{cx:"12",cy:"5",r:"2"}),(0,b.jsx)("path",{d:"M9 9h6"}),(0,b.jsx)("path",{d:"M9 9l-3 6h12l-3-6z"}),(0,b.jsx)("path",{d:"M8 22v-6M16 22v-6"})]})}),(0,b.jsx)("span",{className:`${g} ${d?"text-blue-600":"text-gray-600"}`,children:"Female"})]})]})})()]}),"broker"===q&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-label text-gray-700 mb-2",children:"Firm Name"}),(0,b.jsx)("input",{type:"text",name:"firmName",value:y.firmName,onChange:au,placeholder:"Enter your firm name",className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 text-sm font-body"})]}),"broker"===q&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-xs font-label text-gray-700 mb-2 flex items-center",children:[(0,b.jsx)("svg",{className:"w-4 h-4 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"WhatsApp Number"]}),(0,b.jsx)("input",{type:"tel",name:"whatsapp",value:y.whatsapp,onChange:a=>{let b=a.target.value.replace(/\D/g,"");b.length<=10&&z(a=>({...a,whatsapp:b}))},placeholder:"Enter your WhatsApp number",maxLength:"10",className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm font-body"})]})]})]})]}),2===v&&(0,b.jsx)("div",{className:"space-y-8",children:"broker"===q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2V6"})}),"Professional Information"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["License Number"," ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,b.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,b.jsx)("input",{type:"text",name:"licenseNumber",value:y.licenseNumber,onChange:au,placeholder:"e.g., BRE #01234567",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Experience (years)"}),(0,b.jsx)("input",{type:"number",min:0,value:y.experience||"",onChange:a=>{let b=a.target.value,c=""===b?"":b>=0?parseInt(b,10):"";z(a=>({...a,experience:c}))},placeholder:"e.g., 15",className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700"})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Address"," ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("button",{type:"button",onClick:()=>{if(!navigator.geolocation)return void e.default.error("Geolocation is not supported by this browser");e.default.loading("Getting your current location..."),navigator.geolocation.getCurrentPosition(a=>{let{latitude:b,longitude:c}=a.coords;if(window.google&&window.google.maps){let a=new window.google.maps.Geocoder,d=new window.google.maps.LatLng(b,c);a.geocode({location:d},(a,d)=>{if("OK"===d&&a[0]){let d=a[0].formatted_address,f={value:d,label:d,description:d};ah(a=>a.some(a=>a.value===d)?a:[...a,f]),af(f),z(a=>({...a,officeAddress:d})),N({latitude:b,longitude:c}),e.default.dismiss()}else e.default.dismiss(),e.default.error("Could not get address from location")})}else N({latitude:b,longitude:c}),e.default.dismiss(),e.default.error("Google Maps API not loaded, but coordinates are set")},a=>{e.default.dismiss();let b="Error getting location: ";switch(a.code){case a.PERMISSION_DENIED:b+="Permission denied";break;case a.POSITION_UNAVAILABLE:b+="Position unavailable";break;case a.TIMEOUT:b+="Request timeout";break;default:b+="Unknown error"}e.default.error(b)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},className:"flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 hover:border-blue-300 transition-colors duration-200",children:[(0,b.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Use Current Location"]})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none z-10",children:(0,b.jsxs)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,b.jsx)(d.default,{value:ae,onChange:a=>{if(af(a),a){z(b=>({...b,officeAddress:a.description}));try{window.google&&window.google.maps&&a.placeId&&new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:a.placeId},(a,b)=>{if(b===window.google.maps.places.PlacesServiceStatus.OK&&a&&a.geometry&&a.geometry.location){let b=a.geometry.location.lat(),c=a.geometry.location.lng();N({latitude:b,longitude:c})}})}catch{}}},onInputChange:a=>{if(ak.current&&clearTimeout(ak.current),!ac||!window.google||!a||a.length<1)return void ah([]);ak.current=setTimeout(()=>{aj(!0),new window.google.maps.places.AutocompleteService().getPlacePredictions({input:a,types:["establishment","geocode"],componentRestrictions:{country:"in"}},(a,b)=>{aj(!1),b===window.google.maps.places.PlacesServiceStatus.OK&&a?ah(a.map(a=>({value:a.place_id,label:a.description,placeId:a.place_id,description:a.description}))):ah([])})},300)},options:ag,placeholder:ac?"Search for your address...":"Loading address search...",isClearable:!0,isSearchable:!0,isLoading:ai,noOptionsMessage:()=>"No addresses found",loadingMessage:()=>"Searching addresses...",classNamePrefix:"react-select",styles:{control:(a,b)=>({...a,minHeight:"48px",paddingLeft:"40px",border:b.isFocused?"2px solid #3b82f6":"1px solid #d1d5db",boxShadow:b.isFocused?"0 0 0 3px rgba(59, 130, 246, 0.1)":"none","&:hover":{border:"1px solid #9ca3af"}}),placeholder:a=>({...a,color:"#9ca3af",fontSize:"0.875rem"}),input:a=>({...a,color:"#374151",fontSize:"0.875rem"}),singleValue:a=>({...a,color:"#374151",fontSize:"0.875rem"}),option:(a,b)=>({...a,backgroundColor:b.isFocused?"#f3f4f6":"white",color:b.isSelected?"white":"#374151",fontSize:"0.875rem",padding:"0.75rem 1rem"}),menu:a=>({...a,zIndex:9999,border:"1px solid #e5e7eb",borderRadius:"0.5rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"})}}),!ac&&(0,b.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"About"}),(0,b.jsx)("textarea",{rows:4,value:y.about||"",onChange:a=>z(b=>({...b,about:a.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-700"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Specializations"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select your specializations"}),(0,b.jsx)(d.default,{isMulti:!0,name:"specializations",options:as.map(a=>({value:a,label:a})),value:Array.isArray(y.specializations)?y.specializations.map(a=>({value:a,label:a})):[],onChange:a=>{let b=a?a.map(a=>a.value):[];z(a=>({...a,specializations:b}))},placeholder:"Select specializations...",className:"react-select-container",classNamePrefix:"react-select",styles:{control:(a,b)=>({...a,minHeight:"48px",border:b.isFocused?"2px solid #3b82f6":"1px solid #d1d5db",boxShadow:b.isFocused?"0 0 0 3px rgba(59, 130, 246, 0.1)":"none","&:hover":{border:"1px solid #3b82f6"}}),multiValue:a=>({...a,backgroundColor:"#dbeafe",color:"#1e40af"}),multiValueLabel:a=>({...a,color:"#1e40af"}),multiValueRemove:a=>({...a,color:"#1e40af","&:hover":{backgroundColor:"#bfdbfe",color:"#1e3a8a"}})}})]})]}),(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 0h10m-9 0a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V6a2 2 0 00-2-2M9 4h6"})}),"Social Media & Online Presence"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,b.jsx)("svg",{className:"w-4 h-4 text-blue-600 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),"LinkedIn"]}),(0,b.jsx)("input",{type:"url",name:"linkedin",value:y.linkedin,onChange:au,placeholder:"https://linkedin.com/in/yourprofile",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,b.jsx)("svg",{className:"w-4 h-4 text-blue-400 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})}),"Twitter"]}),(0,b.jsx)("input",{type:"url",name:"twitter",value:y.twitter,onChange:au,placeholder:"https://twitter.com/yourprofile",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,b.jsx)("svg",{className:"w-4 h-4 text-pink-500 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.746-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.012.001z"})}),"Instagram"]}),(0,b.jsx)("input",{type:"url",name:"instagram",value:y.instagram,onChange:au,placeholder:"https://instagram.com/yourprofile",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,b.jsx)("svg",{className:"w-4 h-4 text-blue-600 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]}),(0,b.jsx)("input",{type:"url",name:"facebook",value:y.facebook,onChange:au,placeholder:"https://facebook.com/yourprofile",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,b.jsx)("svg",{className:"w-4 h-4 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9"})}),"Website"]}),(0,b.jsx)("input",{type:"url",name:"website",value:y.website,onChange:au,placeholder:"https://yourwebsite.com",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]})]}):(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),"Property Preferences"]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Type Preferences"}),(0,b.jsx)(d.default,{isMulti:!0,name:"propertyType",options:ar.map(a=>({value:a,label:a.charAt(0).toUpperCase()+a.slice(1)})),value:Array.isArray(A.propertyType)?A.propertyType.map(a=>({value:a,label:a.charAt(0).toUpperCase()+a.slice(1)})):[],onChange:a=>{let b=a?a.map(a=>a.value):[];B(a=>({...a,propertyType:b}))},placeholder:"Select property types...",className:"react-select-container",classNamePrefix:"react-select",styles:{control:(a,b)=>({...a,minHeight:"48px",border:b.isFocused?"2px solid #3b82f6":"1px solid #d1d5db",boxShadow:b.isFocused?"0 0 0 3px rgba(59, 130, 246, 0.1)":"none","&:hover":{border:"1px solid #3b82f6"}}),multiValue:a=>({...a,backgroundColor:"#dbeafe",color:"#1e40af"}),multiValueLabel:a=>({...a,color:"#1e40af"}),multiValueRemove:a=>({...a,color:"#1e40af","&:hover":{backgroundColor:"#bfdbfe",color:"#1e3a8a"}})}})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget Min (â‚¹)"}),(0,b.jsx)("input",{type:"number",name:"budgetMin",value:A.budgetMin,onChange:au,placeholder:"Enter minimum budget",className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 ${al?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget Max (â‚¹)"}),(0,b.jsx)("input",{type:"number",name:"budgetMax",value:A.budgetMax,onChange:au,placeholder:"Enter maximum budget",className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 ${al?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`})]})]}),al&&(0,b.jsx)("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsx)("span",{className:"text-red-700 text-sm font-medium",children:al})]})})]})]})})}),3===v&&"broker"===q&&(0,b.jsx)("div",{className:"space-y-8",children:(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,b.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,b.jsxs)("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Preferred Regions"," ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("button",{type:"button",onClick:()=>L(a=>!a),className:"inline-flex items-center px-3 py-1.5 text-xs rounded border border-gray-200 bg-white hover:bg-gray-50",children:K?"Choose manually":"Use nearest"})]}),!K&&(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"broker"===q?"Select the regions where you provide real estate services":"Select the regions where you are looking for properties"})}),!K&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-2",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["State ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(d.default,{name:"state",options:U,value:Y,onChange:a=>{Z(a),_(null),z(b=>({...b,state:a?.value||"",city:"",regions:[]})),a?ay(a.value):X([])},placeholder:"Select state...",className:"react-select-container",classNamePrefix:"react-select",styles:{control:a=>({...a,border:"1px solid #d1d5db",borderRadius:"0.5rem",minHeight:"48px",fontSize:"14px"})}})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["City ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(d.default,{name:"city",options:W,value:$,onChange:a=>{_(a),z(b=>({...b,city:a?.value||"",regions:[]})),a?az(a.value):F([])},placeholder:"Select city...",className:"react-select-container",classNamePrefix:"react-select",styles:{control:a=>({...a,border:"1px solid #d1d5db",borderRadius:"0.5rem",minHeight:"48px",fontSize:"14px"})}})]})]}),(0,b.jsxs)("div",{className:"mb-4",children:[!K&&(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Regions ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),G?(0,b.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),(0,b.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading regions..."})]}):I?(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,b.jsx)("p",{className:"text-sm text-red-600",children:I})}):K?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"mb-2 text-[13px] text-slate-600 flex items-center gap-2",children:"Showing nearest regions based on your location. Choose one."}),S&&(0,b.jsx)("div",{className:"text-[13px] text-rose-600 mb-2",children:S}),Q?(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-3",children:[1,2,3,4,5].map(a=>(0,b.jsx)("div",{className:"relative p-4 rounded-xl border border-gray-200 bg-white animate-pulse",children:(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-1"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})})},a))}):(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-3",children:(Array.isArray(O)?O.slice(0,5):[]).map(a=>{let c=a._id||a.id,d=a.name||a.region,e=a.centerLocation||[a.city,a.state].filter(Boolean).join(", "),f="number"==typeof a.distanceKm?a.distanceKm:null,g=null!==f?`${f>=10?Math.round(f):Math.round(10*f)/10} km away`:"",h="number"==typeof a.brokerCount?`${a.brokerCount} Broker${1===a.brokerCount?"":"s"}`:"",i=Array.isArray(y.regions)&&y.regions.some(a=>"object"==typeof a&&a._id?a._id===c:"string"==typeof a&&a===c);return(0,b.jsx)("button",{type:"button",onClick:()=>{z(b=>({...b,regions:i?[]:[c],state:i?"":a.state||b.state||"",city:i?"":a.city||b.city||""})),ax(!i)},className:`relative text-left p-4 rounded-xl border transition-all ${i?"border-sky-500 ring-2 ring-sky-100 shadow":"border-gray-200 hover:border-sky-400 hover:shadow-sm"} bg-white`,children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-[14px] font-semibold text-slate-900",children:d}),e?(0,b.jsx)("div",{className:"text-[12px] text-slate-500",children:e}):null,(g||h)&&(0,b.jsx)("div",{className:"text-[12px] text-slate-600 mt-1",children:[g,h].filter(Boolean).join(" / ")})]}),i&&(0,b.jsx)("div",{className:"absolute top-2 right-2 w-7 h-7 rounded-full bg-sky-600 text-white flex items-center justify-center",children:"âœ“"})]})},c||d)})})]}):(0,b.jsx)(d.default,{name:"regions",options:Array.isArray(E)?E.map(a=>({value:a._id,label:a.name})):[],value:Array.isArray(y.regions)&&y.regions.length>0&&Array.isArray(E)?(()=>{let a=y.regions[0];if("object"==typeof a&&a._id)return{value:a._id,label:a.name};if("string"==typeof a){let b=E.find(b=>b._id===a);return b?{value:b._id,label:b.name}:null}return null})():null,onChange:a=>{let b=a?a.value:null;"broker"===q&&(z(a=>({...a,regions:b?[b]:[]})),ax(!!b))},placeholder:"Select a region...",className:"react-select-container",classNamePrefix:"react-select",styles:{control:a=>({...a,border:"1px solid #d1d5db",borderRadius:"0.5rem",minHeight:"48px",fontSize:"14px"})}})]})]})}),3===v&&"customer"===q&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center mb-6",children:[(0,b.jsx)("svg",{className:"w-6 h-6 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Documents"})]}),(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:(0,b.jsx)("p",{className:"text-gray-600 text-center py-8",children:"No documents required for customer accounts."})})]}),4===v&&"broker"===q&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center mb-6",children:[(0,b.jsx)("svg",{className:"w-6 h-6 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Documents"," ",(0,b.jsx)("span",{className:"text-sm font-normal text-gray-500",children:"(Optional)"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"flex flex-col h-full",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Aadhar Card"}),(0,b.jsxs)("div",{className:`border-2 border-dashed rounded-lg p-4 text-center transition-colors flex-1 flex flex-col justify-center ${aw?"border-gray-300 hover:border-blue-400":"border-gray-200 bg-gray-50 opacity-70 cursor-not-allowed"}`,children:[(0,b.jsx)("input",{type:"file",name:"aadharFile",onChange:av,accept:".pdf,.jpg,.jpeg,.png",className:"hidden",id:"aadhar-upload",disabled:!aw}),(0,b.jsxs)("label",{htmlFor:"aadhar-upload",className:`cursor-pointer ${!aw?"pointer-events-none":""}`,children:[(0,b.jsx)("div",{className:"relative mx-auto w-full max-w-[380px] rounded-md bg-white",style:{aspectRatio:"85/54"},children:l(y.aadharFile)&&n(y.aadharFile)?(0,b.jsxs)("div",{className:"absolute inset-0",children:[(0,b.jsx)("img",{src:n(y.aadharFile),alt:"Aadhar Preview",className:"w-full h-full object-contain"}),(0,b.jsx)("a",{href:n(y.aadharFile),target:"_blank",rel:"noopener noreferrer",className:"absolute top-2 right-2 px-2 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors shadow-lg",onClick:a=>a.stopPropagation(),children:"View"})]}):m(y.aadharFile)&&o(y.aadharFile)?(0,b.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-50 border-2 border-red-200 rounded-md p-2",children:[(0,b.jsx)("svg",{className:"h-10 w-10 text-red-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,b.jsx)("span",{className:"text-xs font-medium text-red-700 text-center",children:"PDF Document"}),(0,b.jsx)("div",{className:"text-xs text-red-600 mt-1 text-center truncate w-full px-1",title:y.aadharFile?.name||"PDF File",children:y.aadharFile?.name||"PDF File"}),(0,b.jsx)("a",{href:o(y.aadharFile),target:"_blank",rel:"noopener noreferrer",className:"mt-2 px-2 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors",onClick:a=>a.stopPropagation(),children:"View PDF"})]}):(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("svg",{className:"h-10 w-10 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,b.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),(0,b.jsx)("div",{className:"mt-2"})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col h-full",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"PAN Card"}),(0,b.jsxs)("div",{className:`border-2 border-dashed rounded-lg p-4 text-center transition-colors flex-1 flex flex-col justify-center ${aw?"border-gray-300 hover:border-blue-400":"border-gray-200 bg-gray-50 opacity-70 cursor-not-allowed"}`,children:[(0,b.jsx)("input",{type:"file",name:"panFile",onChange:av,accept:".pdf,.jpg,.jpeg,.png",className:"hidden",id:"pan-upload",disabled:!aw}),(0,b.jsxs)("label",{htmlFor:"pan-upload",className:`cursor-pointer ${!aw?"pointer-events-none":""}`,children:[(0,b.jsx)("div",{className:"relative mx-auto w-full max-w-[380px] rounded-md bg-white",style:{aspectRatio:"85/54"},children:l(y.panFile)&&n(y.panFile)?(0,b.jsxs)("div",{className:"absolute inset-0",children:[(0,b.jsx)("img",{src:n(y.panFile),alt:"PAN Preview",className:"w-full h-full object-contain"}),(0,b.jsx)("a",{href:n(y.panFile),target:"_blank",rel:"noopener noreferrer",className:"absolute top-2 right-2 px-2 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors shadow-lg",onClick:a=>a.stopPropagation(),children:"View"})]}):m(y.panFile)&&o(y.panFile)?(0,b.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-50 border-2 border-red-200 rounded-md p-2",children:[(0,b.jsx)("svg",{className:"h-10 w-10 text-red-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,b.jsx)("span",{className:"text-xs font-medium text-red-700 text-center",children:"PDF Document"}),(0,b.jsx)("div",{className:"text-xs text-red-600 mt-1 text-center truncate w-full px-1",title:y.panFile?.name||"PDF File",children:y.panFile?.name||"PDF File"}),(0,b.jsx)("a",{href:o(y.panFile),target:"_blank",rel:"noopener noreferrer",className:"mt-2 px-2 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors",onClick:a=>a.stopPropagation(),children:"View PDF"})]}):(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("svg",{className:"h-10 w-10 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,b.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),(0,b.jsx)("div",{className:"mt-2"})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col h-full",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"GST Certificate"}),(0,b.jsxs)("div",{className:`border-2 border-dashed rounded-lg p-4 text-center transition-colors flex-1 flex flex-col justify-center ${aw?"border-gray-300 hover:border-blue-400":"border-gray-200 bg-gray-50 opacity-70 cursor-not-allowed"}`,children:[(0,b.jsx)("input",{type:"file",name:"gstFile",onChange:av,accept:".pdf,.jpg,.jpeg,.png",className:"hidden",id:"gst-upload",disabled:!aw}),(0,b.jsxs)("label",{htmlFor:"gst-upload",className:`cursor-pointer ${!aw?"pointer-events-none":""}`,children:[(0,b.jsx)("div",{className:"relative mx-auto w-full max-w-[380px] rounded-md bg-white",style:{aspectRatio:"85/54"},children:l(y.gstFile)&&n(y.gstFile)?(0,b.jsxs)("div",{className:"absolute inset-0",children:[(0,b.jsx)("img",{src:n(y.gstFile),alt:"GST Preview",className:"w-full h-full object-contain"}),(0,b.jsx)("a",{href:n(y.gstFile),target:"_blank",rel:"noopener noreferrer",className:"absolute top-2 right-2 px-2 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors shadow-lg",onClick:a=>a.stopPropagation(),children:"View"})]}):m(y.gstFile)&&o(y.gstFile)?(0,b.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-50 border-2 border-red-200 rounded-md p-2",children:[(0,b.jsx)("svg",{className:"h-10 w-10 text-red-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,b.jsx)("span",{className:"text-xs font-medium text-red-700 text-center",children:"PDF Document"}),(0,b.jsx)("div",{className:"text-xs text-red-600 mt-1 text-center truncate w-full px-1",title:y.gstFile?.name||"PDF File",children:y.gstFile?.name||"PDF File"}),(0,b.jsx)("a",{href:o(y.gstFile),target:"_blank",rel:"noopener noreferrer",className:"mt-2 px-2 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors",onClick:a=>a.stopPropagation(),children:"View PDF"})]}):(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("svg",{className:"h-10 w-10 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,b.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),(0,b.jsx)("div",{className:"mt-2"})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col h-full",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Broker License"}),(0,b.jsxs)("div",{className:`border-2 border-dashed rounded-lg p-4 text-center transition-colors flex-1 flex flex-col justify-center ${aw?"border-gray-300 hover:border-blue-400":"border-gray-200 bg-gray-50 opacity-70 cursor-not-allowed"}`,children:[(0,b.jsx)("input",{type:"file",name:"brokerLicenseFile",onChange:av,accept:".pdf,.jpg,.jpeg,.png",className:"hidden",id:"broker-license-upload",disabled:!aw}),(0,b.jsxs)("label",{htmlFor:"broker-license-upload",className:`cursor-pointer ${!aw?"pointer-events-none":""}`,children:[(0,b.jsx)("div",{className:"relative mx-auto w-full max-w-[380px] rounded-md bg-white",style:{aspectRatio:"85/54"},children:l(y.brokerLicenseFile)&&n(y.brokerLicenseFile)?(0,b.jsxs)("div",{className:"absolute inset-0",children:[(0,b.jsx)("img",{src:n(y.brokerLicenseFile),alt:"License Preview",className:"w-full h-full object-contain"}),(0,b.jsx)("a",{href:n(y.brokerLicenseFile),target:"_blank",rel:"noopener noreferrer",className:"absolute top-2 right-2 px-2 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors shadow-lg",onClick:a=>a.stopPropagation(),children:"View"})]}):m(y.brokerLicenseFile)&&o(y.brokerLicenseFile)?(0,b.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-50 border-2 border-red-200 rounded-md p-2",children:[(0,b.jsx)("svg",{className:"h-10 w-10 text-red-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,b.jsx)("span",{className:"text-xs font-medium text-red-700 text-center",children:"PDF Document"}),(0,b.jsx)("div",{className:"text-xs text-red-600 mt-1 text-center truncate w-full px-1",title:y.brokerLicenseFile?.name||"PDF File",children:y.brokerLicenseFile?.name||"PDF File"}),(0,b.jsx)("a",{href:o(y.brokerLicenseFile),target:"_blank",rel:"noopener noreferrer",className:"mt-2 px-2 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors",onClick:a=>a.stopPropagation(),children:"View PDF"})]}):(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("svg",{className:"h-10 w-10 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,b.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),(0,b.jsx)("div",{className:"mt-2"})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col h-full",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Company Identification Details"}),(0,b.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-400 transition-colors flex-1 flex flex-col justify-center",children:[(0,b.jsx)("input",{type:"file",name:"companyIdFile",onChange:av,accept:".pdf,.jpg,.jpeg,.png",className:"hidden",id:"company-id-upload"}),(0,b.jsxs)("label",{htmlFor:"company-id-upload",className:"cursor-pointer",children:[(0,b.jsx)("div",{className:"relative mx-auto w-full max-w-[380px] rounded-md bg-white",style:{aspectRatio:"85/54"},children:l(y.companyIdFile)&&n(y.companyIdFile)?(0,b.jsx)("img",{src:n(y.companyIdFile),alt:"Company ID Preview",className:"absolute inset-0 w-full h-full object-contain"}):m(y.companyIdFile)&&o(y.companyIdFile)?(0,b.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-50 border-2 border-red-200 rounded-md p-2",children:[(0,b.jsx)("svg",{className:"h-10 w-10 text-red-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,b.jsx)("span",{className:"text-xs font-medium text-red-700 text-center",children:"PDF Document"}),(0,b.jsx)("div",{className:"text-xs text-red-600 mt-1 text-center truncate w-full px-1",title:y.companyIdFile?.name||"PDF File",children:y.companyIdFile?.name||"PDF File"}),(0,b.jsx)("a",{href:o(y.companyIdFile),target:"_blank",rel:"noopener noreferrer",className:"mt-2 px-2 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors",onClick:a=>a.stopPropagation(),children:"View PDF"})]}):(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("svg",{className:"h-10 w-10 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,b.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),(0,b.jsx)("div",{className:"mt-2"})]})]})]})]})]}),!u&&(0,b.jsx)("div",{className:"mt-12 pt-8 border-t border-gray-100",children:(0,b.jsx)("div",{className:"max-w-3xl mx-auto",children:v<x?(0,b.jsx)("button",{type:"button",onClick:aB,disabled:ap||!aC(v),className:"w-full py-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl font-heading text-lg hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:ap?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Checking email..."]}):(0,b.jsxs)(b.Fragment,{children:["create"===s?`Continue to ${(a=>{switch(a){case 1:return"Personal Info";case 2:return"customer"===q?"Preferences":"Professional";case 3:return"broker"===q?"Regions":"Documents";case 4:return"Documents";default:return""}})(v+1)}`:"Update",(0,b.jsx)("svg",{className:"w-5 h-5 ml-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})}):(0,b.jsx)("button",{type:"button",onClick:async b=>{b.preventDefault(),D(!0);let c="customer"===q?A:y;if("broker"===q&&(!Array.isArray(c.regions)||0===c.regions.length)){e.default.error("Please select at least one region."),D(!1);return}try{if(!a?.token){e.default.error("No authentication token found. Please login again."),D(!1);return}let b=new FormData;b.append("phone",c.phone),b.append("name",c.name),b.append("email",c.email),"customer"===q?(b.append("customerDetails[preferences][budgetMin]",c.budgetMin?Number(c.budgetMin):""),b.append("customerDetails[preferences][budgetMax]",c.budgetMax?Number(c.budgetMax):""),c.propertyType.forEach((a,c)=>{b.append(`customerDetails[preferences][propertyType][${c}]`,a)}),b.append("customerDetails[gender]",c.gender||""),b.append("customerDetails[inquiryCount]",c.inquiryCount||0),c.customerImage&&(c.customerImage instanceof File?b.append("customerImage",c.customerImage):c.customerImage)):(b.append("brokerDetails[firmName]",c.firmName||""),b.append("brokerDetails[licenseNumber]",c.licenseNumber||""),b.append("brokerDetails[address]",c.officeAddress||c.address||""),b.append("brokerDetails[state]",c.state||Array.isArray(c.regions)&&c.regions[0]?.state||""),b.append("brokerDetails[city]",c.city||Array.isArray(c.regions)&&c.regions[0]?.city||""),b.append("brokerDetails[gender]",c.gender||""),"string"==typeof c.about&&b.append("content",c.about),void 0!==c.experience&&null!==c.experience&&""!==String(c.experience)&&b.append("experienceYears",String(c.experience)),c.specializations&&c.specializations.length>0&&c.specializations.forEach((a,c)=>{b.append(`brokerDetails[specializations][${c}]`,a)}),c.linkedin&&b.append("brokerDetails[socialMedia][linkedin]",c.linkedin),c.twitter&&b.append("brokerDetails[socialMedia][twitter]",c.twitter),c.instagram&&b.append("brokerDetails[socialMedia][instagram]",c.instagram),c.facebook&&b.append("brokerDetails[socialMedia][facebook]",c.facebook),c.whatsapp&&b.append("brokerDetails[whatsappNumber]",c.whatsapp),c.website&&b.append("brokerDetails[website]",c.website),c.regions.forEach((a,c)=>{let d="object"==typeof a?a._id:a;b.append(`brokerDetails[region][${c}]`,d)}),c.aadharFile&&c.aadharFile instanceof File&&b.append("aadhar",c.aadharFile),c.panFile&&c.panFile instanceof File&&b.append("pan",c.panFile),c.gstFile&&c.gstFile instanceof File&&b.append("gst",c.gstFile),c.brokerLicenseFile&&c.brokerLicenseFile instanceof File&&b.append("brokerLicense",c.brokerLicenseFile),c.companyIdFile&&c.companyIdFile instanceof File&&b.append("companyId",c.companyIdFile),c.brokerImage&&c.brokerImage instanceof File&&b.append("brokerImage",c.brokerImage));let d=await fetch("https://broker-adda-be.algofolks.com/api/auth/complete-profile",{method:"POST",headers:{Authorization:`Bearer ${a.token}`},body:b});if(!d.ok){let a="Failed to update profile";try{let b=await d.json();a=b.error&&b.error.includes("E11000")?"This email address is already registered. Please use a different email.":b.error&&b.error.includes("validation")?"Please check your information and try again.":400===d.status?"Invalid information provided. Please check your details.":401===d.status?"Session expired. Please login again.":403===d.status?"You do not have permission to perform this action.":409===d.status?"This information is already in use. Please use different details.":d.status>=500?"Server error. Please try again later.":b.message||"Failed to update profile. Please try again."}catch(b){a=`Request failed with status ${d.status}. Please try again.`}throw Error(a)}await d.json(),e.default.success("Profile updated successfully!"),setTimeout(()=>{p.push("/profile?mode=view")},1500)}catch(a){e.default.error(a?.message||"Failed to update profile. Please try again.")}finally{D(!1)}},disabled:C||!aC(v),className:"w-full py-4 bg-gradient-to-r from-green-800 to-green-900 text-white rounded-xl font-heading text-lg hover:from-green-700 hover:to-green-900 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-green-100 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 cursor-pointer",children:C?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2 inline"}),"Saving Profile..."]}):(0,b.jsxs)(b.Fragment,{children:["create"===s?"Complete Profile":"Update Profile",(0,b.jsx)("svg",{className:"w-5 h-5 ml-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})]})})})})]})}),(0,b.jsxs)("aside",{className:"lg:col-span-3 space-y-5 lg:sticky lg:top-0 lg:-mt-30 self-start",children:[(0,b.jsx)("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-50 text-blue-600 flex items-center justify-center",children:(0,b.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,b.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})}),(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Create broker profile"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Finish basic details and choose your nearest region to get started."}),(0,b.jsx)("div",{className:"mt-3",children:(()=>{let a=Array.from({length:x},(a,b)=>b+1);return(0,b.jsx)("div",{className:"w-full",children:(0,b.jsx)("div",{className:"flex items-center px-2",children:a.map((d,f)=>{let g=d===v,h=d<v;return(0,b.jsxs)(c.default.Fragment,{children:[(0,b.jsx)("button",{type:"button",onClick:()=>(a=>{if(a<=v)return void w(a);aC(v)?w(a):e.default.error("Please complete the required fields before continuing.")})(d),className:`w-7 h-7 rounded-full flex items-center justify-center text-[11px] font-bold ${h?"bg-green-700 text-white":g?"bg-blue-600 text-white ring-4 ring-blue-100":"bg-gray-400 text-white"} cursor-pointer`,children:d}),f<a.length-1&&(0,b.jsx)("div",{className:"flex-1 h-1 bg-gray-200 rounded-full mx-2"})]},d)})})})})()})]})]})}),(0,b.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Profile summary"}),(0,b.jsxs)("div",{className:"space-y-2 text-sm text-gray-700",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Status"}),(0,b.jsx)("span",{className:"font-medium",children:"customer"===q?A?.name?"In progress":"New":y?.name?"In progress":"New"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Name"}),(0,b.jsx)("span",{className:"font-medium truncate max-w-[140px]",children:"customer"===q?A?.name||"â€”":y?.name||"â€”"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Email"}),(0,b.jsx)("span",{className:"font-medium truncate max-w-[140px]",children:"customer"===q?A?.email||"â€”":y?.email||"â€”"})]})]})]}),(0,b.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Nearest regions"}),(0,b.jsx)("button",{type:"button",className:"text-xs text-blue-700 hover:underline",onClick:()=>L?.(!0),children:"Use nearest"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(Array.isArray(O)?O.slice(0,3):[]).map(a=>{let c=a._id||a.id,d=a.name||a.region||"Region",e="number"==typeof a.distanceKm?a.distanceKm:null,f=null!==e?`${e>=10?Math.round(e):Math.round(10*e)/10} km`:"";return(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("div",{className:"truncate max-w-[160px] text-gray-700",children:d}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:f})]},c||d)}),(!O||0===O.length)&&(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Turn on location to fetch nearby regions."})]})]}),(0,b.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Tips"}),(0,b.jsxs)("ul",{className:"text-sm text-gray-600 list-disc pl-5 space-y-2",children:[(0,b.jsx)("li",{children:"Fill personal info first, then regions."}),(0,b.jsx)("li",{children:"Use nearest regions for quick setup."}),(0,b.jsx)("li",{children:"Keep KYC under 10MB per file."})]})]})]})]})]})})]})};function q(){return(0,b.jsx)(c.Suspense,{fallback:null,children:(0,b.jsx)(p,{})})}}];

//# sourceMappingURL=src_app_profile_page_jsx_b6edf777._.js.map